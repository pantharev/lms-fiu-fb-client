(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"13Ib":function(t,e,n){"use strict";n.r(e);var r=n("ofXK"),s=n("3Pt+"),c=n("1kSV"),i=n("tyNb"),a=n("fXoL"),o=n("Un6b"),b=n("y8gV"),d=n("ZY/4");function u(t,e){if(1&t&&(a.Ub(0,"th",13),a.Ic(1),a.Tb()),2&t){const t=e.$implicit;a.Cb(1),a.Jc(t)}}function l(t,e){if(1&t&&(a.Ub(0,"span",24),a.Ic(1),a.Tb()),2&t){const t=a.ic().index,e=a.ic();a.Cb(1),a.Jc(e.students[t])}}function g(t,e){if(1&t){const t=a.Vb();a.Ub(0,"tr",14),a.Ub(1,"th",15),a.Ic(2),a.Tb(),a.Ub(3,"td",16),a.Ic(4),a.Tb(),a.Ub(5,"td",17),a.Ic(6),a.Tb(),a.Ub(7,"td"),a.Ic(8),a.Tb(),a.Ub(9,"td"),a.Ic(10),a.Tb(),a.Ub(11,"td"),a.Ic(12),a.Tb(),a.Ub(13,"td"),a.Ub(14,"button",18),a.gc("click",(function(){a.yc(t);const n=e.$implicit;return a.ic().editCourse(n.id)})),a.Qb(15,"i",19),a.Ic(16," Edit"),a.Tb(),a.Ub(17,"button",20),a.gc("click",(function(){a.yc(t);const n=e.$implicit;return a.ic().deleteCourse(n.id)})),a.Qb(18,"i",21),a.Ic(19," Delete"),a.Tb(),a.Ub(20,"button",22),a.gc("click",(function(){a.yc(t);const n=e.$implicit;return a.ic().pendingEnrollment(n.id)})),a.Gc(21,l,2,1,"span",23),a.Ic(22," Pending Enrollments"),a.Tb(),a.Tb(),a.Tb()}if(2&t){const t=e.$implicit,n=e.index,r=a.ic();a.Cb(2),a.Jc(t.id),a.Cb(2),a.Jc(t.name),a.Cb(2),a.Jc(t.description),a.Cb(2),a.Jc(t.seats),a.Cb(2),a.Jc(t.start_date),a.Cb(2),a.Jc(t.end_date),a.Cb(9),a.oc("ngIf",r.students[n]>0)}}function f(t,e){if(1&t){const t=a.Vb();a.Sb(0),a.Ub(1,"li",25),a.Ub(2,"button",26),a.gc("click",(function(){a.yc(t);const e=a.ic();return e.fetchPageCourses(e.page-1)})),a.Ic(3,"Previous"),a.Tb(),a.Tb(),a.Rb()}}function m(t,e){if(1&t){const t=a.Vb();a.Ub(0,"li",27),a.Ub(1,"button",26),a.gc("click",(function(){a.yc(t);const e=a.ic();return e.fetchPageCourses(e.page-1)})),a.Ic(2,"Previous"),a.Tb(),a.Tb()}}function p(t,e){if(1&t){const t=a.Vb();a.Sb(0),a.Ub(1,"li",27),a.Ub(2,"button",26),a.gc("click",(function(){a.yc(t);const n=e.index;return a.ic().fetchPageCourses(n)})),a.Ic(3),a.Tb(),a.Tb(),a.Rb()}if(2&t){const t=e.index;a.Cb(3),a.Jc(t)}}function h(t,e){if(1&t){const t=a.Vb();a.Sb(0),a.Ub(1,"li",25),a.Ub(2,"button",26),a.gc("click",(function(){a.yc(t);const e=a.ic();return e.fetchPageCourses(e.page+1)})),a.Ic(3,"Next"),a.Tb(),a.Tb(),a.Rb()}}function v(t,e){if(1&t){const t=a.Vb();a.Ub(0,"li",27),a.Ub(1,"button",26),a.gc("click",(function(){a.yc(t);const e=a.ic();return e.fetchPageCourses(e.page+1)})),a.Ic(2,"Next"),a.Tb(),a.Tb()}}let U=(()=>{class t{constructor(t,e,n,r,s){this.courseService=t,this.router=e,this.route=n,this.authenticationService=r,this.studentCourseService=s,this.courses={},this.displayedColumns=["id","name","description","seats","start_date","end_date","Actions"],this.page=0,this.pages=[],this.students=[],this.numberPerPage=5,this.authenticationService.currentUser.subscribe(t=>this.currentUser=t)}ngOnInit(){let t=this.route.snapshot.paramMap.get("page")||this.page;this.fetchCourses(t),console.log(this.currentUser),this.isAdmin="admin"==JSON.parse(localStorage.getItem("FB_user")).role}pendingEnrollmentsNotification(t){t.forEach((t,e,n)=>{let r=new Date(t.start_date.toString()),s=new Date(t.end_date.toString());t.start_date=r.toLocaleDateString(),t.end_date=s.toLocaleDateString(),t.seats<1||(this.students[e]=0,this.studentCourseService.getStudentsByCourseId(t.id).subscribe(n=>{n.forEach(t=>{"pending"==t.enrollment_status&&this.students[e]++}),console.log(t.name+" pending students: "+this.students[e])}))})}fetchCourses(t){this.courseService.getCourses(t,this.numberPerPage).subscribe(e=>{this.courses=e,this.page=t,this.currentPage=this.courses.pagination.current,this.maxPages=this.courses.pagination.maxPages,this.maxPagesArray=new Array(this.maxPages),this.pages=Object.values(this.courses.pagination),console.log("Data requested..."),this.pendingEnrollmentsNotification(this.courses.res),this.router.navigate(["/admin",{page:t}])})}fetchPageCourses(t){t<0||this.courseService.getCourses(t,this.numberPerPage).subscribe((e={})=>{this.courses=e,this.page=t,this.currentPage=this.courses.pagination.current,this.maxPages=this.courses.pagination.maxPages,this.pendingEnrollmentsNotification(this.courses.res),console.log("Data requested..."+t),this.router.navigate(["/admin",{page:this.courses.pagination.current}])})}editCourse(t){this.router.navigate([`admin/edit-course/${t}`])}deleteCourse(t){if(1==confirm(`Delete Course ${t}: Are you sure?`)){this.courseService.deleteCourse(t).subscribe(()=>{});const e=this.courses.res.find(e=>e.id===t);this.courses.res.splice(this.courses.res.indexOf(e))}}pendingEnrollment(t){this.router.navigate([`admin/pending-enrollment/${t}`])}}return t.\u0275fac=function(e){return new(e||t)(a.Pb(o.a),a.Pb(i.c),a.Pb(i.a),a.Pb(b.a),a.Pb(d.a))},t.\u0275cmp=a.Jb({type:t,selectors:[["app-dashboard"]],decls:24,vars:7,consts:[[1,"center-form"],[1,"nav","flex-column","col-sm-1"],["routerLink","/admin/create-course","routerLinkActive","active",1,"nav-link","btn","btn-success"],[1,"fas","fa-plus-circle"],[1,"table"],["scope","col",4,"ngFor","ngForOf"],["class","trstyle",4,"ngFor","ngForOf"],["aria-label","Page navigation course-library"],[1,"pagination"],[4,"ngIf","ngIfElse"],["elseBlock",""],[4,"ngFor","ngForOf"],["elseBlock2",""],["scope","col"],[1,"trstyle"],["scope","row"],[2,"max-width","125px","word-wrap","break-word"],[2,"max-width","200px","word-wrap","break-word"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-edit"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fas","fa-minus-circle"],["type","button",1,"btn","btn-warning",2,"margin-left","20px",3,"click"],["class","badge badge-light",4,"ngIf"],[1,"badge","badge-light"],[1,"page-item","disabled"],[1,"page-link",3,"click"],[1,"page-item"]],template:function(t,e){if(1&t&&(a.Ub(0,"h2",0),a.Ic(1,"Admin Dashboard"),a.Tb(),a.Ub(2,"div",0),a.Ub(3,"h2"),a.Ic(4,"Courses"),a.Tb(),a.Ub(5,"nav",1),a.Ub(6,"a",2),a.Qb(7,"i",3),a.Ic(8," Create New Course"),a.Tb(),a.Tb(),a.Ub(9,"table",4),a.Ub(10,"thead"),a.Ub(11,"tr"),a.Gc(12,u,2,1,"th",5),a.Tb(),a.Tb(),a.Ub(13,"tbody"),a.Gc(14,g,23,7,"tr",6),a.Tb(),a.Tb(),a.Ub(15,"nav",7),a.Ub(16,"ul",8),a.Gc(17,f,4,0,"ng-container",9),a.Gc(18,m,3,0,"ng-template",null,10,a.Hc),a.Gc(20,p,4,1,"ng-container",11),a.Gc(21,h,4,0,"ng-container",9),a.Gc(22,v,3,0,"ng-template",null,12,a.Hc),a.Tb(),a.Tb(),a.Tb()),2&t){const t=a.wc(19),n=a.wc(23);a.Cb(12),a.oc("ngForOf",e.displayedColumns),a.Cb(2),a.oc("ngForOf",e.courses.res),a.Cb(3),a.oc("ngIf",0==e.page)("ngIfElse",t),a.Cb(3),a.oc("ngForOf",e.maxPagesArray),a.Cb(1),a.oc("ngIf",e.page==e.maxPages-1)("ngIfElse",n)}},directives:[i.f,i.e,r.m,r.n],styles:[""]}),t})();var C=n("rptU");function T(t,e){1&t&&(a.Ub(0,"div"),a.Ic(1,"Name is required"),a.Tb())}function S(t,e){if(1&t&&(a.Ub(0,"div",28),a.Gc(1,T,2,0,"div",29),a.Tb()),2&t){const t=a.ic();a.Cb(1),a.oc("ngIf",t.c.name.errors.required)}}function I(t,e){1&t&&(a.Ub(0,"div"),a.Ic(1,"Description is required"),a.Tb())}function y(t,e){if(1&t&&(a.Ub(0,"div",28),a.Gc(1,I,2,0,"div",29),a.Tb()),2&t){const t=a.ic();a.Cb(1),a.oc("ngIf",t.c.description.errors.required)}}function D(t,e){1&t&&(a.Ub(0,"div"),a.Ic(1,"Seats is required"),a.Tb())}function k(t,e){if(1&t&&(a.Ub(0,"div",28),a.Gc(1,D,2,0,"div",29),a.Tb()),2&t){const t=a.ic();a.Cb(1),a.oc("ngIf",t.c.seats.errors.required)}}function w(t,e){1&t&&(a.Ub(0,"div"),a.Ic(1,"Start Date is required"),a.Tb())}function _(t,e){if(1&t&&(a.Ub(0,"div",28),a.Gc(1,w,2,0,"div",29),a.Tb()),2&t){const t=a.ic();a.Cb(1),a.oc("ngIf",t.c.start_date.errors.required)}}function P(t,e){1&t&&(a.Ub(0,"div"),a.Ic(1,"End Date is required"),a.Tb())}function q(t,e){if(1&t&&(a.Ub(0,"div",28),a.Gc(1,P,2,0,"div",29),a.Tb()),2&t){const t=a.ic();a.Cb(1),a.oc("ngIf",t.c.end_date.errors.required)}}const E=function(t){return{"is-invalid":t}};function G(t,e){1&t&&(a.Ub(0,"div"),a.Ic(1,"Name is required"),a.Tb())}function F(t,e){if(1&t&&(a.Ub(0,"div",27),a.Gc(1,G,2,0,"div",28),a.Tb()),2&t){const t=a.ic();a.Cb(1),a.oc("ngIf",t.cu.name.errors.required)}}function x(t,e){1&t&&(a.Ub(0,"div"),a.Ic(1,"Description is required"),a.Tb())}function N(t,e){if(1&t&&(a.Ub(0,"div",27),a.Gc(1,x,2,0,"div",28),a.Tb()),2&t){const t=a.ic();a.Cb(1),a.oc("ngIf",t.cu.description.errors.required)}}function J(t,e){1&t&&(a.Ub(0,"div"),a.Ic(1,"Seats is required"),a.Tb())}function O(t,e){if(1&t&&(a.Ub(0,"div",27),a.Gc(1,J,2,0,"div",28),a.Tb()),2&t){const t=a.ic();a.Cb(1),a.oc("ngIf",t.cu.seats.errors.required)}}function A(t,e){1&t&&(a.Ub(0,"div"),a.Ic(1,"Start Date is required"),a.Tb())}function Q(t,e){if(1&t&&(a.Ub(0,"div",27),a.Gc(1,A,2,0,"div",28),a.Tb()),2&t){const t=a.ic();a.Cb(1),a.oc("ngIf",t.cu.start_date.errors.required)}}function V(t,e){1&t&&(a.Ub(0,"div"),a.Ic(1,"End Date is required"),a.Tb())}function $(t,e){if(1&t&&(a.Ub(0,"div",27),a.Gc(1,V,2,0,"div",28),a.Tb()),2&t){const t=a.ic();a.Cb(1),a.oc("ngIf",t.cu.end_date.errors.required)}}const j=function(t){return{"is-invalid":t}};function B(t,e){if(1&t&&(a.Ub(0,"h2"),a.Ic(1),a.Ub(2,"span",5),a.Ic(3),a.Tb(),a.Tb()),2&t){const t=a.ic();a.Cb(1),a.Kc("",t.course.name," "),a.Cb(2),a.Kc("Seats: ",t.course.seats,"")}}function L(t,e){if(1&t){const t=a.Vb();a.Sb(0),a.Ub(1,"th",9),a.Ic(2),a.Tb(),a.Ub(3,"td"),a.Ic(4),a.Tb(),a.Ub(5,"td"),a.Ic(6),a.Tb(),a.Ub(7,"td"),a.Ic(8),a.Tb(),a.Ub(9,"td"),a.Ub(10,"button",10),a.gc("click",(function(){a.yc(t);const e=a.ic().$implicit;return a.ic(2).acceptEnrollment(e.student_id,e.course_id,"enrolled")})),a.Ic(11,"Accept"),a.Tb(),a.Ub(12,"button",11),a.gc("click",(function(){a.yc(t);const e=a.ic().$implicit;return a.ic(2).declineEnrollment(e.student_id,e.course_id)})),a.Ic(13,"Decline"),a.Tb(),a.Tb(),a.Rb()}if(2&t){const t=a.ic().$implicit;a.Cb(2),a.Jc(t.student_id),a.Cb(2),a.Jc(t.email),a.Cb(2),a.Jc(t.f_name),a.Cb(2),a.Jc(t.l_name)}}function M(t,e){if(1&t&&(a.Ub(0,"tr"),a.Gc(1,L,14,4,"ng-container",0),a.Tb()),2&t){const t=e.$implicit;a.Cb(1),a.oc("ngIf","pending"==t.enrollment_status)}}function R(t,e){if(1&t&&(a.Ub(0,"table",6),a.Ub(1,"thead"),a.Ub(2,"tr"),a.Ub(3,"th",7),a.Ic(4,"studentID"),a.Tb(),a.Ub(5,"th",7),a.Ic(6,"email"),a.Tb(),a.Ub(7,"th",7),a.Ic(8,"First Name"),a.Tb(),a.Ub(9,"th",7),a.Ic(10,"Last Name"),a.Tb(),a.Ub(11,"th",7),a.Ic(12,"Enroll"),a.Tb(),a.Tb(),a.Tb(),a.Ub(13,"tbody"),a.Gc(14,M,2,1,"tr",8),a.Tb(),a.Tb()),2&t){const t=a.ic();a.Cb(14),a.oc("ngForOf",t.students)}}function Y(t,e){1&t&&(a.Ub(0,"h2",12),a.Ic(1,"No seats available!"),a.Tb())}const K=[{path:"",component:U,canActivate:[b.a],data:{expectedRole:"admin"}},{path:"create-course",component:(()=>{class t{constructor(t,e,n,r){this.courseService=t,this.courseDetailsService=e,this.fb=n,this.router=r,this.labels=["name","description","seats","start_date","end_date"],this.submitted=!1,this.todayDate=null,this.startDateEvent=null,this.endDateEvent=null,this.startDateSelected=!1,this.endDateSelected=!1,this.courseForm=this.fb.group({name:["",s.o.required],description:["",s.o.required],seats:["",s.o.required],start_date:["",s.o.required],end_date:["",s.o.required]})}get c(){return this.courseForm.controls}ngOnInit(){let t=new Date,e=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();this.todayDate=new Promise((t,s)=>{t(n+"/"+e+"/"+r)})}addCourse(t,e,n,r,s){this.submitted=!0,r=this.formatDate(r),console.log("going to submit start_date: "+r),s=this.formatDate(s),console.log("going to submit end_date: "+s),this.courseForm.valid&&this.courseService.addCourse(t,e,n,r,s).subscribe(t=>{this.courseDetailsService.createCourseDetails(t.id,"<p>Recommended inputs: Course Name, Instructor Name, Office (location/hours), Phone number, and email.</p>").subscribe(()=>{console.log("course details created")}),this.router.navigate(["/admin"])})}onStartDateSelect(t){console.log("startDateSelected"),this.startDateEvent=new Promise((e,n)=>{e(String(t.month).padStart(2,"0")+"/"+String(t.day).padStart(2,"0")+"/"+t.year)}),this.startDateSelected=!0}onEndDateSelect(t){console.log("endDateSelected"),this.endDateEvent=new Promise((e,n)=>{e(String(t.month).padStart(2,"0")+"/"+String(t.day).padStart(2,"0")+"/"+t.year)}),this.endDateSelected=!0}formatDate(t){let e=new Date(t),n=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0");return e.getFullYear()+"-"+r+"-"+n}}return t.\u0275fac=function(e){return new(e||t)(a.Pb(o.a),a.Pb(C.a),a.Pb(s.b),a.Pb(i.c))},t.\u0275cmp=a.Jb({type:t,selectors:[["app-create-course"]],decls:62,vars:31,consts:[[1,"center-form"],[1,"col-sm-4",3,"formGroup"],[1,"form-group"],["for","name"],[2,"color","red"],["type","text","formControlName","name","required","",1,"form-control",3,"ngClass"],["name",""],["class","invalid-feedback",4,"ngIf"],["for","description"],["formControlName","description","required","",1,"form-control",3,"ngClass"],["description",""],["for","seats"],["type","text","formControlName","seats","required","",1,"form-control",3,"ngClass"],["seats",""],["for","start_date"],[1,"input-group"],["name","dp","ngbDatepicker","","formControlName","start_date","readonly","","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d","ngbDatepicker","start_date",""],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","far","fa-calendar-alt",3,"click"],["data-provide","datepicker",1,"form-group"],["for","end_date"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","formControlName","end_date","readonly","","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d2","ngbDatepicker","end_date",""],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],["routerLink","/admin",1,"btn","btn-warning"],[1,"fas","fa-arrow-circle-left"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,e){if(1&t){const t=a.Vb();a.Ub(0,"div",0),a.Ub(1,"h2"),a.Ic(2,"Create New Course"),a.Tb(),a.Ub(3,"form",1),a.Ub(4,"div",2),a.Ub(5,"label",3),a.Ub(6,"span",4),a.Ic(7,"*"),a.Tb(),a.Ic(8,"Name"),a.Tb(),a.Qb(9,"input",5,6),a.Gc(11,S,2,1,"div",7),a.Tb(),a.Ub(12,"div",2),a.Ub(13,"label",8),a.Ub(14,"span",4),a.Ic(15,"*"),a.Tb(),a.Ic(16,"Description"),a.Tb(),a.Qb(17,"textarea",9,10),a.Gc(19,y,2,1,"div",7),a.Tb(),a.Ub(20,"div",2),a.Ub(21,"label",11),a.Ub(22,"span",4),a.Ic(23,"*"),a.Tb(),a.Ic(24,"Number of Seats"),a.Tb(),a.Qb(25,"input",12,13),a.Gc(27,k,2,1,"div",7),a.Tb(),a.Ub(28,"div",2),a.Ub(29,"label",14),a.Ub(30,"span",4),a.Ic(31,"*"),a.Tb(),a.Ic(32,"Start Date"),a.Tb(),a.Ub(33,"div",15),a.Ub(34,"input",16,17),a.gc("dateSelect",(function(t){return e.onStartDateSelect(t)})),a.jc(37,"async"),a.jc(38,"async"),a.Tb(),a.Ub(39,"div",18),a.Ub(40,"button",19),a.gc("click",(function(){return a.yc(t),a.wc(35).toggle()})),a.Tb(),a.Tb(),a.Gc(41,_,2,1,"div",7),a.Tb(),a.Tb(),a.Ub(42,"div",20),a.Ub(43,"label",21),a.Ub(44,"span",4),a.Ic(45,"*"),a.Tb(),a.Ic(46,"End Date"),a.Tb(),a.Ub(47,"div",15),a.Ub(48,"input",22,23),a.gc("dateSelect",(function(t){return e.onEndDateSelect(t)})),a.jc(51,"async"),a.jc(52,"async"),a.Tb(),a.Ub(53,"div",18),a.Ub(54,"button",19),a.gc("click",(function(){return a.yc(t),a.wc(49).toggle()})),a.Tb(),a.Tb(),a.Gc(55,q,2,1,"div",7),a.Tb(),a.Tb(),a.Ub(56,"button",24),a.gc("click",(function(){a.yc(t);const n=a.wc(10),r=a.wc(18),s=a.wc(26),c=a.wc(36),i=a.wc(50);return e.addCourse(n.value,r.value,s.value,c.value,i.value)})),a.Qb(57,"i",25),a.Ic(58," Create Course"),a.Tb(),a.Ub(59,"a",26),a.Qb(60,"i",27),a.Ic(61," Go Back"),a.Tb(),a.Tb(),a.Tb()}2&t&&(a.Cb(3),a.oc("formGroup",e.courseForm),a.Cb(6),a.oc("ngClass",a.sc(21,E,e.submitted&&e.c.name.errors)),a.Cb(2),a.oc("ngIf",e.submitted&&e.c.name.errors),a.Cb(6),a.oc("ngClass",a.sc(23,E,e.submitted&&e.c.description.errors)),a.Cb(2),a.oc("ngIf",e.submitted&&e.c.description.errors),a.Cb(6),a.oc("ngClass",a.sc(25,E,e.submitted&&e.c.seats.errors)),a.Cb(2),a.oc("ngIf",e.submitted&&e.c.seats.errors),a.Cb(7),a.oc("value",e.startDateSelected?a.kc(37,13,e.startDateEvent):a.kc(38,15,e.todayDate))("ngClass",a.sc(27,E,e.submitted&&e.c.start_date.errors)),a.Cb(7),a.oc("ngIf",e.submitted&&e.c.start_date.errors),a.Cb(7),a.oc("value",e.endDateSelected?a.kc(51,17,e.endDateEvent):a.kc(52,19,e.todayDate))("ngClass",a.sc(29,E,e.submitted&&e.c.end_date.errors)),a.Cb(7),a.oc("ngIf",e.submitted&&e.c.end_date.errors))},directives:[s.q,s.j,s.d,s.a,s.i,s.c,s.n,r.l,r.n,c.a,i.f],pipes:[r.b],styles:[""]}),t})(),canActivate:[b.a],data:{expectedRole:"admin"}},{path:"edit-course/:id",component:(()=>{class t{constructor(t,e,n,r){this.courseService=t,this.router=e,this.route=n,this.fb=r,this.submitted=!1,this.startDate=null,this.startDateSelected=!1,this.startDateEvent=null,this.endDate=null,this.endDateSelected=!1,this.endDateEvent=null,this.CreateForm()}CreateForm(){this.updateForm=this.fb.group({name:["",s.o.required],description:["",s.o.required],seats:["",s.o.required],start_date:["",s.o.required],end_date:["",s.o.required]})}get cu(){return this.updateForm.controls}ngOnInit(){this.route.params.subscribe(t=>{this.id=t.id,this.courseService.getCourseById(this.id).subscribe(t=>{this.course=t,this.hDateFormat(this.course),this.updateForm.get("name").setValue(this.course.name),this.updateForm.get("description").setValue(this.course.description),this.updateForm.get("seats").setValue(this.course.seats);let e=new Date(this.course.start_date.toString()),n=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),s=e.getFullYear();this.startDate=new Promise((t,e)=>{t(r+"/"+n+"/"+s)}),e=new Date(this.course.end_date.toString()),n=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),s=e.getFullYear(),this.endDate=new Promise((t,e)=>{t(r+"/"+n+"/"+s)})})})}updateCourse(t,e,n,r,s){this.submitted=!0,r=this.formatDate(r),console.log("going to submit start_date: "+r),s=this.formatDate(s),console.log("going to submit end_date: "+s),this.updateForm.valid&&this.courseService.updateCourse(this.id,t,e,n,r,s).subscribe(t=>{this.router.navigate(["/admin"])})}hDateFormat(t){let e=new Date(t.start_date.toString()),n=new Date(t.end_date.toString());t.start_date=e.toLocaleDateString(),t.end_date=n.toLocaleDateString()}formatDate(t){let e=new Date(t),n=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0");return e.getFullYear()+"-"+r+"-"+n}onStartDateSelect(t){this.startDateSelected=!0,this.startDateEvent=new Promise((e,n)=>{e(String(t.month).padStart(2,"0")+"/"+String(t.day).padStart(2,"0")+"/"+t.year)})}onEndDateSelect(t){this.endDateSelected=!0,this.endDateEvent=new Promise((e,n)=>{e(String(t.month).padStart(2,"0")+"/"+String(t.day).padStart(2,"0")+"/"+t.year)})}}return t.\u0275fac=function(e){return new(e||t)(a.Pb(o.a),a.Pb(i.c),a.Pb(i.a),a.Pb(s.b))},t.\u0275cmp=a.Jb({type:t,selectors:[["app-edit-course"]],decls:62,vars:32,consts:[[1,"center-form"],[1,"col-sm-4",3,"formGroup"],[1,"form-group"],["for","name"],[2,"color","red"],["type","text","formControlName","name","required","",1,"form-control",3,"ngClass"],["name",""],["class","invalid-feedback",4,"ngIf"],["for","description"],["formControlName","description","required","",1,"form-control",3,"ngClass"],["description",""],["for","seats"],["type","text","formControlName","seats","required","",1,"form-control",3,"ngClass"],["seats",""],["for","start_date"],[1,"input-group"],["type","text","placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","formControlName","start_date","readonly","","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d","ngbDatepicker","start_date",""],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","far","fa-calendar-alt",3,"click"],["for","end_date"],["type","text","placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","formControlName","end_date","readonly","","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d2","ngbDatepicker","end_date",""],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],["routerLink","/admin",1,"btn","btn-warning"],[1,"fas","fa-arrow-circle-left"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,e){if(1&t){const t=a.Vb();a.Ub(0,"div",0),a.Ub(1,"h2"),a.Ic(2),a.Tb(),a.Ub(3,"form",1),a.Ub(4,"div",2),a.Ub(5,"label",3),a.Ub(6,"span",4),a.Ic(7,"*"),a.Tb(),a.Ic(8,"Name"),a.Tb(),a.Qb(9,"input",5,6),a.Gc(11,F,2,1,"div",7),a.Tb(),a.Ub(12,"div",2),a.Ub(13,"label",8),a.Ub(14,"span",4),a.Ic(15,"*"),a.Tb(),a.Ic(16,"Description"),a.Tb(),a.Qb(17,"textarea",9,10),a.Gc(19,N,2,1,"div",7),a.Tb(),a.Ub(20,"div",2),a.Ub(21,"label",11),a.Ub(22,"span",4),a.Ic(23,"*"),a.Tb(),a.Ic(24,"Number of Seats"),a.Tb(),a.Qb(25,"input",12,13),a.Gc(27,O,2,1,"div",7),a.Tb(),a.Ub(28,"div",2),a.Ub(29,"label",14),a.Ub(30,"span",4),a.Ic(31,"*"),a.Tb(),a.Ic(32,"Start Date"),a.Tb(),a.Ub(33,"div",15),a.Ub(34,"input",16,17),a.gc("dateSelect",(function(t){return e.onStartDateSelect(t)})),a.jc(37,"async"),a.jc(38,"async"),a.Tb(),a.Ub(39,"div",18),a.Ub(40,"button",19),a.gc("click",(function(){return a.yc(t),a.wc(35).toggle()})),a.Tb(),a.Tb(),a.Gc(41,Q,2,1,"div",7),a.Tb(),a.Tb(),a.Ub(42,"div",2),a.Ub(43,"label",20),a.Ub(44,"span",4),a.Ic(45,"*"),a.Tb(),a.Ic(46,"End Date"),a.Tb(),a.Ub(47,"div",15),a.Ub(48,"input",21,22),a.gc("dateSelect",(function(t){return e.onEndDateSelect(t)})),a.jc(51,"async"),a.jc(52,"async"),a.Tb(),a.Ub(53,"div",18),a.Ub(54,"button",19),a.gc("click",(function(){return a.yc(t),a.wc(49).toggle()})),a.Tb(),a.Tb(),a.Gc(55,$,2,1,"div",7),a.Tb(),a.Tb(),a.Ub(56,"button",23),a.gc("click",(function(){a.yc(t);const n=a.wc(10),r=a.wc(18),s=a.wc(26),c=a.wc(36),i=a.wc(50);return e.updateCourse(n.value,r.value,s.value,c.value,i.value)})),a.Qb(57,"i",24),a.Ic(58," Update Course"),a.Tb(),a.Ub(59,"a",25),a.Qb(60,"i",26),a.Ic(61," Go Back"),a.Tb(),a.Tb(),a.Tb()}2&t&&(a.Cb(2),a.Kc("Edit Course ",e.id,""),a.Cb(1),a.oc("formGroup",e.updateForm),a.Cb(6),a.oc("ngClass",a.sc(22,j,e.submitted&&e.cu.name.errors)),a.Cb(2),a.oc("ngIf",e.submitted&&e.cu.name.errors),a.Cb(6),a.oc("ngClass",a.sc(24,j,e.submitted&&e.cu.description.errors)),a.Cb(2),a.oc("ngIf",e.submitted&&e.cu.description.errors),a.Cb(6),a.oc("ngClass",a.sc(26,j,e.submitted&&e.cu.seats.errors)),a.Cb(2),a.oc("ngIf",e.submitted&&e.cu.seats.errors),a.Cb(7),a.oc("value",e.startDateSelected?a.kc(37,14,e.startDateEvent):a.kc(38,16,e.startDate))("ngClass",a.sc(28,j,e.submitted&&e.cu.start_date.errors)),a.Cb(7),a.oc("ngIf",e.submitted&&e.cu.start_date.errors),a.Cb(7),a.oc("value",e.endDateSelected?a.kc(51,18,e.endDateEvent):a.kc(52,20,e.endDate))("ngClass",a.sc(30,j,e.submitted&&e.cu.end_date.errors)),a.Cb(7),a.oc("ngIf",e.submitted&&e.cu.end_date.errors))},directives:[s.q,s.j,s.d,s.a,s.i,s.c,s.n,r.l,r.n,c.a,i.f],pipes:[r.b],styles:[""]}),t})(),canActivate:[b.a],data:{expectedRole:"admin"}},{path:"pending-enrollment/:id",component:(()=>{class t{constructor(t,e,n){this.studentCourseService=t,this.courseService=e,this.route=n,this.students=[],this.noSeats=!1}ngOnInit(){this.route.params.subscribe(t=>{this.id=t.id,this.courseService.getCourseById(this.id).subscribe(t=>{this.course=t,this.course.seats<1&&(this.noSeats=!0,console.log("no seats: "+this.noSeats)),console.log(this.course),this.noSeats||this.studentCourseService.getStudentsByCourseId(this.id).subscribe(t=>{this.students=t,console.log(this.students)})})})}acceptEnrollment(t,e,n){1==confirm(`Accept student ${t} enrollment?`)&&this.studentCourseService.acceptStudentEnrollment(t,e,n).subscribe(n=>{for(var r=0;r<this.students.length;r++)this.students[r].student_id===t&&this.students.splice(r,1);this.courseService.updateCourseSeats(e,this.course.seats-1).subscribe(()=>{console.log("seats decremented by 1"),this.course.seats=this.course.seats-1})})}declineEnrollment(t,e){1==confirm(`Decline student ${t} enrollment?`)&&this.studentCourseService.declineStudentEnrollment(t,e).subscribe(e=>{for(var n=0;n<this.students.length;n++)this.students[n].student_id===t&&this.students.splice(n,1)})}}return t.\u0275fac=function(e){return new(e||t)(a.Pb(d.a),a.Pb(o.a),a.Pb(i.a))},t.\u0275cmp=a.Jb({type:t,selectors:[["app-pending-enrollment"]],decls:7,vars:3,consts:[[4,"ngIf"],["class","table",4,"ngIf","ngIfElse"],["elseBlock",""],["routerLink","/admin",1,"btn","btn-warning"],[1,"fas","fa-arrow-circle-left"],[2,"float","right"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"center-form"]],template:function(t,e){if(1&t&&(a.Gc(0,B,4,2,"h2",0),a.Gc(1,R,15,1,"table",1),a.Gc(2,Y,2,0,"ng-template",null,2,a.Hc),a.Ub(4,"a",3),a.Qb(5,"i",4),a.Ic(6," Go Back"),a.Tb()),2&t){const t=a.wc(3);a.oc("ngIf",e.course),a.Cb(1),a.oc("ngIf",!e.noSeats)("ngIfElse",t)}},directives:[r.n,i.f,r.m],styles:[""]}),t})(),canActivate:[b.a],data:{expectedRole:"admin"}}];let H=(()=>{class t{}return t.\u0275mod=a.Nb({type:t}),t.\u0275inj=a.Mb({factory:function(e){return new(e||t)},imports:[[i.g.forChild(K)],i.g]}),t})();n.d(e,"AdminModule",(function(){return X}));let X=(()=>{class t{}return t.\u0275mod=a.Nb({type:t}),t.\u0275inj=a.Mb({factory:function(e){return new(e||t)},imports:[[r.c,H,s.m,c.c]]}),t})()}}]);