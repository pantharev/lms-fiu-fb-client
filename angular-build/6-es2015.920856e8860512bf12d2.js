(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"13Ib":function(t,e,n){"use strict";n.r(e);var r=n("ofXK"),s=n("3Pt+"),c=n("1kSV"),i=n("tyNb"),a=n("BOF4"),o=n.n(a),b=n("fXoL"),d=n("Un6b"),u=n("y8gV"),l=n("ZY/4");function g(t,e){1&t&&(b.Ub(0,"div"),b.Ub(1,"h2"),b.Hc(2,"Courses"),b.Tb(),b.Ub(3,"nav",12),b.Ub(4,"a",13),b.Qb(5,"i",14),b.Hc(6," Create New Course"),b.Tb(),b.Tb(),b.Tb())}function f(t,e){if(1&t&&(b.Ub(0,"th",15),b.Hc(1),b.Tb()),2&t){const t=e.$implicit;b.Cb(1),b.Ic(t)}}function m(t,e){if(1&t&&(b.Ub(0,"span",26),b.Hc(1),b.Tb()),2&t){const t=b.ic().index,e=b.ic(2);b.Cb(1),b.Ic(e.students[t])}}function p(t,e){if(1&t){const t=b.Vb();b.Ub(0,"tr",16),b.Ub(1,"th",17),b.Hc(2),b.Tb(),b.Ub(3,"td",18),b.Hc(4),b.Tb(),b.Ub(5,"td",19),b.Hc(6),b.Tb(),b.Ub(7,"td"),b.Hc(8),b.Tb(),b.Ub(9,"td"),b.Hc(10),b.Tb(),b.Ub(11,"td"),b.Hc(12),b.Tb(),b.Ub(13,"td"),b.Ub(14,"button",20),b.gc("click",(function(){b.xc(t);const n=e.$implicit;return b.ic(2).editCourse(n.id)})),b.Qb(15,"i",21),b.Hc(16," Edit"),b.Tb(),b.Ub(17,"button",22),b.gc("click",(function(){b.xc(t);const n=e.$implicit;return b.ic(2).deleteCourse(n.id)})),b.Qb(18,"i",23),b.Hc(19," Delete"),b.Tb(),b.Ub(20,"button",24),b.gc("click",(function(){b.xc(t);const n=e.$implicit;return b.ic(2).pendingEnrollment(n.id)})),b.Fc(21,m,2,1,"span",25),b.Hc(22," Pending Enrollments"),b.Tb(),b.Tb(),b.Tb()}if(2&t){const t=e.$implicit,n=e.index,r=b.ic(2);b.Cb(2),b.Ic(t.id),b.Cb(2),b.Ic(t.name),b.Cb(2),b.Ic(t.description),b.Cb(2),b.Ic(t.seats),b.Cb(2),b.Ic(t.start_date),b.Cb(2),b.Ic(t.end_date),b.Cb(9),b.oc("ngIf",r.students[n]>0)}}function h(t,e){if(1&t){const t=b.Vb();b.Sb(0),b.Ub(1,"li",27),b.Ub(2,"button",28),b.gc("click",(function(){b.xc(t);const e=b.ic(2);return e.fetchPageCourses(e.page-1)})),b.Hc(3,"Previous"),b.Tb(),b.Tb(),b.Rb()}}function v(t,e){if(1&t){const t=b.Vb();b.Ub(0,"li",29),b.Ub(1,"button",28),b.gc("click",(function(){b.xc(t);const e=b.ic(2);return e.fetchPageCourses(e.page-1)})),b.Hc(2,"Previous"),b.Tb(),b.Tb()}}function U(t,e){if(1&t){const t=b.Vb();b.Sb(0),b.Ub(1,"li",29),b.Ub(2,"button",28),b.gc("click",(function(){b.xc(t);const n=e.index;return b.ic(2).fetchPageCourses(n)})),b.Hc(3),b.Tb(),b.Tb(),b.Rb()}if(2&t){const t=e.index;b.Cb(3),b.Ic(t)}}function C(t,e){if(1&t){const t=b.Vb();b.Sb(0),b.Ub(1,"li",27),b.Ub(2,"button",28),b.gc("click",(function(){b.xc(t);const e=b.ic(2);return e.fetchPageCourses(e.page+1)})),b.Hc(3,"Next"),b.Tb(),b.Tb(),b.Rb()}}function T(t,e){if(1&t){const t=b.Vb();b.Ub(0,"li",29),b.Ub(1,"button",28),b.gc("click",(function(){b.xc(t);const e=b.ic(2);return e.fetchPageCourses(e.page+1)})),b.Hc(2,"Next"),b.Tb(),b.Tb()}}function S(t,e){if(1&t&&(b.Ub(0,"div",0),b.Fc(1,g,7,0,"div",2),b.Ub(2,"table",3),b.Ub(3,"thead"),b.Ub(4,"tr"),b.Fc(5,f,2,1,"th",4),b.Tb(),b.Tb(),b.Ub(6,"tbody"),b.Fc(7,p,23,7,"tr",5),b.Tb(),b.Tb(),b.Ub(8,"nav",6),b.Ub(9,"ul",7),b.Fc(10,h,4,0,"ng-container",8),b.Fc(11,v,3,0,"ng-template",null,9,b.Gc),b.Fc(13,U,4,1,"ng-container",10),b.Fc(14,C,4,0,"ng-container",8),b.Fc(15,T,3,0,"ng-template",null,11,b.Gc),b.Tb(),b.Tb(),b.Tb()),2&t){const t=b.wc(12),e=b.wc(16),n=b.ic();b.Cb(1),b.oc("ngIf",n.currentUser),b.Cb(4),b.oc("ngForOf",n.displayedColumns),b.Cb(2),b.oc("ngForOf",n.courses.res),b.Cb(3),b.oc("ngIf",0==n.page)("ngIfElse",t),b.Cb(3),b.oc("ngForOf",n.maxPagesArray),b.Cb(1),b.oc("ngIf",n.page==n.maxPages-1)("ngIfElse",e)}}let D=(()=>{class t{constructor(t,e,n,r,s){this.courseService=t,this.router=e,this.route=n,this.authenticationService=r,this.studentCourseService=s,this.courses={},this.displayedColumns=["id","name","description","seats","start_date","end_date","Actions"],this.page=0,this.pages=[],this.students=[],this.numberPerPage=5}ngOnInit(){let t=this.route.snapshot.paramMap.get("page")||this.page;this.fetchCourses(t),this.currentUser=this.authenticationService.currentUserValue,this.currentUser&&(this.tokenPayload=o()(this.currentUser.token),this.isAdmin="admin"===this.tokenPayload.role,console.log("Current user in Admin: "+JSON.stringify(this.currentUser)),console.log("tokenPayload: "+JSON.stringify(this.tokenPayload)))}pendingEnrollmentsNotification(t){t.forEach((t,e,n)=>{let r=new Date(t.start_date.toString()),s=new Date(t.end_date.toString());t.start_date=r.toLocaleDateString(),t.end_date=s.toLocaleDateString(),t.seats<1||(this.students[e]=0,this.studentCourseService.getStudentsByCourseId(t.id).subscribe(n=>{n.forEach(t=>{"pending"==t.enrollment_status&&this.students[e]++}),console.log(t.name+" pending students: "+this.students[e])}))})}fetchCourses(t){this.courseService.getCourses(t,this.numberPerPage).subscribe(e=>{this.courses=e,this.page=t,this.currentPage=this.courses.pagination.current,this.maxPages=this.courses.pagination.maxPages,this.maxPagesArray=new Array(this.maxPages),this.pages=Object.values(this.courses.pagination),console.log("Data requested..."),this.pendingEnrollmentsNotification(this.courses.res),this.router.navigate(["/admin",{page:t}])})}fetchPageCourses(t){t<0||this.courseService.getCourses(t,this.numberPerPage).subscribe((e={})=>{this.courses=e,this.page=t,this.currentPage=this.courses.pagination.current,this.maxPages=this.courses.pagination.maxPages,this.pendingEnrollmentsNotification(this.courses.res),console.log("Data requested..."+t),this.router.navigate(["/admin",{page:this.courses.pagination.current}])})}editCourse(t){this.router.navigate([`admin/edit-course/${t}`])}deleteCourse(t){if(1==confirm(`Delete Course ${t}: Are you sure?`)){this.courseService.deleteCourse(t).subscribe(()=>{});const e=this.courses.res.find(e=>e.id===t);this.courses.res.splice(this.courses.res.indexOf(e))}}pendingEnrollment(t){this.router.navigate([`admin/pending-enrollment/${t}`])}}return t.\u0275fac=function(e){return new(e||t)(b.Pb(d.a),b.Pb(i.c),b.Pb(i.a),b.Pb(u.a),b.Pb(l.a))},t.\u0275cmp=b.Jb({type:t,selectors:[["app-dashboard"]],decls:3,vars:1,consts:[[1,"center-form"],["class","center-form",4,"ngIf"],[4,"ngIf"],[1,"table"],["scope","col",4,"ngFor","ngForOf"],["class","trstyle",4,"ngFor","ngForOf"],["aria-label","Page navigation course-library"],[1,"pagination"],[4,"ngIf","ngIfElse"],["elseBlock",""],[4,"ngFor","ngForOf"],["elseBlock2",""],[1,"nav","flex-column","col-sm-1"],["routerLink","/admin/create-course","routerLinkActive","active",1,"nav-link","btn","btn-success"],[1,"fas","fa-plus-circle"],["scope","col"],[1,"trstyle"],["scope","row"],[2,"max-width","125px","word-wrap","break-word"],[2,"max-width","200px","word-wrap","break-word"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-edit"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fas","fa-minus-circle"],["type","button",1,"btn","btn-warning",2,"margin-left","20px",3,"click"],["class","badge badge-light",4,"ngIf"],[1,"badge","badge-light"],[1,"page-item","disabled"],[1,"page-link",3,"click"],[1,"page-item"]],template:function(t,e){1&t&&(b.Ub(0,"h2",0),b.Hc(1,"Admin Dashboard"),b.Tb(),b.Fc(2,S,17,8,"div",1)),2&t&&(b.Cb(2),b.oc("ngIf",e.currentUser&&e.isAdmin))},directives:[r.n,r.m,i.f,i.e],styles:[""]}),t})();var y=n("rptU");function k(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"Name is required"),b.Tb())}function H(t,e){if(1&t&&(b.Ub(0,"div",28),b.Fc(1,k,2,0,"div",29),b.Tb()),2&t){const t=b.ic();b.Cb(1),b.oc("ngIf",t.c.name.errors.required)}}function F(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"Description is required"),b.Tb())}function I(t,e){if(1&t&&(b.Ub(0,"div",28),b.Fc(1,F,2,0,"div",29),b.Tb()),2&t){const t=b.ic();b.Cb(1),b.oc("ngIf",t.c.description.errors.required)}}function w(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"Seats is required"),b.Tb())}function _(t,e){if(1&t&&(b.Ub(0,"div",28),b.Fc(1,w,2,0,"div",29),b.Tb()),2&t){const t=b.ic();b.Cb(1),b.oc("ngIf",t.c.seats.errors.required)}}function P(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"Start Date is required"),b.Tb())}function x(t,e){if(1&t&&(b.Ub(0,"div",28),b.Fc(1,P,2,0,"div",29),b.Tb()),2&t){const t=b.ic();b.Cb(1),b.oc("ngIf",t.c.start_date.errors.required)}}function q(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"End Date is required"),b.Tb())}function E(t,e){if(1&t&&(b.Ub(0,"div",28),b.Fc(1,q,2,0,"div",29),b.Tb()),2&t){const t=b.ic();b.Cb(1),b.oc("ngIf",t.c.end_date.errors.required)}}const N=function(t){return{"is-invalid":t}};function O(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"Name is required"),b.Tb())}function A(t,e){if(1&t&&(b.Ub(0,"div",27),b.Fc(1,O,2,0,"div",28),b.Tb()),2&t){const t=b.ic();b.Cb(1),b.oc("ngIf",t.cu.name.errors.required)}}function V(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"Description is required"),b.Tb())}function Q(t,e){if(1&t&&(b.Ub(0,"div",27),b.Fc(1,V,2,0,"div",28),b.Tb()),2&t){const t=b.ic();b.Cb(1),b.oc("ngIf",t.cu.description.errors.required)}}function $(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"Seats is required"),b.Tb())}function j(t,e){if(1&t&&(b.Ub(0,"div",27),b.Fc(1,$,2,0,"div",28),b.Tb()),2&t){const t=b.ic();b.Cb(1),b.oc("ngIf",t.cu.seats.errors.required)}}function B(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"Start Date is required"),b.Tb())}function J(t,e){if(1&t&&(b.Ub(0,"div",27),b.Fc(1,B,2,0,"div",28),b.Tb()),2&t){const t=b.ic();b.Cb(1),b.oc("ngIf",t.cu.start_date.errors.required)}}function L(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"End Date is required"),b.Tb())}function G(t,e){if(1&t&&(b.Ub(0,"div",27),b.Fc(1,L,2,0,"div",28),b.Tb()),2&t){const t=b.ic();b.Cb(1),b.oc("ngIf",t.cu.end_date.errors.required)}}const M=function(t){return{"is-invalid":t}};function R(t,e){if(1&t&&(b.Ub(0,"h2"),b.Hc(1),b.Ub(2,"span",5),b.Hc(3),b.Tb(),b.Tb()),2&t){const t=b.ic();b.Cb(1),b.Jc("",t.course.name," "),b.Cb(2),b.Jc("Seats: ",t.course.seats,"")}}function Y(t,e){if(1&t){const t=b.Vb();b.Sb(0),b.Ub(1,"th",9),b.Hc(2),b.Tb(),b.Ub(3,"td"),b.Hc(4),b.Tb(),b.Ub(5,"td"),b.Hc(6),b.Tb(),b.Ub(7,"td"),b.Hc(8),b.Tb(),b.Ub(9,"td"),b.Ub(10,"button",10),b.gc("click",(function(){b.xc(t);const e=b.ic().$implicit;return b.ic(2).acceptEnrollment(e.student_id,e.course_id,"enrolled")})),b.Hc(11,"Accept"),b.Tb(),b.Ub(12,"button",11),b.gc("click",(function(){b.xc(t);const e=b.ic().$implicit;return b.ic(2).declineEnrollment(e.student_id,e.course_id)})),b.Hc(13,"Decline"),b.Tb(),b.Tb(),b.Rb()}if(2&t){const t=b.ic().$implicit;b.Cb(2),b.Ic(t.student_id),b.Cb(2),b.Ic(t.email),b.Cb(2),b.Ic(t.f_name),b.Cb(2),b.Ic(t.l_name)}}function X(t,e){if(1&t&&(b.Ub(0,"tr"),b.Fc(1,Y,14,4,"ng-container",0),b.Tb()),2&t){const t=e.$implicit;b.Cb(1),b.oc("ngIf","pending"==t.enrollment_status)}}function K(t,e){if(1&t&&(b.Ub(0,"table",6),b.Ub(1,"thead"),b.Ub(2,"tr"),b.Ub(3,"th",7),b.Hc(4,"studentID"),b.Tb(),b.Ub(5,"th",7),b.Hc(6,"email"),b.Tb(),b.Ub(7,"th",7),b.Hc(8,"First Name"),b.Tb(),b.Ub(9,"th",7),b.Hc(10,"Last Name"),b.Tb(),b.Ub(11,"th",7),b.Hc(12,"Enroll"),b.Tb(),b.Tb(),b.Tb(),b.Ub(13,"tbody"),b.Fc(14,X,2,1,"tr",8),b.Tb(),b.Tb()),2&t){const t=b.ic();b.Cb(14),b.oc("ngForOf",t.students)}}function Z(t,e){1&t&&(b.Ub(0,"h2",12),b.Hc(1,"No seats available!"),b.Tb())}const z=[{path:"",component:D,canActivate:[u.a],data:{expectedRole:"admin"}},{path:"create-course",component:(()=>{class t{constructor(t,e,n,r){this.courseService=t,this.courseDetailsService=e,this.fb=n,this.router=r,this.labels=["name","description","seats","start_date","end_date"],this.submitted=!1,this.todayDate=null,this.startDateEvent=null,this.endDateEvent=null,this.startDateSelected=!1,this.endDateSelected=!1,this.courseForm=this.fb.group({name:["",s.m.required],description:["",s.m.required],seats:["",s.m.required],start_date:["",s.m.required],end_date:["",s.m.required]})}get c(){return this.courseForm.controls}ngOnInit(){let t=new Date,e=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();this.todayDate=new Promise((t,s)=>{t(n+"/"+e+"/"+r)})}addCourse(t,e,n,r,s){this.submitted=!0,r=this.formatDate(r),console.log("going to submit start_date: "+r),s=this.formatDate(s),console.log("going to submit end_date: "+s),this.courseForm.valid&&this.courseService.addCourse(t,e,n,r,s).subscribe(t=>{this.courseDetailsService.createCourseDetails(t.id,"<p>Recommended inputs: Course Name, Instructor Name, Office (location/hours), Phone number, and email.</p>").subscribe(()=>{console.log("course details created")}),this.router.navigate(["/admin"])})}onStartDateSelect(t){console.log("startDateSelected"),this.startDateEvent=new Promise((e,n)=>{e(String(t.month).padStart(2,"0")+"/"+String(t.day).padStart(2,"0")+"/"+t.year)}),this.startDateSelected=!0}onEndDateSelect(t){console.log("endDateSelected"),this.endDateEvent=new Promise((e,n)=>{e(String(t.month).padStart(2,"0")+"/"+String(t.day).padStart(2,"0")+"/"+t.year)}),this.endDateSelected=!0}formatDate(t){let e=new Date(t),n=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0");return e.getFullYear()+"-"+r+"-"+n}}return t.\u0275fac=function(e){return new(e||t)(b.Pb(d.a),b.Pb(y.a),b.Pb(s.b),b.Pb(i.c))},t.\u0275cmp=b.Jb({type:t,selectors:[["app-create-course"]],decls:62,vars:31,consts:[[1,"center-form"],[1,"col-sm-4",3,"formGroup"],[1,"form-group"],["for","name"],[2,"color","red"],["type","text","formControlName","name","required","",1,"form-control",3,"ngClass"],["name",""],["class","invalid-feedback",4,"ngIf"],["for","description"],["formControlName","description","required","",1,"form-control",3,"ngClass"],["description",""],["for","seats"],["type","text","formControlName","seats","required","",1,"form-control",3,"ngClass"],["seats",""],["for","start_date"],[1,"input-group"],["name","dp","ngbDatepicker","","formControlName","start_date","readonly","","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d","ngbDatepicker","start_date",""],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","far","fa-calendar-alt",3,"click"],["data-provide","datepicker",1,"form-group"],["for","end_date"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","formControlName","end_date","readonly","","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d2","ngbDatepicker","end_date",""],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],["routerLink","/admin",1,"btn","btn-warning"],[1,"fas","fa-arrow-circle-left"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",0),b.Ub(1,"h2"),b.Hc(2,"Create New Course"),b.Tb(),b.Ub(3,"form",1),b.Ub(4,"div",2),b.Ub(5,"label",3),b.Ub(6,"span",4),b.Hc(7,"*"),b.Tb(),b.Hc(8,"Name"),b.Tb(),b.Qb(9,"input",5,6),b.Fc(11,H,2,1,"div",7),b.Tb(),b.Ub(12,"div",2),b.Ub(13,"label",8),b.Ub(14,"span",4),b.Hc(15,"*"),b.Tb(),b.Hc(16,"Description"),b.Tb(),b.Qb(17,"textarea",9,10),b.Fc(19,I,2,1,"div",7),b.Tb(),b.Ub(20,"div",2),b.Ub(21,"label",11),b.Ub(22,"span",4),b.Hc(23,"*"),b.Tb(),b.Hc(24,"Number of Seats"),b.Tb(),b.Qb(25,"input",12,13),b.Fc(27,_,2,1,"div",7),b.Tb(),b.Ub(28,"div",2),b.Ub(29,"label",14),b.Ub(30,"span",4),b.Hc(31,"*"),b.Tb(),b.Hc(32,"Start Date"),b.Tb(),b.Ub(33,"div",15),b.Ub(34,"input",16,17),b.gc("dateSelect",(function(t){return e.onStartDateSelect(t)})),b.jc(37,"async"),b.jc(38,"async"),b.Tb(),b.Ub(39,"div",18),b.Ub(40,"button",19),b.gc("click",(function(){return b.xc(t),b.wc(35).toggle()})),b.Tb(),b.Tb(),b.Fc(41,x,2,1,"div",7),b.Tb(),b.Tb(),b.Ub(42,"div",20),b.Ub(43,"label",21),b.Ub(44,"span",4),b.Hc(45,"*"),b.Tb(),b.Hc(46,"End Date"),b.Tb(),b.Ub(47,"div",15),b.Ub(48,"input",22,23),b.gc("dateSelect",(function(t){return e.onEndDateSelect(t)})),b.jc(51,"async"),b.jc(52,"async"),b.Tb(),b.Ub(53,"div",18),b.Ub(54,"button",19),b.gc("click",(function(){return b.xc(t),b.wc(49).toggle()})),b.Tb(),b.Tb(),b.Fc(55,E,2,1,"div",7),b.Tb(),b.Tb(),b.Ub(56,"button",24),b.gc("click",(function(){b.xc(t);const n=b.wc(10),r=b.wc(18),s=b.wc(26),c=b.wc(36),i=b.wc(50);return e.addCourse(n.value,r.value,s.value,c.value,i.value)})),b.Qb(57,"i",25),b.Hc(58," Create Course"),b.Tb(),b.Ub(59,"a",26),b.Qb(60,"i",27),b.Hc(61," Go Back"),b.Tb(),b.Tb(),b.Tb()}2&t&&(b.Cb(3),b.oc("formGroup",e.courseForm),b.Cb(6),b.oc("ngClass",b.sc(21,N,e.submitted&&e.c.name.errors)),b.Cb(2),b.oc("ngIf",e.submitted&&e.c.name.errors),b.Cb(6),b.oc("ngClass",b.sc(23,N,e.submitted&&e.c.description.errors)),b.Cb(2),b.oc("ngIf",e.submitted&&e.c.description.errors),b.Cb(6),b.oc("ngClass",b.sc(25,N,e.submitted&&e.c.seats.errors)),b.Cb(2),b.oc("ngIf",e.submitted&&e.c.seats.errors),b.Cb(7),b.oc("value",e.startDateSelected?b.kc(37,13,e.startDateEvent):b.kc(38,15,e.todayDate))("ngClass",b.sc(27,N,e.submitted&&e.c.start_date.errors)),b.Cb(7),b.oc("ngIf",e.submitted&&e.c.start_date.errors),b.Cb(7),b.oc("value",e.endDateSelected?b.kc(51,17,e.endDateEvent):b.kc(52,19,e.todayDate))("ngClass",b.sc(29,N,e.submitted&&e.c.end_date.errors)),b.Cb(7),b.oc("ngIf",e.submitted&&e.c.end_date.errors))},directives:[s.o,s.i,s.d,s.a,s.h,s.c,s.l,r.l,r.n,c.a,i.f],pipes:[r.b],styles:[""]}),t})(),canActivate:[u.a],data:{expectedRole:"admin"}},{path:"edit-course/:id",component:(()=>{class t{constructor(t,e,n,r){this.courseService=t,this.router=e,this.route=n,this.fb=r,this.submitted=!1,this.startDate=null,this.startDateSelected=!1,this.startDateEvent=null,this.endDate=null,this.endDateSelected=!1,this.endDateEvent=null,this.CreateForm()}CreateForm(){this.updateForm=this.fb.group({name:["",s.m.required],description:["",s.m.required],seats:["",s.m.required],start_date:["",s.m.required],end_date:["",s.m.required]})}get cu(){return this.updateForm.controls}ngOnInit(){this.route.params.subscribe(t=>{this.id=t.id,this.courseService.getCourseById(this.id).subscribe(t=>{this.course=t,this.hDateFormat(this.course),this.updateForm.get("name").setValue(this.course.name),this.updateForm.get("description").setValue(this.course.description),this.updateForm.get("seats").setValue(this.course.seats);let e=new Date(this.course.start_date.toString()),n=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),s=e.getFullYear();this.startDate=new Promise((t,e)=>{t(r+"/"+n+"/"+s)}),e=new Date(this.course.end_date.toString()),n=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),s=e.getFullYear(),this.endDate=new Promise((t,e)=>{t(r+"/"+n+"/"+s)})})})}updateCourse(t,e,n,r,s){this.submitted=!0,r=this.formatDate(r),console.log("going to submit start_date: "+r),s=this.formatDate(s),console.log("going to submit end_date: "+s),this.updateForm.valid&&this.courseService.updateCourse(this.id,t,e,n,r,s).subscribe(t=>{this.router.navigate(["/admin"])})}hDateFormat(t){let e=new Date(t.start_date.toString()),n=new Date(t.end_date.toString());t.start_date=e.toLocaleDateString(),t.end_date=n.toLocaleDateString()}formatDate(t){let e=new Date(t),n=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0");return e.getFullYear()+"-"+r+"-"+n}onStartDateSelect(t){this.startDateSelected=!0,this.startDateEvent=new Promise((e,n)=>{e(String(t.month).padStart(2,"0")+"/"+String(t.day).padStart(2,"0")+"/"+t.year)})}onEndDateSelect(t){this.endDateSelected=!0,this.endDateEvent=new Promise((e,n)=>{e(String(t.month).padStart(2,"0")+"/"+String(t.day).padStart(2,"0")+"/"+t.year)})}}return t.\u0275fac=function(e){return new(e||t)(b.Pb(d.a),b.Pb(i.c),b.Pb(i.a),b.Pb(s.b))},t.\u0275cmp=b.Jb({type:t,selectors:[["app-edit-course"]],decls:62,vars:32,consts:[[1,"center-form"],[1,"col-sm-4",3,"formGroup"],[1,"form-group"],["for","name"],[2,"color","red"],["type","text","formControlName","name","required","",1,"form-control",3,"ngClass"],["name",""],["class","invalid-feedback",4,"ngIf"],["for","description"],["formControlName","description","required","",1,"form-control",3,"ngClass"],["description",""],["for","seats"],["type","text","formControlName","seats","required","",1,"form-control",3,"ngClass"],["seats",""],["for","start_date"],[1,"input-group"],["type","text","placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","formControlName","start_date","readonly","","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d","ngbDatepicker","start_date",""],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","far","fa-calendar-alt",3,"click"],["for","end_date"],["type","text","placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","formControlName","end_date","readonly","","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d2","ngbDatepicker","end_date",""],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],["routerLink","/admin",1,"btn","btn-warning"],[1,"fas","fa-arrow-circle-left"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",0),b.Ub(1,"h2"),b.Hc(2),b.Tb(),b.Ub(3,"form",1),b.Ub(4,"div",2),b.Ub(5,"label",3),b.Ub(6,"span",4),b.Hc(7,"*"),b.Tb(),b.Hc(8,"Name"),b.Tb(),b.Qb(9,"input",5,6),b.Fc(11,A,2,1,"div",7),b.Tb(),b.Ub(12,"div",2),b.Ub(13,"label",8),b.Ub(14,"span",4),b.Hc(15,"*"),b.Tb(),b.Hc(16,"Description"),b.Tb(),b.Qb(17,"textarea",9,10),b.Fc(19,Q,2,1,"div",7),b.Tb(),b.Ub(20,"div",2),b.Ub(21,"label",11),b.Ub(22,"span",4),b.Hc(23,"*"),b.Tb(),b.Hc(24,"Number of Seats"),b.Tb(),b.Qb(25,"input",12,13),b.Fc(27,j,2,1,"div",7),b.Tb(),b.Ub(28,"div",2),b.Ub(29,"label",14),b.Ub(30,"span",4),b.Hc(31,"*"),b.Tb(),b.Hc(32,"Start Date"),b.Tb(),b.Ub(33,"div",15),b.Ub(34,"input",16,17),b.gc("dateSelect",(function(t){return e.onStartDateSelect(t)})),b.jc(37,"async"),b.jc(38,"async"),b.Tb(),b.Ub(39,"div",18),b.Ub(40,"button",19),b.gc("click",(function(){return b.xc(t),b.wc(35).toggle()})),b.Tb(),b.Tb(),b.Fc(41,J,2,1,"div",7),b.Tb(),b.Tb(),b.Ub(42,"div",2),b.Ub(43,"label",20),b.Ub(44,"span",4),b.Hc(45,"*"),b.Tb(),b.Hc(46,"End Date"),b.Tb(),b.Ub(47,"div",15),b.Ub(48,"input",21,22),b.gc("dateSelect",(function(t){return e.onEndDateSelect(t)})),b.jc(51,"async"),b.jc(52,"async"),b.Tb(),b.Ub(53,"div",18),b.Ub(54,"button",19),b.gc("click",(function(){return b.xc(t),b.wc(49).toggle()})),b.Tb(),b.Tb(),b.Fc(55,G,2,1,"div",7),b.Tb(),b.Tb(),b.Ub(56,"button",23),b.gc("click",(function(){b.xc(t);const n=b.wc(10),r=b.wc(18),s=b.wc(26),c=b.wc(36),i=b.wc(50);return e.updateCourse(n.value,r.value,s.value,c.value,i.value)})),b.Qb(57,"i",24),b.Hc(58," Update Course"),b.Tb(),b.Ub(59,"a",25),b.Qb(60,"i",26),b.Hc(61," Go Back"),b.Tb(),b.Tb(),b.Tb()}2&t&&(b.Cb(2),b.Jc("Edit Course ",e.id,""),b.Cb(1),b.oc("formGroup",e.updateForm),b.Cb(6),b.oc("ngClass",b.sc(22,M,e.submitted&&e.cu.name.errors)),b.Cb(2),b.oc("ngIf",e.submitted&&e.cu.name.errors),b.Cb(6),b.oc("ngClass",b.sc(24,M,e.submitted&&e.cu.description.errors)),b.Cb(2),b.oc("ngIf",e.submitted&&e.cu.description.errors),b.Cb(6),b.oc("ngClass",b.sc(26,M,e.submitted&&e.cu.seats.errors)),b.Cb(2),b.oc("ngIf",e.submitted&&e.cu.seats.errors),b.Cb(7),b.oc("value",e.startDateSelected?b.kc(37,14,e.startDateEvent):b.kc(38,16,e.startDate))("ngClass",b.sc(28,M,e.submitted&&e.cu.start_date.errors)),b.Cb(7),b.oc("ngIf",e.submitted&&e.cu.start_date.errors),b.Cb(7),b.oc("value",e.endDateSelected?b.kc(51,18,e.endDateEvent):b.kc(52,20,e.endDate))("ngClass",b.sc(30,M,e.submitted&&e.cu.end_date.errors)),b.Cb(7),b.oc("ngIf",e.submitted&&e.cu.end_date.errors))},directives:[s.o,s.i,s.d,s.a,s.h,s.c,s.l,r.l,r.n,c.a,i.f],pipes:[r.b],styles:[""]}),t})(),canActivate:[u.a],data:{expectedRole:"admin"}},{path:"pending-enrollment/:id",component:(()=>{class t{constructor(t,e,n){this.studentCourseService=t,this.courseService=e,this.route=n,this.students=[],this.noSeats=!1}ngOnInit(){this.route.params.subscribe(t=>{this.id=t.id,this.courseService.getCourseById(this.id).subscribe(t=>{this.course=t,this.course.seats<1&&(this.noSeats=!0,console.log("no seats: "+this.noSeats)),console.log(this.course),this.noSeats||this.studentCourseService.getStudentsByCourseId(this.id).subscribe(t=>{this.students=t})})})}acceptEnrollment(t,e,n){1==confirm(`Accept student ${t} enrollment?`)&&this.studentCourseService.acceptStudentEnrollment(t,e,n).subscribe(n=>{for(var r=0;r<this.students.length;r++)this.students[r].student_id===t&&this.students.splice(r,1);this.courseService.updateCourseSeats(e,this.course.seats-1).subscribe(()=>{console.log("seats decremented by 1"),this.course.seats=this.course.seats-1})})}declineEnrollment(t,e){1==confirm(`Decline student ${t} enrollment?`)&&this.studentCourseService.declineStudentEnrollment(t,e).subscribe(e=>{for(var n=0;n<this.students.length;n++)this.students[n].student_id===t&&this.students.splice(n,1)})}}return t.\u0275fac=function(e){return new(e||t)(b.Pb(l.a),b.Pb(d.a),b.Pb(i.a))},t.\u0275cmp=b.Jb({type:t,selectors:[["app-pending-enrollment"]],decls:7,vars:3,consts:[[4,"ngIf"],["class","table",4,"ngIf","ngIfElse"],["elseBlock",""],["routerLink","/admin",1,"btn","btn-warning"],[1,"fas","fa-arrow-circle-left"],[2,"float","right"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"center-form"]],template:function(t,e){if(1&t&&(b.Fc(0,R,4,2,"h2",0),b.Fc(1,K,15,1,"table",1),b.Fc(2,Z,2,0,"ng-template",null,2,b.Gc),b.Ub(4,"a",3),b.Qb(5,"i",4),b.Hc(6," Go Back"),b.Tb()),2&t){const t=b.wc(3);b.oc("ngIf",e.course),b.Cb(1),b.oc("ngIf",!e.noSeats)("ngIfElse",t)}},directives:[r.n,i.f,r.m],styles:[""]}),t})(),canActivate:[u.a],data:{expectedRole:"admin"}}];let W=(()=>{class t{}return t.\u0275mod=b.Nb({type:t}),t.\u0275inj=b.Mb({factory:function(e){return new(e||t)},imports:[[i.g.forChild(z)],i.g]}),t})();n.d(e,"AdminModule",(function(){return tt}));let tt=(()=>{class t{}return t.\u0275mod=b.Nb({type:t}),t.\u0275inj=b.Mb({factory:function(e){return new(e||t)},imports:[[r.c,W,s.k,c.c]]}),t})()}}]);