function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"13Ib":function(e,t,n){"use strict";n.r(t);var r=n("ofXK"),c=n("3Pt+"),a=n("1kSV"),i=n("tyNb"),s=n("fXoL"),o=n("Un6b"),u=n("y8gV"),b=n("ZY/4");function d(e,t){if(1&e&&(s.Ub(0,"th",13),s.Ic(1),s.Tb()),2&e){var n=t.$implicit;s.Cb(1),s.Jc(n)}}function l(e,t){if(1&e&&(s.Ub(0,"span",24),s.Ic(1),s.Tb()),2&e){var n=s.ic().index,r=s.ic();s.Cb(1),s.Jc(r.students[n])}}function f(e,t){if(1&e){var n=s.Vb();s.Ub(0,"tr",14),s.Ub(1,"th",15),s.Ic(2),s.Tb(),s.Ub(3,"td",16),s.Ic(4),s.Tb(),s.Ub(5,"td",17),s.Ic(6),s.Tb(),s.Ub(7,"td"),s.Ic(8),s.Tb(),s.Ub(9,"td"),s.Ic(10),s.Tb(),s.Ub(11,"td"),s.Ic(12),s.Tb(),s.Ub(13,"td"),s.Ub(14,"button",18),s.gc("click",(function(){s.yc(n);var e=t.$implicit;return s.ic().editCourse(e.id)})),s.Qb(15,"i",19),s.Ic(16," Edit"),s.Tb(),s.Ub(17,"button",20),s.gc("click",(function(){s.yc(n);var e=t.$implicit;return s.ic().deleteCourse(e.id)})),s.Qb(18,"i",21),s.Ic(19," Delete"),s.Tb(),s.Ub(20,"button",22),s.gc("click",(function(){s.yc(n);var e=t.$implicit;return s.ic().pendingEnrollment(e.id)})),s.Gc(21,l,2,1,"span",23),s.Ic(22," Pending Enrollments"),s.Tb(),s.Tb(),s.Tb()}if(2&e){var r=t.$implicit,c=t.index,a=s.ic();s.Cb(2),s.Jc(r.id),s.Cb(2),s.Jc(r.name),s.Cb(2),s.Jc(r.description),s.Cb(2),s.Jc(r.seats),s.Cb(2),s.Jc(r.start_date),s.Cb(2),s.Jc(r.end_date),s.Cb(9),s.oc("ngIf",a.students[c]>0)}}function g(e,t){if(1&e){var n=s.Vb();s.Sb(0),s.Ub(1,"li",25),s.Ub(2,"button",26),s.gc("click",(function(){s.yc(n);var e=s.ic();return e.fetchPageCourses(e.page-1)})),s.Ic(3,"Previous"),s.Tb(),s.Tb(),s.Rb()}}function p(e,t){if(1&e){var n=s.Vb();s.Ub(0,"li",27),s.Ub(1,"button",26),s.gc("click",(function(){s.yc(n);var e=s.ic();return e.fetchPageCourses(e.page-1)})),s.Ic(2,"Previous"),s.Tb(),s.Tb()}}function m(e,t){if(1&e){var n=s.Vb();s.Sb(0),s.Ub(1,"li",27),s.Ub(2,"button",26),s.gc("click",(function(){s.yc(n);var e=t.index;return s.ic().fetchPageCourses(e)})),s.Ic(3),s.Tb(),s.Tb(),s.Rb()}if(2&e){var r=t.index;s.Cb(3),s.Jc(r)}}function v(e,t){if(1&e){var n=s.Vb();s.Sb(0),s.Ub(1,"li",25),s.Ub(2,"button",26),s.gc("click",(function(){s.yc(n);var e=s.ic();return e.fetchPageCourses(e.page+1)})),s.Ic(3,"Next"),s.Tb(),s.Tb(),s.Rb()}}function h(e,t){if(1&e){var n=s.Vb();s.Ub(0,"li",27),s.Ub(1,"button",26),s.gc("click",(function(){s.yc(n);var e=s.ic();return e.fetchPageCourses(e.page+1)})),s.Ic(2,"Next"),s.Tb(),s.Tb()}}var C,U=((C=function(){function e(t,n,r,c,a){_classCallCheck(this,e),this.courseService=t,this.router=n,this.route=r,this.authenticationService=c,this.studentCourseService=a,this.courses={},this.displayedColumns=["id","name","description","seats","start_date","end_date","Actions"],this.page=0,this.pages=[],this.students=[],this.numberPerPage=5}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this.route.snapshot.paramMap.get("page")||this.page;this.fetchCourses(e),this.isAdmin="admin"==JSON.parse(localStorage.getItem("FB_user")).role}},{key:"pendingEnrollmentsNotification",value:function(e){var t=this;e.forEach((function(e,n,r){var c=new Date(e.start_date.toString()),a=new Date(e.end_date.toString());e.start_date=c.toLocaleDateString(),e.end_date=a.toLocaleDateString(),e.seats<1||(t.students[n]=0,t.studentCourseService.getStudentsByCourseId(e.id).subscribe((function(r){r.forEach((function(e){"pending"==e.enrollment_status&&t.students[n]++})),console.log(e.name+" pending students: "+t.students[n])})))}))}},{key:"fetchCourses",value:function(e){var t=this;this.courseService.getCourses(e,this.numberPerPage).subscribe((function(n){t.courses=n,t.page=e,t.currentPage=t.courses.pagination.current,t.maxPages=t.courses.pagination.maxPages,t.maxPagesArray=new Array(t.maxPages),t.pages=Object.values(t.courses.pagination),console.log("Data requested..."),t.pendingEnrollmentsNotification(t.courses.res),t.router.navigate(["/admin",{page:e}])}))}},{key:"fetchPageCourses",value:function(e){var t=this;e<0||this.courseService.getCourses(e,this.numberPerPage).subscribe((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.courses=n,t.page=e,t.currentPage=t.courses.pagination.current,t.maxPages=t.courses.pagination.maxPages,t.pendingEnrollmentsNotification(t.courses.res),console.log("Data requested..."+e),t.router.navigate(["/admin",{page:t.courses.pagination.current}])}))}},{key:"editCourse",value:function(e){this.router.navigate(["admin/edit-course/".concat(e)])}},{key:"deleteCourse",value:function(e){if(1==confirm("Delete Course ".concat(e,": Are you sure?"))){this.courseService.deleteCourse(e).subscribe((function(){}));var t=this.courses.res.find((function(t){return t.id===e}));this.courses.res.splice(this.courses.res.indexOf(t))}}},{key:"pendingEnrollment",value:function(e){this.router.navigate(["admin/pending-enrollment/".concat(e)])}}]),e}()).\u0275fac=function(e){return new(e||C)(s.Pb(o.a),s.Pb(i.c),s.Pb(i.a),s.Pb(u.a),s.Pb(b.a))},C.\u0275cmp=s.Jb({type:C,selectors:[["app-dashboard"]],decls:24,vars:7,consts:[[1,"center-form"],[1,"nav","flex-column","col-sm-1"],["routerLink","/admin/create-course","routerLinkActive","active",1,"nav-link","btn","btn-success"],[1,"fas","fa-plus-circle"],[1,"table"],["scope","col",4,"ngFor","ngForOf"],["class","trstyle",4,"ngFor","ngForOf"],["aria-label","Page navigation course-library"],[1,"pagination"],[4,"ngIf","ngIfElse"],["elseBlock",""],[4,"ngFor","ngForOf"],["elseBlock2",""],["scope","col"],[1,"trstyle"],["scope","row"],[2,"max-width","125px","word-wrap","break-word"],[2,"max-width","200px","word-wrap","break-word"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-edit"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fas","fa-minus-circle"],["type","button",1,"btn","btn-warning",2,"margin-left","20px",3,"click"],["class","badge badge-light",4,"ngIf"],[1,"badge","badge-light"],[1,"page-item","disabled"],[1,"page-link",3,"click"],[1,"page-item"]],template:function(e,t){if(1&e&&(s.Ub(0,"h2",0),s.Ic(1,"Admin Dashboard"),s.Tb(),s.Ub(2,"div",0),s.Ub(3,"h2"),s.Ic(4,"Courses"),s.Tb(),s.Ub(5,"nav",1),s.Ub(6,"a",2),s.Qb(7,"i",3),s.Ic(8," Create New Course"),s.Tb(),s.Tb(),s.Ub(9,"table",4),s.Ub(10,"thead"),s.Ub(11,"tr"),s.Gc(12,d,2,1,"th",5),s.Tb(),s.Tb(),s.Ub(13,"tbody"),s.Gc(14,f,23,7,"tr",6),s.Tb(),s.Tb(),s.Ub(15,"nav",7),s.Ub(16,"ul",8),s.Gc(17,g,4,0,"ng-container",9),s.Gc(18,p,3,0,"ng-template",null,10,s.Hc),s.Gc(20,m,4,1,"ng-container",11),s.Gc(21,v,4,0,"ng-container",9),s.Gc(22,h,3,0,"ng-template",null,12,s.Hc),s.Tb(),s.Tb(),s.Tb()),2&e){var n=s.wc(19),r=s.wc(23);s.Cb(12),s.oc("ngForOf",t.displayedColumns),s.Cb(2),s.oc("ngForOf",t.courses.res),s.Cb(3),s.oc("ngIf",0==t.page)("ngIfElse",n),s.Cb(3),s.oc("ngForOf",t.maxPagesArray),s.Cb(1),s.oc("ngIf",t.page==t.maxPages-1)("ngIfElse",r)}},directives:[i.f,i.e,r.m,r.n],styles:[""]}),C),T=n("rptU");function y(e,t){1&e&&(s.Ub(0,"div"),s.Ic(1,"Name is required"),s.Tb())}function S(e,t){if(1&e&&(s.Ub(0,"div",28),s.Gc(1,y,2,0,"div",29),s.Tb()),2&e){var n=s.ic();s.Cb(1),s.oc("ngIf",n.c.name.errors.required)}}function I(e,t){1&e&&(s.Ub(0,"div"),s.Ic(1,"Description is required"),s.Tb())}function D(e,t){if(1&e&&(s.Ub(0,"div",28),s.Gc(1,I,2,0,"div",29),s.Tb()),2&e){var n=s.ic();s.Cb(1),s.oc("ngIf",n.c.description.errors.required)}}function k(e,t){1&e&&(s.Ub(0,"div"),s.Ic(1,"Seats is required"),s.Tb())}function _(e,t){if(1&e&&(s.Ub(0,"div",28),s.Gc(1,k,2,0,"div",29),s.Tb()),2&e){var n=s.ic();s.Cb(1),s.oc("ngIf",n.c.seats.errors.required)}}function w(e,t){1&e&&(s.Ub(0,"div"),s.Ic(1,"Start Date is required"),s.Tb())}function P(e,t){if(1&e&&(s.Ub(0,"div",28),s.Gc(1,w,2,0,"div",29),s.Tb()),2&e){var n=s.ic();s.Cb(1),s.oc("ngIf",n.c.start_date.errors.required)}}function q(e,t){1&e&&(s.Ub(0,"div"),s.Ic(1,"End Date is required"),s.Tb())}function E(e,t){if(1&e&&(s.Ub(0,"div",28),s.Gc(1,q,2,0,"div",29),s.Tb()),2&e){var n=s.ic();s.Cb(1),s.oc("ngIf",n.c.end_date.errors.required)}}var G=function(e){return{"is-invalid":e}};function F(e,t){1&e&&(s.Ub(0,"div"),s.Ic(1,"Name is required"),s.Tb())}function x(e,t){if(1&e&&(s.Ub(0,"div",27),s.Gc(1,F,2,0,"div",28),s.Tb()),2&e){var n=s.ic();s.Cb(1),s.oc("ngIf",n.cu.name.errors.required)}}function N(e,t){1&e&&(s.Ub(0,"div"),s.Ic(1,"Description is required"),s.Tb())}function J(e,t){if(1&e&&(s.Ub(0,"div",27),s.Gc(1,N,2,0,"div",28),s.Tb()),2&e){var n=s.ic();s.Cb(1),s.oc("ngIf",n.cu.description.errors.required)}}function O(e,t){1&e&&(s.Ub(0,"div"),s.Ic(1,"Seats is required"),s.Tb())}function A(e,t){if(1&e&&(s.Ub(0,"div",27),s.Gc(1,O,2,0,"div",28),s.Tb()),2&e){var n=s.ic();s.Cb(1),s.oc("ngIf",n.cu.seats.errors.required)}}function j(e,t){1&e&&(s.Ub(0,"div"),s.Ic(1,"Start Date is required"),s.Tb())}function Q(e,t){if(1&e&&(s.Ub(0,"div",27),s.Gc(1,j,2,0,"div",28),s.Tb()),2&e){var n=s.ic();s.Cb(1),s.oc("ngIf",n.cu.start_date.errors.required)}}function V(e,t){1&e&&(s.Ub(0,"div"),s.Ic(1,"End Date is required"),s.Tb())}function B(e,t){if(1&e&&(s.Ub(0,"div",27),s.Gc(1,V,2,0,"div",28),s.Tb()),2&e){var n=s.ic();s.Cb(1),s.oc("ngIf",n.cu.end_date.errors.required)}}var L=function(e){return{"is-invalid":e}};function M(e,t){if(1&e&&(s.Ub(0,"h2"),s.Ic(1),s.Ub(2,"span",5),s.Ic(3),s.Tb(),s.Tb()),2&e){var n=s.ic();s.Cb(1),s.Kc("",n.course.name," "),s.Cb(2),s.Kc("Seats: ",n.course.seats,"")}}function R(e,t){if(1&e){var n=s.Vb();s.Sb(0),s.Ub(1,"th",9),s.Ic(2),s.Tb(),s.Ub(3,"td"),s.Ic(4),s.Tb(),s.Ub(5,"td"),s.Ic(6),s.Tb(),s.Ub(7,"td"),s.Ic(8),s.Tb(),s.Ub(9,"td"),s.Ub(10,"button",10),s.gc("click",(function(){s.yc(n);var e=s.ic().$implicit;return s.ic(2).acceptEnrollment(e.student_id,e.course_id,"enrolled")})),s.Ic(11,"Accept"),s.Tb(),s.Ub(12,"button",11),s.gc("click",(function(){s.yc(n);var e=s.ic().$implicit;return s.ic(2).declineEnrollment(e.student_id,e.course_id)})),s.Ic(13,"Decline"),s.Tb(),s.Tb(),s.Rb()}if(2&e){var r=s.ic().$implicit;s.Cb(2),s.Jc(r.student_id),s.Cb(2),s.Jc(r.email),s.Cb(2),s.Jc(r.f_name),s.Cb(2),s.Jc(r.l_name)}}function $(e,t){if(1&e&&(s.Ub(0,"tr"),s.Gc(1,R,14,4,"ng-container",0),s.Tb()),2&e){var n=t.$implicit;s.Cb(1),s.oc("ngIf","pending"==n.enrollment_status)}}function Y(e,t){if(1&e&&(s.Ub(0,"table",6),s.Ub(1,"thead"),s.Ub(2,"tr"),s.Ub(3,"th",7),s.Ic(4,"studentID"),s.Tb(),s.Ub(5,"th",7),s.Ic(6,"email"),s.Tb(),s.Ub(7,"th",7),s.Ic(8,"First Name"),s.Tb(),s.Ub(9,"th",7),s.Ic(10,"Last Name"),s.Tb(),s.Ub(11,"th",7),s.Ic(12,"Enroll"),s.Tb(),s.Tb(),s.Tb(),s.Ub(13,"tbody"),s.Gc(14,$,2,1,"tr",8),s.Tb(),s.Tb()),2&e){var n=s.ic();s.Cb(14),s.oc("ngForOf",n.students)}}function K(e,t){1&e&&(s.Ub(0,"h2",12),s.Ic(1,"No seats available!"),s.Tb())}var H,X,Z,z,W=[{path:"",component:U,canActivate:[u.a],data:{expectedRole:"admin"}},{path:"create-course",component:(Z=function(){function e(t,n,r,a){_classCallCheck(this,e),this.courseService=t,this.courseDetailsService=n,this.fb=r,this.router=a,this.labels=["name","description","seats","start_date","end_date"],this.submitted=!1,this.todayDate=null,this.startDateEvent=null,this.endDateEvent=null,this.startDateSelected=!1,this.endDateSelected=!1,this.courseForm=this.fb.group({name:["",c.o.required],description:["",c.o.required],seats:["",c.o.required],start_date:["",c.o.required],end_date:["",c.o.required]})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),r=e.getFullYear();this.todayDate=new Promise((function(e,c){e(n+"/"+t+"/"+r)}))}},{key:"addCourse",value:function(e,t,n,r,c){var a=this;this.submitted=!0,r=this.formatDate(r),console.log("going to submit start_date: "+r),c=this.formatDate(c),console.log("going to submit end_date: "+c),this.courseForm.valid&&this.courseService.addCourse(e,t,n,r,c).subscribe((function(e){a.courseDetailsService.createCourseDetails(e.id,"<p>Recommended inputs: Course Name, Instructor Name, Office (location/hours), Phone number, and email.</p>").subscribe((function(){console.log("course details created")})),a.router.navigate(["/admin"])}))}},{key:"onStartDateSelect",value:function(e){console.log("startDateSelected"),this.startDateEvent=new Promise((function(t,n){t(String(e.month).padStart(2,"0")+"/"+String(e.day).padStart(2,"0")+"/"+e.year)})),this.startDateSelected=!0}},{key:"onEndDateSelect",value:function(e){console.log("endDateSelected"),this.endDateEvent=new Promise((function(t,n){t(String(e.month).padStart(2,"0")+"/"+String(e.day).padStart(2,"0")+"/"+e.year)})),this.endDateSelected=!0}},{key:"formatDate",value:function(e){var t=new Date(e),n=String(t.getDate()).padStart(2,"0"),r=String(t.getMonth()+1).padStart(2,"0");return t.getFullYear()+"-"+r+"-"+n}},{key:"c",get:function(){return this.courseForm.controls}}]),e}(),Z.\u0275fac=function(e){return new(e||Z)(s.Pb(o.a),s.Pb(T.a),s.Pb(c.b),s.Pb(i.c))},Z.\u0275cmp=s.Jb({type:Z,selectors:[["app-create-course"]],decls:62,vars:31,consts:[[1,"center-form"],[1,"col-sm-4",3,"formGroup"],[1,"form-group"],["for","name"],[2,"color","red"],["type","text","formControlName","name","required","",1,"form-control",3,"ngClass"],["name",""],["class","invalid-feedback",4,"ngIf"],["for","description"],["formControlName","description","required","",1,"form-control",3,"ngClass"],["description",""],["for","seats"],["type","text","formControlName","seats","required","",1,"form-control",3,"ngClass"],["seats",""],["for","start_date"],[1,"input-group"],["name","dp","ngbDatepicker","","formControlName","start_date","readonly","","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d","ngbDatepicker","start_date",""],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","far","fa-calendar-alt",3,"click"],["data-provide","datepicker",1,"form-group"],["for","end_date"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","formControlName","end_date","readonly","","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d2","ngbDatepicker","end_date",""],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],["routerLink","/admin",1,"btn","btn-warning"],[1,"fas","fa-arrow-circle-left"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){if(1&e){var n=s.Vb();s.Ub(0,"div",0),s.Ub(1,"h2"),s.Ic(2,"Create New Course"),s.Tb(),s.Ub(3,"form",1),s.Ub(4,"div",2),s.Ub(5,"label",3),s.Ub(6,"span",4),s.Ic(7,"*"),s.Tb(),s.Ic(8,"Name"),s.Tb(),s.Qb(9,"input",5,6),s.Gc(11,S,2,1,"div",7),s.Tb(),s.Ub(12,"div",2),s.Ub(13,"label",8),s.Ub(14,"span",4),s.Ic(15,"*"),s.Tb(),s.Ic(16,"Description"),s.Tb(),s.Qb(17,"textarea",9,10),s.Gc(19,D,2,1,"div",7),s.Tb(),s.Ub(20,"div",2),s.Ub(21,"label",11),s.Ub(22,"span",4),s.Ic(23,"*"),s.Tb(),s.Ic(24,"Number of Seats"),s.Tb(),s.Qb(25,"input",12,13),s.Gc(27,_,2,1,"div",7),s.Tb(),s.Ub(28,"div",2),s.Ub(29,"label",14),s.Ub(30,"span",4),s.Ic(31,"*"),s.Tb(),s.Ic(32,"Start Date"),s.Tb(),s.Ub(33,"div",15),s.Ub(34,"input",16,17),s.gc("dateSelect",(function(e){return t.onStartDateSelect(e)})),s.jc(37,"async"),s.jc(38,"async"),s.Tb(),s.Ub(39,"div",18),s.Ub(40,"button",19),s.gc("click",(function(){return s.yc(n),s.wc(35).toggle()})),s.Tb(),s.Tb(),s.Gc(41,P,2,1,"div",7),s.Tb(),s.Tb(),s.Ub(42,"div",20),s.Ub(43,"label",21),s.Ub(44,"span",4),s.Ic(45,"*"),s.Tb(),s.Ic(46,"End Date"),s.Tb(),s.Ub(47,"div",15),s.Ub(48,"input",22,23),s.gc("dateSelect",(function(e){return t.onEndDateSelect(e)})),s.jc(51,"async"),s.jc(52,"async"),s.Tb(),s.Ub(53,"div",18),s.Ub(54,"button",19),s.gc("click",(function(){return s.yc(n),s.wc(49).toggle()})),s.Tb(),s.Tb(),s.Gc(55,E,2,1,"div",7),s.Tb(),s.Tb(),s.Ub(56,"button",24),s.gc("click",(function(){s.yc(n);var e=s.wc(10),r=s.wc(18),c=s.wc(26),a=s.wc(36),i=s.wc(50);return t.addCourse(e.value,r.value,c.value,a.value,i.value)})),s.Qb(57,"i",25),s.Ic(58," Create Course"),s.Tb(),s.Ub(59,"a",26),s.Qb(60,"i",27),s.Ic(61," Go Back"),s.Tb(),s.Tb(),s.Tb()}2&e&&(s.Cb(3),s.oc("formGroup",t.courseForm),s.Cb(6),s.oc("ngClass",s.sc(21,G,t.submitted&&t.c.name.errors)),s.Cb(2),s.oc("ngIf",t.submitted&&t.c.name.errors),s.Cb(6),s.oc("ngClass",s.sc(23,G,t.submitted&&t.c.description.errors)),s.Cb(2),s.oc("ngIf",t.submitted&&t.c.description.errors),s.Cb(6),s.oc("ngClass",s.sc(25,G,t.submitted&&t.c.seats.errors)),s.Cb(2),s.oc("ngIf",t.submitted&&t.c.seats.errors),s.Cb(7),s.oc("value",t.startDateSelected?s.kc(37,13,t.startDateEvent):s.kc(38,15,t.todayDate))("ngClass",s.sc(27,G,t.submitted&&t.c.start_date.errors)),s.Cb(7),s.oc("ngIf",t.submitted&&t.c.start_date.errors),s.Cb(7),s.oc("value",t.endDateSelected?s.kc(51,17,t.endDateEvent):s.kc(52,19,t.todayDate))("ngClass",s.sc(29,G,t.submitted&&t.c.end_date.errors)),s.Cb(7),s.oc("ngIf",t.submitted&&t.c.end_date.errors))},directives:[c.q,c.j,c.d,c.a,c.i,c.c,c.n,r.l,r.n,a.a,i.f],pipes:[r.b],styles:[""]}),Z),canActivate:[u.a],data:{expectedRole:"admin"}},{path:"edit-course/:id",component:(X=function(){function e(t,n,r,c){_classCallCheck(this,e),this.courseService=t,this.router=n,this.route=r,this.fb=c,this.submitted=!1,this.startDate=null,this.startDateSelected=!1,this.startDateEvent=null,this.endDate=null,this.endDateSelected=!1,this.endDateEvent=null,this.CreateForm()}return _createClass(e,[{key:"CreateForm",value:function(){this.updateForm=this.fb.group({name:["",c.o.required],description:["",c.o.required],seats:["",c.o.required],start_date:["",c.o.required],end_date:["",c.o.required]})}},{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.id=t.id,e.courseService.getCourseById(e.id).subscribe((function(t){e.course=t,e.hDateFormat(e.course),e.updateForm.get("name").setValue(e.course.name),e.updateForm.get("description").setValue(e.course.description),e.updateForm.get("seats").setValue(e.course.seats);var n=new Date(e.course.start_date.toString()),r=String(n.getDate()).padStart(2,"0"),c=String(n.getMonth()+1).padStart(2,"0"),a=n.getFullYear();e.startDate=new Promise((function(e,t){e(c+"/"+r+"/"+a)})),n=new Date(e.course.end_date.toString()),r=String(n.getDate()).padStart(2,"0"),c=String(n.getMonth()+1).padStart(2,"0"),a=n.getFullYear(),e.endDate=new Promise((function(e,t){e(c+"/"+r+"/"+a)}))}))}))}},{key:"updateCourse",value:function(e,t,n,r,c){var a=this;this.submitted=!0,r=this.formatDate(r),console.log("going to submit start_date: "+r),c=this.formatDate(c),console.log("going to submit end_date: "+c),this.updateForm.valid&&this.courseService.updateCourse(this.id,e,t,n,r,c).subscribe((function(e){a.router.navigate(["/admin"])}))}},{key:"hDateFormat",value:function(e){var t=new Date(e.start_date.toString()),n=new Date(e.end_date.toString());e.start_date=t.toLocaleDateString(),e.end_date=n.toLocaleDateString()}},{key:"formatDate",value:function(e){var t=new Date(e),n=String(t.getDate()).padStart(2,"0"),r=String(t.getMonth()+1).padStart(2,"0");return t.getFullYear()+"-"+r+"-"+n}},{key:"onStartDateSelect",value:function(e){this.startDateSelected=!0,this.startDateEvent=new Promise((function(t,n){t(String(e.month).padStart(2,"0")+"/"+String(e.day).padStart(2,"0")+"/"+e.year)}))}},{key:"onEndDateSelect",value:function(e){this.endDateSelected=!0,this.endDateEvent=new Promise((function(t,n){t(String(e.month).padStart(2,"0")+"/"+String(e.day).padStart(2,"0")+"/"+e.year)}))}},{key:"cu",get:function(){return this.updateForm.controls}}]),e}(),X.\u0275fac=function(e){return new(e||X)(s.Pb(o.a),s.Pb(i.c),s.Pb(i.a),s.Pb(c.b))},X.\u0275cmp=s.Jb({type:X,selectors:[["app-edit-course"]],decls:62,vars:32,consts:[[1,"center-form"],[1,"col-sm-4",3,"formGroup"],[1,"form-group"],["for","name"],[2,"color","red"],["type","text","formControlName","name","required","",1,"form-control",3,"ngClass"],["name",""],["class","invalid-feedback",4,"ngIf"],["for","description"],["formControlName","description","required","",1,"form-control",3,"ngClass"],["description",""],["for","seats"],["type","text","formControlName","seats","required","",1,"form-control",3,"ngClass"],["seats",""],["for","start_date"],[1,"input-group"],["type","text","placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","formControlName","start_date","readonly","","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d","ngbDatepicker","start_date",""],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","far","fa-calendar-alt",3,"click"],["for","end_date"],["type","text","placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","formControlName","end_date","readonly","","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d2","ngbDatepicker","end_date",""],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],["routerLink","/admin",1,"btn","btn-warning"],[1,"fas","fa-arrow-circle-left"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){if(1&e){var n=s.Vb();s.Ub(0,"div",0),s.Ub(1,"h2"),s.Ic(2),s.Tb(),s.Ub(3,"form",1),s.Ub(4,"div",2),s.Ub(5,"label",3),s.Ub(6,"span",4),s.Ic(7,"*"),s.Tb(),s.Ic(8,"Name"),s.Tb(),s.Qb(9,"input",5,6),s.Gc(11,x,2,1,"div",7),s.Tb(),s.Ub(12,"div",2),s.Ub(13,"label",8),s.Ub(14,"span",4),s.Ic(15,"*"),s.Tb(),s.Ic(16,"Description"),s.Tb(),s.Qb(17,"textarea",9,10),s.Gc(19,J,2,1,"div",7),s.Tb(),s.Ub(20,"div",2),s.Ub(21,"label",11),s.Ub(22,"span",4),s.Ic(23,"*"),s.Tb(),s.Ic(24,"Number of Seats"),s.Tb(),s.Qb(25,"input",12,13),s.Gc(27,A,2,1,"div",7),s.Tb(),s.Ub(28,"div",2),s.Ub(29,"label",14),s.Ub(30,"span",4),s.Ic(31,"*"),s.Tb(),s.Ic(32,"Start Date"),s.Tb(),s.Ub(33,"div",15),s.Ub(34,"input",16,17),s.gc("dateSelect",(function(e){return t.onStartDateSelect(e)})),s.jc(37,"async"),s.jc(38,"async"),s.Tb(),s.Ub(39,"div",18),s.Ub(40,"button",19),s.gc("click",(function(){return s.yc(n),s.wc(35).toggle()})),s.Tb(),s.Tb(),s.Gc(41,Q,2,1,"div",7),s.Tb(),s.Tb(),s.Ub(42,"div",2),s.Ub(43,"label",20),s.Ub(44,"span",4),s.Ic(45,"*"),s.Tb(),s.Ic(46,"End Date"),s.Tb(),s.Ub(47,"div",15),s.Ub(48,"input",21,22),s.gc("dateSelect",(function(e){return t.onEndDateSelect(e)})),s.jc(51,"async"),s.jc(52,"async"),s.Tb(),s.Ub(53,"div",18),s.Ub(54,"button",19),s.gc("click",(function(){return s.yc(n),s.wc(49).toggle()})),s.Tb(),s.Tb(),s.Gc(55,B,2,1,"div",7),s.Tb(),s.Tb(),s.Ub(56,"button",23),s.gc("click",(function(){s.yc(n);var e=s.wc(10),r=s.wc(18),c=s.wc(26),a=s.wc(36),i=s.wc(50);return t.updateCourse(e.value,r.value,c.value,a.value,i.value)})),s.Qb(57,"i",24),s.Ic(58," Update Course"),s.Tb(),s.Ub(59,"a",25),s.Qb(60,"i",26),s.Ic(61," Go Back"),s.Tb(),s.Tb(),s.Tb()}2&e&&(s.Cb(2),s.Kc("Edit Course ",t.id,""),s.Cb(1),s.oc("formGroup",t.updateForm),s.Cb(6),s.oc("ngClass",s.sc(22,L,t.submitted&&t.cu.name.errors)),s.Cb(2),s.oc("ngIf",t.submitted&&t.cu.name.errors),s.Cb(6),s.oc("ngClass",s.sc(24,L,t.submitted&&t.cu.description.errors)),s.Cb(2),s.oc("ngIf",t.submitted&&t.cu.description.errors),s.Cb(6),s.oc("ngClass",s.sc(26,L,t.submitted&&t.cu.seats.errors)),s.Cb(2),s.oc("ngIf",t.submitted&&t.cu.seats.errors),s.Cb(7),s.oc("value",t.startDateSelected?s.kc(37,14,t.startDateEvent):s.kc(38,16,t.startDate))("ngClass",s.sc(28,L,t.submitted&&t.cu.start_date.errors)),s.Cb(7),s.oc("ngIf",t.submitted&&t.cu.start_date.errors),s.Cb(7),s.oc("value",t.endDateSelected?s.kc(51,18,t.endDateEvent):s.kc(52,20,t.endDate))("ngClass",s.sc(30,L,t.submitted&&t.cu.end_date.errors)),s.Cb(7),s.oc("ngIf",t.submitted&&t.cu.end_date.errors))},directives:[c.q,c.j,c.d,c.a,c.i,c.c,c.n,r.l,r.n,a.a,i.f],pipes:[r.b],styles:[""]}),X),canActivate:[u.a],data:{expectedRole:"admin"}},{path:"pending-enrollment/:id",component:(H=function(){function e(t,n,r){_classCallCheck(this,e),this.studentCourseService=t,this.courseService=n,this.route=r,this.students=[],this.noSeats=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.id=t.id,e.courseService.getCourseById(e.id).subscribe((function(t){e.course=t,e.course.seats<1&&(e.noSeats=!0,console.log("no seats: "+e.noSeats)),console.log(e.course),e.noSeats||e.studentCourseService.getStudentsByCourseId(e.id).subscribe((function(t){e.students=t}))}))}))}},{key:"acceptEnrollment",value:function(e,t,n){var r=this;1==confirm("Accept student ".concat(e," enrollment?"))&&this.studentCourseService.acceptStudentEnrollment(e,t,n).subscribe((function(n){for(var c=0;c<r.students.length;c++)r.students[c].student_id===e&&r.students.splice(c,1);r.courseService.updateCourseSeats(t,r.course.seats-1).subscribe((function(){console.log("seats decremented by 1"),r.course.seats=r.course.seats-1}))}))}},{key:"declineEnrollment",value:function(e,t){var n=this;1==confirm("Decline student ".concat(e," enrollment?"))&&this.studentCourseService.declineStudentEnrollment(e,t).subscribe((function(t){for(var r=0;r<n.students.length;r++)n.students[r].student_id===e&&n.students.splice(r,1)}))}}]),e}(),H.\u0275fac=function(e){return new(e||H)(s.Pb(b.a),s.Pb(o.a),s.Pb(i.a))},H.\u0275cmp=s.Jb({type:H,selectors:[["app-pending-enrollment"]],decls:7,vars:3,consts:[[4,"ngIf"],["class","table",4,"ngIf","ngIfElse"],["elseBlock",""],["routerLink","/admin",1,"btn","btn-warning"],[1,"fas","fa-arrow-circle-left"],[2,"float","right"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"center-form"]],template:function(e,t){if(1&e&&(s.Gc(0,M,4,2,"h2",0),s.Gc(1,Y,15,1,"table",1),s.Gc(2,K,2,0,"ng-template",null,2,s.Hc),s.Ub(4,"a",3),s.Qb(5,"i",4),s.Ic(6," Go Back"),s.Tb()),2&e){var n=s.wc(3);s.oc("ngIf",t.course),s.Cb(1),s.oc("ngIf",!t.noSeats)("ngIfElse",n)}},directives:[r.n,i.f,r.m],styles:[""]}),H),canActivate:[u.a],data:{expectedRole:"admin"}}],ee=((z=function e(){_classCallCheck(this,e)}).\u0275mod=s.Nb({type:z}),z.\u0275inj=s.Mb({factory:function(e){return new(e||z)},imports:[[i.g.forChild(W)],i.g]}),z);n.d(t,"AdminModule",(function(){return ne}));var te,ne=((te=function e(){_classCallCheck(this,e)}).\u0275mod=s.Nb({type:te}),te.\u0275inj=s.Mb({factory:function(e){return new(e||te)},imports:[[r.c,ee,c.m,a.c]]}),te)}}]);