(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{BUtp:function(t,e,i){"use strict";i.r(e);var n=i("ofXK"),o=i("1kSV"),c=i("3Pt+"),s=i("zioG"),r=i("tyNb"),d=i("mrSG"),u=i("BOF4"),l=i.n(u),b=i("fXoL"),a=i("ZY/4"),f=i("Un6b"),p=i("y8gV");function m(t,e){if(1&t){const t=b.Vb();b.Ub(0,"button",16),b.gc("click",(function(){return b.xc(t),b.ic(4).toggleDropCourse()})),b.Hc(1,"Toggle Course Drop"),b.Tb()}}function g(t,e){if(1&t){const t=b.Vb();b.Ub(0,"button",17),b.gc("click",(function(){b.xc(t);const e=b.ic(2).$implicit;return b.ic(2).dropCourse(e.course_id)})),b.Hc(1,"Drop Course"),b.Tb()}}const h=function(t){return[t,"modules"]};function v(t,e){if(1&t&&(b.Sb(0),b.Fc(1,m,2,0,"button",7),b.Ub(2,"div",8),b.Ub(3,"div",9),b.Ub(4,"div",10),b.Ub(5,"h5",11),b.Hc(6),b.Tb(),b.Ub(7,"p",12),b.Hc(8),b.Tb(),b.Ub(9,"div",13),b.Ub(10,"a",14),b.Hc(11,"Go to Course"),b.Tb(),b.Fc(12,g,2,0,"button",15),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Rb()),2&t){const t=b.ic(),e=t.index,i=t.$implicit,n=b.ic(2);b.Cb(1),b.oc("ngIf",0==e),b.Cb(5),b.Ic(i.name),b.Cb(2),b.Ic(i.description),b.Cb(2),b.oc("routerLink",b.sc(5,h,i.course_id)),b.Cb(2),b.oc("ngIf",n.courseDrop)}}function U(t,e){if(1&t&&(b.Sb(0),b.Fc(1,v,13,7,"ng-container",6),b.Rb()),2&t){const t=e.$implicit;b.Cb(1),b.oc("ngIf","enrolled"==t.enrollment_status)}}function k(t,e){if(1&t&&(b.Sb(0),b.Ub(1,"div",4),b.Fc(2,U,2,1,"ng-container",5),b.jc(3,"async"),b.Tb(),b.Rb()),2&t){const t=b.ic();b.Cb(2),b.oc("ngForOf",b.kc(3,1,t.listCourses))}}function C(t,e){1&t&&(b.Ub(0,"p"),b.Hc(1,"You have no courses!"),b.Tb(),b.Ub(2,"label"),b.Hc(3,"Enroll in courses"),b.Tb(),b.Ub(4,"button",18),b.Hc(5,"Enroll"),b.Tb())}let y=(()=>{class t{constructor(t,e,i){this.studentCourseService=t,this.courseService=e,this.authService=i,this.courses=[],this.courseDrop=!1}ngOnInit(){this.currentStudent=this.authService.currentUserValue,this.currentStudent&&(this.tokenPayload=l()(this.currentStudent.token),this.studentId=this.tokenPayload.id,this.listCourses=this.studentCourseService.getCoursesByStudentId(this.studentId),console.log(this.studentId))}fetchStudentCourses(t){return new Promise((e,i)=>{this.studentCourseService.getCoursesByStudentId(t).subscribe(t=>{for(let n=0;n<t.length;n++)t[n]?("enrolled"==t[n].enrollment_status?(this.courses.push(t[n]),console.log("Enrolled"),console.log(t[n])):(console.log("Not enrolled"),console.log(t[n])),n==t.length&&(console.log("got data"),e(!0))):(console.log("got no data"),i(!1))},t=>{i(t),console.log("error: "+t)})}).then(t=>(console.log("resthen: "+t),!0)).catch(t=>(console.log("ERROR: "+t),!1))}asyncFetchStudentCourses(t){return Object(d.a)(this,void 0,void 0,(function*(){console.log("calling"),this.hasCourses=yield this.fetchStudentCourses(t),console.log("resasync: "+this.hasCourses)}))}dropCourse(t){this.courseService.getCourseById(t).subscribe(t=>{this.course=t}),confirm("Drop the course? Are you sure?")&&this.studentCourseService.declineStudentEnrollment(this.studentId,t).subscribe(()=>{alert("Dropped the course"),this.courseService.updateCourseSeats(t,this.course.seats+1).subscribe(()=>{console.log("incremented seats by 1: "+(this.course.seats+1))})})}toggleDropCourse(){this.courseDrop=0==this.courseDrop}}return t.\u0275fac=function(e){return new(e||t)(b.Pb(a.a),b.Pb(f.a),b.Pb(p.a))},t.\u0275cmp=b.Jb({type:t,selectors:[["app-dashboard"]],decls:7,vars:4,consts:[[1,"center-form",2,"position","relative"],[4,"ngIf","ngIfElse"],["class","center-form"],["elseBlock",""],[1,"row"],[4,"ngFor","ngForOf"],[4,"ngIf"],["type","button","class","btn btn-danger btn-sm center-form","style","position: absolute; top: 5px; left: 20px;",3,"click",4,"ngIf"],[1,"col"],[1,"card",2,"max-width","18rem"],[1,"card-body"],[1,"card-title","text-wrap",2,"word-wrap","break-word"],[1,"card-text","text-wrap",2,"word-wrap","break-word"],[1,"flex-container"],[1,"btn","btn-primary","flex-item",3,"routerLink"],["type","button","class","btn btn-danger btn-sm flex-item",3,"click",4,"ngIf"],["type","button",1,"btn","btn-danger","btn-sm","center-form",2,"position","absolute","top","5px","left","20px",3,"click"],["type","button",1,"btn","btn-danger","btn-sm","flex-item",3,"click"],["routerLink","../course-library",1,"btn","btn-primary",2,"margin-left","10px"]],template:function(t,e){if(1&t&&(b.Ub(0,"div",0),b.Ub(1,"h2"),b.Hc(2,"Dashboard"),b.Tb(),b.Fc(3,k,4,3,"ng-container",1),b.jc(4,"async"),b.Fc(5,C,6,0,"ng-template",2,3,b.Gc),b.Tb()),2&t){const t=b.wc(6);b.Cb(3),b.oc("ngIf",b.kc(4,2,e.listCourses))("ngIfElse",t)}},directives:[n.n,n.m,r.f,r.d],pipes:[n.b],styles:[".flex-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.flex-item[_ngcontent-%COMP%]{align-self:center;margin:10px}.card[_ngcontent-%COMP%]{transition:.7s;box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19)}.card[_ngcontent-%COMP%]:hover{transition:.7s;box-shadow:0 4px 8px 0 rgba(0,0,0,.8),0 6px 20px 0 rgba(0,0,0,.8)}"]}),t})();var x=i("+z1p"),T=i("rptU");const F=function(t){return["/courses",t]};let I=(()=>{class t{constructor(t){this.route=t}ngOnInit(){this.route.params.subscribe(t=>{this.courseId=t.id});var t,e=document.getElementsByClassName("dropdown-btn");for(t=0;t<e.length;t++)e[t].addEventListener("click",(function(){this.classList.toggle("active");var t=this.nextElementSibling;t.style.display="block"===t.style.display?"none":"block"}))}}return t.\u0275fac=function(e){return new(e||t)(b.Pb(r.a))},t.\u0275cmp=b.Jb({type:t,selectors:[["app-sidebar"]],decls:11,vars:5,consts:[["id","mySidenav",1,"sidenav"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],["routerLink","/courses","routerLinkActive","active",1,"nav-link"],["routerLink","/admin","routerLinkActive","active",1,"nav-link"]],template:function(t,e){1&t&&(b.Ub(0,"div",0),b.Ub(1,"a",1),b.Hc(2,"Home"),b.Tb(),b.Ub(3,"a",2),b.Hc(4,"Courses"),b.Tb(),b.Ub(5,"a",3),b.Hc(6,"Admin"),b.Tb(),b.Ub(7,"a",1),b.Hc(8,"Leaderboard"),b.Tb(),b.Ub(9,"a",1),b.Hc(10,"Modules"),b.Tb(),b.Tb()),2&t&&(b.Cb(1),b.oc("routerLink",b.sc(3,F,e.courseId)),b.Cb(6),b.qc("routerLink","/courses/",e.courseId,"/leaderboard"),b.Cb(2),b.qc("routerLink","/courses/",e.courseId,"/modules"))},directives:[r.f,r.e],styles:[".sidenav[_ngcontent-%COMP%]{height:100%;width:0;position:absolute;z-index:0;top:55px;left:0;background-color:#425efd;overflow-x:hidden;transition:.5s}.dropdown-btn[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px;text-decoration:none;font-size:25px;color:#000;display:block}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, dropdown-btn[_ngcontent-%COMP%]:hover{background-color:#2d3d97;color:#fff}#main[_ngcontent-%COMP%]{padding:16px}.dropdown-container[_ngcontent-%COMP%]{display:none;background-color:#262626;padding-left:8px}.fa-caret-down[_ngcontent-%COMP%]{float:right;padding-right:8px}@media screen and (max-height:450px){.sidenav[_ngcontent-%COMP%]{padding-top:15px}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px}}"]}),t})();function P(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",1),b.Ub(1,"span",2),b.gc("click",(function(){return b.xc(t),b.ic().openNav()})),b.Qb(2,"i",3),b.Tb(),b.Tb()}}function S(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",1),b.Ub(1,"span",2),b.gc("click",(function(){return b.xc(t),b.ic().closeNav()})),b.Qb(2,"i",4),b.Tb(),b.Tb()}}let w=(()=>{class t{constructor(){this.sidebarIsOpen=!1}ngOnInit(){}openNav(){document.getElementById("mySidenav").style.width="250px",document.getElementById("main").style.marginLeft="250px",document.getElementById("mySidenav").style.display="block",this.sidebarIsOpen=!0}closeNav(){document.getElementById("mySidenav").style.display="none",document.getElementById("mySidenav").style.width="0",document.getElementById("main").style.marginLeft="0",this.sidebarIsOpen=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=b.Jb({type:t,selectors:[["app-sidebar-button"]],decls:2,vars:2,consts:[["class","flexbox-row",4,"ngIf"],[1,"flexbox-row"],[1,"flexbox-side",2,"cursor","pointer",3,"click"],[1,"fas","fa-angle-double-right","fa-5x"],[1,"fas","fa-angle-double-left","fa-5x"]],template:function(t,e){1&t&&(b.Fc(0,P,3,0,"div",0),b.Fc(1,S,3,0,"div",0)),2&t&&(b.oc("ngIf",0==e.sidebarIsOpen),b.Cb(1),b.oc("ngIf",1==e.sidebarIsOpen))},directives:[n.n],styles:[""]}),t})();function H(t,e){if(1&t&&(b.Ub(0,"a",4),b.Hc(1,"Edit"),b.Tb()),2&t){const t=b.ic();b.qc("routerLink","/courses/",t.courseId,"/edit-home")}}function D(t,e){if(1&t&&(b.Sb(0),b.Qb(1,"div",5),b.Rb()),2&t){const t=e.ngIf;b.Cb(1),b.oc("innerHTML",t.content,b.yc)}}let _=(()=>{class t{constructor(t,e,i){this.courseDetailsService=t,this.route=e,this.authenticationService=i,this.Editor=x,this.isCleared=!1,this.authenticationService.currentUser.subscribe(t=>this.currentUser=t)}ngOnInit(){this.tokenPayload=l()(this.currentUser.token),this.isAdmin="admin"===this.tokenPayload.role,this.isInstructor="instructor"===this.tokenPayload.role,this.isStudent="student"===this.tokenPayload.role,this.route.params.subscribe(t=>{this.courseId=t.id}),this.courseContent=this.courseDetailsService.getCourseDetails(this.courseId),this.courseDetailsService.getCourseDetails(this.courseId).subscribe(t=>{this.courseDetails=t})}onReady(t){t.setData("")}onChange({editor:t}){this.editorData=t.getData(),this.isCleared&&(t.setData(""),this.isCleared=!1),console.log(this.editorData)}onSubmit(t){this.courseDetailsService.updateCourseDetails(t,this.editorData).subscribe(()=>{alert("Submitted Content")})}onClearButtonClicked(t){confirm("Clear content; Are you sure?")&&this.courseDetailsService.clearCourseDetails(t).subscribe(()=>{alert("Cleared Content"),this.isCleared=!0})}}return t.\u0275fac=function(e){return new(e||t)(b.Pb(T.a),b.Pb(r.a),b.Pb(p.a))},t.\u0275cmp=b.Jb({type:t,selectors:[["app-home"]],decls:7,vars:4,consts:[["id","main"],[1,"flexbox-row"],["class","btn btn-primary",3,"routerLink",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-primary",3,"routerLink"],[1,"custom-font",2,"margin-top","30px",3,"innerHTML"]],template:function(t,e){1&t&&(b.Qb(0,"app-sidebar"),b.Ub(1,"div",0),b.Qb(2,"app-sidebar-button"),b.Ub(3,"div",1),b.Fc(4,H,2,1,"a",2),b.Fc(5,D,2,1,"ng-container",3),b.jc(6,"async"),b.Tb(),b.Tb()),2&t&&(b.Cb(4),b.oc("ngIf",e.isAdmin||e.isInstructor),b.Cb(1),b.oc("ngIf",b.kc(6,2,e.courseContent)))},directives:[I,w,n.n,r.f],pipes:[n.b],styles:[".flexbox-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;align-items:center;position:relative;margin-top:30px}"]}),t})();var M=i("AytR"),L=i("tk/3");let $=(()=>{class t{constructor(t){this.http=t}addModule(t,e,i,n){return this.http.post(`${M.a.apiURL}/modules/${t}`,{number:e,title:i,lockedUntil:n})}getModuleById(t){return this.http.get(`${M.a.apiURL}/modules/m/${t}`)}getModulesByCourseId(t){return this.http.get(`${M.a.apiURL}/modules/c/${t}`)}updateModule(t,e,i,n){return this.http.put(`${M.a.apiURL}/modules/${t}`,{number:e,title:i,lockedUntil:n})}deleteModule(t){return this.http.delete(`${M.a.apiURL}/modules/${t}`)}}return t.\u0275fac=function(e){return new(e||t)(b.cc(L.b))},t.\u0275prov=b.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),V=(()=>{class t{constructor(t){this.http=t}addVideo(t,e){return this.http.post(`${M.a.apiURL}/videos`,{link:t,module_id:e})}fetchVideos(t){return this.http.get(`${M.a.apiURL}/videos/${t}`)}updateVideo(t,e){return this.http.put(`${M.a.apiURL}/videos/${e}`,{link:t})}deleteVideo(t){return this.http.delete(`${M.a.apiURL}/videos/${t}`)}}return t.\u0275fac=function(e){return new(e||t)(b.cc(L.b))},t.\u0275prov=b.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),O=(()=>{class t{constructor(t){this.http=t}addPDF(t){return this.http.post(`${M.a.apiURL}/pdfs`,t)}fetchPDFs(t){return this.http.get(`${M.a.apiURL}/pdfs/${t}`)}updatePDF(t,e){return this.http.put(`${M.a.apiURL}/pdfs/${t}`,e)}deletePDF(t){return this.http.delete(`${M.a.apiURL}/pdfs/${t}`)}}return t.\u0275fac=function(e){return new(e||t)(b.cc(L.b))},t.\u0275prov=b.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Q=(()=>{class t{constructor(t){this.http=t}addSurvey(t,e,i){return this.http.post(`${M.a.apiURL}/surveys`,{name:t,link:e,module_id:i})}fetchSurveys(t){return this.http.get(`${M.a.apiURL}/surveys/${t}`)}updateSurvey(t,e,i){return this.http.put(`${M.a.apiURL}/surveys/${i}`,{name:t,link:e})}deleteSurvey(t){return this.http.delete(`${M.a.apiURL}/surveys/${t}`)}}return t.\u0275fac=function(e){return new(e||t)(b.cc(L.b))},t.\u0275prov=b.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var A=i("jhN1");function q(t,e){if(1&t&&(b.Ub(0,"div",10),b.Hc(1),b.Tb()),2&t){const t=b.ic();b.Cb(1),b.Jc("",t.averagePoints.average,"%")}}function z(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div"),b.Ub(1,"button",11),b.gc("click",(function(){b.xc(t);const e=b.ic();return e.createModule(e.courseId)})),b.Qb(2,"i",12),b.Hc(3," Create Module"),b.Tb(),b.Tb()}}function E(t,e){if(1&t&&(b.Ub(0,"span",27),b.Hc(1),b.Tb()),2&t){const t=b.ic(2).$implicit;b.Cb(1),b.Jc("locked until: ",t.lockedUntil,"")}}function N(t,e){if(1&t&&(b.Ub(0,"span",29),b.Hc(1),b.Tb()),2&t){const t=b.ic(3).$implicit;b.Cb(1),b.Jc("locked until: ",t.lockedUntil,"")}}function R(t,e){if(1&t&&b.Fc(0,N,2,1,"span",28),2&t){const t=b.ic(3);b.oc("ngIf",t.isAdmin||t.isInstructor)}}function B(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"Link is required"),b.Tb())}function G(t,e){if(1&t&&(b.Ub(0,"div",48),b.Fc(1,B,2,0,"div",8),b.Tb()),2&t){const t=b.ic(4);b.Cb(1),b.oc("ngIf",t.v.link.errors.required)}}function J(t,e){1&t&&(b.Ub(0,"div",49),b.Hc(1," Valid youtube link "),b.Tb())}function j(t,e){1&t&&(b.Ub(0,"div",50),b.Hc(1," Invalid Youtube Link "),b.Tb())}function Y(t,e){if(1&t){const t=b.Vb();b.Ub(0,"button",51),b.gc("click",(function(){b.xc(t),b.ic();const e=b.wc(23),i=b.ic(2).$implicit;return b.ic().addVideo(e.value,i.module_id)})),b.Qb(1,"i",12),b.Hc(2," Add Video"),b.Tb()}}function K(t,e){if(1&t&&(b.Ub(0,"div",52),b.Hc(1),b.Tb()),2&t){const t=b.ic(4);b.Cb(1),b.Ic(t.error)}}const X=function(t,e){return{"is-invalid":t,"is-valid":e}};function W(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",30),b.Ub(1,"h4",31),b.Hc(2,"Add Youtube Video"),b.Tb(),b.Ub(3,"button",32),b.gc("click",(function(){return e.$implicit.dismiss("Cross click")})),b.Ub(4,"span",33),b.Hc(5,"\xd7"),b.Tb(),b.Tb(),b.Tb(),b.Ub(6,"div",34),b.Ub(7,"form",35),b.Ub(8,"div",36),b.Ub(9,"p"),b.Hc(10,"Valid youtube links are of the formats:"),b.Qb(11,"br"),b.Hc(12," https://youtu.be/*********** "),b.Qb(13,"br"),b.Hc(14,"And "),b.Qb(15,"br"),b.Hc(16,"https://www.youtube.com/watch?v=***********"),b.Tb(),b.Tb(),b.Ub(17,"div",37),b.Ub(18,"label",38),b.Ub(19,"span",29),b.Hc(20,"*"),b.Tb(),b.Hc(21,"Link"),b.Tb(),b.Ub(22,"input",39,40),b.gc("keyup",(function(e){return b.xc(t),b.ic(3).handleValidLink(e)})),b.Tb(),b.Fc(24,G,2,1,"div",41),b.Fc(25,J,2,0,"div",42),b.Tb(),b.Fc(26,j,2,0,"div",43),b.Fc(27,Y,3,0,"button",44),b.Fc(28,K,2,1,"div",45),b.Tb(),b.Tb(),b.Ub(29,"div",46),b.Ub(30,"button",47),b.gc("click",(function(){return e.$implicit.close("Close click")})),b.Hc(31,"Close"),b.Tb(),b.Tb()}if(2&t){const t=b.ic(3);b.Cb(7),b.oc("formGroup",t.videoForm),b.Cb(15),b.oc("ngClass",b.tc(7,X,t.submitted&&t.v.link.errors,t.validLink)),b.Cb(2),b.oc("ngIf",t.submitted&&t.v.link.errors),b.Cb(1),b.oc("ngIf",t.validLink),b.Cb(1),b.oc("ngIf",t.invalidLink&&!t.validLink),b.Cb(1),b.oc("ngIf",t.isAdmin||t.isInstructor),b.Cb(1),b.oc("ngIf",t.error)}}function Z(t,e){if(1&t){const t=b.Vb();b.Ub(0,"button",11),b.gc("click",(function(){b.xc(t),b.ic();const e=b.wc(6);return b.ic(2).open(e)})),b.Hc(1,"Add Video"),b.Tb()}}function tt(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"Pdf is required"),b.Tb())}function et(t,e){if(1&t&&(b.Ub(0,"div",48),b.Fc(1,tt,2,0,"div",8),b.Tb()),2&t){const t=b.ic(4);b.Cb(1),b.oc("ngIf",t.p.pdf.errors.required)}}const it=function(t){return{"is-invalid":t}};function nt(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",30),b.Ub(1,"h4",31),b.Hc(2,"Add PDF File"),b.Tb(),b.Ub(3,"button",32),b.gc("click",(function(){return e.$implicit.dismiss("Cross click")})),b.Ub(4,"span",33),b.Hc(5,"\xd7"),b.Tb(),b.Tb(),b.Tb(),b.Ub(6,"div",34),b.Ub(7,"form",53),b.gc("ngSubmit",(function(){b.xc(t);const e=b.ic(2).$implicit;return b.ic().addPdf(e.module_id)})),b.Ub(8,"div",37),b.Ub(9,"label",54),b.Ub(10,"span",29),b.Hc(11,"*"),b.Tb(),b.Hc(12,"Select a PDF File"),b.Tb(),b.Ub(13,"input",55,56),b.gc("change",(function(e){return b.xc(t),b.ic(3).handleFileInput(e)})),b.Tb(),b.Fc(15,et,2,1,"div",41),b.Tb(),b.Ub(16,"button",57),b.Qb(17,"i",12),b.Hc(18," Add PDF"),b.Tb(),b.Tb(),b.Tb(),b.Ub(19,"div",46),b.Ub(20,"button",47),b.gc("click",(function(){return e.$implicit.close("Close click")})),b.Hc(21,"Close"),b.Tb(),b.Tb()}if(2&t){const t=b.ic(3);b.Cb(7),b.oc("formGroup",t.pdfForm),b.Cb(6),b.oc("ngClass",b.sc(3,it,t.submitted&&t.p.pdf.errors)),b.Cb(2),b.oc("ngIf",t.submitted&&t.p.pdf.errors)}}function ot(t,e){if(1&t){const t=b.Vb();b.Ub(0,"button",11),b.gc("click",(function(){b.xc(t),b.ic();const e=b.wc(9);return b.ic(2).open(e)})),b.Hc(1,"Add PDF"),b.Tb()}}function ct(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"Name is required"),b.Tb())}function st(t,e){if(1&t&&(b.Ub(0,"div",48),b.Fc(1,ct,2,0,"div",8),b.Tb()),2&t){const t=b.ic(4);b.Cb(1),b.oc("ngIf",t.s.name.errors.required)}}function rt(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"Link is required"),b.Tb())}function dt(t,e){if(1&t&&(b.Ub(0,"div",48),b.Fc(1,rt,2,0,"div",8),b.Tb()),2&t){const t=b.ic(4);b.Cb(1),b.oc("ngIf",t.s.link.errors.required)}}function ut(t,e){1&t&&(b.Ub(0,"div",49),b.Hc(1," Valid Qualtrics link "),b.Tb())}function lt(t,e){1&t&&(b.Ub(0,"div",50),b.Hc(1," Invalid Qualtrics Link "),b.Tb())}function bt(t,e){if(1&t){const t=b.Vb();b.Ub(0,"button",51),b.gc("click",(function(){b.xc(t),b.ic();const e=b.wc(19),i=b.wc(27),n=b.ic(2).$implicit;return b.ic().addSurvey(e.value,i.value,n.module_id)})),b.Qb(1,"i",12),b.Hc(2," Add Quiz/Exam"),b.Tb()}}function at(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",30),b.Ub(1,"h4",31),b.Hc(2,"Add Qualtrics Quiz/Exam"),b.Tb(),b.Ub(3,"button",32),b.gc("click",(function(){return e.$implicit.dismiss("Cross click")})),b.Ub(4,"span",33),b.Hc(5,"\xd7"),b.Tb(),b.Tb(),b.Tb(),b.Ub(6,"div",34),b.Ub(7,"form",35),b.Ub(8,"div",36),b.Ub(9,"p"),b.Hc(10,"Valid Qualtrics links are of the formats:"),b.Qb(11,"br"),b.Hc(12," https://fiu.qualtrics.com/jfe/form/******************"),b.Tb(),b.Tb(),b.Ub(13,"div",37),b.Ub(14,"label",58),b.Ub(15,"span",29),b.Hc(16,"*"),b.Tb(),b.Hc(17,"Name"),b.Tb(),b.Qb(18,"input",59,60),b.Fc(20,st,2,1,"div",41),b.Tb(),b.Ub(21,"div",37),b.Ub(22,"label",38),b.Ub(23,"span",29),b.Hc(24,"*"),b.Tb(),b.Hc(25,"Link"),b.Tb(),b.Ub(26,"input",61,40),b.gc("keyup",(function(e){return b.xc(t),b.ic(3).handleValidQuiz(e)})),b.Tb(),b.Fc(28,dt,2,1,"div",41),b.Fc(29,ut,2,0,"div",42),b.Tb(),b.Fc(30,lt,2,0,"div",43),b.Fc(31,bt,3,0,"button",44),b.Tb(),b.Tb(),b.Ub(32,"div",46),b.Ub(33,"button",47),b.gc("click",(function(){return e.$implicit.close("Close click")})),b.Hc(34,"Close"),b.Tb(),b.Tb()}if(2&t){const t=b.ic(3);b.Cb(7),b.oc("formGroup",t.surveyForm),b.Cb(11),b.oc("ngClass",b.sc(8,it,t.submitted&&t.s.name.errors)),b.Cb(2),b.oc("ngIf",t.submitted&&t.s.name.errors),b.Cb(6),b.oc("ngClass",b.tc(10,X,t.submitted&&t.s.link.errors,t.validQuiz)),b.Cb(2),b.oc("ngIf",t.submitted&&t.s.link.errors),b.Cb(1),b.oc("ngIf",t.validQuiz),b.Cb(1),b.oc("ngIf",t.invalidQuiz&&!t.validQuiz),b.Cb(1),b.oc("ngIf",t.isAdmin||t.isInstructor)}}function ft(t,e){if(1&t){const t=b.Vb();b.Ub(0,"button",11),b.gc("click",(function(){b.xc(t),b.ic();const e=b.wc(12);return b.ic(2).open(e)})),b.Hc(1,"Add Quiz/Exam"),b.Tb()}}function pt(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",62),b.gc("click",(function(){b.xc(t);const e=b.ic(2).index;return b.ic().openModule(e)})),b.Qb(1,"i",63),b.Ub(2,"strong"),b.Hc(3),b.Tb(),b.Hc(4),b.Tb()}if(2&t){const t=b.ic(2).$implicit;b.Cb(3),b.Jc("Module ",t.module_number," "),b.Cb(1),b.Jc("| ",t.module_title," ")}}function mt(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",62),b.gc("click",(function(){b.xc(t);const e=b.ic(2).index;return b.ic().openModule(e)})),b.Qb(1,"i",64),b.Ub(2,"strong"),b.Hc(3),b.Tb(),b.Hc(4),b.Tb()}if(2&t){const t=b.ic(2).$implicit;b.Cb(3),b.Jc("Module ",t.module_number," "),b.Cb(1),b.Jc("| ",t.module_title," ")}}function gt(t,e){if(1&t&&(b.Ub(0,"div",30),b.Ub(1,"h4",31),b.Hc(2),b.Tb(),b.Ub(3,"button",32),b.gc("click",(function(){return e.$implicit.dismiss("Cross click")})),b.Ub(4,"span",33),b.Hc(5,"\xd7"),b.Tb(),b.Tb(),b.Tb(),b.Ub(6,"div",34),b.Ub(7,"div",77),b.Qb(8,"iframe",78),b.Tb(),b.Tb(),b.Ub(9,"div",46),b.Ub(10,"button",47),b.gc("click",(function(){return e.$implicit.close("Close click")})),b.Hc(11,"Close"),b.Tb(),b.Tb()),2&t){const t=b.ic(),e=t.index,i=t.$implicit,n=b.ic(5).$implicit;b.Cb(2),b.Kc("",n.module_title," - Pdf ",e+1,""),b.Cb(6),b.oc("src",i.pdf,b.zc)}}function ht(t,e){if(1&t){const t=b.Vb();b.Ub(0,"button",79),b.gc("click",(function(){b.xc(t);const e=b.ic(),i=e.$implicit,n=e.index;return b.ic(6).deletePDF(i.pdf_id,n)})),b.Hc(1,"Delete Pdf"),b.Tb()}}function vt(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"Pdf is required"),b.Tb())}function Ut(t,e){if(1&t&&(b.Ub(0,"div",48),b.Fc(1,vt,2,0,"div",8),b.Tb()),2&t){const t=b.ic(8);b.Cb(1),b.oc("ngIf",t.pu.pdf.errors.required)}}function kt(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",30),b.Ub(1,"h4",31),b.Hc(2,"Edit PDF"),b.Tb(),b.Ub(3,"button",32),b.gc("click",(function(){return e.$implicit.dismiss("Cross click")})),b.Ub(4,"span",33),b.Hc(5,"\xd7"),b.Tb(),b.Tb(),b.Tb(),b.Ub(6,"div",34),b.Ub(7,"form",53),b.gc("ngSubmit",(function(){b.xc(t);const e=b.ic().$implicit,i=b.ic(5).$implicit;return b.ic().updatePDF(e.pdf_id,i.module_id)})),b.Ub(8,"div",37),b.Ub(9,"label",54),b.Ub(10,"span",29),b.Hc(11,"*"),b.Tb(),b.Hc(12,"Select a PDF File"),b.Tb(),b.Ub(13,"input",55,56),b.gc("change",(function(e){return b.xc(t),b.ic(7).handleFileInputUpdate(e)})),b.Tb(),b.Fc(15,Ut,2,1,"div",41),b.Tb(),b.Ub(16,"button",57),b.Qb(17,"i",12),b.Hc(18," Update PDF"),b.Tb(),b.Tb(),b.Tb(),b.Ub(19,"div",46),b.Ub(20,"button",47),b.gc("click",(function(){return e.$implicit.close("Close click")})),b.Hc(21,"Close"),b.Tb(),b.Tb()}if(2&t){const t=b.ic(7);b.Cb(7),b.oc("formGroup",t.updatePdfForm),b.Cb(6),b.oc("ngClass",b.sc(3,it,t.submitted&&t.pu.pdf.errors)),b.Cb(2),b.oc("ngIf",t.submitted&&t.pu.pdf.errors)}}function Ct(t,e){if(1&t){const t=b.Vb();b.Ub(0,"button",80),b.gc("click",(function(){b.xc(t);const e=b.ic().$implicit,i=b.wc(8);return b.ic(6).openUpdatePDF(i,e.rawPdf)})),b.Hc(1,"Edit PDF"),b.Tb()}}function yt(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",70),b.Qb(1,"i",71),b.Fc(2,gt,12,3,"ng-template",null,72,b.Gc),b.Ub(4,"button",73),b.gc("click",(function(){b.xc(t);const e=b.wc(3);return b.ic(6).open(e)})),b.Hc(5),b.Tb(),b.Fc(6,ht,2,0,"button",74),b.Fc(7,kt,22,5,"ng-template",null,75,b.Gc),b.Fc(9,Ct,2,0,"button",76),b.Tb()}if(2&t){const t=e.index,i=b.ic(6);b.Cb(5),b.Jc("View Pdf ",t+1,""),b.Cb(1),b.oc("ngIf",i.isAdmin||i.isInstructor),b.Cb(3),b.oc("ngIf",i.isAdmin||i.isInstructor)}}function xt(t,e){if(1&t&&(b.Ub(0,"div"),b.Fc(1,yt,10,3,"div",69),b.Tb()),2&t){const t=b.ic().$implicit;b.Cb(1),b.oc("ngForOf",t.value)}}function Tt(t,e){if(1&t&&(b.Ub(0,"div",68),b.Fc(1,xt,2,1,"div",8),b.Tb()),2&t){const t=e.$implicit,i=b.ic(3).$implicit;b.Cb(1),b.oc("ngIf",t.key==i.module_id)}}function Ft(t,e){if(1&t&&(b.Ub(0,"div",30),b.Ub(1,"h4",31),b.Hc(2),b.Tb(),b.Ub(3,"button",32),b.gc("click",(function(){return e.$implicit.dismiss("Cross click")})),b.Ub(4,"span",33),b.Hc(5,"\xd7"),b.Tb(),b.Tb(),b.Tb(),b.Ub(6,"div",34),b.Ub(7,"div",77),b.Qb(8,"iframe",87),b.Tb(),b.Tb(),b.Ub(9,"div",46),b.Ub(10,"button",47),b.gc("click",(function(){return e.$implicit.close("Close click")})),b.Hc(11,"Close"),b.Tb(),b.Tb()),2&t){const t=b.ic(),e=t.index,i=t.$implicit,n=b.ic(5).$implicit;b.Cb(2),b.Kc("",n.module_title," - Video ",e+1,""),b.Cb(6),b.oc("src",i.videoUrl,b.zc)}}function It(t,e){if(1&t){const t=b.Vb();b.Ub(0,"button",79),b.gc("click",(function(){b.xc(t);const e=b.ic(),i=e.$implicit,n=e.index;return b.ic(6).deleteVideo(i.video_id,n)})),b.Hc(1,"Delete Video"),b.Tb()}}function Pt(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"Link is required"),b.Tb())}function St(t,e){if(1&t&&(b.Ub(0,"div",48),b.Fc(1,Pt,2,0,"div",8),b.Tb()),2&t){const t=b.ic(8);b.Cb(1),b.oc("ngIf",t.vu.linkInput.errors.required)}}function wt(t,e){1&t&&(b.Ub(0,"div",49),b.Hc(1," Valid youtube link "),b.Tb())}function Ht(t,e){1&t&&(b.Ub(0,"div",50),b.Hc(1," Invalid Youtube Link "),b.Tb())}function Dt(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",30),b.Ub(1,"h4",31),b.Hc(2,"Edit Youtube Video"),b.Tb(),b.Ub(3,"button",32),b.gc("click",(function(){return e.$implicit.dismiss("Cross click")})),b.Ub(4,"span",33),b.Hc(5,"\xd7"),b.Tb(),b.Tb(),b.Tb(),b.Ub(6,"div",34),b.Ub(7,"form",35),b.Ub(8,"div",36),b.Ub(9,"p"),b.Hc(10,"Valid youtube links are of the formats:"),b.Qb(11,"br"),b.Hc(12," https://youtu.be/*********** "),b.Qb(13,"br"),b.Hc(14,"And "),b.Qb(15,"br"),b.Hc(16,"https://www.youtube.com/watch?v=***********"),b.Tb(),b.Tb(),b.Ub(17,"div",37),b.Ub(18,"label",88),b.Ub(19,"span",29),b.Hc(20,"*"),b.Tb(),b.Hc(21,"New Link"),b.Tb(),b.Ub(22,"input",89,90),b.gc("keyup",(function(e){return b.xc(t),b.ic(7).handleValidLink(e)})),b.Tb(),b.Fc(24,St,2,1,"div",41),b.Fc(25,wt,2,0,"div",42),b.Tb(),b.Fc(26,Ht,2,0,"div",43),b.Ub(27,"button",51),b.gc("click",(function(){b.xc(t);const e=b.wc(23),i=b.ic().$implicit;return b.ic(6).updateVideo(e.value,i.video_id)})),b.Qb(28,"i",12),b.Hc(29," Update Video"),b.Tb(),b.Tb(),b.Tb(),b.Ub(30,"div",46),b.Ub(31,"button",47),b.gc("click",(function(){return e.$implicit.close("Close click")})),b.Hc(32,"Close"),b.Tb(),b.Tb()}if(2&t){const t=b.ic(7);b.Cb(7),b.oc("formGroup",t.updateVideoForm),b.Cb(15),b.oc("ngClass",b.tc(5,X,t.submitted&&t.vu.linkInput.errors,t.validLink)),b.Cb(2),b.oc("ngIf",t.submitted&&t.vu.linkInput.errors),b.Cb(1),b.oc("ngIf",t.validLink),b.Cb(1),b.oc("ngIf",t.invalidLink&&!t.validLink)}}function _t(t,e){if(1&t){const t=b.Vb();b.Ub(0,"button",80),b.gc("click",(function(){b.xc(t);const e=b.ic().$implicit,i=b.wc(8);return b.ic(6).openUpdateVideo(i,e.url)})),b.Hc(1,"Edit Video"),b.Tb()}}function Mt(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",83),b.Qb(1,"i",84),b.Fc(2,Ft,12,3,"ng-template",null,85,b.Gc),b.Ub(4,"button",73),b.gc("click",(function(){b.xc(t);const e=b.wc(3);return b.ic(6).open(e)})),b.Hc(5),b.Tb(),b.Fc(6,It,2,0,"button",74),b.Fc(7,Dt,33,8,"ng-template",null,86,b.Gc),b.Fc(9,_t,2,0,"button",76),b.Tb()}if(2&t){const t=e.index,i=b.ic(6);b.Cb(5),b.Jc("Watch Video ",t+1,""),b.Cb(1),b.oc("ngIf",i.isAdmin||i.isInstructor),b.Cb(3),b.oc("ngIf",i.isAdmin||i.isInstructor)}}function Lt(t,e){if(1&t&&(b.Ub(0,"div"),b.Fc(1,Mt,10,3,"div",82),b.Tb()),2&t){const t=b.ic().$implicit;b.Cb(1),b.oc("ngForOf",t.value)}}function $t(t,e){if(1&t&&(b.Ub(0,"div",81),b.Fc(1,Lt,2,1,"div",8),b.Tb()),2&t){const t=e.$implicit,i=b.ic(3).$implicit;b.Cb(1),b.oc("ngIf",t.key==i.module_id)}}function Vt(t,e){if(1&t&&(b.Ub(0,"div",30),b.Ub(1,"h4",31),b.Hc(2),b.Tb(),b.Ub(3,"button",32),b.gc("click",(function(){return e.$implicit.dismiss("Cross click")})),b.Ub(4,"span",33),b.Hc(5,"\xd7"),b.Tb(),b.Tb(),b.Tb(),b.Ub(6,"div",34),b.Ub(7,"div",77),b.Qb(8,"iframe",87),b.Tb(),b.Tb(),b.Ub(9,"div",46),b.Ub(10,"button",47),b.gc("click",(function(){return e.$implicit.close("Close click")})),b.Hc(11,"Close"),b.Tb(),b.Tb()),2&t){const t=b.ic().$implicit,e=b.ic(5).$implicit;b.Cb(2),b.Kc("",e.module_title," - ",t.name,""),b.Cb(6),b.oc("src",t.surveyUrl,b.zc)}}function Ot(t,e){if(1&t){const t=b.Vb();b.Ub(0,"button",79),b.gc("click",(function(){b.xc(t);const e=b.ic(),i=e.$implicit,n=e.index;return b.ic(6).deleteSurvey(i.survey_id,n)})),b.Hc(1,"Delete Quiz/Exam"),b.Tb()}}function Qt(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"Name is required"),b.Tb())}function At(t,e){if(1&t&&(b.Ub(0,"div",48),b.Fc(1,Qt,2,0,"div",8),b.Tb()),2&t){const t=b.ic(8);b.Cb(1),b.oc("ngIf",t.su.name.errors.required)}}function qt(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"Link is required"),b.Tb())}function zt(t,e){if(1&t&&(b.Ub(0,"div",48),b.Fc(1,qt,2,0,"div",8),b.Tb()),2&t){const t=b.ic(8);b.Cb(1),b.oc("ngIf",t.su.link.errors.required)}}function Et(t,e){1&t&&(b.Ub(0,"div",49),b.Hc(1," Valid Qualtrics link "),b.Tb())}function Nt(t,e){1&t&&(b.Ub(0,"div",50),b.Hc(1," Invalid Qualtrics Link "),b.Tb())}function Rt(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",30),b.Ub(1,"h4",31),b.Hc(2,"Edit Quiz/Exam"),b.Tb(),b.Ub(3,"button",32),b.gc("click",(function(){return e.$implicit.dismiss("Cross click")})),b.Ub(4,"span",33),b.Hc(5,"\xd7"),b.Tb(),b.Tb(),b.Tb(),b.Ub(6,"div",34),b.Ub(7,"form",35),b.Ub(8,"div",36),b.Ub(9,"p"),b.Hc(10,"Valid Qualtrics links are of the formats:"),b.Qb(11,"br"),b.Hc(12," https://fiu.qualtrics.com/jfe/form/******************"),b.Tb(),b.Tb(),b.Ub(13,"div",37),b.Ub(14,"label",58),b.Ub(15,"span",29),b.Hc(16,"*"),b.Tb(),b.Hc(17,"New Name"),b.Tb(),b.Qb(18,"input",94,60),b.Fc(20,At,2,1,"div",41),b.Tb(),b.Ub(21,"div",37),b.Ub(22,"label",38),b.Ub(23,"span",29),b.Hc(24,"*"),b.Tb(),b.Hc(25,"New Link"),b.Tb(),b.Ub(26,"input",95,40),b.gc("keyup",(function(e){return b.xc(t),b.ic(7).handleValidQuiz(e)})),b.Tb(),b.Fc(28,zt,2,1,"div",41),b.Fc(29,Et,2,0,"div",42),b.Tb(),b.Fc(30,Nt,2,0,"div",43),b.Ub(31,"button",51),b.gc("click",(function(){b.xc(t);const e=b.wc(19),i=b.wc(27),n=b.ic().$implicit;return b.ic(6).updateSurvey(e.value,i.value,n.survey_id)})),b.Qb(32,"i",12),b.Hc(33," Update Quiz/Exam"),b.Tb(),b.Tb(),b.Tb(),b.Ub(34,"div",46),b.Ub(35,"button",47),b.gc("click",(function(){return e.$implicit.close("Close click")})),b.Hc(36,"Close"),b.Tb(),b.Tb()}if(2&t){const t=b.ic(7);b.Cb(7),b.oc("formGroup",t.updateSurveyForm),b.Cb(11),b.oc("ngClass",b.sc(7,it,t.submitted&&t.su.name.errors)),b.Cb(2),b.oc("ngIf",t.submitted&&t.su.name.errors),b.Cb(6),b.oc("ngClass",b.tc(9,X,t.submitted&&t.su.link.errors,t.validQuiz)),b.Cb(2),b.oc("ngIf",t.submitted&&t.su.link.errors),b.Cb(1),b.oc("ngIf",t.validQuiz),b.Cb(1),b.oc("ngIf",t.invalidQuiz&&!t.validQuiz)}}function Bt(t,e){if(1&t){const t=b.Vb();b.Ub(0,"button",80),b.gc("click",(function(){b.xc(t);const e=b.ic().$implicit,i=b.wc(8);return b.ic(6).openUpdateSurvey(i,e.name,e.url)})),b.Hc(1,"Edit Quiz/Exam"),b.Tb()}}function Gt(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",83),b.Qb(1,"i",91),b.Fc(2,Vt,12,3,"ng-template",null,92,b.Gc),b.Ub(4,"button",73),b.gc("click",(function(){b.xc(t);const e=b.wc(3);return b.ic(6).open(e)})),b.Hc(5),b.Tb(),b.Fc(6,Ot,2,0,"button",74),b.Fc(7,Rt,37,12,"ng-template",null,93,b.Gc),b.Fc(9,Bt,2,0,"button",76),b.Tb()}if(2&t){const t=e.index,i=b.ic(6);b.Cb(5),b.Jc("Take Quiz ",t+1,""),b.Cb(1),b.oc("ngIf",i.isAdmin||i.isInstructor),b.Cb(3),b.oc("ngIf",i.isAdmin||i.isInstructor)}}function Jt(t,e){if(1&t&&(b.Ub(0,"div"),b.Fc(1,Gt,10,3,"div",82),b.Tb()),2&t){const t=b.ic().$implicit;b.Cb(1),b.oc("ngForOf",t.value)}}function jt(t,e){if(1&t&&(b.Ub(0,"div",81),b.Fc(1,Jt,2,1,"div",8),b.Tb()),2&t){const t=e.$implicit,i=b.ic(3).$implicit;b.Cb(1),b.oc("ngIf",t.key==i.module_id)}}function Yt(t,e){if(1&t&&(b.Ub(0,"div",65),b.Fc(1,Tt,2,1,"div",66),b.jc(2,"keyvalue"),b.Fc(3,$t,2,1,"div",67),b.jc(4,"keyvalue"),b.Fc(5,jt,2,1,"div",67),b.jc(6,"keyvalue"),b.Tb()),2&t){const t=b.ic(3);b.Cb(1),b.oc("ngForOf",b.kc(2,3,t.safePdfs)),b.Cb(2),b.oc("ngForOf",b.kc(4,5,t.safeLinks)),b.Cb(2),b.oc("ngForOf",b.kc(6,7,t.safeSurveys))}}function Kt(t,e){if(1&t){const t=b.Vb();b.Ub(0,"button",99),b.gc("click",(function(){b.xc(t);const e=b.ic(3).$implicit;return b.ic().editModule(e.course_id,e.module_id)})),b.Qb(1,"i",101),b.Hc(2," Edit"),b.Tb()}}function Xt(t,e){if(1&t){const t=b.Vb();b.Ub(0,"button",102),b.gc("click",(function(){b.xc(t);const e=b.ic(3).$implicit;return b.ic().deleteModule(e.module_id,e.module_number)})),b.Qb(1,"i",103),b.Hc(2," Delete"),b.Tb()}}function Wt(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",96),b.Fc(1,Kt,3,0,"button",97),b.Fc(2,Xt,3,0,"button",98),b.Ub(3,"button",99),b.gc("click",(function(){b.xc(t);const e=b.ic(2).$implicit;return b.ic().viewDiscussion(e.course_id,e.module_id)})),b.Qb(4,"i",100),b.Hc(5," View Discussion"),b.Tb(),b.Tb()}if(2&t){const t=b.ic(3);b.Cb(1),b.oc("ngIf",t.isAdmin||t.isInstructor),b.Cb(1),b.oc("ngIf",t.isAdmin||t.isInstructor)}}function Zt(t,e){if(1&t&&(b.Sb(0),b.Fc(1,E,2,1,"span",16),b.Fc(2,R,1,1,"ng-template",null,17,b.Gc),b.Ub(4,"div",18),b.Fc(5,W,32,10,"ng-template",null,19,b.Gc),b.Fc(7,Z,2,0,"button",20),b.Fc(8,nt,22,5,"ng-template",null,21,b.Gc),b.Fc(10,ot,2,0,"button",20),b.Fc(11,at,35,13,"ng-template",null,22,b.Gc),b.Fc(13,ft,2,0,"button",20),b.Tb(),b.Fc(14,pt,5,2,"div",23),b.Fc(15,mt,5,2,"ng-template",null,24,b.Gc),b.Fc(17,Yt,7,9,"div",25),b.Fc(18,Wt,6,2,"div",26),b.Rb()),2&t){const t=b.wc(3),e=b.wc(16),i=b.ic().index,n=b.ic();b.Cb(1),b.oc("ngIf",!n.moduleLocked[i]&&(n.isAdmin||n.isInstructor))("ngIfElse",t),b.Cb(6),b.oc("ngIf",n.isAdmin||n.isInstructor),b.Cb(3),b.oc("ngIf",n.isAdmin||n.isInstructor),b.Cb(3),b.oc("ngIf",n.isAdmin||n.isInstructor),b.Cb(1),b.oc("ngIf",!n.toggleContent[i])("ngIfElse",e),b.Cb(3),b.oc("ngIf",n.toggleContent[i]),b.Cb(1),b.oc("ngIf",n.currentUser)}}function te(t,e){if(1&t){const t=b.Vb();b.Ub(0,"span",29),b.Hc(1),b.Tb(),b.Ub(2,"div",104),b.gc("click",(function(){b.xc(t);const e=b.ic().index;return b.ic().openModule(e)})),b.Qb(3,"i",63),b.Ub(4,"strong"),b.Hc(5),b.Tb(),b.Hc(6),b.Tb()}if(2&t){const t=b.ic().$implicit;b.Cb(1),b.Jc("locked until: ",t.lockedUntil,""),b.Cb(4),b.Jc("Module ",t.module_number," "),b.Cb(1),b.Jc("| ",t.module_title," ")}}function ee(t,e){if(1&t&&(b.Ub(0,"div",13),b.Fc(1,Zt,19,9,"ng-container",14),b.Fc(2,te,7,3,"ng-template",null,15,b.Gc),b.Tb()),2&t){const t=e.index,i=b.wc(3),n=b.ic();b.Cb(1),b.oc("ngIf",!n.moduleLocked[t]||n.isAdmin||n.isInstructor)("ngIfElse",i)}}let ie=(()=>{class t{constructor(t,e,i,n,o,c,s,r,d,u,l){this.moduleService=t,this.videoService=e,this.pdfService=i,this.surveyService=n,this.authenticationService=o,this.studentCourseService=c,this.fb=s,this.router=r,this.route=d,this.sanitizer=u,this.modalService=l,this.modules=[],this.moduleLocked=[],this.linksFromDB=new Array,this.links=new Array,this.safeLinks=new Map,this.pdfsFromDB=new Array,this.pdfs=new Array,this.safePdfs=new Map,this.surveysFromDB=new Array,this.surveys=new Array,this.safeSurveys=new Map,this.resources=["pdf1","pdf2","worddoc1"],this.quizzes=["quiz1","quiz2","quiz3"],this.toggleContent=[],this.moduleVideosFetched=[],this.modulePDFsFetched=[],this.moduleSurveysFetched=[],this.submitted=!1,this.error="",this.invalidLink=!1,this.validLink=!1,this.invalidQuiz=!1,this.validQuiz=!1,this.fileToUpload=null,this.contentObject={course_id:0,course_name:"",module_id:0,module_number:0,module_title:"",lockedUntil:"",link:""},this.authenticationService.currentUser.subscribe(t=>this.currentUser=t),this.makeForms()}ngOnInit(){this.route.params.subscribe(t=>{this.courseId=t.id,console.log("param id is: "+t.id)}),this.currentUser&&(this.todayDate=new Date,this.tokenPayload=l()(this.currentUser.token),this.isAdmin="admin"===this.tokenPayload.role,this.isInstructor="instructor"===this.tokenPayload.role,this.isStudent="student"===this.tokenPayload.role,this.fetchModules(this.courseId),this.getAvgStudentPoints(this.courseId,this.tokenPayload.id),this.waitForProgressBar(),this.studentCourseService.getStudentsByCourseId(this.courseId).subscribe(t=>{t.forEach((t,e,i)=>{t.student_id==this.tokenPayload.id&&(this.points=t.points,console.log("Points: "+this.points),document.getElementById("progressbar").style.width=this.points+"%")})}))}waitForProgressBar(){console.log("waiting for progress bar"),document.getElementById("progressbarAvg")?document.getElementById("progressbarAvg").style.width=this.averagePoints.average+"%":setTimeout(()=>{this.waitForProgressBar()},1e3)}makeForms(){this.videoForm=this.fb.group({link:["",c.m.required]}),this.updateVideoForm=this.fb.group({linkInput:["",c.m.required]}),this.pdfForm=this.fb.group({pdf:["",c.m.required]}),this.updatePdfForm=this.fb.group({pdf:["",c.m.required]}),this.surveyForm=this.fb.group({name:["",c.m.required],link:["",c.m.required]}),this.updateSurveyForm=this.fb.group({name:["",c.m.required],link:["",c.m.required]})}get v(){return this.videoForm.controls}get p(){return this.pdfForm.controls}get s(){return this.surveyForm.controls}get vu(){return this.updateVideoForm.controls}get pu(){return this.updatePdfForm.controls}get su(){return this.updateSurveyForm.controls}pushLinksToArray(t,e){t.forEach(t=>{e.push({link:t.link,module_id:t.module_id,video_id:t.video_id})})}updateVideoUrl(t,e){t.forEach(t=>{if(t.module_id===e){this.moduleVideosFetched[e]=!0;let i,n,o,c=t.link.length;c>=43?i=t.link.substring(32,43):28==c&&(i=t.link.substring(17,28));let s={};o="https://www.youtube.com/embed/"+i,n=this.sanitizer.bypassSecurityTrustResourceUrl(o),s={videoUrl:n,video_id:t.video_id,url:t.link},this.safeLinks.get(e)?this.safeLinks.get(e).push(s):this.safeLinks.set(e,[s])}})}pushPDFsToArray(t,e){t.forEach(t=>{let i=Uint8Array.from(t.pdf.data),n=new Blob([i.buffer],{type:"application/pdf"});e.push({module_id:t.module_id,pdf_id:t.pdf_id,pdf:n})})}updatePdfData(t,e){t.forEach(t=>{if(t.module_id===e){this.modulePDFsFetched[e]=!0;let i,n={},o=URL.createObjectURL(t.pdf);i=this.sanitizer.bypassSecurityTrustResourceUrl(o),n={pdf_id:t.pdf_id,pdf:i,rawPdf:t.pdf},this.safePdfs.get(e)?this.safePdfs.get(e).push(n):this.safePdfs.set(e,[n])}})}pushSurveysToArray(t,e){t.forEach(t=>{e.push({name:t.survey_name,link:t.link,module_id:t.module_id,survey_id:t.survey_id})})}updateSurveyUrl(t,e){t.forEach(t=>{if(t.module_id===e){let i;this.moduleSurveysFetched[e]=!0,i=this.sanitizer.bypassSecurityTrustResourceUrl(t.link);let n={surveyUrl:i,survey_id:t.survey_id,name:t.name,url:t.link};this.safeSurveys.get(e)?this.safeSurveys.get(e).push(n):this.safeSurveys.set(e,[n])}})}open(t){this.submitted=!1,this.invalidLink=!1,this.invalidQuiz=!1,this.validLink=!1,this.invalidQuiz=!1,this.modalService.open(t,{size:"lg",centered:!0})}openModule(t){this.toggleContent[t]=!this.toggleContent[t]}openUpdateVideo(t,e){this.submitted=!1,this.invalidLink=!1,this.validLink=!1,this.modalService.open(t,{size:"lg",centered:!0}),this.updateVideoForm.get("linkInput").setValue(e)}openUpdatePDF(t,e){this.submitted=!1,this.modalService.open(t,{size:"lg",centered:!0}),console.log("The updatePDF: "+e)}openUpdateSurvey(t,e,i){this.submitted=!1,this.invalidQuiz=!1,this.validQuiz=!1,this.modalService.open(t,{size:"lg",centered:!0}),this.updateSurveyForm.get("name").setValue(e),this.updateSurveyForm.get("link").setValue(i)}getAvgStudentPoints(t,e){console.log("Called avgstudentpoints on student_id: "+e),this.studentCourseService.getAvgStudentPoints(t,e).subscribe(t=>{this.averagePoints=t,console.log("avg: "+JSON.stringify(t)),this.averagePoints.average=this.toFixed(this.averagePoints.average,2)})}toFixed(t,e){var i=Math.pow(10,e||0);return String(Math.round(t*i)/i)}viewDiscussion(t,e){this.router.navigate([`courses/${t}/discussion/${e}`])}createModule(t){this.router.navigate([`courses/${t}/create-module`])}fetchModules(t){this.moduleService.getModulesByCourseId(t).subscribe(e=>{e.forEach((t,e,i)=>{let n=new Date(t.lockedUntil),o=String(n.getDate()+1).padStart(2,"0"),c=String(n.getMonth()+1).padStart(2,"0")+"/"+o+"/"+n.getFullYear();this.moduleLocked[e]=!1,this.todayDate<n&&(this.moduleLocked[e]=!0),t.lockedUntil=c}),this.modules=e,this.fetchVideos(t,e),this.fetchPdfs(t,e),this.fetchSurveys(t,e)})}editModule(t,e){this.router.navigate([`courses/${t}/edit-module/${e}`])}deleteModule(t,e){if(1==confirm(`Delete Module ${e}: Are you sure?`)){this.moduleService.deleteModule(t).subscribe(()=>{console.log("Deleted module "+t)});const e=this.modules.find(e=>e.id===t);this.modules.splice(this.modules.indexOf(e))}}handleValidLink(t){let e=t.target.value,i=!1,n=e.length;e.includes("https://www.youtube.com/watch?v=")||e.includes("https://youtu.be/")?(console.log("Includes youtube link"),i=!0):i=!1,(28==n||n>=43)&&i?(this.validLink=!0,this.invalidLink=!1):this.validLink=!1}addVideo(t,e){this.submitted=!0,this.videoForm.invalid||(this.validLink?this.videoService.addVideo(t,e).subscribe(t=>{alert("Added video")},t=>{this.error=t}):this.invalidLink=!0)}updateVideo(t,e){this.submitted=!0,this.updateVideoForm.invalid||(this.validLink?this.videoService.updateVideo(t,e).subscribe(()=>{alert("Updated video")}):this.invalidLink=!0)}deleteVideo(t,e){confirm("Delete video "+(e+1)+": Are you sure?")&&this.videoService.deleteVideo(t).subscribe(()=>{alert("Deleted video")})}fetchVideos(t,e){console.log("Fetching videos: "+t),this.videoService.fetchVideos(t).subscribe(t=>{this.linksFromDB=t,this.pushLinksToArray(t,this.links),e.forEach((e,i,n)=>{let o=e;for(let c=0;c<t.length;c++){let e=t[c];if(e.module_id==o.module_id){if(1==this.moduleVideosFetched[e.module_id]){console.log("Modules videos fetched true");break}this.updateVideoUrl(this.links,e.module_id)}}})})}handleFileInput(t){if(t.target.files.length>0){const e=t.target.files[0];this.pdfForm.get("pdf").setValue(e)}}handleFileInputUpdate(t){if(t.target.files.length>0){const e=t.target.files[0];this.updatePdfForm.get("pdf").setValue(e)}}addPdf(t){if(this.submitted=!0,this.pdfForm.invalid)return;const e=new FormData;e.append("fileKey",this.pdfForm.get("pdf").value),e.append("fileKey",t),this.pdfService.addPDF(e).subscribe(t=>{console.log(t),alert("Added PDF!")},t=>{console.log(t),this.error=t})}fetchPdfs(t,e){console.log("Fetching pdfs: "+t),this.pdfService.fetchPDFs(t).subscribe(t=>{this.pdfsFromDB=t,this.pushPDFsToArray(t,this.pdfs),e.forEach((e,i,n)=>{let o=e;for(let c=0;c<t.length;c++){let e=t[c];if(e.module_id==o.module_id){if(1==this.modulePDFsFetched[e.module_id]){console.log("Modules pdfs fetched true");break}this.updatePdfData(this.pdfs,e.module_id)}}})})}updatePDF(t,e){if(this.submitted=!0,this.updatePdfForm.invalid)return;const i=new FormData;i.append("fileKey",this.updatePdfForm.get("pdf").value),i.append("fileKey",e),this.pdfService.updatePDF(t,i).subscribe(()=>{alert("Updated pdf")})}deletePDF(t,e){confirm("Delete PDF "+(e+1)+": Are you sure?")&&this.pdfService.deletePDF(t).subscribe(()=>{alert("Deleted pdf")})}handleValidQuiz(t){let e=t.target.value,i=e.length,n=!1;n=!!e.includes("https://fiu.qualtrics.com/jfe/form/"),53==i&&n?(this.validQuiz=!0,this.invalidQuiz=!1):this.validQuiz=!1}addSurvey(t,e,i){this.submitted=!0,this.surveyForm.invalid||(this.validQuiz?this.surveyService.addSurvey(t,e,i).subscribe(()=>{alert("Added survey")}):this.invalidQuiz=!0)}fetchSurveys(t,e){console.log("Fetching surveys: "+t),this.surveyService.fetchSurveys(t).subscribe(t=>{this.surveysFromDB=t,this.pushSurveysToArray(t,this.surveys),e.forEach(e=>{let i=e;for(let n=0;n<t.length;n++){let e=t[n];if(e.module_id==i.module_id){if(1==this.moduleSurveysFetched[e.module_id]){console.log("Modules surveys fetched true");break}this.updateSurveyUrl(this.surveys,e.module_id)}}})})}updateSurvey(t,e,i){this.submitted=!0,this.updateSurveyForm.invalid||(this.validQuiz?this.surveyService.updateSurvey(t,e,i).subscribe(()=>{alert("Updated Quiz/Exam")}):this.invalidQuiz=!0)}deleteSurvey(t,e){confirm("Delete Quiz/Exam "+(e+1)+": Are you sure?")&&this.surveyService.deleteSurvey(t).subscribe(()=>{alert("Deleted Quiz/Exam")})}}return t.\u0275fac=function(e){return new(e||t)(b.Pb($),b.Pb(V),b.Pb(O),b.Pb(Q),b.Pb(p.a),b.Pb(a.a),b.Pb(c.b),b.Pb(r.c),b.Pb(r.a),b.Pb(A.b),b.Pb(o.b))},t.\u0275cmp=b.Jb({type:t,selectors:[["app-modules"]],decls:18,vars:4,consts:[["id","main"],[1,"flexbox-row"],[1,"flexbox-top-container"],[1,"align-self-stretch"],[1,"progress","flexbox-progress-bar","flexbox-top-options",2,"height","30px"],["id","progressbar","role","progressbar","aria-valuenow","10","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped",2,"width","10%"],[2,"align-self","stretch"],["class","progress-bar progress-bar-striped bg-info","id","progressbarAvg","role","progressbar","style","width: 10%","aria-valuenow","10","aria-valuemin","0","aria-valuemax","100",4,"ngIf"],[4,"ngIf"],["class","flexbox-container",4,"ngFor","ngForOf"],["id","progressbarAvg","role","progressbar","aria-valuenow","10","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","bg-info",2,"width","10%"],[1,"btn","btn-success",3,"click"],[1,"fas","fa-plus-circle"],[1,"flexbox-container"],[4,"ngIf","ngIfElse"],["lockedBlock",""],["style","color: blue;",4,"ngIf","ngIfElse"],["lockedBlock0",""],[1,"flexbox-options"],["contentVideoAdd",""],["class","btn btn-success",3,"click",4,"ngIf"],["contentPdfAdd",""],["contentSurveyAdd",""],["class","flexbox-item","style","cursor:pointer",3,"click",4,"ngIf","ngIfElse"],["moduleBlock",""],["class","flexbox-subcontainer",4,"ngIf"],["class","flexbox-item-module-actions",4,"ngIf"],[2,"color","blue"],["style","color: red",4,"ngIf"],[2,"color","red"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-9",3,"formGroup"],[1,"alert","alert-info"],[1,"form-group"],["for","link"],["type","text","required","","formControlName","link",1,"form-control",3,"ngClass","keyup"],["link",""],["class","invalid-feedback",4,"ngIf"],["class","valid-feedback",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["type","submit","class","btn btn-primary",3,"click",4,"ngIf"],["class","alert alert-danger mt-3 mb-0",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],[1,"invalid-feedback"],[1,"valid-feedback"],[1,"alert","alert-danger"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"alert","alert-danger","mt-3","mb-0"],["method","POST","enctype","multipart/form-data",1,"col-9",3,"formGroup","ngSubmit"],["for","pdf"],["id","theFile","type","file","name","pdf","required","",1,"form-control",3,"ngClass","change"],["file",""],["type","submit",1,"btn","btn-primary"],["for","name"],["type","text","formControlName","name","required","",1,"form-control",3,"ngClass"],["name",""],["type","text","formControlName","link","required","",1,"form-control",3,"ngClass","keyup"],[1,"flexbox-item",2,"cursor","pointer",3,"click"],[1,"fas","fa-caret-right"],[1,"fas","fa-caret-down"],[1,"flexbox-subcontainer"],["class","flexbox-resources",4,"ngFor","ngForOf"],["class","flexbox-links",4,"ngFor","ngForOf"],[1,"flexbox-resources"],["class","flexbox-resources-inner",4,"ngFor","ngForOf"],[1,"flexbox-resources-inner"],[1,"fas","fa-paperclip"],["contentPdf",""],[1,"btn","btn-primary",3,"click"],["class","btn btn-danger flexbox-module-options",3,"click",4,"ngIf"],["contentPdfUpdate",""],["class","btn btn-success flexbox-module-options",3,"click",4,"ngIf"],[1,"embed-responsive","embed-responsive-16by9"],["width","780","height","480",1,"embed-responsive-item",3,"src"],[1,"btn","btn-danger","flexbox-module-options",3,"click"],[1,"btn","btn-success","flexbox-module-options",3,"click"],[1,"flexbox-links"],["class","flexbox-links-inner",4,"ngFor","ngForOf"],[1,"flexbox-links-inner"],[1,"fab","fa-youtube"],["contentVideo",""],["contentVideoUpdate",""],["width","780","height","480","frameborder","0","allow","accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",1,"embed-responsive-item",3,"src"],["for","linkInput"],["type","text","formControlName","linkInput","required","",1,"form-control","form-control-lg",3,"ngClass","keyup"],["linkInput",""],[1,"fas","fa-paper-plane"],["contentSurvey",""],["contentSurveyUpdate",""],["type","text","formControlName","name","required","",1,"form-control","form-control-lg",3,"ngClass"],["type","text","formControlName","link","required","",1,"form-control","form-control-lg",3,"ngClass","keyup"],[1,"flexbox-item-module-actions"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-comments"],[1,"fas","fa-edit"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fas","fa-minus-circle"],[1,"flexbox-item",2,"cursor","not-allowed","opacity","0.5",3,"click"]],template:function(t,e){1&t&&(b.Qb(0,"app-sidebar"),b.Ub(1,"div",0),b.Qb(2,"app-sidebar-button"),b.Ub(3,"div",1),b.Ub(4,"div",2),b.Ub(5,"div",3),b.Ub(6,"span"),b.Hc(7,"Your Points"),b.Tb(),b.Ub(8,"div",4),b.Ub(9,"div",5),b.Hc(10),b.Tb(),b.Tb(),b.Tb(),b.Ub(11,"div",6),b.Ub(12,"span"),b.Hc(13,"Class Average Points"),b.Tb(),b.Ub(14,"div",4),b.Fc(15,q,2,1,"div",7),b.Tb(),b.Tb(),b.Fc(16,z,4,0,"div",8),b.Tb(),b.Fc(17,ee,4,2,"div",9),b.Tb(),b.Tb()),2&t&&(b.Cb(10),b.Jc("",e.points,"%"),b.Cb(5),b.oc("ngIf",e.averagePoints),b.Cb(1),b.oc("ngIf",e.currentUser&&(e.isAdmin||e.isInstructor)),b.Cb(1),b.oc("ngForOf",e.modules))},directives:[I,w,n.n,n.m,c.o,c.i,c.d,c.a,c.l,c.h,c.c,n.l],pipes:[n.h],styles:[".flexbox-row[_ngcontent-%COMP%]{justify-content:center}.flexbox-container[_ngcontent-%COMP%], .flexbox-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;align-items:center}.flexbox-container[_ngcontent-%COMP%]{width:600px;padding:20px;justify-content:space-evenly;background-color:#ececec;border-left:1px solid #000;border-right:1px solid #000;border-bottom:1px dotted grey}.flexbox-options[_ngcontent-%COMP%]{margin-bottom:15px;align-self:flex-end}.flexbox-item[_ngcontent-%COMP%]{align-self:stretch;background-color:transparent;border:1px solid #afafaf}.flexbox-top-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;width:600px;padding:20px;justify-content:space-evenly;align-items:center}.flexbox-top-container[_ngcontent-%COMP%]   .flexbox-top-options[_ngcontent-%COMP%]{margin-bottom:15px}.flexbox-top-container[_ngcontent-%COMP%]   .flexbox-progress-bar[_ngcontent-%COMP%]{align-self:stretch;background-color:#dbdbdb}.flexbox-item-module-actions[_ngcontent-%COMP%]{margin-top:15px;align-self:flex-end;background-color:transparent;border:1px solid #000}.flexbox-subcontainer[_ngcontent-%COMP%]{margin-top:15px;align-self:flex-start;display:flex;flex-direction:column;width:560px;justify-content:center;align-items:flex-start;background-color:#fafafa}.flexbox-module-options[_ngcontent-%COMP%]{float:right}.flexbox-links[_ngcontent-%COMP%]{align-self:stretch}.flexbox-links[_ngcontent-%COMP%]   .flexbox-links-inner[_ngcontent-%COMP%]{align-self:stretch;border:1px solid #000}.flexbox-links[_ngcontent-%COMP%]   .flexbox-links-inner[_ngcontent-%COMP%]:hover{background-color:#d9deff}.flexbox-resources[_ngcontent-%COMP%]{align-self:stretch}.flexbox-resources[_ngcontent-%COMP%]   .flexbox-resources-inner[_ngcontent-%COMP%]{align-self:stretch;border:1px solid #000}.flexbox-resources[_ngcontent-%COMP%]   .flexbox-resources-inner[_ngcontent-%COMP%]:hover{background-color:#d9deff}.flexbox-quizzes[_ngcontent-%COMP%]{align-self:stretch;border:1px solid #000}.flexbox-quizzes[_ngcontent-%COMP%]:hover{background-color:#d9deff}"]}),t})();function ne(t,e){if(1&t&&(b.Ub(0,"div",1),b.Ub(1,"div",2),b.Ub(2,"div",3),b.Hc(3),b.Tb(),b.Ub(4,"div",4),b.Hc(5),b.Tb(),b.Ub(6,"div",5),b.Hc(7),b.Tb(),b.Tb(),b.Tb()),2&t){const t=e.$implicit;b.Cb(3),b.Ic(t.student_id),b.Cb(2),b.Kc("",t.f_name," ",t.l_name,""),b.Cb(2),b.Ic(t.points)}}function oe(t,e){if(1&t&&(b.Ub(0,"span"),b.Hc(1),b.Tb()),2&t){const t=b.ic();b.Cb(1),b.Jc("Class average: ",t.average.average,"")}}let ce=(()=>{class t{constructor(t,e,i,n){this.studentCourseService=t,this.router=e,this.route=i,this.authenticationService=n,this.students=[],this.authenticationService.currentUser.subscribe(t=>this.currentUser=t)}ngOnInit(){this.route.params.subscribe(t=>{this.courseId=t.id,console.log("param id is: "+t.id)}),this.userPayload=l()(this.currentUser.token),this.fetchStudents(this.courseId),this.getAvgStudentPoints(this.courseId,this.userPayload.id)}fetchStudents(t){console.log("fetching students"),this.studentCourseService.getStudentsByCourseId(t).subscribe(t=>{this.students=t,console.log(t)})}getAvgStudentPoints(t,e){console.log("Called avgstudentpoints on student_id: "+e),this.studentCourseService.getAvgStudentPoints(t,e).subscribe(t=>{this.average=t,console.log("avg: "+JSON.stringify(t)),this.average.average=this.toFixed(this.average.average,2)})}toFixed(t,e){var i=Math.pow(10,e||0);return String(Math.round(t*i)/i)}}return t.\u0275fac=function(e){return new(e||t)(b.Pb(a.a),b.Pb(r.c),b.Pb(r.a),b.Pb(p.a))},t.\u0275cmp=b.Jb({type:t,selectors:[["app-leaderboard"]],decls:16,vars:2,consts:[["id","main"],[1,"flexbox-row"],[1,"flexbox-container"],[1,"flexbox-cell","left"],[1,"flexbox-cell","center"],[1,"flexbox-cell","right"],["class","flexbox-row",4,"ngFor","ngForOf"],[1,"center-form",2,"margin-top","15px"],[4,"ngIf"]],template:function(t,e){1&t&&(b.Qb(0,"app-sidebar"),b.Ub(1,"div",0),b.Qb(2,"app-sidebar-button"),b.Ub(3,"div",1),b.Ub(4,"h2"),b.Hc(5," Leaderboard "),b.Tb(),b.Ub(6,"div",2),b.Ub(7,"div",3),b.Hc(8,"ID"),b.Tb(),b.Ub(9,"div",4),b.Hc(10,"Name"),b.Tb(),b.Ub(11,"div",5),b.Hc(12,"Points"),b.Tb(),b.Tb(),b.Fc(13,ne,8,4,"div",6),b.Ub(14,"div",7),b.Fc(15,oe,2,1,"span",8),b.Tb(),b.Tb(),b.Tb()),2&t&&(b.Cb(13),b.oc("ngForOf",e.students),b.Cb(2),b.oc("ngIf",e.average))},directives:[I,w,n.m,n.n],styles:[".flexbox-container[_ngcontent-%COMP%]{flex-direction:row;width:600px;padding:20px;justify-content:space-around;background-color:#ececec;border-left:1px solid #000;border-right:1px solid #000;border-bottom:1px dotted grey}.flexbox-container[_ngcontent-%COMP%], .flexbox-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center}.flexbox-row[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}.flexbox-column[_ngcontent-%COMP%]{background-color:#d9deff;display:flex;flex-direction:row;justify-content:space-evenly;align-items:center}.flexbox-cell[_ngcontent-%COMP%]{width:100px;text-align:center}"]}),t})();function se(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"Number is required"),b.Tb())}function re(t,e){if(1&t&&(b.Ub(0,"div",18),b.Fc(1,se,2,0,"div",19),b.Tb()),2&t){const t=b.ic();b.Cb(1),b.oc("ngIf",t.m.number.errors.required)}}function de(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"Title is required"),b.Tb())}function ue(t,e){if(1&t&&(b.Ub(0,"div",18),b.Fc(1,de,2,0,"div",19),b.Tb()),2&t){const t=b.ic();b.Cb(1),b.oc("ngIf",t.m.title.errors.required)}}function le(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"Locked Until is required"),b.Tb())}function be(t,e){if(1&t&&(b.Ub(0,"div",18),b.Fc(1,le,2,0,"div",19),b.Tb()),2&t){const t=b.ic();b.Cb(1),b.oc("ngIf",t.m.lockedUntil.errors.required)}}const ae=function(t){return{"is-invalid":t}};let fe=(()=>{class t{constructor(t,e,i,n){this.router=t,this.route=e,this.moduleService=i,this.fb=n,this.labels=["number","title","lockedUntil"],this.submitted=!1,this.todayDate=null,this.moduleForm=this.fb.group({number:["",c.m.required],title:["",c.m.required],lockedUntil:["",c.m.required]})}get m(){return this.moduleForm.controls}ngOnInit(){this.route.params.subscribe(t=>{this.courseId=t.id,console.log("params id create: "+t.id)});let t=new Date,e=String(t.getDate()).padStart(2,"0"),i=String(t.getMonth()+1).padStart(2,"0"),n=t.getFullYear();this.todayDate=new Promise((t,o)=>{t(i+"/"+e+"/"+n)})}addModule(t,e,i){this.submitted=!0;let n=new Date(i),o=String(n.getDate()).padStart(2,"0"),c=String(n.getMonth()+1).padStart(2,"0");i=n.getFullYear()+"-"+c+"-"+o,console.log("going to submit lockedUntil: "+i),this.moduleForm.valid&&this.moduleService.addModule(this.courseId,t,e,i).subscribe(()=>{alert("Added module successfully!")})}onDateSelect(t){this.todayDate=new Promise((e,i)=>{e(String(t.month).padStart(2,"0")+"/"+String(t.day).padStart(2,"0")+"/"+t.year)})}}return t.\u0275fac=function(e){return new(e||t)(b.Pb(r.c),b.Pb(r.a),b.Pb($),b.Pb(c.b))},t.\u0275cmp=b.Jb({type:t,selectors:[["app-create-module"]],decls:30,vars:16,consts:[[1,"center-form"],[1,"col-sm-4",3,"formGroup"],[1,"form-group"],["for","number"],["type","text","formControlName","number","required","",1,"form-control",3,"ngClass"],["number",""],["class","invalid-feedback",4,"ngIf"],["for","title"],["formControlName","title","required","",1,"form-control",3,"ngClass"],["title",""],["for","lockedUntil"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","formControlName","lockedUntil","readonly","","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d","ngbDatepicker","lockedUntil",""],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","far","fa-calendar-alt",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",0),b.Ub(1,"h2"),b.Hc(2,"Create New Module"),b.Tb(),b.Ub(3,"form",1),b.Ub(4,"div",2),b.Ub(5,"label",3),b.Hc(6,"Number"),b.Tb(),b.Qb(7,"input",4,5),b.Fc(9,re,2,1,"div",6),b.Tb(),b.Ub(10,"div",2),b.Ub(11,"label",7),b.Hc(12,"Title"),b.Tb(),b.Qb(13,"textarea",8,9),b.Fc(15,ue,2,1,"div",6),b.Tb(),b.Ub(16,"div",2),b.Ub(17,"label",10),b.Hc(18,"Locked Until"),b.Tb(),b.Ub(19,"div",11),b.Ub(20,"input",12,13),b.gc("dateSelect",(function(t){return e.onDateSelect(t)})),b.jc(23,"async"),b.Tb(),b.Ub(24,"div",14),b.Ub(25,"button",15),b.gc("click",(function(){return b.xc(t),b.wc(21).toggle()})),b.Tb(),b.Tb(),b.Fc(26,be,2,1,"div",6),b.Tb(),b.Tb(),b.Ub(27,"button",16),b.gc("click",(function(){b.xc(t);const i=b.wc(8),n=b.wc(14),o=b.wc(22);return e.addModule(i.value,n.value,o.value)})),b.Qb(28,"i",17),b.Hc(29," Create Module"),b.Tb(),b.Tb(),b.Tb()}2&t&&(b.Cb(3),b.oc("formGroup",e.moduleForm),b.Cb(4),b.oc("ngClass",b.sc(10,ae,e.submitted&&e.m.number.errors)),b.Cb(2),b.oc("ngIf",e.submitted&&e.m.number.errors),b.Cb(4),b.oc("ngClass",b.sc(12,ae,e.submitted&&e.m.title.errors)),b.Cb(2),b.oc("ngIf",e.submitted&&e.m.title.errors),b.Cb(5),b.oc("value",b.kc(23,8,e.todayDate))("ngClass",b.sc(14,ae,e.submitted&&e.m.lockedUntil.errors)),b.Cb(6),b.oc("ngIf",e.submitted&&e.m.lockedUntil.errors))},directives:[c.o,c.i,c.d,c.a,c.h,c.c,c.l,n.l,n.n,o.a],pipes:[n.b],styles:[""]}),t})();function pe(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"Number is required"),b.Tb())}function me(t,e){if(1&t&&(b.Ub(0,"div",18),b.Fc(1,pe,2,0,"div",19),b.Tb()),2&t){const t=b.ic();b.Cb(1),b.oc("ngIf",t.mu.number.errors.required)}}function ge(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"Title is required"),b.Tb())}function he(t,e){if(1&t&&(b.Ub(0,"div",18),b.Fc(1,ge,2,0,"div",19),b.Tb()),2&t){const t=b.ic();b.Cb(1),b.oc("ngIf",t.mu.title.errors.required)}}function ve(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"Locked Until is required"),b.Tb())}function Ue(t,e){if(1&t&&(b.Ub(0,"div",18),b.Fc(1,ve,2,0,"div",19),b.Tb()),2&t){const t=b.ic();b.Cb(1),b.oc("ngIf",t.mu.lockedUntil.errors.required)}}const ke=function(t){return{"is-invalid":t}};let Ce=(()=>{class t{constructor(t,e,i,n){this.moduleService=t,this.router=e,this.route=i,this.fb=n,this.submitted=!1,this.givenDate=null,this.CreateForm()}CreateForm(){this.updateForm=this.fb.group({number:["",c.m.required],title:["",c.m.required],lockedUntil:["",c.m.required]})}get mu(){return this.updateForm.controls}ngOnInit(){this.route.params.subscribe(t=>{this.id=t.moduleId,this.moduleService.getModuleById(this.id).subscribe(t=>{this.module=t[0],this.moduleNumber=this.module.number,this.updateForm.get("number").setValue(this.module.number),this.updateForm.get("title").setValue(this.module.title),this.updateForm.get("lockedUntil").setValue(this.module.lockedUntil);let e=new Date(this.module.lockedUntil.toString()),i=String(e.getDate()+1).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),o=e.getFullYear();this.givenDate=new Promise((t,e)=>{t(n+"/"+i+"/"+o)}),this.startDate=(""+this.module.lockedUntil).split("-")})})}updateModule(t,e,i){this.submitted=!0;let n=new Date(i),o=String(n.getDate()).padStart(2,"0"),c=String(n.getMonth()+1).padStart(2,"0");i=n.getFullYear()+"-"+c+"-"+o,this.updateForm.valid&&this.moduleService.updateModule(this.id,t,e,i).subscribe(t=>{alert("Module updated successfully")})}onDateSelect(t){this.givenDate=new Promise((e,i)=>{e(String(t.month).padStart(2,"0")+"/"+String(t.day).padStart(2,"0")+"/"+t.year)})}}return t.\u0275fac=function(e){return new(e||t)(b.Pb($),b.Pb(r.c),b.Pb(r.a),b.Pb(c.b))},t.\u0275cmp=b.Jb({type:t,selectors:[["app-edit-module"]],decls:30,vars:17,consts:[[1,"center-form"],[1,"col-sm-4",3,"formGroup"],[1,"form-group"],["for","number"],["type","text","formControlName","number","required","",1,"form-control",3,"ngClass"],["number",""],["class","invalid-feedback",4,"ngIf"],["for","title"],["formControlName","title","required","",1,"form-control",3,"ngClass"],["title",""],["for","lockedUntil"],[1,"input-group"],["type","text","placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","readonly","","formControlName","lockedUntil","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d","ngbDatepicker","lockedUntil",""],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","far","fa-calendar-alt",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",0),b.Ub(1,"h2"),b.Hc(2),b.Tb(),b.Ub(3,"form",1),b.Ub(4,"div",2),b.Ub(5,"label",3),b.Hc(6,"Number"),b.Tb(),b.Qb(7,"input",4,5),b.Fc(9,me,2,1,"div",6),b.Tb(),b.Ub(10,"div",2),b.Ub(11,"label",7),b.Hc(12,"Title"),b.Tb(),b.Qb(13,"textarea",8,9),b.Fc(15,he,2,1,"div",6),b.Tb(),b.Ub(16,"div",2),b.Ub(17,"label",10),b.Hc(18,"Locked Until"),b.Tb(),b.Ub(19,"div",11),b.Ub(20,"input",12,13),b.gc("dateSelect",(function(t){return e.onDateSelect(t)})),b.jc(23,"async"),b.Tb(),b.Ub(24,"div",14),b.Ub(25,"button",15),b.gc("click",(function(){return b.xc(t),b.wc(21).toggle()})),b.Tb(),b.Tb(),b.Fc(26,Ue,2,1,"div",6),b.Tb(),b.Tb(),b.Ub(27,"button",16),b.gc("click",(function(){b.xc(t);const i=b.wc(8),n=b.wc(14),o=b.wc(22);return e.updateModule(i.value,n.value,o.value)})),b.Qb(28,"i",17),b.Hc(29," Update Module"),b.Tb(),b.Tb(),b.Tb()}2&t&&(b.Cb(2),b.Jc("Edit Module ",e.moduleNumber,""),b.Cb(1),b.oc("formGroup",e.updateForm),b.Cb(4),b.oc("ngClass",b.sc(11,ke,e.submitted&&e.mu.number.errors)),b.Cb(2),b.oc("ngIf",e.submitted&&e.mu.number.errors),b.Cb(4),b.oc("ngClass",b.sc(13,ke,e.submitted&&e.mu.title.errors)),b.Cb(2),b.oc("ngIf",e.submitted&&e.mu.title.errors),b.Cb(5),b.oc("value",b.kc(23,9,e.givenDate))("ngClass",b.sc(15,ke,e.submitted&&e.mu.lockedUntil.errors)),b.Cb(6),b.oc("ngIf",e.submitted&&e.mu.lockedUntil.errors))},directives:[c.o,c.i,c.d,c.a,c.h,c.c,c.l,n.l,n.n,o.a],pipes:[n.b],styles:[""]}),t})();function ye(t,e){if(1&t){const t=b.Vb();b.Sb(0),b.Ub(1,"ckeditor",2),b.gc("change",(function(e){return b.xc(t),b.ic().onChange(e)})),b.Tb(),b.Ub(2,"span"),b.Ub(3,"button",3),b.gc("click",(function(){b.xc(t);const i=e.ngIf;return b.ic().onSubmit(i.id)})),b.Hc(4,"Submit"),b.Tb(),b.Ub(5,"button",4),b.gc("click",(function(){b.xc(t);const i=e.ngIf;return b.ic().onClearButtonClicked(i.id)})),b.Hc(6,"Clear and Submit"),b.Tb(),b.Ub(7,"a",5),b.Qb(8,"i",6),b.Hc(9," Go back"),b.Tb(),b.Tb(),b.Qb(10,"hr"),b.Ub(11,"h2"),b.Hc(12,"Preview"),b.Tb(),b.Qb(13,"div",7),b.Rb()}if(2&t){const t=e.ngIf,i=b.ic();b.Cb(1),b.oc("editor",i.Editor)("data",i.editorData?i.editorData:t.content),b.Cb(6),b.qc("routerLink","/courses/",i.courseId,""),b.Cb(6),b.oc("innerHTML",i.editorData?i.editorData:t.content,b.yc)}}let xe=(()=>{class t{constructor(t,e,i){this.courseDetailsService=t,this.route=e,this.router=i,this.Editor=x,this.isCleared=!1}ngOnInit(){this.route.params.subscribe(t=>{this.courseId=t.id}),this.courseContent=this.courseDetailsService.getCourseDetails(this.courseId),this.courseDetailsService.getCourseDetails(this.courseId).subscribe(t=>{this.courseDetails=t})}onReady(t){t.setData("")}onChange({editor:t}){this.editorData=t.getData(),this.isCleared&&(t.setData(""),this.isCleared=!1),console.log(this.editorData)}onSubmit(t){this.courseDetailsService.updateCourseDetails(t,this.editorData).subscribe(()=>{alert("Submitted Content"),this.router.navigate(["courses",this.courseId])})}onClearButtonClicked(t){confirm("Clear content; Are you sure?")&&this.courseDetailsService.clearCourseDetails(t).subscribe(()=>{alert("Cleared Content"),this.isCleared=!0,this.router.navigate(["courses",this.courseId])})}}return t.\u0275fac=function(e){return new(e||t)(b.Pb(T.a),b.Pb(r.a),b.Pb(r.c))},t.\u0275cmp=b.Jb({type:t,selectors:[["app-home-edit"]],decls:3,vars:3,consts:[[1,"flexbox-row"],[4,"ngIf"],[3,"editor","data","change"],[1,"btn","btn-primary",2,"margin-right","15px",3,"click"],[1,"btn","btn-warning",2,"margin-left","15px",3,"click"],[1,"btn","btn-secondary",2,"margin-left","15px",3,"routerLink"],[1,"fas","fa-arrow-circle-left"],[1,"custom-font",2,"margin-top","30px",3,"innerHTML"]],template:function(t,e){1&t&&(b.Ub(0,"div",0),b.Fc(1,ye,14,4,"ng-container",1),b.jc(2,"async"),b.Tb()),2&t&&(b.Cb(1),b.oc("ngIf",b.kc(2,1,e.courseContent)))},directives:[n.n,s.a,r.f],pipes:[n.b],styles:[".flexbox-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;align-items:center;position:relative;margin-top:30px}"]}),t})(),Te=(()=>{class t{constructor(t){this.http=t}createDiscussion(t,e,i,n,o,c){return this.http.post(`${M.a.apiURL}/discussions`,{user:t,post:e,created:i,changed:n,module_id:o,user_id:c})}getDiscussionsInModule(t){return this.http.get(`${M.a.apiURL}/discussions/m/${t}`)}updateDiscussion(t,e,i){return this.http.put(`${M.a.apiURL}/discussions/${i}`,{post:t,changed:e})}deleteDiscussion(t){return this.http.delete(`${M.a.apiURL}/discussions/${t}`)}}return t.\u0275fac=function(e){return new(e||t)(b.cc(L.b))},t.\u0275prov=b.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Fe(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"Post cannot be empty"),b.Tb())}function Ie(t,e){if(1&t&&(b.Ub(0,"div",8),b.Fc(1,Fe,2,0,"div",9),b.Tb()),2&t){const t=b.ic();b.Cb(1),b.oc("ngIf",t.p.post.errors.required)}}const Pe=function(t){return{"is-invalid":t}};let Se=(()=>{class t{constructor(t,e,i,n,o){this.fb=t,this.discussionService=e,this.moduleService=i,this.authenticationService=n,this.route=o,this.module=null,this.submitted=!1,this.authenticationService.currentUser.subscribe(t=>this.currentUser=t)}get p(){return this.postForm.controls}ngOnInit(){this.userPayload=l()(this.currentUser.token),this.route.params.subscribe(t=>{this.moduleService.getModuleById(t.moduleId).subscribe(t=>{this.module=new Promise((e,i)=>{e(t[0])})})}),this.createForm()}createForm(){this.postForm=this.fb.group({post:["",c.m.required]})}createPost(t){this.submitted=!0,this.postForm.valid&&this.module.then(e=>{let i=this.userPayload.f_name+" "+this.userPayload.l_name,n=new Date;this.discussionService.createDiscussion(i,t,n,n,e.id,this.userPayload.id).subscribe(()=>{alert("Created post")})})}}return t.\u0275fac=function(e){return new(e||t)(b.Pb(c.b),b.Pb(Te),b.Pb($),b.Pb(p.a),b.Pb(r.a))},t.\u0275cmp=b.Jb({type:t,selectors:[["app-create-post"]],decls:9,vars:5,consts:[[1,"center-form"],[3,"formGroup"],[1,"form-group"],["rows","3","required","","formControlName","post",1,"form-control",3,"ngClass"],["post",""],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",0),b.Ub(1,"form",1),b.Ub(2,"div",2),b.Qb(3,"textarea",3,4),b.Fc(5,Ie,2,1,"div",5),b.Tb(),b.Ub(6,"button",6),b.gc("click",(function(){b.xc(t);const i=b.wc(4);return e.createPost(i.value)})),b.Qb(7,"i",7),b.Hc(8," Create Post"),b.Tb(),b.Tb(),b.Tb()}2&t&&(b.Cb(1),b.oc("formGroup",e.postForm),b.Cb(2),b.oc("ngClass",b.sc(3,Pe,e.submitted&&e.p.post.errors)),b.Cb(2),b.oc("ngIf",e.submitted&&e.p.post.errors))},directives:[c.o,c.i,c.d,c.a,c.l,c.h,c.c,n.l,n.n],styles:[""]}),t})();function we(t,e){1&t&&(b.Ub(0,"div"),b.Hc(1,"Post is required"),b.Tb())}function He(t,e){if(1&t&&(b.Ub(0,"div",17),b.Fc(1,we,2,0,"div",18),b.Tb()),2&t){const t=b.ic(2);b.Cb(1),b.oc("ngIf",t.up.post.errors.required)}}const De=function(t){return{"is-invalid":t}};function _e(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",2),b.Ub(1,"h4",3),b.Hc(2,"Edit Your Post"),b.Tb(),b.Ub(3,"button",4),b.gc("click",(function(){return e.$implicit.dismiss("Cross click")})),b.Ub(4,"span",5),b.Hc(5,"\xd7"),b.Tb(),b.Tb(),b.Tb(),b.Ub(6,"div",6),b.Ub(7,"form",7),b.Ub(8,"div",8),b.Ub(9,"label",9),b.Hc(10,"Post"),b.Tb(),b.Qb(11,"textarea",10,11),b.Fc(13,He,2,1,"div",12),b.Tb(),b.Ub(14,"button",13),b.gc("click",(function(){b.xc(t);const e=b.wc(12);return b.ic().updatePost(e.value)})),b.Qb(15,"i",14),b.Hc(16," Update Post"),b.Tb(),b.Tb(),b.Tb(),b.Ub(17,"div",15),b.Ub(18,"button",16),b.gc("click",(function(){return e.$implicit.close("Close click")})),b.Hc(19,"Close"),b.Tb(),b.Tb()}if(2&t){const t=b.ic();b.Cb(7),b.oc("formGroup",t.editPostForm),b.Cb(4),b.oc("ngClass",b.sc(3,De,t.submitted&&t.up.post.errors)),b.Cb(2),b.oc("ngIf",t.submitted&&t.up.post.errors)}}let Me=(()=>{class t{constructor(t,e,i){this.modalService=t,this.fb=e,this.discussionService=i,this.submitted=!1}ngOnInit(){this.makeForm()}get up(){return this.editPostForm.controls}makeForm(){this.editPostForm=this.fb.group({post:["",c.m.required]})}open(t){this.editPostForm.get("post").setValue(this.discussionData.post),this.modalService.open(t,{size:"lg",centered:!0})}updatePost(t){if(this.submitted=!0,!this.editPostForm.valid)return;let e=new Date;this.discussionService.updateDiscussion(t,e,this.discussionData.discussion_id).subscribe(()=>{alert("Updated post")})}}return t.\u0275fac=function(e){return new(e||t)(b.Pb(o.b),b.Pb(c.b),b.Pb(Te))},t.\u0275cmp=b.Jb({type:t,selectors:[["app-edit-post"]],inputs:{discussionData:"discussionData"},decls:4,vars:0,consts:[["contentPostEdit",""],[1,"btn","btn-success",3,"click"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-9",3,"formGroup"],[1,"form-group"],["for","post"],["rows","3","required","","formControlName","post",1,"form-control",3,"ngClass"],["post",""],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,e){if(1&t){const t=b.Vb();b.Fc(0,_e,20,5,"ng-template",null,0,b.Gc),b.Ub(2,"button",1),b.gc("click",(function(){b.xc(t);const i=b.wc(1);return e.open(i)})),b.Hc(3,"Edit Post"),b.Tb()}},directives:[c.o,c.i,c.d,c.a,c.l,c.h,c.c,n.l,n.n],styles:[""]}),t})();function Le(t,e){if(1&t&&(b.Ub(0,"div"),b.Ub(1,"h1",3),b.Hc(2,"Discussion"),b.Tb(),b.Ub(3,"h2",3),b.Hc(4),b.Tb(),b.Ub(5,"h3"),b.Hc(6),b.Tb(),b.Tb()),2&t){const t=e.ngIf;b.Cb(4),b.Jc("Module ",t.number,""),b.Cb(2),b.Ic(t.title)}}function $e(t,e){if(1&t&&b.Qb(0,"app-edit-post",8),2&t){const t=b.ic().$implicit;b.oc("discussionData",t)}}function Ve(t,e){if(1&t){const t=b.Vb();b.Ub(0,"button",9),b.gc("click",(function(){b.xc(t);const e=b.ic().$implicit;return b.ic().deletePost(e.discussion_id)})),b.Hc(1,"Delete Post"),b.Tb()}}function Oe(t,e){if(1&t&&(b.Ub(0,"div",4),b.Ub(1,"p",5),b.Hc(2),b.jc(3,"date"),b.jc(4,"date"),b.Qb(5,"br"),b.Hc(6),b.Qb(7,"br"),b.Fc(8,$e,1,1,"app-edit-post",6),b.Fc(9,Ve,2,0,"button",7),b.Tb(),b.Tb()),2&t){const t=e.$implicit,i=b.ic();b.Cb(2),b.Kc(" ",t.user," | ",t.created>=t.changed?b.lc(3,5,t.created,"short"):b.lc(4,8,t.changed,"short"),""),b.Cb(4),b.Jc(" ",t.post,""),b.Cb(2),b.oc("ngIf",t.user_id==i.userPayload.id),b.Cb(1),b.oc("ngIf",t.user_id==i.userPayload.id)}}const Qe=[{path:"",component:y,canActivate:[p.a]},{path:":id",component:_,canActivate:[p.a]},{path:":id/modules",component:ie,canActivate:[p.a]},{path:":id/leaderboard",component:ce,canActivate:[p.a]},{path:":id/create-module",component:fe,canActivate:[p.a],data:{expectedRole:"instructor"}},{path:":id/edit-module/:moduleId",component:Ce,canActivate:[p.a],data:{expectedRole:"instructor"}},{path:":id/edit-home",component:xe,canActivate:[p.a],data:{expectedRole:"instructor"}},{path:":id/discussion/:moduleId",component:(()=>{class t{constructor(t,e,i,n){this.discussionService=t,this.moduleService=e,this.authenticationService=i,this.route=n,this.discussions=[],this.moduleDetails={},this.authenticationService.currentUser.subscribe(t=>this.currentUser=t)}ngOnInit(){this.userPayload=l()(this.currentUser.token),this.route.params.subscribe(t=>{this.discussionService.getDiscussionsInModule(t.moduleId).subscribe(t=>{console.log(t),this.discussions=t}),this.moduleService.getModuleById(t.moduleId).subscribe(t=>{console.log(t[0]),this.moduleDetails=t[0]})})}deletePost(t){confirm("Delete post: Are you sure?")&&this.discussionService.deleteDiscussion(t).subscribe(()=>{alert("Deleted post successfully")})}}return t.\u0275fac=function(e){return new(e||t)(b.Pb(Te),b.Pb($),b.Pb(p.a),b.Pb(r.a))},t.\u0275cmp=b.Jb({type:t,selectors:[["app-discussion"]],decls:4,vars:2,consts:[[1,"center-form"],[4,"ngIf"],["class","flex-row",4,"ngFor","ngForOf"],[2,"text-align","center"],[1,"flex-row"],[1,"flex-item"],[3,"discussionData",4,"ngIf"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],[3,"discussionData"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,e){1&t&&(b.Ub(0,"div",0),b.Fc(1,Le,7,2,"div",1),b.Qb(2,"app-create-post"),b.Fc(3,Oe,10,11,"div",2),b.Tb()),2&t&&(b.Cb(1),b.oc("ngIf",e.moduleDetails),b.Cb(2),b.oc("ngForOf",e.discussions))},directives:[n.n,Se,n.m,Me],pipes:[n.e],styles:[".flex-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;background-color:#add8e6;margin:15px;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content}.flex-item[_ngcontent-%COMP%]{align-self:stretch}"]}),t})(),canActivate:[p.a]}];let Ae=(()=>{class t{}return t.\u0275mod=b.Nb({type:t}),t.\u0275inj=b.Mb({factory:function(e){return new(e||t)},imports:[[r.g.forChild(Qe)],r.g]}),t})();i.d(e,"CourseModule",(function(){return qe}));let qe=(()=>{class t{}return t.\u0275mod=b.Nb({type:t}),t.\u0275inj=b.Mb({factory:function(e){return new(e||t)},imports:[[n.c,Ae,c.k,o.c,s.b]]}),t})()}}]);