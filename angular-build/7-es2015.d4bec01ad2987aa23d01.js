(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{BUtp:function(e,t,i){"use strict";i.r(t);var n=i("ofXK"),o=i("1kSV"),c=i("3Pt+"),s=i("zioG"),r=i("tyNb"),u=i("mrSG"),d=i("BOF4"),l=i.n(d),a=i("fXoL"),b=i("ZY/4"),f=i("Un6b"),p=i("y8gV"),m=i("AytR"),h=i("2Vo4"),g=i("tk/3");let v=(()=>{class e{constructor(e){this.http=e,this.checkedCourses=new h.a([0]),this.sharedCheckedCourses=this.checkedCourses.asObservable()}nextCheckedCourses(e){this.checkedCourses.next(e)}createAnnouncement(e,t,i,n,o){return this.http.post(`${m.a.apiURL}/announcements`,{user:e,content:t,created:i,changed:n,user_id:o})}fetchAnnouncements(){return this.http.get(`${m.a.apiURL}/announcements`)}fetchAnnouncementsByCourseId(e){return this.http.get(`${m.a.apiURL}/announcements/${e}`)}updateAnnouncement(e,t,i){return this.http.put(`${m.a.apiURL}/announcements/${e}`,{id:e,content:t,changed:i})}deleteAnnouncement(e){return this.http.delete(`${m.a.apiURL}/announcements/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(a.cc(g.b))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function U(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",19),a.gc("click",(function(){return a.xc(e),a.ic(4).toggleDropCourse()})),a.Hc(1,"Toggle Course Drop"),a.Tb()}}function k(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",20),a.gc("click",(function(){return a.xc(e),a.ic(4).createAnnouncement()})),a.Hc(1,"Create Announcement"),a.Tb()}if(2&e){const e=a.ic(4);a.oc("disabled",e.checkedCourses.length<=0)}}function C(e,t){1&e&&(a.Ub(0,"a",21),a.Hc(1,"Manage Announcements"),a.Tb())}function y(e,t){if(1&e&&a.Qb(0,"input",22),2&e){const e=a.ic(2).index,t=a.ic(2);a.oc("checked",t.isChecked[e])}}function x(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",23),a.gc("click",(function(){a.xc(e);const t=a.ic(2).$implicit;return a.ic(2).dropCourse(t.course_id)})),a.Hc(1,"Drop Course"),a.Tb()}}const T=function(e){return{"checked-color":e}},F=function(e){return[e,"modules"]};function I(e,t){if(1&e){const e=a.Vb();a.Sb(0),a.Fc(1,U,2,0,"button",7),a.Fc(2,k,2,1,"button",8),a.Fc(3,C,2,0,"a",9),a.Ub(4,"div",10),a.Ub(5,"div",11),a.gc("click",(function(){a.xc(e);const t=a.ic(),i=t.index,n=t.$implicit;return a.ic(2).checkBox(i,n.course_id)})),a.Ub(6,"div",12),a.Fc(7,y,1,1,"input",13),a.Ub(8,"h5",14),a.Hc(9),a.Tb(),a.Ub(10,"p",15),a.Hc(11),a.Tb(),a.Ub(12,"div",16),a.Ub(13,"a",17),a.Hc(14,"Go to Course"),a.Tb(),a.Fc(15,x,2,0,"button",18),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Rb()}if(2&e){const e=a.ic(),t=e.index,i=e.$implicit,n=a.ic(2);a.Cb(1),a.oc("ngIf",0==t),a.Cb(1),a.oc("ngIf",0==t&&n.isAdmin),a.Cb(1),a.oc("ngIf",0==t&&n.isAdmin),a.Cb(2),a.Eb(a.sc(10,T,n.isChecked[t])),a.Cb(2),a.oc("ngIf",n.isAdmin),a.Cb(2),a.Ic(i.name),a.Cb(2),a.Ic(i.description),a.Cb(2),a.oc("routerLink",a.sc(12,F,i.course_id)),a.Cb(2),a.oc("ngIf",n.courseDrop)}}function P(e,t){if(1&e&&(a.Sb(0),a.Fc(1,I,16,14,"ng-container",6),a.Rb()),2&e){const e=t.$implicit;a.Cb(1),a.oc("ngIf","enrolled"==e.enrollment_status)}}function S(e,t){if(1&e&&(a.Sb(0),a.Ub(1,"div",4),a.Fc(2,P,2,1,"ng-container",5),a.jc(3,"async"),a.Tb(),a.Rb()),2&e){const e=a.ic();a.Cb(2),a.oc("ngForOf",a.kc(3,1,e.listCourses))}}function w(e,t){1&e&&(a.Ub(0,"p"),a.Hc(1,"You have no courses!"),a.Tb(),a.Ub(2,"label"),a.Hc(3,"Enroll in courses"),a.Tb(),a.Ub(4,"button",24),a.Hc(5,"Enroll"),a.Tb())}let H=(()=>{class e{constructor(e,t,i,n,o){this.studentCourseService=e,this.courseService=t,this.authService=i,this.router=n,this.announcementService=o,this.courses=[],this.courseDrop=!1,this.checkedCourses=[],this.isChecked=[]}ngOnInit(){this.currentStudent=this.authService.currentUserValue,this.currentStudent&&(this.tokenPayload=l()(this.currentStudent.token),this.isAdmin="admin"==this.tokenPayload.role,this.studentId=this.tokenPayload.id,this.listCourses=this.studentCourseService.getCoursesByStudentId(this.studentId),console.log(this.studentId))}fetchStudentCourses(e){return new Promise((t,i)=>{this.studentCourseService.getCoursesByStudentId(e).subscribe(e=>{for(let n=0;n<e.length;n++)e[n]?("enrolled"==e[n].enrollment_status?(this.courses.push(e[n]),console.log("Enrolled"),console.log(e[n])):(console.log("Not enrolled"),console.log(e[n])),n==e.length&&(console.log("got data"),t(!0))):(console.log("got no data"),i(!1))},e=>{i(e),console.log("error: "+e)})}).then(e=>(console.log("resthen: "+e),!0)).catch(e=>(console.log("ERROR: "+e),!1))}asyncFetchStudentCourses(e){return Object(u.a)(this,void 0,void 0,(function*(){console.log("calling"),this.hasCourses=yield this.fetchStudentCourses(e),console.log("resasync: "+this.hasCourses)}))}dropCourse(e){this.courseService.getCourseById(e).subscribe(e=>{this.course=e}),confirm("Drop the course? Are you sure?")&&this.studentCourseService.declineStudentEnrollment(this.studentId,e).subscribe(()=>{alert("Dropped the course"),this.courseService.updateCourseSeats(e,this.course.seats+1).subscribe(()=>{console.log("incremented seats by 1: "+(this.course.seats+1))})})}toggleDropCourse(){this.courseDrop=0==this.courseDrop}createAnnouncement(){this.announcementService.nextCheckedCourses(this.checkedCourses),this.router.navigate(["/courses/create-announcement"])}checkBox(e,t){"admin"==this.tokenPayload.role&&(this.isChecked[e]?(this.isChecked[e]=!1,this.checkedCourses.forEach((e,i,n)=>{e==t&&(console.log(t+" "+i),this.checkedCourses.splice(i,1))})):(this.isChecked[e]=!0,console.log("courseId: "+t+" has been checked"),this.checkedCourses.push(t)),console.log(this.isChecked[e]))}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(b.a),a.Pb(f.a),a.Pb(p.a),a.Pb(r.c),a.Pb(v))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-dashboard"]],decls:7,vars:4,consts:[[1,"center-form",2,"position","relative"],[4,"ngIf","ngIfElse"],["class","center-form"],["elseBlock",""],[1,"row"],[4,"ngFor","ngForOf"],[4,"ngIf"],["type","button","class","btn btn-danger btn-sm center-form","style","position: absolute; top: 5px; left: 20px;",3,"click",4,"ngIf"],["type","button","class","btn btn-success btn-sm center-form","style","position: absolute; top: 5px; left: 170px;",3,"disabled","click",4,"ngIf"],["routerLink","/courses/view-created-announcements","class","btn btn-info btn-sm center-form","style","position: absolute; top: 5px; left: 335px;",4,"ngIf"],[1,"col"],[1,"card",2,"max-width","18rem",3,"click"],[1,"card-body"],["type","checkbox",3,"checked",4,"ngIf"],[1,"card-title","text-wrap",2,"word-wrap","break-word"],[1,"card-text","text-wrap",2,"word-wrap","break-word"],[1,"flex-container"],[1,"btn","btn-primary","flex-item",3,"routerLink"],["type","button","class","btn btn-danger btn-sm flex-item",3,"click",4,"ngIf"],["type","button",1,"btn","btn-danger","btn-sm","center-form",2,"position","absolute","top","5px","left","20px",3,"click"],["type","button",1,"btn","btn-success","btn-sm","center-form",2,"position","absolute","top","5px","left","170px",3,"disabled","click"],["routerLink","/courses/view-created-announcements",1,"btn","btn-info","btn-sm","center-form",2,"position","absolute","top","5px","left","335px"],["type","checkbox",3,"checked"],["type","button",1,"btn","btn-danger","btn-sm","flex-item",3,"click"],["routerLink","../course-library",1,"btn","btn-primary",2,"margin-left","10px"]],template:function(e,t){if(1&e&&(a.Ub(0,"div",0),a.Ub(1,"h2"),a.Hc(2,"Dashboard"),a.Tb(),a.Fc(3,S,4,3,"ng-container",1),a.jc(4,"async"),a.Fc(5,w,6,0,"ng-template",2,3,a.Gc),a.Tb()),2&e){const e=a.wc(6);a.Cb(3),a.oc("ngIf",a.kc(4,2,t.listCourses))("ngIfElse",e)}},directives:[n.n,n.m,r.f,r.d],pipes:[n.b],styles:[".flex-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.flex-item[_ngcontent-%COMP%]{align-self:center;margin:10px}.card[_ngcontent-%COMP%]{transition:.7s;box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19)}.card[_ngcontent-%COMP%]:hover{transition:.7s;box-shadow:0 4px 8px 0 rgba(0,0,0,.8),0 6px 20px 0 rgba(0,0,0,.8)}input.larger[_ngcontent-%COMP%]{width:50px;height:50px}.checked-color[_ngcontent-%COMP%]{background-color:#90ee90}"]}),e})();var D=i("+z1p"),_=i("rptU");const M=function(e){return["/courses",e]};let $=(()=>{class e{constructor(e){this.route=e}ngOnInit(){this.route.params.subscribe(e=>{this.courseId=e.id});var e,t=document.getElementsByClassName("dropdown-btn");for(e=0;e<t.length;e++)t[e].addEventListener("click",(function(){this.classList.toggle("active");var e=this.nextElementSibling;e.style.display="block"===e.style.display?"none":"block"}))}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(r.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-sidebar"]],decls:9,vars:6,consts:[["id","mySidenav",1,"sidenav"],["routerLinkActive","active",1,"nav-link",3,"routerLink"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"a",1),a.Hc(2,"Home"),a.Tb(),a.Ub(3,"a",1),a.Hc(4,"Announcements"),a.Tb(),a.Ub(5,"a",1),a.Hc(6,"Leaderboard"),a.Tb(),a.Ub(7,"a",1),a.Hc(8,"Modules"),a.Tb(),a.Tb()),2&e&&(a.Cb(1),a.oc("routerLink",a.sc(4,M,t.courseId)),a.Cb(2),a.qc("routerLink","/courses/",t.courseId,"/announcements"),a.Cb(2),a.qc("routerLink","/courses/",t.courseId,"/leaderboard"),a.Cb(2),a.qc("routerLink","/courses/",t.courseId,"/modules"))},directives:[r.f,r.e],styles:[".sidenav[_ngcontent-%COMP%]{height:100%;width:0;position:absolute;z-index:0;top:55px;left:0;background-color:#425efd;overflow-x:hidden;transition:.5s}.dropdown-btn[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px;text-decoration:none;font-size:25px;color:#000;display:block}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, dropdown-btn[_ngcontent-%COMP%]:hover{background-color:#2d3d97;color:#fff}#main[_ngcontent-%COMP%]{padding:16px}.dropdown-container[_ngcontent-%COMP%]{display:none;background-color:#262626;padding-left:8px}.fa-caret-down[_ngcontent-%COMP%]{float:right;padding-right:8px}@media screen and (max-height:450px){.sidenav[_ngcontent-%COMP%]{padding-top:15px}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px}}"]}),e})();function L(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",1),a.Ub(1,"span",2),a.gc("click",(function(){return a.xc(e),a.ic().openNav()})),a.Qb(2,"i",3),a.Tb(),a.Tb()}}function A(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",1),a.Ub(1,"span",2),a.gc("click",(function(){return a.xc(e),a.ic().closeNav()})),a.Qb(2,"i",4),a.Tb(),a.Tb()}}let O=(()=>{class e{constructor(){this.sidebarIsOpen=!1}ngOnInit(){}openNav(){document.getElementById("mySidenav").style.width="250px",document.getElementById("main").style.marginLeft="250px",document.getElementById("mySidenav").style.display="block",this.sidebarIsOpen=!0}closeNav(){document.getElementById("mySidenav").style.display="none",document.getElementById("mySidenav").style.width="0",document.getElementById("main").style.marginLeft="0",this.sidebarIsOpen=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Jb({type:e,selectors:[["app-sidebar-button"]],decls:2,vars:2,consts:[["class","flexbox-row",4,"ngIf"],[1,"flexbox-row"],[1,"flexbox-side",2,"cursor","pointer",3,"click"],[1,"fas","fa-angle-double-right","fa-5x"],[1,"fas","fa-angle-double-left","fa-5x"]],template:function(e,t){1&e&&(a.Fc(0,L,3,0,"div",0),a.Fc(1,A,3,0,"div",0)),2&e&&(a.oc("ngIf",0==t.sidebarIsOpen),a.Cb(1),a.oc("ngIf",1==t.sidebarIsOpen))},directives:[n.n],styles:[""]}),e})();function V(e,t){if(1&e&&(a.Ub(0,"a",4),a.Hc(1,"Edit"),a.Tb()),2&e){const e=a.ic();a.qc("routerLink","/courses/",e.courseId,"/edit-home")}}function Q(e,t){if(1&e&&(a.Sb(0),a.Qb(1,"div",5),a.Rb()),2&e){const e=t.ngIf;a.Cb(1),a.oc("innerHTML",e.content,a.yc)}}let q=(()=>{class e{constructor(e,t,i){this.courseDetailsService=e,this.route=t,this.authenticationService=i,this.Editor=D,this.isCleared=!1,this.authenticationService.currentUser.subscribe(e=>this.currentUser=e)}ngOnInit(){this.tokenPayload=l()(this.currentUser.token),this.isAdmin="admin"===this.tokenPayload.role,this.isInstructor="instructor"===this.tokenPayload.role,this.isStudent="student"===this.tokenPayload.role,this.route.params.subscribe(e=>{this.courseId=e.id}),this.courseContent=this.courseDetailsService.getCourseDetails(this.courseId),this.courseDetailsService.getCourseDetails(this.courseId).subscribe(e=>{this.courseDetails=e})}onReady(e){e.setData("")}onChange({editor:e}){this.editorData=e.getData(),this.isCleared&&(e.setData(""),this.isCleared=!1),console.log(this.editorData)}onSubmit(e){this.courseDetailsService.updateCourseDetails(e,this.editorData).subscribe(()=>{alert("Submitted Content")})}onClearButtonClicked(e){confirm("Clear content; Are you sure?")&&this.courseDetailsService.clearCourseDetails(e).subscribe(()=>{alert("Cleared Content"),this.isCleared=!0})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(_.a),a.Pb(r.a),a.Pb(p.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-home"]],decls:7,vars:4,consts:[["id","main"],[1,"flexbox-row"],["class","btn btn-primary",3,"routerLink",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-primary",3,"routerLink"],[1,"custom-font","clamp-words",2,"margin-top","30px",3,"innerHTML"]],template:function(e,t){1&e&&(a.Qb(0,"app-sidebar"),a.Ub(1,"div",0),a.Qb(2,"app-sidebar-button"),a.Ub(3,"div",1),a.Fc(4,V,2,1,"a",2),a.Fc(5,Q,2,1,"ng-container",3),a.jc(6,"async"),a.Tb(),a.Tb()),2&e&&(a.Cb(4),a.oc("ngIf",t.isAdmin||t.isInstructor),a.Cb(1),a.oc("ngIf",a.kc(6,2,t.courseContent)))},directives:[$,O,n.n,r.f],pipes:[n.b],styles:[".flexbox-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;align-items:center;position:relative;margin-top:30px}"]}),e})(),E=(()=>{class e{constructor(e){this.http=e}addModule(e,t,i,n){return this.http.post(`${m.a.apiURL}/modules/${e}`,{number:t,title:i,lockedUntil:n})}getModuleById(e){return this.http.get(`${m.a.apiURL}/modules/m/${e}`)}getModulesByCourseId(e){return this.http.get(`${m.a.apiURL}/modules/c/${e}`)}updateModule(e,t,i,n){return this.http.put(`${m.a.apiURL}/modules/${e}`,{number:t,title:i,lockedUntil:n})}deleteModule(e){return this.http.delete(`${m.a.apiURL}/modules/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(a.cc(g.b))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),z=(()=>{class e{constructor(e){this.http=e}addVideo(e,t){return this.http.post(`${m.a.apiURL}/videos`,{link:e,module_id:t})}fetchVideos(e){return this.http.get(`${m.a.apiURL}/videos/${e}`)}updateVideo(e,t){return this.http.put(`${m.a.apiURL}/videos/${t}`,{link:e})}deleteVideo(e){return this.http.delete(`${m.a.apiURL}/videos/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(a.cc(g.b))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),R=(()=>{class e{constructor(e){this.http=e}addPDF(e){return this.http.post(`${m.a.apiURL}/pdfs`,e)}fetchPDFs(e){return this.http.get(`${m.a.apiURL}/pdfs/${e}`)}updatePDF(e,t){return this.http.put(`${m.a.apiURL}/pdfs/${e}`,t)}deletePDF(e){return this.http.delete(`${m.a.apiURL}/pdfs/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(a.cc(g.b))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),B=(()=>{class e{constructor(e){this.http=e}addSurvey(e,t,i){return this.http.post(`${m.a.apiURL}/surveys`,{name:e,link:t,module_id:i})}fetchSurveys(e){return this.http.get(`${m.a.apiURL}/surveys/${e}`)}updateSurvey(e,t,i){return this.http.put(`${m.a.apiURL}/surveys/${i}`,{name:e,link:t})}deleteSurvey(e){return this.http.delete(`${m.a.apiURL}/surveys/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(a.cc(g.b))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var N=i("jhN1");function J(e,t){if(1&e&&(a.Ub(0,"div",10),a.Hc(1),a.Tb()),2&e){const e=a.ic();a.Cb(1),a.Jc("",e.averagePoints.average,"%")}}function G(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div"),a.Ub(1,"button",11),a.gc("click",(function(){a.xc(e);const t=a.ic();return t.createModule(t.courseId)})),a.Qb(2,"i",12),a.Hc(3," Create Module"),a.Tb(),a.Tb()}}function j(e,t){if(1&e&&(a.Ub(0,"span",27),a.Hc(1),a.Tb()),2&e){const e=a.ic(2).$implicit;a.Cb(1),a.Jc("locked until: ",e.lockedUntil,"")}}function Y(e,t){if(1&e&&(a.Ub(0,"span",29),a.Hc(1),a.Tb()),2&e){const e=a.ic(3).$implicit;a.Cb(1),a.Jc("locked until: ",e.lockedUntil,"")}}function K(e,t){if(1&e&&a.Fc(0,Y,2,1,"span",28),2&e){const e=a.ic(3);a.oc("ngIf",e.isAdmin||e.isInstructor)}}function X(e,t){1&e&&(a.Ub(0,"div"),a.Hc(1,"Link is required"),a.Tb())}function W(e,t){if(1&e&&(a.Ub(0,"div",48),a.Fc(1,X,2,0,"div",8),a.Tb()),2&e){const e=a.ic(4);a.Cb(1),a.oc("ngIf",e.v.link.errors.required)}}function Z(e,t){1&e&&(a.Ub(0,"div",49),a.Hc(1," Valid youtube link "),a.Tb())}function ee(e,t){1&e&&(a.Ub(0,"div",50),a.Hc(1," Invalid Youtube Link "),a.Tb())}function te(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",51),a.gc("click",(function(){a.xc(e),a.ic();const t=a.wc(23),i=a.ic(2).$implicit;return a.ic().addVideo(t.value,i.module_id)})),a.Qb(1,"i",12),a.Hc(2," Add Video"),a.Tb()}}function ie(e,t){if(1&e&&(a.Ub(0,"div",52),a.Hc(1),a.Tb()),2&e){const e=a.ic(4);a.Cb(1),a.Ic(e.error)}}const ne=function(e,t){return{"is-invalid":e,"is-valid":t}};function oe(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",30),a.Ub(1,"h4",31),a.Hc(2,"Add Youtube Video"),a.Tb(),a.Ub(3,"button",32),a.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),a.Ub(4,"span",33),a.Hc(5,"\xd7"),a.Tb(),a.Tb(),a.Tb(),a.Ub(6,"div",34),a.Ub(7,"form",35),a.Ub(8,"div",36),a.Ub(9,"p"),a.Hc(10,"Valid youtube links are of the formats:"),a.Qb(11,"br"),a.Hc(12," https://youtu.be/*********** "),a.Qb(13,"br"),a.Hc(14,"And "),a.Qb(15,"br"),a.Hc(16,"https://www.youtube.com/watch?v=***********"),a.Tb(),a.Tb(),a.Ub(17,"div",37),a.Ub(18,"label",38),a.Ub(19,"span",29),a.Hc(20,"*"),a.Tb(),a.Hc(21,"Link"),a.Tb(),a.Ub(22,"input",39,40),a.gc("keyup",(function(t){return a.xc(e),a.ic(3).handleValidLink(t)})),a.Tb(),a.Fc(24,W,2,1,"div",41),a.Fc(25,Z,2,0,"div",42),a.Tb(),a.Fc(26,ee,2,0,"div",43),a.Fc(27,te,3,0,"button",44),a.Fc(28,ie,2,1,"div",45),a.Tb(),a.Tb(),a.Ub(29,"div",46),a.Ub(30,"button",47),a.gc("click",(function(){return t.$implicit.close("Close click")})),a.Hc(31,"Close"),a.Tb(),a.Tb()}if(2&e){const e=a.ic(3);a.Cb(7),a.oc("formGroup",e.videoForm),a.Cb(15),a.oc("ngClass",a.tc(7,ne,e.submitted&&e.v.link.errors,e.validLink)),a.Cb(2),a.oc("ngIf",e.submitted&&e.v.link.errors),a.Cb(1),a.oc("ngIf",e.validLink),a.Cb(1),a.oc("ngIf",e.invalidLink&&!e.validLink),a.Cb(1),a.oc("ngIf",e.isAdmin||e.isInstructor),a.Cb(1),a.oc("ngIf",e.error)}}function ce(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",11),a.gc("click",(function(){a.xc(e),a.ic();const t=a.wc(6);return a.ic(2).open(t)})),a.Hc(1,"Add Video"),a.Tb()}}function se(e,t){1&e&&(a.Ub(0,"div"),a.Hc(1,"Pdf is required"),a.Tb())}function re(e,t){if(1&e&&(a.Ub(0,"div",48),a.Fc(1,se,2,0,"div",8),a.Tb()),2&e){const e=a.ic(4);a.Cb(1),a.oc("ngIf",e.p.pdf.errors.required)}}const ue=function(e){return{"is-invalid":e}};function de(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",30),a.Ub(1,"h4",31),a.Hc(2,"Add PDF File"),a.Tb(),a.Ub(3,"button",32),a.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),a.Ub(4,"span",33),a.Hc(5,"\xd7"),a.Tb(),a.Tb(),a.Tb(),a.Ub(6,"div",34),a.Ub(7,"form",53),a.gc("ngSubmit",(function(){a.xc(e);const t=a.ic(2).$implicit;return a.ic().addPdf(t.module_id)})),a.Ub(8,"div",37),a.Ub(9,"label",54),a.Ub(10,"span",29),a.Hc(11,"*"),a.Tb(),a.Hc(12,"Select a PDF File"),a.Tb(),a.Ub(13,"input",55,56),a.gc("change",(function(t){return a.xc(e),a.ic(3).handleFileInput(t)})),a.Tb(),a.Fc(15,re,2,1,"div",41),a.Tb(),a.Ub(16,"button",57),a.Qb(17,"i",12),a.Hc(18," Add PDF"),a.Tb(),a.Tb(),a.Tb(),a.Ub(19,"div",46),a.Ub(20,"button",47),a.gc("click",(function(){return t.$implicit.close("Close click")})),a.Hc(21,"Close"),a.Tb(),a.Tb()}if(2&e){const e=a.ic(3);a.Cb(7),a.oc("formGroup",e.pdfForm),a.Cb(6),a.oc("ngClass",a.sc(3,ue,e.submitted&&e.p.pdf.errors)),a.Cb(2),a.oc("ngIf",e.submitted&&e.p.pdf.errors)}}function le(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",11),a.gc("click",(function(){a.xc(e),a.ic();const t=a.wc(9);return a.ic(2).open(t)})),a.Hc(1,"Add PDF"),a.Tb()}}function ae(e,t){1&e&&(a.Ub(0,"div"),a.Hc(1,"Name is required"),a.Tb())}function be(e,t){if(1&e&&(a.Ub(0,"div",48),a.Fc(1,ae,2,0,"div",8),a.Tb()),2&e){const e=a.ic(4);a.Cb(1),a.oc("ngIf",e.s.name.errors.required)}}function fe(e,t){1&e&&(a.Ub(0,"div"),a.Hc(1,"Link is required"),a.Tb())}function pe(e,t){if(1&e&&(a.Ub(0,"div",48),a.Fc(1,fe,2,0,"div",8),a.Tb()),2&e){const e=a.ic(4);a.Cb(1),a.oc("ngIf",e.s.link.errors.required)}}function me(e,t){1&e&&(a.Ub(0,"div",49),a.Hc(1," Valid Qualtrics link "),a.Tb())}function he(e,t){1&e&&(a.Ub(0,"div",50),a.Hc(1," Invalid Qualtrics Link "),a.Tb())}function ge(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",51),a.gc("click",(function(){a.xc(e),a.ic();const t=a.wc(19),i=a.wc(27),n=a.ic(2).$implicit;return a.ic().addSurvey(t.value,i.value,n.module_id)})),a.Qb(1,"i",12),a.Hc(2," Add Quiz/Exam"),a.Tb()}}function ve(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",30),a.Ub(1,"h4",31),a.Hc(2,"Add Qualtrics Quiz/Exam"),a.Tb(),a.Ub(3,"button",32),a.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),a.Ub(4,"span",33),a.Hc(5,"\xd7"),a.Tb(),a.Tb(),a.Tb(),a.Ub(6,"div",34),a.Ub(7,"form",35),a.Ub(8,"div",36),a.Ub(9,"p"),a.Hc(10,"Valid Qualtrics links are of the formats:"),a.Qb(11,"br"),a.Hc(12," https://fiu.qualtrics.com/jfe/form/******************"),a.Tb(),a.Tb(),a.Ub(13,"div",37),a.Ub(14,"label",58),a.Ub(15,"span",29),a.Hc(16,"*"),a.Tb(),a.Hc(17,"Name"),a.Tb(),a.Qb(18,"input",59,60),a.Fc(20,be,2,1,"div",41),a.Tb(),a.Ub(21,"div",37),a.Ub(22,"label",38),a.Ub(23,"span",29),a.Hc(24,"*"),a.Tb(),a.Hc(25,"Link"),a.Tb(),a.Ub(26,"input",61,40),a.gc("keyup",(function(t){return a.xc(e),a.ic(3).handleValidQuiz(t)})),a.Tb(),a.Fc(28,pe,2,1,"div",41),a.Fc(29,me,2,0,"div",42),a.Tb(),a.Fc(30,he,2,0,"div",43),a.Fc(31,ge,3,0,"button",44),a.Tb(),a.Tb(),a.Ub(32,"div",46),a.Ub(33,"button",47),a.gc("click",(function(){return t.$implicit.close("Close click")})),a.Hc(34,"Close"),a.Tb(),a.Tb()}if(2&e){const e=a.ic(3);a.Cb(7),a.oc("formGroup",e.surveyForm),a.Cb(11),a.oc("ngClass",a.sc(8,ue,e.submitted&&e.s.name.errors)),a.Cb(2),a.oc("ngIf",e.submitted&&e.s.name.errors),a.Cb(6),a.oc("ngClass",a.tc(10,ne,e.submitted&&e.s.link.errors,e.validQuiz)),a.Cb(2),a.oc("ngIf",e.submitted&&e.s.link.errors),a.Cb(1),a.oc("ngIf",e.validQuiz),a.Cb(1),a.oc("ngIf",e.invalidQuiz&&!e.validQuiz),a.Cb(1),a.oc("ngIf",e.isAdmin||e.isInstructor)}}function Ue(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",11),a.gc("click",(function(){a.xc(e),a.ic();const t=a.wc(12);return a.ic(2).open(t)})),a.Hc(1,"Add Quiz/Exam"),a.Tb()}}function ke(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",62),a.gc("click",(function(){a.xc(e);const t=a.ic(2).index;return a.ic().openModule(t)})),a.Qb(1,"i",63),a.Ub(2,"strong"),a.Hc(3),a.Tb(),a.Hc(4),a.Tb()}if(2&e){const e=a.ic(2).$implicit;a.Cb(3),a.Jc("Module ",e.module_number," "),a.Cb(1),a.Jc("| ",e.module_title," ")}}function Ce(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",62),a.gc("click",(function(){a.xc(e);const t=a.ic(2).index;return a.ic().openModule(t)})),a.Qb(1,"i",64),a.Ub(2,"strong"),a.Hc(3),a.Tb(),a.Hc(4),a.Tb()}if(2&e){const e=a.ic(2).$implicit;a.Cb(3),a.Jc("Module ",e.module_number," "),a.Cb(1),a.Jc("| ",e.module_title," ")}}function ye(e,t){if(1&e&&(a.Ub(0,"div",30),a.Ub(1,"h4",31),a.Hc(2),a.Tb(),a.Ub(3,"button",32),a.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),a.Ub(4,"span",33),a.Hc(5,"\xd7"),a.Tb(),a.Tb(),a.Tb(),a.Ub(6,"div",34),a.Ub(7,"div",77),a.Qb(8,"iframe",78),a.Tb(),a.Tb(),a.Ub(9,"div",46),a.Ub(10,"button",47),a.gc("click",(function(){return t.$implicit.close("Close click")})),a.Hc(11,"Close"),a.Tb(),a.Tb()),2&e){const e=a.ic(),t=e.index,i=e.$implicit,n=a.ic(5).$implicit;a.Cb(2),a.Kc("",n.module_title," - Pdf ",t+1,""),a.Cb(6),a.oc("src",i.pdf,a.zc)}}function xe(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",79),a.gc("click",(function(){a.xc(e);const t=a.ic(),i=t.$implicit,n=t.index;return a.ic(6).deletePDF(i.pdf_id,n)})),a.Hc(1,"Delete Pdf"),a.Tb()}}function Te(e,t){1&e&&(a.Ub(0,"div"),a.Hc(1,"Pdf is required"),a.Tb())}function Fe(e,t){if(1&e&&(a.Ub(0,"div",48),a.Fc(1,Te,2,0,"div",8),a.Tb()),2&e){const e=a.ic(8);a.Cb(1),a.oc("ngIf",e.pu.pdf.errors.required)}}function Ie(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",30),a.Ub(1,"h4",31),a.Hc(2,"Edit PDF"),a.Tb(),a.Ub(3,"button",32),a.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),a.Ub(4,"span",33),a.Hc(5,"\xd7"),a.Tb(),a.Tb(),a.Tb(),a.Ub(6,"div",34),a.Ub(7,"form",53),a.gc("ngSubmit",(function(){a.xc(e);const t=a.ic().$implicit,i=a.ic(5).$implicit;return a.ic().updatePDF(t.pdf_id,i.module_id)})),a.Ub(8,"div",37),a.Ub(9,"label",54),a.Ub(10,"span",29),a.Hc(11,"*"),a.Tb(),a.Hc(12,"Select a PDF File"),a.Tb(),a.Ub(13,"input",55,56),a.gc("change",(function(t){return a.xc(e),a.ic(7).handleFileInputUpdate(t)})),a.Tb(),a.Fc(15,Fe,2,1,"div",41),a.Tb(),a.Ub(16,"button",57),a.Qb(17,"i",12),a.Hc(18," Update PDF"),a.Tb(),a.Tb(),a.Tb(),a.Ub(19,"div",46),a.Ub(20,"button",47),a.gc("click",(function(){return t.$implicit.close("Close click")})),a.Hc(21,"Close"),a.Tb(),a.Tb()}if(2&e){const e=a.ic(7);a.Cb(7),a.oc("formGroup",e.updatePdfForm),a.Cb(6),a.oc("ngClass",a.sc(3,ue,e.submitted&&e.pu.pdf.errors)),a.Cb(2),a.oc("ngIf",e.submitted&&e.pu.pdf.errors)}}function Pe(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",80),a.gc("click",(function(){a.xc(e);const t=a.ic().$implicit,i=a.wc(8);return a.ic(6).openUpdatePDF(i,t.rawPdf)})),a.Hc(1,"Edit PDF"),a.Tb()}}function Se(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",70),a.Qb(1,"i",71),a.Fc(2,ye,12,3,"ng-template",null,72,a.Gc),a.Ub(4,"button",73),a.gc("click",(function(){a.xc(e);const t=a.wc(3);return a.ic(6).open(t)})),a.Hc(5),a.Tb(),a.Fc(6,xe,2,0,"button",74),a.Fc(7,Ie,22,5,"ng-template",null,75,a.Gc),a.Fc(9,Pe,2,0,"button",76),a.Tb()}if(2&e){const e=t.index,i=a.ic(6);a.Cb(5),a.Jc("View Pdf ",e+1,""),a.Cb(1),a.oc("ngIf",i.isAdmin||i.isInstructor),a.Cb(3),a.oc("ngIf",i.isAdmin||i.isInstructor)}}function we(e,t){if(1&e&&(a.Ub(0,"div"),a.Fc(1,Se,10,3,"div",69),a.Tb()),2&e){const e=a.ic().$implicit;a.Cb(1),a.oc("ngForOf",e.value)}}function He(e,t){if(1&e&&(a.Ub(0,"div",68),a.Fc(1,we,2,1,"div",8),a.Tb()),2&e){const e=t.$implicit,i=a.ic(3).$implicit;a.Cb(1),a.oc("ngIf",e.key==i.module_id)}}function De(e,t){if(1&e&&(a.Ub(0,"div",30),a.Ub(1,"h4",31),a.Hc(2),a.Tb(),a.Ub(3,"button",32),a.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),a.Ub(4,"span",33),a.Hc(5,"\xd7"),a.Tb(),a.Tb(),a.Tb(),a.Ub(6,"div",34),a.Ub(7,"div",77),a.Qb(8,"iframe",87),a.Tb(),a.Tb(),a.Ub(9,"div",46),a.Ub(10,"button",47),a.gc("click",(function(){return t.$implicit.close("Close click")})),a.Hc(11,"Close"),a.Tb(),a.Tb()),2&e){const e=a.ic(),t=e.index,i=e.$implicit,n=a.ic(5).$implicit;a.Cb(2),a.Kc("",n.module_title," - Video ",t+1,""),a.Cb(6),a.oc("src",i.videoUrl,a.zc)}}function _e(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",79),a.gc("click",(function(){a.xc(e);const t=a.ic(),i=t.$implicit,n=t.index;return a.ic(6).deleteVideo(i.video_id,n)})),a.Hc(1,"Delete Video"),a.Tb()}}function Me(e,t){1&e&&(a.Ub(0,"div"),a.Hc(1,"Link is required"),a.Tb())}function $e(e,t){if(1&e&&(a.Ub(0,"div",48),a.Fc(1,Me,2,0,"div",8),a.Tb()),2&e){const e=a.ic(8);a.Cb(1),a.oc("ngIf",e.vu.linkInput.errors.required)}}function Le(e,t){1&e&&(a.Ub(0,"div",49),a.Hc(1," Valid youtube link "),a.Tb())}function Ae(e,t){1&e&&(a.Ub(0,"div",50),a.Hc(1," Invalid Youtube Link "),a.Tb())}function Oe(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",30),a.Ub(1,"h4",31),a.Hc(2,"Edit Youtube Video"),a.Tb(),a.Ub(3,"button",32),a.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),a.Ub(4,"span",33),a.Hc(5,"\xd7"),a.Tb(),a.Tb(),a.Tb(),a.Ub(6,"div",34),a.Ub(7,"form",35),a.Ub(8,"div",36),a.Ub(9,"p"),a.Hc(10,"Valid youtube links are of the formats:"),a.Qb(11,"br"),a.Hc(12," https://youtu.be/*********** "),a.Qb(13,"br"),a.Hc(14,"And "),a.Qb(15,"br"),a.Hc(16,"https://www.youtube.com/watch?v=***********"),a.Tb(),a.Tb(),a.Ub(17,"div",37),a.Ub(18,"label",88),a.Ub(19,"span",29),a.Hc(20,"*"),a.Tb(),a.Hc(21,"New Link"),a.Tb(),a.Ub(22,"input",89,90),a.gc("keyup",(function(t){return a.xc(e),a.ic(7).handleValidLink(t)})),a.Tb(),a.Fc(24,$e,2,1,"div",41),a.Fc(25,Le,2,0,"div",42),a.Tb(),a.Fc(26,Ae,2,0,"div",43),a.Ub(27,"button",51),a.gc("click",(function(){a.xc(e);const t=a.wc(23),i=a.ic().$implicit;return a.ic(6).updateVideo(t.value,i.video_id)})),a.Qb(28,"i",12),a.Hc(29," Update Video"),a.Tb(),a.Tb(),a.Tb(),a.Ub(30,"div",46),a.Ub(31,"button",47),a.gc("click",(function(){return t.$implicit.close("Close click")})),a.Hc(32,"Close"),a.Tb(),a.Tb()}if(2&e){const e=a.ic(7);a.Cb(7),a.oc("formGroup",e.updateVideoForm),a.Cb(15),a.oc("ngClass",a.tc(5,ne,e.submitted&&e.vu.linkInput.errors,e.validLink)),a.Cb(2),a.oc("ngIf",e.submitted&&e.vu.linkInput.errors),a.Cb(1),a.oc("ngIf",e.validLink),a.Cb(1),a.oc("ngIf",e.invalidLink&&!e.validLink)}}function Ve(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",80),a.gc("click",(function(){a.xc(e);const t=a.ic().$implicit,i=a.wc(8);return a.ic(6).openUpdateVideo(i,t.url)})),a.Hc(1,"Edit Video"),a.Tb()}}function Qe(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",83),a.Qb(1,"i",84),a.Fc(2,De,12,3,"ng-template",null,85,a.Gc),a.Ub(4,"button",73),a.gc("click",(function(){a.xc(e);const t=a.wc(3);return a.ic(6).open(t)})),a.Hc(5),a.Tb(),a.Fc(6,_e,2,0,"button",74),a.Fc(7,Oe,33,8,"ng-template",null,86,a.Gc),a.Fc(9,Ve,2,0,"button",76),a.Tb()}if(2&e){const e=t.index,i=a.ic(6);a.Cb(5),a.Jc("Watch Video ",e+1,""),a.Cb(1),a.oc("ngIf",i.isAdmin||i.isInstructor),a.Cb(3),a.oc("ngIf",i.isAdmin||i.isInstructor)}}function qe(e,t){if(1&e&&(a.Ub(0,"div"),a.Fc(1,Qe,10,3,"div",82),a.Tb()),2&e){const e=a.ic().$implicit;a.Cb(1),a.oc("ngForOf",e.value)}}function Ee(e,t){if(1&e&&(a.Ub(0,"div",81),a.Fc(1,qe,2,1,"div",8),a.Tb()),2&e){const e=t.$implicit,i=a.ic(3).$implicit;a.Cb(1),a.oc("ngIf",e.key==i.module_id)}}function ze(e,t){if(1&e&&(a.Ub(0,"div",30),a.Ub(1,"h4",31),a.Hc(2),a.Tb(),a.Ub(3,"button",32),a.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),a.Ub(4,"span",33),a.Hc(5,"\xd7"),a.Tb(),a.Tb(),a.Tb(),a.Ub(6,"div",34),a.Ub(7,"div",77),a.Qb(8,"iframe",87),a.Tb(),a.Tb(),a.Ub(9,"div",46),a.Ub(10,"button",47),a.gc("click",(function(){return t.$implicit.close("Close click")})),a.Hc(11,"Close"),a.Tb(),a.Tb()),2&e){const e=a.ic().$implicit,t=a.ic(5).$implicit;a.Cb(2),a.Kc("",t.module_title," - ",e.name,""),a.Cb(6),a.oc("src",e.surveyUrl,a.zc)}}function Re(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",79),a.gc("click",(function(){a.xc(e);const t=a.ic(),i=t.$implicit,n=t.index;return a.ic(6).deleteSurvey(i.survey_id,n)})),a.Hc(1,"Delete Quiz/Exam"),a.Tb()}}function Be(e,t){1&e&&(a.Ub(0,"div"),a.Hc(1,"Name is required"),a.Tb())}function Ne(e,t){if(1&e&&(a.Ub(0,"div",48),a.Fc(1,Be,2,0,"div",8),a.Tb()),2&e){const e=a.ic(8);a.Cb(1),a.oc("ngIf",e.su.name.errors.required)}}function Je(e,t){1&e&&(a.Ub(0,"div"),a.Hc(1,"Link is required"),a.Tb())}function Ge(e,t){if(1&e&&(a.Ub(0,"div",48),a.Fc(1,Je,2,0,"div",8),a.Tb()),2&e){const e=a.ic(8);a.Cb(1),a.oc("ngIf",e.su.link.errors.required)}}function je(e,t){1&e&&(a.Ub(0,"div",49),a.Hc(1," Valid Qualtrics link "),a.Tb())}function Ye(e,t){1&e&&(a.Ub(0,"div",50),a.Hc(1," Invalid Qualtrics Link "),a.Tb())}function Ke(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",30),a.Ub(1,"h4",31),a.Hc(2,"Edit Quiz/Exam"),a.Tb(),a.Ub(3,"button",32),a.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),a.Ub(4,"span",33),a.Hc(5,"\xd7"),a.Tb(),a.Tb(),a.Tb(),a.Ub(6,"div",34),a.Ub(7,"form",35),a.Ub(8,"div",36),a.Ub(9,"p"),a.Hc(10,"Valid Qualtrics links are of the formats:"),a.Qb(11,"br"),a.Hc(12," https://fiu.qualtrics.com/jfe/form/******************"),a.Tb(),a.Tb(),a.Ub(13,"div",37),a.Ub(14,"label",58),a.Ub(15,"span",29),a.Hc(16,"*"),a.Tb(),a.Hc(17,"New Name"),a.Tb(),a.Qb(18,"input",94,60),a.Fc(20,Ne,2,1,"div",41),a.Tb(),a.Ub(21,"div",37),a.Ub(22,"label",38),a.Ub(23,"span",29),a.Hc(24,"*"),a.Tb(),a.Hc(25,"New Link"),a.Tb(),a.Ub(26,"input",95,40),a.gc("keyup",(function(t){return a.xc(e),a.ic(7).handleValidQuiz(t)})),a.Tb(),a.Fc(28,Ge,2,1,"div",41),a.Fc(29,je,2,0,"div",42),a.Tb(),a.Fc(30,Ye,2,0,"div",43),a.Ub(31,"button",51),a.gc("click",(function(){a.xc(e);const t=a.wc(19),i=a.wc(27),n=a.ic().$implicit;return a.ic(6).updateSurvey(t.value,i.value,n.survey_id)})),a.Qb(32,"i",12),a.Hc(33," Update Quiz/Exam"),a.Tb(),a.Tb(),a.Tb(),a.Ub(34,"div",46),a.Ub(35,"button",47),a.gc("click",(function(){return t.$implicit.close("Close click")})),a.Hc(36,"Close"),a.Tb(),a.Tb()}if(2&e){const e=a.ic(7);a.Cb(7),a.oc("formGroup",e.updateSurveyForm),a.Cb(11),a.oc("ngClass",a.sc(7,ue,e.submitted&&e.su.name.errors)),a.Cb(2),a.oc("ngIf",e.submitted&&e.su.name.errors),a.Cb(6),a.oc("ngClass",a.tc(9,ne,e.submitted&&e.su.link.errors,e.validQuiz)),a.Cb(2),a.oc("ngIf",e.submitted&&e.su.link.errors),a.Cb(1),a.oc("ngIf",e.validQuiz),a.Cb(1),a.oc("ngIf",e.invalidQuiz&&!e.validQuiz)}}function Xe(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",80),a.gc("click",(function(){a.xc(e);const t=a.ic().$implicit,i=a.wc(8);return a.ic(6).openUpdateSurvey(i,t.name,t.url)})),a.Hc(1,"Edit Quiz/Exam"),a.Tb()}}function We(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",83),a.Qb(1,"i",91),a.Fc(2,ze,12,3,"ng-template",null,92,a.Gc),a.Ub(4,"button",73),a.gc("click",(function(){a.xc(e);const t=a.wc(3);return a.ic(6).open(t)})),a.Hc(5),a.Tb(),a.Fc(6,Re,2,0,"button",74),a.Fc(7,Ke,37,12,"ng-template",null,93,a.Gc),a.Fc(9,Xe,2,0,"button",76),a.Tb()}if(2&e){const e=t.index,i=a.ic(6);a.Cb(5),a.Jc("Take Quiz ",e+1,""),a.Cb(1),a.oc("ngIf",i.isAdmin||i.isInstructor),a.Cb(3),a.oc("ngIf",i.isAdmin||i.isInstructor)}}function Ze(e,t){if(1&e&&(a.Ub(0,"div"),a.Fc(1,We,10,3,"div",82),a.Tb()),2&e){const e=a.ic().$implicit;a.Cb(1),a.oc("ngForOf",e.value)}}function et(e,t){if(1&e&&(a.Ub(0,"div",81),a.Fc(1,Ze,2,1,"div",8),a.Tb()),2&e){const e=t.$implicit,i=a.ic(3).$implicit;a.Cb(1),a.oc("ngIf",e.key==i.module_id)}}function tt(e,t){if(1&e&&(a.Ub(0,"div",65),a.Fc(1,He,2,1,"div",66),a.jc(2,"keyvalue"),a.Fc(3,Ee,2,1,"div",67),a.jc(4,"keyvalue"),a.Fc(5,et,2,1,"div",67),a.jc(6,"keyvalue"),a.Tb()),2&e){const e=a.ic(3);a.Cb(1),a.oc("ngForOf",a.kc(2,3,e.safePdfs)),a.Cb(2),a.oc("ngForOf",a.kc(4,5,e.safeLinks)),a.Cb(2),a.oc("ngForOf",a.kc(6,7,e.safeSurveys))}}function it(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",99),a.gc("click",(function(){a.xc(e);const t=a.ic(3).$implicit;return a.ic().editModule(t.course_id,t.module_id)})),a.Qb(1,"i",101),a.Hc(2," Edit"),a.Tb()}}function nt(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",102),a.gc("click",(function(){a.xc(e);const t=a.ic(3).$implicit;return a.ic().deleteModule(t.module_id,t.module_number)})),a.Qb(1,"i",103),a.Hc(2," Delete"),a.Tb()}}function ot(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",96),a.Fc(1,it,3,0,"button",97),a.Fc(2,nt,3,0,"button",98),a.Ub(3,"button",99),a.gc("click",(function(){a.xc(e);const t=a.ic(2).$implicit;return a.ic().viewDiscussion(t.course_id,t.module_id)})),a.Qb(4,"i",100),a.Hc(5," View Discussion"),a.Tb(),a.Tb()}if(2&e){const e=a.ic(3);a.Cb(1),a.oc("ngIf",e.isAdmin||e.isInstructor),a.Cb(1),a.oc("ngIf",e.isAdmin||e.isInstructor)}}function ct(e,t){if(1&e&&(a.Sb(0),a.Fc(1,j,2,1,"span",16),a.Fc(2,K,1,1,"ng-template",null,17,a.Gc),a.Ub(4,"div",18),a.Fc(5,oe,32,10,"ng-template",null,19,a.Gc),a.Fc(7,ce,2,0,"button",20),a.Fc(8,de,22,5,"ng-template",null,21,a.Gc),a.Fc(10,le,2,0,"button",20),a.Fc(11,ve,35,13,"ng-template",null,22,a.Gc),a.Fc(13,Ue,2,0,"button",20),a.Tb(),a.Fc(14,ke,5,2,"div",23),a.Fc(15,Ce,5,2,"ng-template",null,24,a.Gc),a.Fc(17,tt,7,9,"div",25),a.Fc(18,ot,6,2,"div",26),a.Rb()),2&e){const e=a.wc(3),t=a.wc(16),i=a.ic().index,n=a.ic();a.Cb(1),a.oc("ngIf",!n.moduleLocked[i]&&(n.isAdmin||n.isInstructor))("ngIfElse",e),a.Cb(6),a.oc("ngIf",n.isAdmin||n.isInstructor),a.Cb(3),a.oc("ngIf",n.isAdmin||n.isInstructor),a.Cb(3),a.oc("ngIf",n.isAdmin||n.isInstructor),a.Cb(1),a.oc("ngIf",!n.toggleContent[i])("ngIfElse",t),a.Cb(3),a.oc("ngIf",n.toggleContent[i]),a.Cb(1),a.oc("ngIf",n.currentUser)}}function st(e,t){if(1&e){const e=a.Vb();a.Ub(0,"span",29),a.Hc(1),a.Tb(),a.Ub(2,"div",104),a.gc("click",(function(){a.xc(e);const t=a.ic().index;return a.ic().openModule(t)})),a.Qb(3,"i",63),a.Ub(4,"strong"),a.Hc(5),a.Tb(),a.Hc(6),a.Tb()}if(2&e){const e=a.ic().$implicit;a.Cb(1),a.Jc("locked until: ",e.lockedUntil,""),a.Cb(4),a.Jc("Module ",e.module_number," "),a.Cb(1),a.Jc("| ",e.module_title," ")}}function rt(e,t){if(1&e&&(a.Ub(0,"div",13),a.Fc(1,ct,19,9,"ng-container",14),a.Fc(2,st,7,3,"ng-template",null,15,a.Gc),a.Tb()),2&e){const e=t.index,i=a.wc(3),n=a.ic();a.Cb(1),a.oc("ngIf",!n.moduleLocked[e]||n.isAdmin||n.isInstructor)("ngIfElse",i)}}let ut=(()=>{class e{constructor(e,t,i,n,o,c,s,r,u,d,l){this.moduleService=e,this.videoService=t,this.pdfService=i,this.surveyService=n,this.authenticationService=o,this.studentCourseService=c,this.fb=s,this.router=r,this.route=u,this.sanitizer=d,this.modalService=l,this.modules=[],this.moduleLocked=[],this.linksFromDB=new Array,this.links=new Array,this.safeLinks=new Map,this.pdfsFromDB=new Array,this.pdfs=new Array,this.safePdfs=new Map,this.surveysFromDB=new Array,this.surveys=new Array,this.safeSurveys=new Map,this.resources=["pdf1","pdf2","worddoc1"],this.quizzes=["quiz1","quiz2","quiz3"],this.toggleContent=[],this.moduleVideosFetched=[],this.modulePDFsFetched=[],this.moduleSurveysFetched=[],this.submitted=!1,this.error="",this.invalidLink=!1,this.validLink=!1,this.invalidQuiz=!1,this.validQuiz=!1,this.fileToUpload=null,this.contentObject={course_id:0,course_name:"",module_id:0,module_number:0,module_title:"",lockedUntil:"",link:""},this.authenticationService.currentUser.subscribe(e=>this.currentUser=e),this.makeForms()}ngOnInit(){this.route.params.subscribe(e=>{this.courseId=e.id,console.log("param id is: "+e.id)}),this.currentUser&&(this.todayDate=new Date,this.tokenPayload=l()(this.currentUser.token),this.isAdmin="admin"===this.tokenPayload.role,this.isInstructor="instructor"===this.tokenPayload.role,this.isStudent="student"===this.tokenPayload.role,this.fetchModules(this.courseId),this.getAvgStudentPoints(this.courseId,this.tokenPayload.id),this.waitForProgressBar(),this.studentCourseService.getStudentsByCourseId(this.courseId).subscribe(e=>{e.forEach((e,t,i)=>{e.student_id==this.tokenPayload.id&&(this.points=e.points,console.log("Points: "+this.points),document.getElementById("progressbar").style.width=this.points+"%")})}))}ngOnDestroy(){clearTimeout(this.waitForProgressBarTimeout)}waitForProgressBar(){console.log("waiting for progress bar"),document.getElementById("progressbarAvg")?document.getElementById("progressbarAvg").style.width=this.averagePoints.average+"%":this.waitForProgressBarTimeout=setTimeout(()=>{this.waitForProgressBar()},1e3)}makeForms(){this.videoForm=this.fb.group({link:["",c.m.required]}),this.updateVideoForm=this.fb.group({linkInput:["",c.m.required]}),this.pdfForm=this.fb.group({pdf:["",c.m.required]}),this.updatePdfForm=this.fb.group({pdf:["",c.m.required]}),this.surveyForm=this.fb.group({name:["",c.m.required],link:["",c.m.required]}),this.updateSurveyForm=this.fb.group({name:["",c.m.required],link:["",c.m.required]})}get v(){return this.videoForm.controls}get p(){return this.pdfForm.controls}get s(){return this.surveyForm.controls}get vu(){return this.updateVideoForm.controls}get pu(){return this.updatePdfForm.controls}get su(){return this.updateSurveyForm.controls}pushLinksToArray(e,t){e.forEach(e=>{t.push({link:e.link,module_id:e.module_id,video_id:e.video_id})})}updateVideoUrl(e,t){e.forEach(e=>{if(e.module_id===t){this.moduleVideosFetched[t]=!0;let i,n,o,c=e.link.length;c>=43?i=e.link.substring(32,43):28==c&&(i=e.link.substring(17,28));let s={};o="https://www.youtube.com/embed/"+i,n=this.sanitizer.bypassSecurityTrustResourceUrl(o),s={videoUrl:n,video_id:e.video_id,url:e.link},this.safeLinks.get(t)?this.safeLinks.get(t).push(s):this.safeLinks.set(t,[s])}})}pushPDFsToArray(e,t){e.forEach(e=>{let i=Uint8Array.from(e.pdf.data),n=new Blob([i.buffer],{type:"application/pdf"});t.push({module_id:e.module_id,pdf_id:e.pdf_id,pdf:n})})}updatePdfData(e,t){e.forEach(e=>{if(e.module_id===t){this.modulePDFsFetched[t]=!0;let i,n={},o=URL.createObjectURL(e.pdf);i=this.sanitizer.bypassSecurityTrustResourceUrl(o),n={pdf_id:e.pdf_id,pdf:i,rawPdf:e.pdf},this.safePdfs.get(t)?this.safePdfs.get(t).push(n):this.safePdfs.set(t,[n])}})}pushSurveysToArray(e,t){e.forEach(e=>{t.push({name:e.survey_name,link:e.link,module_id:e.module_id,survey_id:e.survey_id})})}updateSurveyUrl(e,t){e.forEach(e=>{if(e.module_id===t){let i;this.moduleSurveysFetched[t]=!0,i=this.sanitizer.bypassSecurityTrustResourceUrl(e.link);let n={surveyUrl:i,survey_id:e.survey_id,name:e.name,url:e.link};this.safeSurveys.get(t)?this.safeSurveys.get(t).push(n):this.safeSurveys.set(t,[n])}})}open(e){this.submitted=!1,this.invalidLink=!1,this.invalidQuiz=!1,this.validLink=!1,this.invalidQuiz=!1,this.modalService.open(e,{size:"lg",centered:!0})}openModule(e){this.toggleContent[e]=!this.toggleContent[e]}openUpdateVideo(e,t){this.submitted=!1,this.invalidLink=!1,this.validLink=!1,this.modalService.open(e,{size:"lg",centered:!0}),this.updateVideoForm.get("linkInput").setValue(t)}openUpdatePDF(e,t){this.submitted=!1,this.modalService.open(e,{size:"lg",centered:!0}),console.log("The updatePDF: "+t)}openUpdateSurvey(e,t,i){this.submitted=!1,this.invalidQuiz=!1,this.validQuiz=!1,this.modalService.open(e,{size:"lg",centered:!0}),this.updateSurveyForm.get("name").setValue(t),this.updateSurveyForm.get("link").setValue(i)}getAvgStudentPoints(e,t){console.log("Called avgstudentpoints on student_id: "+t),this.studentCourseService.getAvgStudentPoints(e,t).subscribe(e=>{this.averagePoints=e,console.log("avg: "+JSON.stringify(e)),this.averagePoints.average=this.toFixed(this.averagePoints.average,2)})}toFixed(e,t){var i=Math.pow(10,t||0);return String(Math.round(e*i)/i)}viewDiscussion(e,t){this.router.navigate([`courses/${e}/discussion/${t}`])}createModule(e){this.router.navigate([`courses/${e}/create-module`])}fetchModules(e){this.moduleService.getModulesByCourseId(e).subscribe(t=>{t.forEach((e,t,i)=>{let n=new Date(e.lockedUntil),o=String(n.getDate()+1).padStart(2,"0"),c=String(n.getMonth()+1).padStart(2,"0")+"/"+o+"/"+n.getFullYear();this.moduleLocked[t]=!1,this.todayDate<n&&(this.moduleLocked[t]=!0),e.lockedUntil=c}),this.modules=t,this.fetchVideos(e,t),this.fetchPdfs(e,t),this.fetchSurveys(e,t)})}editModule(e,t){this.router.navigate([`courses/${e}/edit-module/${t}`])}deleteModule(e,t){if(1==confirm(`Delete Module ${t}: Are you sure?`)){this.moduleService.deleteModule(e).subscribe(()=>{console.log("Deleted module "+e)});const t=this.modules.find(t=>t.id===e);this.modules.splice(this.modules.indexOf(t))}}handleValidLink(e){let t=e.target.value,i=!1,n=t.length;t.includes("https://www.youtube.com/watch?v=")||t.includes("https://youtu.be/")?(console.log("Includes youtube link"),i=!0):i=!1,(28==n||n>=43)&&i?(this.validLink=!0,this.invalidLink=!1):this.validLink=!1}addVideo(e,t){this.submitted=!0,this.videoForm.invalid||(this.validLink?this.videoService.addVideo(e,t).subscribe(e=>{alert("Added video")},e=>{this.error=e}):this.invalidLink=!0)}updateVideo(e,t){this.submitted=!0,this.updateVideoForm.invalid||(this.validLink?this.videoService.updateVideo(e,t).subscribe(()=>{alert("Updated video")}):this.invalidLink=!0)}deleteVideo(e,t){confirm("Delete video "+(t+1)+": Are you sure?")&&this.videoService.deleteVideo(e).subscribe(()=>{alert("Deleted video")})}fetchVideos(e,t){console.log("Fetching videos: "+e),this.videoService.fetchVideos(e).subscribe(e=>{this.linksFromDB=e,this.pushLinksToArray(e,this.links),t.forEach((t,i,n)=>{let o=t;for(let c=0;c<e.length;c++){let t=e[c];if(t.module_id==o.module_id){if(1==this.moduleVideosFetched[t.module_id]){console.log("Modules videos fetched true");break}this.updateVideoUrl(this.links,t.module_id)}}})})}handleFileInput(e){if(e.target.files.length>0){const t=e.target.files[0];this.pdfForm.get("pdf").setValue(t)}}handleFileInputUpdate(e){if(e.target.files.length>0){const t=e.target.files[0];this.updatePdfForm.get("pdf").setValue(t)}}addPdf(e){if(this.submitted=!0,this.pdfForm.invalid)return;const t=new FormData;t.append("fileKey",this.pdfForm.get("pdf").value),t.append("fileKey",e),this.pdfService.addPDF(t).subscribe(e=>{console.log(e),alert("Added PDF!")},e=>{console.log(e),this.error=e})}fetchPdfs(e,t){console.log("Fetching pdfs: "+e),this.pdfService.fetchPDFs(e).subscribe(e=>{this.pdfsFromDB=e,this.pushPDFsToArray(e,this.pdfs),t.forEach((t,i,n)=>{let o=t;for(let c=0;c<e.length;c++){let t=e[c];if(t.module_id==o.module_id){if(1==this.modulePDFsFetched[t.module_id]){console.log("Modules pdfs fetched true");break}this.updatePdfData(this.pdfs,t.module_id)}}})})}updatePDF(e,t){if(this.submitted=!0,this.updatePdfForm.invalid)return;const i=new FormData;i.append("fileKey",this.updatePdfForm.get("pdf").value),i.append("fileKey",t),this.pdfService.updatePDF(e,i).subscribe(()=>{alert("Updated pdf")})}deletePDF(e,t){confirm("Delete PDF "+(t+1)+": Are you sure?")&&this.pdfService.deletePDF(e).subscribe(()=>{alert("Deleted pdf")})}handleValidQuiz(e){let t=e.target.value,i=t.length,n=!1;n=!!t.includes("https://fiu.qualtrics.com/jfe/form/"),53==i&&n?(this.validQuiz=!0,this.invalidQuiz=!1):this.validQuiz=!1}addSurvey(e,t,i){this.submitted=!0,this.surveyForm.invalid||(this.validQuiz?this.surveyService.addSurvey(e,t,i).subscribe(()=>{alert("Added survey")}):this.invalidQuiz=!0)}fetchSurveys(e,t){console.log("Fetching surveys: "+e),this.surveyService.fetchSurveys(e).subscribe(e=>{this.surveysFromDB=e,this.pushSurveysToArray(e,this.surveys),t.forEach(t=>{let i=t;for(let n=0;n<e.length;n++){let t=e[n];if(t.module_id==i.module_id){if(1==this.moduleSurveysFetched[t.module_id]){console.log("Modules surveys fetched true");break}this.updateSurveyUrl(this.surveys,t.module_id)}}})})}updateSurvey(e,t,i){this.submitted=!0,this.updateSurveyForm.invalid||(this.validQuiz?this.surveyService.updateSurvey(e,t,i).subscribe(()=>{alert("Updated Quiz/Exam")}):this.invalidQuiz=!0)}deleteSurvey(e,t){confirm("Delete Quiz/Exam "+(t+1)+": Are you sure?")&&this.surveyService.deleteSurvey(e).subscribe(()=>{alert("Deleted Quiz/Exam")})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(E),a.Pb(z),a.Pb(R),a.Pb(B),a.Pb(p.a),a.Pb(b.a),a.Pb(c.b),a.Pb(r.c),a.Pb(r.a),a.Pb(N.b),a.Pb(o.b))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-modules"]],decls:18,vars:4,consts:[["id","main"],[1,"flexbox-row"],[1,"flexbox-top-container"],[1,"align-self-stretch"],[1,"progress","flexbox-progress-bar","flexbox-top-options",2,"height","30px"],["id","progressbar","role","progressbar","aria-valuenow","10","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped",2,"width","10%"],[2,"align-self","stretch"],["class","progress-bar progress-bar-striped bg-info","id","progressbarAvg","role","progressbar","style","width: 10%","aria-valuenow","10","aria-valuemin","0","aria-valuemax","100",4,"ngIf"],[4,"ngIf"],["class","flexbox-container",4,"ngFor","ngForOf"],["id","progressbarAvg","role","progressbar","aria-valuenow","10","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","bg-info",2,"width","10%"],[1,"btn","btn-success",3,"click"],[1,"fas","fa-plus-circle"],[1,"flexbox-container"],[4,"ngIf","ngIfElse"],["lockedBlock",""],["style","color: blue;",4,"ngIf","ngIfElse"],["lockedBlock0",""],[1,"flexbox-options"],["contentVideoAdd",""],["class","btn btn-success",3,"click",4,"ngIf"],["contentPdfAdd",""],["contentSurveyAdd",""],["class","flexbox-item","style","cursor:pointer",3,"click",4,"ngIf","ngIfElse"],["moduleBlock",""],["class","flexbox-subcontainer",4,"ngIf"],["class","flexbox-item-module-actions",4,"ngIf"],[2,"color","blue"],["style","color: red",4,"ngIf"],[2,"color","red"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-9",3,"formGroup"],[1,"alert","alert-info"],[1,"form-group"],["for","link"],["type","text","required","","formControlName","link",1,"form-control",3,"ngClass","keyup"],["link",""],["class","invalid-feedback",4,"ngIf"],["class","valid-feedback",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["type","submit","class","btn btn-primary",3,"click",4,"ngIf"],["class","alert alert-danger mt-3 mb-0",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],[1,"invalid-feedback"],[1,"valid-feedback"],[1,"alert","alert-danger"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"alert","alert-danger","mt-3","mb-0"],["method","POST","enctype","multipart/form-data",1,"col-9",3,"formGroup","ngSubmit"],["for","pdf"],["id","theFile","type","file","name","pdf","required","",1,"form-control",3,"ngClass","change"],["file",""],["type","submit",1,"btn","btn-primary"],["for","name"],["type","text","formControlName","name","required","",1,"form-control",3,"ngClass"],["name",""],["type","text","formControlName","link","required","",1,"form-control",3,"ngClass","keyup"],[1,"flexbox-item",2,"cursor","pointer",3,"click"],[1,"fas","fa-caret-right"],[1,"fas","fa-caret-down"],[1,"flexbox-subcontainer"],["class","flexbox-resources",4,"ngFor","ngForOf"],["class","flexbox-links",4,"ngFor","ngForOf"],[1,"flexbox-resources"],["class","flexbox-resources-inner",4,"ngFor","ngForOf"],[1,"flexbox-resources-inner"],[1,"fas","fa-paperclip"],["contentPdf",""],[1,"btn","btn-primary",3,"click"],["class","btn btn-danger flexbox-module-options",3,"click",4,"ngIf"],["contentPdfUpdate",""],["class","btn btn-success flexbox-module-options",3,"click",4,"ngIf"],[1,"embed-responsive","embed-responsive-16by9"],["width","780","height","480",1,"embed-responsive-item",3,"src"],[1,"btn","btn-danger","flexbox-module-options",3,"click"],[1,"btn","btn-success","flexbox-module-options",3,"click"],[1,"flexbox-links"],["class","flexbox-links-inner",4,"ngFor","ngForOf"],[1,"flexbox-links-inner"],[1,"fab","fa-youtube"],["contentVideo",""],["contentVideoUpdate",""],["width","780","height","480","frameborder","0","allow","accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",1,"embed-responsive-item",3,"src"],["for","linkInput"],["type","text","formControlName","linkInput","required","",1,"form-control","form-control-lg",3,"ngClass","keyup"],["linkInput",""],[1,"fas","fa-paper-plane"],["contentSurvey",""],["contentSurveyUpdate",""],["type","text","formControlName","name","required","",1,"form-control","form-control-lg",3,"ngClass"],["type","text","formControlName","link","required","",1,"form-control","form-control-lg",3,"ngClass","keyup"],[1,"flexbox-item-module-actions"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-comments"],[1,"fas","fa-edit"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fas","fa-minus-circle"],[1,"flexbox-item",2,"cursor","not-allowed","opacity","0.5",3,"click"]],template:function(e,t){1&e&&(a.Qb(0,"app-sidebar"),a.Ub(1,"div",0),a.Qb(2,"app-sidebar-button"),a.Ub(3,"div",1),a.Ub(4,"div",2),a.Ub(5,"div",3),a.Ub(6,"span"),a.Hc(7,"Your Points"),a.Tb(),a.Ub(8,"div",4),a.Ub(9,"div",5),a.Hc(10),a.Tb(),a.Tb(),a.Tb(),a.Ub(11,"div",6),a.Ub(12,"span"),a.Hc(13,"Class Average Points"),a.Tb(),a.Ub(14,"div",4),a.Fc(15,J,2,1,"div",7),a.Tb(),a.Tb(),a.Fc(16,G,4,0,"div",8),a.Tb(),a.Fc(17,rt,4,2,"div",9),a.Tb(),a.Tb()),2&e&&(a.Cb(10),a.Jc("",t.points,"%"),a.Cb(5),a.oc("ngIf",t.averagePoints),a.Cb(1),a.oc("ngIf",t.currentUser&&(t.isAdmin||t.isInstructor)),a.Cb(1),a.oc("ngForOf",t.modules))},directives:[$,O,n.n,n.m,c.o,c.i,c.d,c.a,c.l,c.h,c.c,n.l],pipes:[n.h],styles:[".flexbox-row[_ngcontent-%COMP%]{justify-content:center}.flexbox-container[_ngcontent-%COMP%], .flexbox-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;align-items:center}.flexbox-container[_ngcontent-%COMP%]{width:600px;padding:20px;justify-content:space-evenly;background-color:#ececec;border-left:1px solid #000;border-right:1px solid #000;border-bottom:1px dotted grey}.flexbox-options[_ngcontent-%COMP%]{margin-bottom:15px;align-self:flex-end}.flexbox-item[_ngcontent-%COMP%]{align-self:stretch;background-color:transparent;border:1px solid #afafaf}.flexbox-top-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;width:600px;padding:20px;justify-content:space-evenly;align-items:center}.flexbox-top-container[_ngcontent-%COMP%]   .flexbox-top-options[_ngcontent-%COMP%]{margin-bottom:15px}.flexbox-top-container[_ngcontent-%COMP%]   .flexbox-progress-bar[_ngcontent-%COMP%]{align-self:stretch;background-color:#dbdbdb}.flexbox-item-module-actions[_ngcontent-%COMP%]{margin-top:15px;align-self:flex-end;background-color:transparent;border:1px solid #000}.flexbox-subcontainer[_ngcontent-%COMP%]{margin-top:15px;align-self:flex-start;display:flex;flex-direction:column;width:560px;justify-content:center;align-items:flex-start;background-color:#fafafa}.flexbox-module-options[_ngcontent-%COMP%]{float:right}.flexbox-links[_ngcontent-%COMP%]{align-self:stretch}.flexbox-links[_ngcontent-%COMP%]   .flexbox-links-inner[_ngcontent-%COMP%]{align-self:stretch;border:1px solid #000}.flexbox-links[_ngcontent-%COMP%]   .flexbox-links-inner[_ngcontent-%COMP%]:hover{background-color:#d9deff}.flexbox-resources[_ngcontent-%COMP%]{align-self:stretch}.flexbox-resources[_ngcontent-%COMP%]   .flexbox-resources-inner[_ngcontent-%COMP%]{align-self:stretch;border:1px solid #000}.flexbox-resources[_ngcontent-%COMP%]   .flexbox-resources-inner[_ngcontent-%COMP%]:hover{background-color:#d9deff}.flexbox-quizzes[_ngcontent-%COMP%]{align-self:stretch;border:1px solid #000}.flexbox-quizzes[_ngcontent-%COMP%]:hover{background-color:#d9deff}"]}),e})();function dt(e,t){if(1&e&&(a.Ub(0,"div",1),a.Ub(1,"div",2),a.Ub(2,"div",3),a.Hc(3),a.Tb(),a.Ub(4,"div",4),a.Hc(5),a.Tb(),a.Tb(),a.Tb()),2&e){const e=t.$implicit;a.Cb(3),a.Ic(e.student_id),a.Cb(2),a.Ic(e.points)}}function lt(e,t){if(1&e&&(a.Ub(0,"span"),a.Hc(1),a.Tb()),2&e){const e=a.ic();a.Cb(1),a.Jc("Class average: ",e.average.average,"")}}let at=(()=>{class e{constructor(e,t,i,n){this.studentCourseService=e,this.router=t,this.route=i,this.authenticationService=n,this.students=[],this.authenticationService.currentUser.subscribe(e=>this.currentUser=e)}ngOnInit(){this.route.params.subscribe(e=>{this.courseId=e.id,console.log("param id is: "+e.id)}),this.userPayload=l()(this.currentUser.token),this.fetchStudents(this.courseId),this.getAvgStudentPoints(this.courseId,this.userPayload.id)}fetchStudents(e){console.log("fetching students"),this.studentCourseService.getStudentsByCourseId(e).subscribe(e=>{this.students=e,console.log(e)})}getAvgStudentPoints(e,t){console.log("Called avgstudentpoints on student_id: "+t),this.studentCourseService.getAvgStudentPoints(e,t).subscribe(e=>{this.average=e,console.log("avg: "+JSON.stringify(e)),this.average.average=this.toFixed(this.average.average,2)})}toFixed(e,t){var i=Math.pow(10,t||0);return String(Math.round(e*i)/i)}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(b.a),a.Pb(r.c),a.Pb(r.a),a.Pb(p.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-leaderboard"]],decls:14,vars:2,consts:[["id","main"],[1,"flexbox-row"],[1,"flexbox-container"],[1,"flexbox-cell","left"],[1,"flexbox-cell","right"],["class","flexbox-row",4,"ngFor","ngForOf"],[1,"center-form",2,"margin-top","15px"],[4,"ngIf"]],template:function(e,t){1&e&&(a.Qb(0,"app-sidebar"),a.Ub(1,"div",0),a.Qb(2,"app-sidebar-button"),a.Ub(3,"div",1),a.Ub(4,"h2"),a.Hc(5," Leaderboard "),a.Tb(),a.Ub(6,"div",2),a.Ub(7,"div",3),a.Hc(8,"ID"),a.Tb(),a.Ub(9,"div",4),a.Hc(10,"Points"),a.Tb(),a.Tb(),a.Fc(11,dt,6,2,"div",5),a.Ub(12,"div",6),a.Fc(13,lt,2,1,"span",7),a.Tb(),a.Tb(),a.Tb()),2&e&&(a.Cb(11),a.oc("ngForOf",t.students),a.Cb(2),a.oc("ngIf",t.average))},directives:[$,O,n.m,n.n],styles:[".flexbox-container[_ngcontent-%COMP%]{flex-direction:row;width:600px;padding:20px;justify-content:space-around;background-color:#ececec;border-left:1px solid #000;border-right:1px solid #000;border-bottom:1px dotted grey}.flexbox-container[_ngcontent-%COMP%], .flexbox-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center}.flexbox-row[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}.flexbox-column[_ngcontent-%COMP%]{background-color:#d9deff;display:flex;flex-direction:row;justify-content:space-evenly;align-items:center}.flexbox-cell[_ngcontent-%COMP%]{width:100px;text-align:center}"]}),e})();function bt(e,t){1&e&&(a.Ub(0,"div"),a.Hc(1,"Number is required"),a.Tb())}function ft(e,t){if(1&e&&(a.Ub(0,"div",18),a.Fc(1,bt,2,0,"div",19),a.Tb()),2&e){const e=a.ic();a.Cb(1),a.oc("ngIf",e.m.number.errors.required)}}function pt(e,t){1&e&&(a.Ub(0,"div"),a.Hc(1,"Title is required"),a.Tb())}function mt(e,t){if(1&e&&(a.Ub(0,"div",18),a.Fc(1,pt,2,0,"div",19),a.Tb()),2&e){const e=a.ic();a.Cb(1),a.oc("ngIf",e.m.title.errors.required)}}function ht(e,t){1&e&&(a.Ub(0,"div"),a.Hc(1,"Locked Until is required"),a.Tb())}function gt(e,t){if(1&e&&(a.Ub(0,"div",18),a.Fc(1,ht,2,0,"div",19),a.Tb()),2&e){const e=a.ic();a.Cb(1),a.oc("ngIf",e.m.lockedUntil.errors.required)}}const vt=function(e){return{"is-invalid":e}};let Ut=(()=>{class e{constructor(e,t,i,n){this.router=e,this.route=t,this.moduleService=i,this.fb=n,this.labels=["number","title","lockedUntil"],this.submitted=!1,this.todayDate=null,this.moduleForm=this.fb.group({number:["",c.m.required],title:["",c.m.required],lockedUntil:["",c.m.required]})}get m(){return this.moduleForm.controls}ngOnInit(){this.route.params.subscribe(e=>{this.courseId=e.id,console.log("params id create: "+e.id)});let e=new Date,t=String(e.getDate()).padStart(2,"0"),i=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear();this.todayDate=new Promise((e,o)=>{e(i+"/"+t+"/"+n)})}addModule(e,t,i){this.submitted=!0;let n=new Date(i),o=String(n.getDate()).padStart(2,"0"),c=String(n.getMonth()+1).padStart(2,"0");i=n.getFullYear()+"-"+c+"-"+o,console.log("going to submit lockedUntil: "+i),this.moduleForm.valid&&this.moduleService.addModule(this.courseId,e,t,i).subscribe(()=>{alert("Added module successfully!")})}onDateSelect(e){this.todayDate=new Promise((t,i)=>{t(String(e.month).padStart(2,"0")+"/"+String(e.day).padStart(2,"0")+"/"+e.year)})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(r.c),a.Pb(r.a),a.Pb(E),a.Pb(c.b))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-create-module"]],decls:30,vars:16,consts:[[1,"center-form"],[1,"col-sm-4",3,"formGroup"],[1,"form-group"],["for","number"],["type","text","formControlName","number","required","",1,"form-control",3,"ngClass"],["number",""],["class","invalid-feedback",4,"ngIf"],["for","title"],["formControlName","title","required","",1,"form-control",3,"ngClass"],["title",""],["for","lockedUntil"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","formControlName","lockedUntil","readonly","","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d","ngbDatepicker","lockedUntil",""],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","far","fa-calendar-alt",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",0),a.Ub(1,"h2"),a.Hc(2,"Create New Module"),a.Tb(),a.Ub(3,"form",1),a.Ub(4,"div",2),a.Ub(5,"label",3),a.Hc(6,"Number"),a.Tb(),a.Qb(7,"input",4,5),a.Fc(9,ft,2,1,"div",6),a.Tb(),a.Ub(10,"div",2),a.Ub(11,"label",7),a.Hc(12,"Title"),a.Tb(),a.Qb(13,"textarea",8,9),a.Fc(15,mt,2,1,"div",6),a.Tb(),a.Ub(16,"div",2),a.Ub(17,"label",10),a.Hc(18,"Locked Until"),a.Tb(),a.Ub(19,"div",11),a.Ub(20,"input",12,13),a.gc("dateSelect",(function(e){return t.onDateSelect(e)})),a.jc(23,"async"),a.Tb(),a.Ub(24,"div",14),a.Ub(25,"button",15),a.gc("click",(function(){return a.xc(e),a.wc(21).toggle()})),a.Tb(),a.Tb(),a.Fc(26,gt,2,1,"div",6),a.Tb(),a.Tb(),a.Ub(27,"button",16),a.gc("click",(function(){a.xc(e);const i=a.wc(8),n=a.wc(14),o=a.wc(22);return t.addModule(i.value,n.value,o.value)})),a.Qb(28,"i",17),a.Hc(29," Create Module"),a.Tb(),a.Tb(),a.Tb()}2&e&&(a.Cb(3),a.oc("formGroup",t.moduleForm),a.Cb(4),a.oc("ngClass",a.sc(10,vt,t.submitted&&t.m.number.errors)),a.Cb(2),a.oc("ngIf",t.submitted&&t.m.number.errors),a.Cb(4),a.oc("ngClass",a.sc(12,vt,t.submitted&&t.m.title.errors)),a.Cb(2),a.oc("ngIf",t.submitted&&t.m.title.errors),a.Cb(5),a.oc("value",a.kc(23,8,t.todayDate))("ngClass",a.sc(14,vt,t.submitted&&t.m.lockedUntil.errors)),a.Cb(6),a.oc("ngIf",t.submitted&&t.m.lockedUntil.errors))},directives:[c.o,c.i,c.d,c.a,c.h,c.c,c.l,n.l,n.n,o.a],pipes:[n.b],styles:[""]}),e})();function kt(e,t){1&e&&(a.Ub(0,"div"),a.Hc(1,"Number is required"),a.Tb())}function Ct(e,t){if(1&e&&(a.Ub(0,"div",18),a.Fc(1,kt,2,0,"div",19),a.Tb()),2&e){const e=a.ic();a.Cb(1),a.oc("ngIf",e.mu.number.errors.required)}}function yt(e,t){1&e&&(a.Ub(0,"div"),a.Hc(1,"Title is required"),a.Tb())}function xt(e,t){if(1&e&&(a.Ub(0,"div",18),a.Fc(1,yt,2,0,"div",19),a.Tb()),2&e){const e=a.ic();a.Cb(1),a.oc("ngIf",e.mu.title.errors.required)}}function Tt(e,t){1&e&&(a.Ub(0,"div"),a.Hc(1,"Locked Until is required"),a.Tb())}function Ft(e,t){if(1&e&&(a.Ub(0,"div",18),a.Fc(1,Tt,2,0,"div",19),a.Tb()),2&e){const e=a.ic();a.Cb(1),a.oc("ngIf",e.mu.lockedUntil.errors.required)}}const It=function(e){return{"is-invalid":e}};let Pt=(()=>{class e{constructor(e,t,i,n){this.moduleService=e,this.router=t,this.route=i,this.fb=n,this.submitted=!1,this.givenDate=null,this.CreateForm()}CreateForm(){this.updateForm=this.fb.group({number:["",c.m.required],title:["",c.m.required],lockedUntil:["",c.m.required]})}get mu(){return this.updateForm.controls}ngOnInit(){this.route.params.subscribe(e=>{this.id=e.moduleId,this.moduleService.getModuleById(this.id).subscribe(e=>{this.module=e[0],this.moduleNumber=this.module.number,this.updateForm.get("number").setValue(this.module.number),this.updateForm.get("title").setValue(this.module.title),this.updateForm.get("lockedUntil").setValue(this.module.lockedUntil);let t=new Date(this.module.lockedUntil.toString()),i=String(t.getDate()+1).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),o=t.getFullYear();this.givenDate=new Promise((e,t)=>{e(n+"/"+i+"/"+o)}),this.startDate=(""+this.module.lockedUntil).split("-")})})}updateModule(e,t,i){this.submitted=!0;let n=new Date(i),o=String(n.getDate()).padStart(2,"0"),c=String(n.getMonth()+1).padStart(2,"0");i=n.getFullYear()+"-"+c+"-"+o,this.updateForm.valid&&this.moduleService.updateModule(this.id,e,t,i).subscribe(e=>{alert("Module updated successfully")})}onDateSelect(e){this.givenDate=new Promise((t,i)=>{t(String(e.month).padStart(2,"0")+"/"+String(e.day).padStart(2,"0")+"/"+e.year)})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(E),a.Pb(r.c),a.Pb(r.a),a.Pb(c.b))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-edit-module"]],decls:30,vars:17,consts:[[1,"center-form"],[1,"col-sm-4",3,"formGroup"],[1,"form-group"],["for","number"],["type","text","formControlName","number","required","",1,"form-control",3,"ngClass"],["number",""],["class","invalid-feedback",4,"ngIf"],["for","title"],["formControlName","title","required","",1,"form-control",3,"ngClass"],["title",""],["for","lockedUntil"],[1,"input-group"],["type","text","placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","readonly","","formControlName","lockedUntil","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d","ngbDatepicker","lockedUntil",""],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","far","fa-calendar-alt",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",0),a.Ub(1,"h2"),a.Hc(2),a.Tb(),a.Ub(3,"form",1),a.Ub(4,"div",2),a.Ub(5,"label",3),a.Hc(6,"Number"),a.Tb(),a.Qb(7,"input",4,5),a.Fc(9,Ct,2,1,"div",6),a.Tb(),a.Ub(10,"div",2),a.Ub(11,"label",7),a.Hc(12,"Title"),a.Tb(),a.Qb(13,"textarea",8,9),a.Fc(15,xt,2,1,"div",6),a.Tb(),a.Ub(16,"div",2),a.Ub(17,"label",10),a.Hc(18,"Locked Until"),a.Tb(),a.Ub(19,"div",11),a.Ub(20,"input",12,13),a.gc("dateSelect",(function(e){return t.onDateSelect(e)})),a.jc(23,"async"),a.Tb(),a.Ub(24,"div",14),a.Ub(25,"button",15),a.gc("click",(function(){return a.xc(e),a.wc(21).toggle()})),a.Tb(),a.Tb(),a.Fc(26,Ft,2,1,"div",6),a.Tb(),a.Tb(),a.Ub(27,"button",16),a.gc("click",(function(){a.xc(e);const i=a.wc(8),n=a.wc(14),o=a.wc(22);return t.updateModule(i.value,n.value,o.value)})),a.Qb(28,"i",17),a.Hc(29," Update Module"),a.Tb(),a.Tb(),a.Tb()}2&e&&(a.Cb(2),a.Jc("Edit Module ",t.moduleNumber,""),a.Cb(1),a.oc("formGroup",t.updateForm),a.Cb(4),a.oc("ngClass",a.sc(11,It,t.submitted&&t.mu.number.errors)),a.Cb(2),a.oc("ngIf",t.submitted&&t.mu.number.errors),a.Cb(4),a.oc("ngClass",a.sc(13,It,t.submitted&&t.mu.title.errors)),a.Cb(2),a.oc("ngIf",t.submitted&&t.mu.title.errors),a.Cb(5),a.oc("value",a.kc(23,9,t.givenDate))("ngClass",a.sc(15,It,t.submitted&&t.mu.lockedUntil.errors)),a.Cb(6),a.oc("ngIf",t.submitted&&t.mu.lockedUntil.errors))},directives:[c.o,c.i,c.d,c.a,c.h,c.c,c.l,n.l,n.n,o.a],pipes:[n.b],styles:[""]}),e})();function St(e,t){if(1&e){const e=a.Vb();a.Sb(0),a.Ub(1,"ckeditor",2),a.gc("change",(function(t){return a.xc(e),a.ic().onChange(t)})),a.Tb(),a.Ub(2,"span"),a.Ub(3,"button",3),a.gc("click",(function(){a.xc(e);const i=t.ngIf;return a.ic().onSubmit(i.id)})),a.Hc(4,"Submit"),a.Tb(),a.Ub(5,"button",4),a.gc("click",(function(){a.xc(e);const i=t.ngIf;return a.ic().onClearButtonClicked(i.id)})),a.Hc(6,"Clear and Submit"),a.Tb(),a.Ub(7,"a",5),a.Qb(8,"i",6),a.Hc(9," Go back"),a.Tb(),a.Tb(),a.Qb(10,"hr"),a.Ub(11,"h2"),a.Hc(12,"Preview"),a.Tb(),a.Qb(13,"div",7),a.Rb()}if(2&e){const e=t.ngIf,i=a.ic();a.Cb(1),a.oc("editor",i.Editor)("data",i.editorData?i.editorData:e.content),a.Cb(6),a.qc("routerLink","/courses/",i.courseId,""),a.Cb(6),a.oc("innerHTML",i.editorData?i.editorData:e.content,a.yc)}}let wt=(()=>{class e{constructor(e,t,i){this.courseDetailsService=e,this.route=t,this.router=i,this.Editor=D,this.isCleared=!1}ngOnInit(){this.route.params.subscribe(e=>{this.courseId=e.id}),this.courseContent=this.courseDetailsService.getCourseDetails(this.courseId),this.courseDetailsService.getCourseDetails(this.courseId).subscribe(e=>{this.courseDetails=e})}onReady(e){e.setData("")}onChange({editor:e}){this.editorData=e.getData(),this.isCleared&&(e.setData(""),this.isCleared=!1),console.log(this.editorData)}onSubmit(e){this.courseDetailsService.updateCourseDetails(e,this.editorData).subscribe(()=>{alert("Submitted Content"),this.router.navigate(["courses",this.courseId])})}onClearButtonClicked(e){confirm("Clear content; Are you sure?")&&this.courseDetailsService.clearCourseDetails(e).subscribe(()=>{alert("Cleared Content"),this.isCleared=!0,this.router.navigate(["courses",this.courseId])})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(_.a),a.Pb(r.a),a.Pb(r.c))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-home-edit"]],decls:3,vars:3,consts:[[1,"flexbox-row"],[4,"ngIf"],[1,"clamp-words",3,"editor","data","change"],[1,"btn","btn-primary",2,"margin-right","15px",3,"click"],[1,"btn","btn-warning",2,"margin-left","15px",3,"click"],[1,"btn","btn-secondary",2,"margin-left","15px",3,"routerLink"],[1,"fas","fa-arrow-circle-left"],[1,"custom-font","clamp-words",2,"margin-top","30px",3,"innerHTML"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Fc(1,St,14,4,"ng-container",1),a.jc(2,"async"),a.Tb()),2&e&&(a.Cb(1),a.oc("ngIf",a.kc(2,1,t.courseContent)))},directives:[n.n,s.a,r.f],pipes:[n.b],styles:[".flexbox-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;align-items:center;position:relative;margin-top:30px}"]}),e})(),Ht=(()=>{class e{constructor(e){this.http=e}createDiscussion(e,t,i,n,o,c){return this.http.post(`${m.a.apiURL}/discussions`,{user:e,post:t,created:i,changed:n,module_id:o,user_id:c})}getDiscussionsInModule(e){return this.http.get(`${m.a.apiURL}/discussions/m/${e}`)}updateDiscussion(e,t,i){return this.http.put(`${m.a.apiURL}/discussions/${i}`,{post:e,changed:t})}deleteDiscussion(e){return this.http.delete(`${m.a.apiURL}/discussions/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(a.cc(g.b))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Dt(e,t){1&e&&(a.Ub(0,"div"),a.Hc(1,"Post cannot be empty"),a.Tb())}function _t(e,t){if(1&e&&(a.Ub(0,"div",8),a.Fc(1,Dt,2,0,"div",9),a.Tb()),2&e){const e=a.ic();a.Cb(1),a.oc("ngIf",e.p.post.errors.required)}}const Mt=function(e){return{"is-invalid":e}};let $t=(()=>{class e{constructor(e,t,i,n,o){this.fb=e,this.discussionService=t,this.moduleService=i,this.authenticationService=n,this.route=o,this.module=null,this.submitted=!1,this.authenticationService.currentUser.subscribe(e=>this.currentUser=e)}get p(){return this.postForm.controls}ngOnInit(){this.userPayload=l()(this.currentUser.token),this.route.params.subscribe(e=>{this.moduleService.getModuleById(e.moduleId).subscribe(e=>{this.module=new Promise((t,i)=>{t(e[0])})})}),this.createForm()}createForm(){this.postForm=this.fb.group({post:["",c.m.required]})}createPost(e){this.submitted=!0,this.postForm.valid&&this.module.then(t=>{let i=this.userPayload.f_name+" "+this.userPayload.l_name,n=new Date;this.discussionService.createDiscussion(i,e,n,n,t.id,this.userPayload.id).subscribe(()=>{alert("Created post")})})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(c.b),a.Pb(Ht),a.Pb(E),a.Pb(p.a),a.Pb(r.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-create-post"]],decls:9,vars:5,consts:[[1,"center-form"],[3,"formGroup"],[1,"form-group"],["rows","3","required","","formControlName","post",1,"form-control",3,"ngClass"],["post",""],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",0),a.Ub(1,"form",1),a.Ub(2,"div",2),a.Qb(3,"textarea",3,4),a.Fc(5,_t,2,1,"div",5),a.Tb(),a.Ub(6,"button",6),a.gc("click",(function(){a.xc(e);const i=a.wc(4);return t.createPost(i.value)})),a.Qb(7,"i",7),a.Hc(8," Create Post"),a.Tb(),a.Tb(),a.Tb()}2&e&&(a.Cb(1),a.oc("formGroup",t.postForm),a.Cb(2),a.oc("ngClass",a.sc(3,Mt,t.submitted&&t.p.post.errors)),a.Cb(2),a.oc("ngIf",t.submitted&&t.p.post.errors))},directives:[c.o,c.i,c.d,c.a,c.l,c.h,c.c,n.l,n.n],styles:[""]}),e})();function Lt(e,t){1&e&&(a.Ub(0,"div"),a.Hc(1,"Post is required"),a.Tb())}function At(e,t){if(1&e&&(a.Ub(0,"div",17),a.Fc(1,Lt,2,0,"div",18),a.Tb()),2&e){const e=a.ic(2);a.Cb(1),a.oc("ngIf",e.up.post.errors.required)}}const Ot=function(e){return{"is-invalid":e}};function Vt(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",2),a.Ub(1,"h4",3),a.Hc(2,"Edit Your Post"),a.Tb(),a.Ub(3,"button",4),a.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),a.Ub(4,"span",5),a.Hc(5,"\xd7"),a.Tb(),a.Tb(),a.Tb(),a.Ub(6,"div",6),a.Ub(7,"form",7),a.Ub(8,"div",8),a.Ub(9,"label",9),a.Hc(10,"Post"),a.Tb(),a.Qb(11,"textarea",10,11),a.Fc(13,At,2,1,"div",12),a.Tb(),a.Ub(14,"button",13),a.gc("click",(function(){a.xc(e);const t=a.wc(12);return a.ic().updatePost(t.value)})),a.Qb(15,"i",14),a.Hc(16," Update Post"),a.Tb(),a.Tb(),a.Tb(),a.Ub(17,"div",15),a.Ub(18,"button",16),a.gc("click",(function(){return t.$implicit.close("Close click")})),a.Hc(19,"Close"),a.Tb(),a.Tb()}if(2&e){const e=a.ic();a.Cb(7),a.oc("formGroup",e.editPostForm),a.Cb(4),a.oc("ngClass",a.sc(3,Ot,e.submitted&&e.up.post.errors)),a.Cb(2),a.oc("ngIf",e.submitted&&e.up.post.errors)}}let Qt=(()=>{class e{constructor(e,t,i){this.modalService=e,this.fb=t,this.discussionService=i,this.submitted=!1}ngOnInit(){this.makeForm()}get up(){return this.editPostForm.controls}makeForm(){this.editPostForm=this.fb.group({post:["",c.m.required]})}open(e){this.editPostForm.get("post").setValue(this.discussionData.post),this.modalService.open(e,{size:"lg",centered:!0})}updatePost(e){if(this.submitted=!0,!this.editPostForm.valid)return;let t=new Date;this.discussionService.updateDiscussion(e,t,this.discussionData.discussion_id).subscribe(()=>{alert("Updated post")})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(o.b),a.Pb(c.b),a.Pb(Ht))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-edit-post"]],inputs:{discussionData:"discussionData"},decls:4,vars:0,consts:[["contentPostEdit",""],[1,"btn","btn-success",3,"click"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-9",3,"formGroup"],[1,"form-group"],["for","post"],["rows","3","required","","formControlName","post",1,"form-control",3,"ngClass"],["post",""],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){if(1&e){const e=a.Vb();a.Fc(0,Vt,20,5,"ng-template",null,0,a.Gc),a.Ub(2,"button",1),a.gc("click",(function(){a.xc(e);const i=a.wc(1);return t.open(i)})),a.Hc(3,"Edit Post"),a.Tb()}},directives:[c.o,c.i,c.d,c.a,c.l,c.h,c.c,n.l,n.n],styles:[""]}),e})();function qt(e,t){if(1&e&&(a.Ub(0,"div"),a.Ub(1,"h1",3),a.Hc(2,"Discussion"),a.Tb(),a.Ub(3,"h2",3),a.Hc(4),a.Tb(),a.Ub(5,"h3"),a.Hc(6),a.Tb(),a.Tb()),2&e){const e=t.ngIf;a.Cb(4),a.Jc("Module ",e.number,""),a.Cb(2),a.Ic(e.title)}}function Et(e,t){if(1&e&&a.Qb(0,"app-edit-post",8),2&e){const e=a.ic().$implicit;a.oc("discussionData",e)}}function zt(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",9),a.gc("click",(function(){a.xc(e);const t=a.ic().$implicit;return a.ic().deletePost(t.discussion_id)})),a.Hc(1,"Delete Post"),a.Tb()}}function Rt(e,t){if(1&e&&(a.Ub(0,"div",4),a.Ub(1,"p",5),a.Hc(2),a.jc(3,"date"),a.jc(4,"date"),a.Qb(5,"br"),a.Hc(6),a.Qb(7,"br"),a.Fc(8,Et,1,1,"app-edit-post",6),a.Fc(9,zt,2,0,"button",7),a.Tb(),a.Tb()),2&e){const e=t.$implicit,i=a.ic();a.Cb(2),a.Kc(" ",e.user," | ",e.created>=e.changed?a.lc(3,5,e.created,"short"):a.lc(4,8,e.changed,"short"),""),a.Cb(4),a.Jc(" ",e.post,""),a.Cb(2),a.oc("ngIf",e.user_id==i.userPayload.id),a.Cb(1),a.oc("ngIf",e.user_id==i.userPayload.id)}}let Bt=(()=>{class e{constructor(e,t,i,n){this.discussionService=e,this.moduleService=t,this.authenticationService=i,this.route=n,this.discussions=[],this.moduleDetails={},this.authenticationService.currentUser.subscribe(e=>this.currentUser=e)}ngOnInit(){this.userPayload=l()(this.currentUser.token),this.route.params.subscribe(e=>{this.discussionService.getDiscussionsInModule(e.moduleId).subscribe(e=>{console.log(e),this.discussions=e}),this.moduleService.getModuleById(e.moduleId).subscribe(e=>{console.log(e[0]),this.moduleDetails=e[0]})})}deletePost(e){confirm("Delete post: Are you sure?")&&this.discussionService.deleteDiscussion(e).subscribe(()=>{alert("Deleted post successfully")})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(Ht),a.Pb(E),a.Pb(p.a),a.Pb(r.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-discussion"]],decls:4,vars:2,consts:[[1,"center-form"],[4,"ngIf"],["class","flex-row",4,"ngFor","ngForOf"],[2,"text-align","center"],[1,"flex-row"],[1,"flex-item"],[3,"discussionData",4,"ngIf"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],[3,"discussionData"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Fc(1,qt,7,2,"div",1),a.Qb(2,"app-create-post"),a.Fc(3,Rt,10,11,"div",2),a.Tb()),2&e&&(a.Cb(1),a.oc("ngIf",t.moduleDetails),a.Cb(2),a.oc("ngForOf",t.discussions))},directives:[n.n,$t,n.m,Qt],pipes:[n.e],styles:[".flex-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;background-color:#add8e6;margin:15px;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content}.flex-item[_ngcontent-%COMP%]{align-self:stretch}"]}),e})(),Nt=(()=>{class e{constructor(e){this.http=e}createCourseAnnouncement(e,t){return this.http.post(`${m.a.apiURL}/courseAnnouncements`,{course_id:e,announcement_id:t})}fetchCourseAnnouncements(){return this.http.get(`${m.a.apiURL}/courseAnnouncements`)}fetchCourseAnnouncementById(e){return this.http.get(`${m.a.apiURL}/courseAnnouncements/${e}`)}updateCourseAnnouncement(e,t,i){return this.http.put(`${m.a.apiURL}/courseAnnouncements/${e}`,{course_id:t,announcement_id:i})}deleteCourseAnnouncement(e){return this.http.delete(`${m.a.apiURL}/courseAnnouncements/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(a.cc(g.b))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Jt(e,t){if(1&e&&(a.Ub(0,"p"),a.Hc(1),a.Tb()),2&e){const e=a.ic().$implicit;a.Cb(1),a.Ic(e.name)}}function Gt(e,t){if(1&e&&(a.Ub(0,"div",8),a.Fc(1,Jt,2,1,"p",9),a.Tb()),2&e){const e=t.$implicit;a.Cb(1),a.oc("ngIf",e)}}let jt=(()=>{class e{constructor(e,t,i,n,o){this.announcementService=e,this.courseAnnouncementService=t,this.authenticationService=i,this.courseService=n,this.router=o,this.checkedCourses=[],this.Editor=D,this.editorData="",this.courses=[],this.authenticationService.currentUser.subscribe(e=>this.currentUser=e)}ngOnInit(){this.userPayload=l()(this.currentUser.token),console.log(this.userPayload.f_name),this.subscription=this.announcementService.sharedCheckedCourses.subscribe(e=>{this.checkedCourses=e,console.log(e),this.checkedCourses.forEach((e,t,i)=>{this.courseService.getCourseById(e).subscribe(e=>{this.courses[t]=e,console.log(e)})})},e=>{console.log(e)},()=>{console.log("complete")})}ngOnDestroy(){this.subscription.unsubscribe()}onReady(e){e.setData("")}onChange({editor:e}){this.editorData=e.getData(),this.isCleared&&(e.setData(""),this.isCleared=!1),console.log(this.editorData)}createAnnouncement(){let e=this.userPayload.f_name+" "+this.userPayload.l_name,t=new Date;this.announcementService.createAnnouncement(e,this.editorData,t,t,this.userPayload.id).subscribe(e=>{console.log(e);for(let t=0;t<this.checkedCourses.length;t++)this.courseAnnouncementService.createCourseAnnouncement(this.checkedCourses[t],e.id).subscribe(e=>{console.log(e)});alert("Created announcement successfully")})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(v),a.Pb(Nt),a.Pb(p.a),a.Pb(f.a),a.Pb(r.c))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-create-announcement"]],decls:16,vars:4,consts:[[1,"flexbox-row",2,"margin-top","30px"],[1,"row"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"clamp-words",3,"editor","data","change"],[1,"btn","btn-primary",2,"margin-right","15px",3,"click"],["routerLink","/courses",1,"btn","btn-secondary",2,"margin-left","15px"],[1,"fas","fa-arrow-circle-left"],[1,"custom-font","clamp-words",2,"margin-top","30px",3,"innerHTML"],[1,"col-md-4"],[4,"ngIf"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"h3"),a.Hc(2,"Create announcement for courses:"),a.Tb(),a.Ub(3,"div",1),a.Fc(4,Gt,2,1,"div",2),a.Tb(),a.Ub(5,"ckeditor",3),a.gc("change",(function(e){return t.onChange(e)})),a.Tb(),a.Ub(6,"span"),a.Ub(7,"button",4),a.gc("click",(function(){return t.createAnnouncement()})),a.Hc(8,"Submit"),a.Tb(),a.Ub(9,"a",5),a.Qb(10,"i",6),a.Hc(11," Go back"),a.Tb(),a.Tb(),a.Qb(12,"hr"),a.Ub(13,"h2"),a.Hc(14,"Announcement Preview"),a.Tb(),a.Qb(15,"div",7),a.Tb()),2&e&&(a.Cb(4),a.oc("ngForOf",t.courses),a.Cb(1),a.oc("editor",t.Editor)("data",t.editorData),a.Cb(10),a.oc("innerHTML",t.editorData,a.yc))},directives:[n.m,s.a,r.f,n.n],styles:[""]}),e})();function Yt(e,t){if(1&e&&(a.Ub(0,"div"),a.Qb(1,"div",3),a.Tb()),2&e){const e=t.$implicit;a.Cb(1),a.oc("innerHTML",e.content,a.yc)}}let Kt=(()=>{class e{constructor(e,t){this.announcementService=e,this.route=t}ngOnInit(){this.route.params.subscribe(e=>{console.log(e.id),this.announcements=this.announcementService.fetchAnnouncementsByCourseId(e.id)})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(v),a.Pb(r.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-announcements"]],decls:8,vars:3,consts:[["id","main"],[1,"flexbox-row"],[4,"ngFor","ngForOf"],[2,"background-color","lightgray",3,"innerHTML"]],template:function(e,t){1&e&&(a.Qb(0,"app-sidebar"),a.Ub(1,"div",0),a.Qb(2,"app-sidebar-button"),a.Ub(3,"div",1),a.Ub(4,"h2"),a.Hc(5,"Announcements"),a.Tb(),a.Fc(6,Yt,2,1,"div",2),a.jc(7,"async"),a.Tb(),a.Tb()),2&e&&(a.Cb(6),a.oc("ngForOf",a.kc(7,1,t.announcements)))},directives:[$,O,n.m],pipes:[n.b],styles:[""]}),e})(),Xt=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Jb({type:e,selectors:[["app-edit-announcement"]],decls:2,vars:0,template:function(e,t){1&e&&(a.Ub(0,"p"),a.Hc(1,"edit-announcement works!"),a.Tb())},styles:[""]}),e})();function Wt(e,t){if(1&e&&(a.Ub(0,"div",3),a.Ub(1,"p"),a.Hc(2),a.Tb(),a.Ub(3,"p"),a.Hc(4),a.Tb(),a.Qb(5,"div",4),a.Tb()),2&e){const e=a.ic().$implicit,t=a.ic(),i=t.index,n=t.$implicit;a.Cb(2),a.Jc("Equal ",e,""),a.Cb(2),a.Lc("",i," | ",n.announcement_id," | ",n.course_name,""),a.Cb(1),a.oc("innerHTML",n.content,a.yc)}}function Zt(e,t){if(1&e&&(a.Ub(0,"div"),a.Fc(1,Wt,6,5,"div",2),a.Tb()),2&e){const e=t.$implicit,i=a.ic().$implicit;a.Cb(1),a.oc("ngIf",e==i.announcement_id)}}function ei(e,t){if(1&e&&(a.Ub(0,"div"),a.Fc(1,Zt,2,1,"div",1),a.Tb()),2&e){const e=a.ic();a.Cb(1),a.oc("ngForOf",e.announcementSet)}}const ti=[{path:"create-announcement",component:jt,canActivate:[p.a],data:{expectedRole:"admin"},pathMatch:"full"},{path:"view-created-announcements",component:(()=>{class e{constructor(e){this.announcementService=e,this.announcementSet=new Set}ngOnInit(){this.announcementService.fetchAnnouncements().subscribe(e=>{e.forEach((e,t,i)=>{this.announcementSet.add(e.announcement_id);let n=e.content.substring(0,25);e.content=n}),this.announcementSet.forEach(e=>{console.log(e)}),this.announcements=e,console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(v))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-view-created-announcements"]],decls:4,vars:1,consts:[[1,"flexbox-row"],[4,"ngFor","ngForOf"],["style","background-color: lightgray",4,"ngIf"],[2,"background-color","lightgray"],[3,"innerHTML"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"h2"),a.Hc(2,"Manage Announcements"),a.Tb(),a.Fc(3,ei,2,1,"div",1),a.Tb()),2&e&&(a.Cb(3),a.oc("ngForOf",t.announcements))},directives:[n.m,n.n],styles:[""]}),e})(),canActivate:[p.a],data:{expectedRole:"admin"},pathMatch:"full"},{path:"edit-announcement/:announcementId",component:Xt,canActivate:[p.a],data:{expectedRole:"admin"},pathMatch:"full"},{path:"",component:H,canActivate:[p.a],pathMatch:"full"},{path:":id",component:q,canActivate:[p.a],pathMatch:"full"},{path:":id/announcements",component:Kt,canActivate:[p.a]},{path:":id/modules",component:ut,canActivate:[p.a]},{path:":id/leaderboard",component:at,canActivate:[p.a]},{path:":id/create-module",component:Ut,canActivate:[p.a],data:{expectedRole:"instructor"}},{path:":id/edit-module/:moduleId",component:Pt,canActivate:[p.a],data:{expectedRole:"instructor"}},{path:":id/edit-home",component:wt,canActivate:[p.a],data:{expectedRole:"instructor"}},{path:":id/discussion/:moduleId",component:Bt,canActivate:[p.a]}];let ii=(()=>{class e{}return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},imports:[[r.g.forChild(ti)],r.g]}),e})();i.d(t,"CourseModule",(function(){return ni}));let ni=(()=>{class e{}return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},imports:[[n.c,ii,c.k,o.c,s.b]]}),e})()}}]);