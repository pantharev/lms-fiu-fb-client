(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{BUtp:function(e,t,i){"use strict";i.r(t);var n=i("ofXK"),o=i("1kSV"),s=i("3Pt+"),c=i("zioG"),r=i("rDax"),u=i("u47x"),a=i("fXoL"),l=i("FKr1"),d=i("8LU1"),b=(i("FtGj"),i("nLfN")),f=i("XNiG");i("itXk"),i("GyhO"),i("HDdC"),i("IzEk"),i("7o/Q"),i("Kj3r"),i("lJxs"),i("JX91");var h=i("1G5W");i("+rOU"),i("R0Ic"),i("vxfF"),i("cH1L");const p={provide:new a.q("mat-tooltip-scroll-strategy"),deps:[r.a],useFactory:function(e){return()=>e.scrollStrategies.reposition({scrollThrottle:20})}};let m=(()=>{class e{}return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},providers:[p],imports:[[u.a,n.c,r.c,l.d],l.d]}),e})();var g=i("EY2u"),v=i("xgIS"),C=i("3UWI");const y=Object(b.f)({passive:!0});let I=(()=>{class e{constructor(e,t){this._platform=e,this._ngZone=t,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return g.a;const t=Object(d.d)(e),i=this._monitoredElements.get(t);if(i)return i.subject.asObservable();const n=new f.a,o="cdk-text-field-autofilled",s=e=>{"cdk-text-field-autofill-start"!==e.animationName||t.classList.contains(o)?"cdk-text-field-autofill-end"===e.animationName&&t.classList.contains(o)&&(t.classList.remove(o),this._ngZone.run(()=>n.next({target:e.target,isAutofilled:!1}))):(t.classList.add(o),this._ngZone.run(()=>n.next({target:e.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{t.addEventListener("animationstart",s,y),t.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(t,{subject:n,unlisten:()=>{t.removeEventListener("animationstart",s,y)}}),n.asObservable()}stopMonitoring(e){const t=Object(d.d)(e),i=this._monitoredElements.get(t);i&&(i.unlisten(),i.subject.complete(),t.classList.remove("cdk-text-field-autofill-monitored"),t.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(t))}ngOnDestroy(){this._monitoredElements.forEach((e,t)=>this.stopMonitoring(t))}}return e.\u0275fac=function(t){return new(t||e)(a.cc(b.a),a.cc(a.z))},e.\u0275prov=Object(a.Lb)({factory:function(){return new e(Object(a.cc)(b.a),Object(a.cc)(a.z))},token:e,providedIn:"root"}),e})(),U=(()=>{class e{constructor(e,t,i,n){this._elementRef=e,this._platform=t,this._ngZone=i,this._destroyed=new f.a,this._enabled=!0,this._previousMinRows=-1,this._document=n,this._textareaElement=this._elementRef.nativeElement}get minRows(){return this._minRows}set minRows(e){this._minRows=Object(d.e)(e),this._setMinHeight()}get maxRows(){return this._maxRows}set maxRows(e){this._maxRows=Object(d.e)(e),this._setMaxHeight()}get enabled(){return this._enabled}set enabled(e){e=Object(d.b)(e),this._enabled!==e&&((this._enabled=e)?this.resizeToFitContent(!0):this.reset())}_setMinHeight(){const e=this.minRows&&this._cachedLineHeight?`${this.minRows*this._cachedLineHeight}px`:null;e&&(this._textareaElement.style.minHeight=e)}_setMaxHeight(){const e=this.maxRows&&this._cachedLineHeight?`${this.maxRows*this._cachedLineHeight}px`:null;e&&(this._textareaElement.style.maxHeight=e)}ngAfterViewInit(){this._platform.isBrowser&&(this._initialHeight=this._textareaElement.style.height,this.resizeToFitContent(),this._ngZone.runOutsideAngular(()=>{const e=this._getWindow();Object(v.a)(e,"resize").pipe(Object(C.a)(16),Object(h.a)(this._destroyed)).subscribe(()=>this.resizeToFitContent(!0))}))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_cacheTextareaLineHeight(){if(this._cachedLineHeight)return;let e=this._textareaElement.cloneNode(!1);e.rows=1,e.style.position="absolute",e.style.visibility="hidden",e.style.border="none",e.style.padding="0",e.style.height="",e.style.minHeight="",e.style.maxHeight="",e.style.overflow="hidden",this._textareaElement.parentNode.appendChild(e),this._cachedLineHeight=e.clientHeight,this._textareaElement.parentNode.removeChild(e),this._setMinHeight(),this._setMaxHeight()}ngDoCheck(){this._platform.isBrowser&&this.resizeToFitContent()}resizeToFitContent(e=!1){if(!this._enabled)return;if(this._cacheTextareaLineHeight(),!this._cachedLineHeight)return;const t=this._elementRef.nativeElement,i=t.value;if(!e&&this._minRows===this._previousMinRows&&i===this._previousValue)return;const n=t.placeholder;t.classList.add("cdk-textarea-autosize-measuring"),t.placeholder="",t.style.height=`${t.scrollHeight-4}px`,t.classList.remove("cdk-textarea-autosize-measuring"),t.placeholder=n,this._ngZone.runOutsideAngular(()=>{"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(()=>this._scrollToCaretPosition(t)):setTimeout(()=>this._scrollToCaretPosition(t))}),this._previousValue=i,this._previousMinRows=this._minRows}reset(){void 0!==this._initialHeight&&(this._textareaElement.style.height=this._initialHeight)}_noopInputHandler(){}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_scrollToCaretPosition(e){const{selectionStart:t,selectionEnd:i}=e,n=this._getDocument();this._destroyed.isStopped||n.activeElement!==e||e.setSelectionRange(t,i)}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(a.l),a.Pb(b.a),a.Pb(a.z),a.Pb(n.d,8))},e.\u0275dir=a.Kb({type:e,selectors:[["textarea","cdkTextareaAutosize",""]],hostAttrs:["rows","1",1,"cdk-textarea-autosize"],hostBindings:function(e,t){1&e&&a.gc("input",(function(){return t._noopInputHandler()}))},inputs:{minRows:["cdkAutosizeMinRows","minRows"],maxRows:["cdkAutosizeMaxRows","maxRows"],enabled:["cdkTextareaAutosize","enabled"]},exportAs:["cdkTextareaAutosize"]}),e})(),k=(()=>{class e{}return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},imports:[[b.b]]}),e})();var x=i("kmnG");const T=new a.q("MAT_INPUT_VALUE_ACCESSOR"),_=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let w=0;class S{constructor(e,t,i,n){this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=i,this.ngControl=n}}const P=Object(l.p)(S);let D=(()=>{class e extends P{constructor(e,t,i,n,o,s,c,r,u){super(s,n,o,i),this._elementRef=e,this._platform=t,this.ngControl=i,this._autofillMonitor=r,this._uid=`mat-input-${w++}`,this._isServer=!1,this._isNativeSelect=!1,this.focused=!1,this.stateChanges=new f.a,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(e=>Object(b.e)().has(e));const a=this._elementRef.nativeElement;this._inputValueAccessor=c||a,this._previousNativeValue=this.value,this.id=this.id,t.IOS&&u.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",e=>{let t=e.target;t.value||t.selectionStart||t.selectionEnd||(t.setSelectionRange(1,1),t.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===a.nodeName.toLowerCase(),this._isNativeSelect&&(this.controlType=a.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=Object(d.b)(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required}set required(e){this._required=Object(d.b)(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea()&&Object(b.e)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Object(d.b)(e)}ngOnInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e===this.focused||this.readonly&&e||(this.focused=e,this.stateChanges.next())}_onInput(){}_isTextarea(){return"textarea"===this._elementRef.nativeElement.nodeName.toLowerCase()}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_validateType(){if(_.indexOf(this._type)>-1)throw Error(`Input type "${this._type}" isn't supported by matInput.`)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,t=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&t&&t.label)}return this.focused||!this.empty}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}onContainerClick(){this.focused||this.focus()}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(a.l),a.Pb(b.a),a.Pb(s.h,10),a.Pb(s.k,8),a.Pb(s.d,8),a.Pb(l.a),a.Pb(T,10),a.Pb(I),a.Pb(a.z))},e.\u0275dir=a.Kb({type:e,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:10,hostBindings:function(e,t){1&e&&a.gc("blur",(function(){return t._focusChanged(!1)}))("focus",(function(){return t._focusChanged(!0)}))("input",(function(){return t._onInput()})),2&e&&(a.Xb("disabled",t.disabled)("required",t.required),a.Db("id",t.id)("placeholder",t.placeholder)("readonly",t.readonly&&!t._isNativeSelect||null)("aria-describedby",t._ariaDescribedby||null)("aria-invalid",t.errorState)("aria-required",t.required.toString()),a.Hb("mat-input-server",t._isServer))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher"},exportAs:["matInput"],features:[a.Bb([{provide:x.b,useExisting:e}]),a.zb,a.Ab]}),e})(),F=(()=>{class e{}return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},providers:[l.a],imports:[[k,x.c],k,x.c]}),e})();var A=i("tyNb"),M=i("mrSG"),L=i("ZY/4"),O=i("Un6b"),G=i("y8gV"),$=i("AytR"),V=i("2Vo4"),E=i("tk/3");let Q=(()=>{class e{constructor(e){this.http=e,this.checkedCourses=new V.a([0]),this.sharedCheckedCourses=this.checkedCourses.asObservable(),this.editCourses=new V.a([{}]),this.sharedEditCourses=this.editCourses.asObservable()}nextCheckedCourses(e){this.checkedCourses.next(e)}nextEditCourses(e){this.editCourses.next(e)}createAnnouncement(e,t,i,n,o){return this.http.post(`${$.a.apiURL}/announcements`,{user:e,content:t,created:i,changed:n,user_id:o})}fetchAnnouncements(){return this.http.get(`${$.a.apiURL}/announcements`)}fetchAnnouncementById(e){return this.http.get(`${$.a.apiURL}/announcements/a/${e}`)}fetchAnnouncementsByCourseId(e){return this.http.get(`${$.a.apiURL}/announcements/c/${e}`)}updateAnnouncement(e,t,i){return this.http.put(`${$.a.apiURL}/announcements/${e}`,{id:e,content:t,changed:i})}deleteAnnouncement(e){return this.http.delete(`${$.a.apiURL}/announcements/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(a.cc(E.b))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function R(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",20),a.gc("click",(function(){return a.yc(e),a.ic(4).toggleDropCourse()})),a.Ic(1,"Toggle Course Drop"),a.Tb()}}const q=function(e){return{hideInfo:e}};function z(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",21),a.gc("click",(function(){return a.yc(e),a.ic(4).createAnnouncement()})),a.Ic(1,"Create Announcement "),a.Tb()}if(2&e){const e=a.ic(4);a.oc("disabled",e.checkedCourses.length<=0)("ngClass",a.sc(2,q,e.checkedCourses.length<=0))}}function j(e,t){if(1&e&&(a.Ub(0,"button",22),a.Ic(1," add announcement info "),a.Tb()),2&e){const e=a.ic(4);a.oc("ngClass",a.sc(2,q,e.checkedCourses.length>0))("disabled",e.checkedCourses.length>0)}}function N(e,t){1&e&&(a.Ub(0,"a",23),a.Ic(1,"Manage Announcements "),a.Tb())}function H(e,t){if(1&e&&a.Qb(0,"input",24),2&e){const e=a.ic(2).index,t=a.ic(2);a.oc("checked",t.isChecked[e])}}function B(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",25),a.gc("click",(function(){a.yc(e);const t=a.ic(2).$implicit;return a.ic(2).dropCourse(t.course_id)})),a.Ic(1,"Drop Course"),a.Tb()}}const J=function(e){return{"checked-color":e}},K=function(e){return[e,"modules"]};function Y(e,t){if(1&e){const e=a.Vb();a.Sb(0),a.Gc(1,R,2,0,"button",7),a.Gc(2,z,2,4,"button",8),a.Gc(3,j,2,4,"button",9),a.Gc(4,N,2,0,"a",10),a.Ub(5,"div",11),a.Ub(6,"div",12),a.gc("click",(function(){a.yc(e);const t=a.ic(),i=t.index,n=t.$implicit;return a.ic(2).checkBox(i,n.course_id)})),a.Ub(7,"div",13),a.Gc(8,H,1,1,"input",14),a.Ub(9,"h5",15),a.Ic(10),a.Tb(),a.Ub(11,"p",16),a.Ic(12),a.Tb(),a.Ub(13,"div",17),a.Ub(14,"a",18),a.Ic(15,"Go to Course"),a.Tb(),a.Gc(16,B,2,0,"button",19),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Rb()}if(2&e){const e=a.ic(),t=e.index,i=e.$implicit,n=a.ic(2);a.Cb(1),a.oc("ngIf",0==t),a.Cb(1),a.oc("ngIf",0==t&&n.isAdmin),a.Cb(1),a.oc("ngIf",0==t&&n.isAdmin),a.Cb(1),a.oc("ngIf",0==t&&n.isAdmin),a.Cb(2),a.Eb(a.sc(11,J,n.isChecked[t])),a.Cb(2),a.oc("ngIf",n.isAdmin),a.Cb(2),a.Jc(i.name),a.Cb(2),a.Jc(i.description),a.Cb(2),a.oc("routerLink",a.sc(13,K,i.course_id)),a.Cb(2),a.oc("ngIf",n.courseDrop)}}function Z(e,t){if(1&e&&(a.Sb(0),a.Gc(1,Y,17,15,"ng-container",6),a.Rb()),2&e){const e=t.$implicit;a.Cb(1),a.oc("ngIf","enrolled"==e.enrollment_status)}}function X(e,t){if(1&e&&(a.Sb(0),a.Ub(1,"div",4),a.Gc(2,Z,2,1,"ng-container",5),a.jc(3,"async"),a.Tb(),a.Rb()),2&e){const e=a.ic();a.Cb(2),a.oc("ngForOf",a.kc(3,1,e.listCourses))}}function W(e,t){1&e&&(a.Ub(0,"p"),a.Ic(1,"You have no courses!"),a.Tb(),a.Ub(2,"label"),a.Ic(3,"Enroll in courses"),a.Tb(),a.Ub(4,"button",26),a.Ic(5,"Enroll"),a.Tb())}let ee=(()=>{class e{constructor(e,t,i,n,o){this.studentCourseService=e,this.courseService=t,this.authService=i,this.router=n,this.announcementService=o,this.courses=[],this.courseDrop=!1,this.checkedCourses=[],this.isChecked=[]}ngOnInit(){this.currentUser=this.authService.currentUserValue,this.currentUser&&(this.isAdmin="admin"==this.currentUser.role,this.studentId=this.currentUser.id,this.listCourses=this.studentCourseService.getCoursesByStudentId(this.studentId),console.log(this.studentId))}fetchStudentCourses(e){return new Promise((t,i)=>{this.studentCourseService.getCoursesByStudentId(e).subscribe(e=>{for(let n=0;n<e.length;n++)e[n]?("enrolled"==e[n].enrollment_status?(this.courses.push(e[n]),console.log("Enrolled"),console.log(e[n])):(console.log("Not enrolled"),console.log(e[n])),n==e.length&&(console.log("got data"),t(!0))):(console.log("got no data"),i(!1))},e=>{i(e),console.log("error: "+e)})}).then(e=>(console.log("resthen: "+e),!0)).catch(e=>(console.log("ERROR: "+e),!1))}asyncFetchStudentCourses(e){return Object(M.a)(this,void 0,void 0,(function*(){console.log("calling"),this.hasCourses=yield this.fetchStudentCourses(e),console.log("resasync: "+this.hasCourses)}))}dropCourse(e){this.courseService.getCourseById(e).subscribe(e=>{this.course=e}),confirm("Drop the course? Are you sure?")&&this.studentCourseService.declineStudentEnrollment(this.studentId,e).subscribe(()=>{alert("Dropped the course"),this.courseService.updateCourseSeats(e,this.course.seats+1).subscribe(()=>{console.log("incremented seats by 1: "+(this.course.seats+1))})})}toggleDropCourse(){this.courseDrop=0==this.courseDrop}createAnnouncement(){this.announcementService.nextCheckedCourses(this.checkedCourses),this.router.navigate(["/courses/create-announcement"])}checkBox(e,t){"admin"==this.currentUser.role&&(this.isChecked[e]?(this.isChecked[e]=!1,this.checkedCourses.forEach((e,i,n)=>{e==t&&(console.log(t+" "+i),this.checkedCourses.splice(i,1))})):(this.isChecked[e]=!0,console.log("courseId: "+t+" has been checked"),this.checkedCourses.push(t)),console.log(this.isChecked[e]))}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(L.a),a.Pb(O.a),a.Pb(G.a),a.Pb(A.c),a.Pb(Q))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-dashboard"]],decls:7,vars:4,consts:[[1,"center-form",2,"position","relative"],[4,"ngIf","ngIfElse"],["class","center-form"],["elseBlock",""],[1,"row"],[4,"ngFor","ngForOf"],[4,"ngIf"],["type","button","class","btn btn-danger btn-sm center-form","style","position: absolute; top: 5px; left: 20px;",3,"click",4,"ngIf"],["type","button","class","btn btn-success btn-sm center-form","style","position: absolute; top: 5px; left: 170px;","placement","bottom","ngbTooltip","Click on courses (cards) to broadcast announcements to",3,"disabled","ngClass","click",4,"ngIf"],["placement","bottom","ngbTooltip","Click on courses (cards) to broadcast announcement to","class","btn btn-success btn-sm center-form","style","position: absolute; top: 5px; left: 170px;","triggers","click:blur",3,"ngClass","disabled",4,"ngIf"],["routerLink","/courses/view-created-announcements","class","btn btn-info btn-sm center-form","style","position: absolute; top: 5px; left: 335px;",4,"ngIf"],[1,"col"],[1,"card",2,"max-width","18rem",3,"click"],[1,"card-body"],["type","checkbox",3,"checked",4,"ngIf"],[1,"card-title","text-wrap",2,"word-wrap","break-word"],[1,"card-text","text-wrap",2,"word-wrap","break-word"],[1,"flex-container"],[1,"btn","btn-primary","flex-item",3,"routerLink"],["type","button","class","btn btn-danger btn-sm flex-item",3,"click",4,"ngIf"],["type","button",1,"btn","btn-danger","btn-sm","center-form",2,"position","absolute","top","5px","left","20px",3,"click"],["type","button","placement","bottom","ngbTooltip","Click on courses (cards) to broadcast announcements to",1,"btn","btn-success","btn-sm","center-form",2,"position","absolute","top","5px","left","170px",3,"disabled","ngClass","click"],["placement","bottom","ngbTooltip","Click on courses (cards) to broadcast announcement to","triggers","click:blur",1,"btn","btn-success","btn-sm","center-form",2,"position","absolute","top","5px","left","170px",3,"ngClass","disabled"],["routerLink","/courses/view-created-announcements",1,"btn","btn-info","btn-sm","center-form",2,"position","absolute","top","5px","left","335px"],["type","checkbox",3,"checked"],["type","button",1,"btn","btn-danger","btn-sm","flex-item",3,"click"],["routerLink","../course-library",1,"btn","btn-primary",2,"margin-left","10px"]],template:function(e,t){if(1&e&&(a.Ub(0,"div",0),a.Ub(1,"h2"),a.Ic(2,"Dashboard"),a.Tb(),a.Gc(3,X,4,3,"ng-container",1),a.jc(4,"async"),a.Gc(5,W,6,0,"ng-template",2,3,a.Hc),a.Tb()),2&e){const e=a.wc(6);a.Cb(3),a.oc("ngIf",a.kc(4,2,t.listCourses))("ngIfElse",e)}},directives:[n.n,n.m,A.f,o.f,n.l,A.d],pipes:[n.b],styles:[".flex-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.flex-item[_ngcontent-%COMP%]{align-self:center;margin:10px}.card[_ngcontent-%COMP%]{transition:.7s;box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19)}.card[_ngcontent-%COMP%]:hover{transition:.7s;box-shadow:0 4px 8px 0 rgba(0,0,0,.8),0 6px 20px 0 rgba(0,0,0,.8)}input.larger[_ngcontent-%COMP%]{width:50px;height:50px}.checked-color[_ngcontent-%COMP%]{background-color:#90ee90}.hideInfo[_ngcontent-%COMP%]{display:none;z-index:-1}"]}),e})();var te=i("+z1p"),ie=i("rptU");const ne=function(e){return["/courses",e]};let oe=(()=>{class e{constructor(e){this.route=e,this.sidebarIsOpen=!0}ngOnInit(){this.route.params.subscribe(e=>{this.courseId=e.id}),document.getElementById("mySidenav").style.width="250px",document.getElementById("main").style.marginLeft="250px",document.getElementById("mySidenav").style.display="block"}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(A.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-sidebar"]],decls:9,vars:6,consts:[["id","mySidenav",1,"sidenav"],["routerLinkActive","active",1,"nav-link",3,"routerLink"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"a",1),a.Ic(2,"Home"),a.Tb(),a.Ub(3,"a",1),a.Ic(4,"Announcements"),a.Tb(),a.Ub(5,"a",1),a.Ic(6,"Leaderboard"),a.Tb(),a.Ub(7,"a",1),a.Ic(8,"Modules"),a.Tb(),a.Tb()),2&e&&(a.Cb(1),a.oc("routerLink",a.sc(4,ne,t.courseId)),a.Cb(2),a.qc("routerLink","/courses/",t.courseId,"/announcements"),a.Cb(2),a.qc("routerLink","/courses/",t.courseId,"/leaderboard"),a.Cb(2),a.qc("routerLink","/courses/",t.courseId,"/modules"))},directives:[A.f,A.e],styles:[".sidenav[_ngcontent-%COMP%]{height:100%;width:0;position:absolute;z-index:0;top:55px;left:0;background-color:#425efd;overflow-x:hidden;transition:.5s}.dropdown-btn[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px;text-decoration:none;font-size:25px;color:#000;display:block}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, dropdown-btn[_ngcontent-%COMP%]:hover{background-color:#2d3d97;color:#fff}#main[_ngcontent-%COMP%]{padding:16px}.dropdown-container[_ngcontent-%COMP%]{display:none;background-color:#262626;padding-left:8px}.fa-caret-down[_ngcontent-%COMP%]{float:right;padding-right:8px}@media screen and (max-height:450px){.sidenav[_ngcontent-%COMP%]{padding-top:15px}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px}}"]}),e})();function se(e,t){if(1&e&&(a.Ub(0,"a",4),a.Ic(1,"Edit"),a.Tb()),2&e){const e=a.ic();a.qc("routerLink","/courses/",e.courseId,"/edit-home")}}function ce(e,t){if(1&e&&(a.Sb(0),a.Qb(1,"div",5),a.Rb()),2&e){const e=t.ngIf;a.Cb(1),a.oc("innerHTML",e.content,a.zc)}}let re=(()=>{class e{constructor(e,t,i){this.courseDetailsService=e,this.route=t,this.authenticationService=i,this.Editor=te,this.isCleared=!1,this.authenticationService.currentUser.subscribe(e=>this.currentUser=e)}ngOnInit(){this.isAdmin="admin"===this.currentUser.role,this.isInstructor="instructor"===this.currentUser.role,this.isStudent="student"===this.currentUser.role,this.route.params.subscribe(e=>{this.courseId=e.id}),this.courseContent=this.courseDetailsService.getCourseDetails(this.courseId),this.courseDetailsService.getCourseDetails(this.courseId).subscribe(e=>{this.courseDetails=e})}onReady(e){e.setData("")}onChange({editor:e}){this.editorData=e.getData(),this.isCleared&&(e.setData(""),this.isCleared=!1),console.log(this.editorData)}onSubmit(e){this.courseDetailsService.updateCourseDetails(e,this.editorData).subscribe(()=>{alert("Submitted Content")})}onClearButtonClicked(e){confirm("Clear content; Are you sure?")&&this.courseDetailsService.clearCourseDetails(e).subscribe(()=>{alert("Cleared Content"),this.isCleared=!0})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(ie.a),a.Pb(A.a),a.Pb(G.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-home"]],decls:6,vars:4,consts:[["id","main"],[1,"flexbox-row"],["class","btn btn-primary",3,"routerLink",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-primary",3,"routerLink"],[1,"custom-font","clamp-words",2,"margin-top","30px",3,"innerHTML"]],template:function(e,t){1&e&&(a.Qb(0,"app-sidebar"),a.Ub(1,"div",0),a.Ub(2,"div",1),a.Gc(3,se,2,1,"a",2),a.Gc(4,ce,2,1,"ng-container",3),a.jc(5,"async"),a.Tb(),a.Tb()),2&e&&(a.Cb(3),a.oc("ngIf",t.isAdmin||t.isInstructor),a.Cb(1),a.oc("ngIf",a.kc(5,2,t.courseContent)))},directives:[oe,n.n,A.f],pipes:[n.b],styles:[".flexbox-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;align-items:center;position:relative;margin-top:30px}"]}),e})(),ue=(()=>{class e{constructor(e){this.http=e}addModule(e,t,i,n){return this.http.post(`${$.a.apiURL}/modules/${e}`,{number:t,title:i,lockedUntil:n})}getModuleById(e){return this.http.get(`${$.a.apiURL}/modules/m/${e}`)}getModulesByCourseId(e){return this.http.get(`${$.a.apiURL}/modules/c/${e}`)}updateModule(e,t,i,n){return this.http.put(`${$.a.apiURL}/modules/${e}`,{number:t,title:i,lockedUntil:n})}deleteModule(e){return this.http.delete(`${$.a.apiURL}/modules/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(a.cc(E.b))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ae=(()=>{class e{constructor(e){this.http=e}addVideo(e,t){return this.http.post(`${$.a.apiURL}/videos`,{link:e,module_id:t})}fetchVideos(e){return this.http.get(`${$.a.apiURL}/videos/${e}`)}updateVideo(e,t){return this.http.put(`${$.a.apiURL}/videos/${t}`,{link:e})}deleteVideo(e){return this.http.delete(`${$.a.apiURL}/videos/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(a.cc(E.b))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),le=(()=>{class e{constructor(e){this.http=e}addPDF(e){return this.http.post(`${$.a.apiURL}/pdfs`,e)}fetchPDFs(e){return this.http.get(`${$.a.apiURL}/pdfs/${e}`)}updatePDF(e,t){return this.http.put(`${$.a.apiURL}/pdfs/${e}`,t)}deletePDF(e){return this.http.delete(`${$.a.apiURL}/pdfs/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(a.cc(E.b))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),de=(()=>{class e{constructor(e){this.http=e}addSurvey(e,t,i){return this.http.post(`${$.a.apiURL}/surveys`,{name:e,link:t,module_id:i})}fetchSurveys(e){return this.http.get(`${$.a.apiURL}/surveys/${e}`)}updateSurvey(e,t,i){return this.http.put(`${$.a.apiURL}/surveys/${i}`,{name:e,link:t})}deleteSurvey(e){return this.http.delete(`${$.a.apiURL}/surveys/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(a.cc(E.b))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var be=i("jhN1");function fe(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div"),a.Ub(1,"button",8),a.gc("click",(function(){a.yc(e);const t=a.ic();return t.createModule(t.courseId)})),a.Qb(2,"i",9),a.Ic(3," Create Module"),a.Tb(),a.Tb()}}function he(e,t){if(1&e&&(a.Ub(0,"span",24),a.Ic(1),a.Tb()),2&e){const e=a.ic(2).$implicit;a.Cb(1),a.Kc("locked until: ",e.lockedUntil,"")}}function pe(e,t){if(1&e&&(a.Ub(0,"span",26),a.Ic(1),a.Tb()),2&e){const e=a.ic(3).$implicit;a.Cb(1),a.Kc("locked until: ",e.lockedUntil,"")}}function me(e,t){if(1&e&&a.Gc(0,pe,2,1,"span",25),2&e){const e=a.ic(3);a.oc("ngIf",e.isAdmin||e.isInstructor)}}function ge(e,t){1&e&&(a.Ub(0,"div"),a.Ic(1,"Link is required"),a.Tb())}function ve(e,t){if(1&e&&(a.Ub(0,"div",45),a.Gc(1,ge,2,0,"div",6),a.Tb()),2&e){const e=a.ic(4);a.Cb(1),a.oc("ngIf",e.v.link.errors.required)}}function Ce(e,t){1&e&&(a.Ub(0,"div",46),a.Ic(1," Valid youtube link "),a.Tb())}function ye(e,t){1&e&&(a.Ub(0,"div",47),a.Ic(1," Invalid Youtube Link "),a.Tb())}function Ie(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",48),a.gc("click",(function(){a.yc(e),a.ic();const t=a.wc(23),i=a.ic(2).$implicit;return a.ic().addVideo(t.value,i.module_id)})),a.Qb(1,"i",9),a.Ic(2," Add Video"),a.Tb()}}function Ue(e,t){if(1&e&&(a.Ub(0,"div",49),a.Ic(1),a.Tb()),2&e){const e=a.ic(4);a.Cb(1),a.Jc(e.error)}}const ke=function(e,t){return{"is-invalid":e,"is-valid":t}};function xe(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",27),a.Ub(1,"h4",28),a.Ic(2,"Add Youtube Video"),a.Tb(),a.Ub(3,"button",29),a.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),a.Ub(4,"span",30),a.Ic(5,"\xd7"),a.Tb(),a.Tb(),a.Tb(),a.Ub(6,"div",31),a.Ub(7,"form",32),a.Ub(8,"div",33),a.Ub(9,"p"),a.Ic(10,"Valid youtube links are of the formats:"),a.Qb(11,"br"),a.Ic(12," https://youtu.be/*********** "),a.Qb(13,"br"),a.Ic(14,"And "),a.Qb(15,"br"),a.Ic(16,"https://www.youtube.com/watch?v=***********"),a.Tb(),a.Tb(),a.Ub(17,"div",34),a.Ub(18,"label",35),a.Ub(19,"span",26),a.Ic(20,"*"),a.Tb(),a.Ic(21,"Link"),a.Tb(),a.Ub(22,"input",36,37),a.gc("keyup",(function(t){return a.yc(e),a.ic(3).handleValidLink(t)})),a.Tb(),a.Gc(24,ve,2,1,"div",38),a.Gc(25,Ce,2,0,"div",39),a.Tb(),a.Gc(26,ye,2,0,"div",40),a.Gc(27,Ie,3,0,"button",41),a.Gc(28,Ue,2,1,"div",42),a.Tb(),a.Tb(),a.Ub(29,"div",43),a.Ub(30,"button",44),a.gc("click",(function(){return t.$implicit.close("Close click")})),a.Ic(31,"Close"),a.Tb(),a.Tb()}if(2&e){const e=a.ic(3);a.Cb(7),a.oc("formGroup",e.videoForm),a.Cb(15),a.oc("ngClass",a.tc(7,ke,e.submitted&&e.v.link.errors,e.validLink)),a.Cb(2),a.oc("ngIf",e.submitted&&e.v.link.errors),a.Cb(1),a.oc("ngIf",e.validLink),a.Cb(1),a.oc("ngIf",e.invalidLink&&!e.validLink),a.Cb(1),a.oc("ngIf",e.isAdmin||e.isInstructor),a.Cb(1),a.oc("ngIf",e.error)}}function Te(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",8),a.gc("click",(function(){a.yc(e),a.ic();const t=a.wc(6);return a.ic(2).open(t)})),a.Ic(1,"Add Video"),a.Tb()}}function _e(e,t){1&e&&(a.Ub(0,"div"),a.Ic(1,"Pdf is required"),a.Tb())}function we(e,t){if(1&e&&(a.Ub(0,"div",45),a.Gc(1,_e,2,0,"div",6),a.Tb()),2&e){const e=a.ic(4);a.Cb(1),a.oc("ngIf",e.p.pdf.errors.required)}}const Se=function(e){return{"is-invalid":e}};function Pe(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",27),a.Ub(1,"h4",28),a.Ic(2,"Add PDF File"),a.Tb(),a.Ub(3,"button",29),a.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),a.Ub(4,"span",30),a.Ic(5,"\xd7"),a.Tb(),a.Tb(),a.Tb(),a.Ub(6,"div",31),a.Ub(7,"form",50),a.gc("ngSubmit",(function(){a.yc(e);const t=a.ic(2).$implicit;return a.ic().addPdf(t.module_id)})),a.Ub(8,"div",34),a.Ub(9,"label",51),a.Ub(10,"span",26),a.Ic(11,"*"),a.Tb(),a.Ic(12,"Select a PDF File"),a.Tb(),a.Ub(13,"input",52,53),a.gc("change",(function(t){return a.yc(e),a.ic(3).handleFileInput(t)})),a.Tb(),a.Gc(15,we,2,1,"div",38),a.Tb(),a.Ub(16,"button",54),a.Qb(17,"i",9),a.Ic(18," Add PDF"),a.Tb(),a.Tb(),a.Tb(),a.Ub(19,"div",43),a.Ub(20,"button",44),a.gc("click",(function(){return t.$implicit.close("Close click")})),a.Ic(21,"Close"),a.Tb(),a.Tb()}if(2&e){const e=a.ic(3);a.Cb(7),a.oc("formGroup",e.pdfForm),a.Cb(6),a.oc("ngClass",a.sc(3,Se,e.submitted&&e.p.pdf.errors)),a.Cb(2),a.oc("ngIf",e.submitted&&e.p.pdf.errors)}}function De(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",8),a.gc("click",(function(){a.yc(e),a.ic();const t=a.wc(9);return a.ic(2).open(t)})),a.Ic(1,"Add PDF"),a.Tb()}}function Fe(e,t){1&e&&(a.Ub(0,"div"),a.Ic(1,"Name is required"),a.Tb())}function Ae(e,t){if(1&e&&(a.Ub(0,"div",45),a.Gc(1,Fe,2,0,"div",6),a.Tb()),2&e){const e=a.ic(4);a.Cb(1),a.oc("ngIf",e.s.name.errors.required)}}function Me(e,t){1&e&&(a.Ub(0,"div"),a.Ic(1,"Link is required"),a.Tb())}function Le(e,t){if(1&e&&(a.Ub(0,"div",45),a.Gc(1,Me,2,0,"div",6),a.Tb()),2&e){const e=a.ic(4);a.Cb(1),a.oc("ngIf",e.s.link.errors.required)}}function Oe(e,t){1&e&&(a.Ub(0,"div",46),a.Ic(1," Valid Qualtrics link "),a.Tb())}function Ge(e,t){1&e&&(a.Ub(0,"div",47),a.Ic(1," Invalid Qualtrics Link "),a.Tb())}function $e(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",48),a.gc("click",(function(){a.yc(e),a.ic();const t=a.wc(19),i=a.wc(27),n=a.ic(2).$implicit;return a.ic().addSurvey(t.value,i.value,n.module_id)})),a.Qb(1,"i",9),a.Ic(2," Add Quiz/Exam"),a.Tb()}}function Ve(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",27),a.Ub(1,"h4",28),a.Ic(2,"Add Qualtrics Quiz/Exam"),a.Tb(),a.Ub(3,"button",29),a.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),a.Ub(4,"span",30),a.Ic(5,"\xd7"),a.Tb(),a.Tb(),a.Tb(),a.Ub(6,"div",31),a.Ub(7,"form",32),a.Ub(8,"div",33),a.Ub(9,"p"),a.Ic(10,"Valid Qualtrics links are of the formats:"),a.Qb(11,"br"),a.Ic(12," https://fiu.qualtrics.com/jfe/form/******************"),a.Tb(),a.Tb(),a.Ub(13,"div",34),a.Ub(14,"label",55),a.Ub(15,"span",26),a.Ic(16,"*"),a.Tb(),a.Ic(17,"Name"),a.Tb(),a.Qb(18,"input",56,57),a.Gc(20,Ae,2,1,"div",38),a.Tb(),a.Ub(21,"div",34),a.Ub(22,"label",35),a.Ub(23,"span",26),a.Ic(24,"*"),a.Tb(),a.Ic(25,"Link"),a.Tb(),a.Ub(26,"input",58,37),a.gc("keyup",(function(t){return a.yc(e),a.ic(3).handleValidQuiz(t)})),a.Tb(),a.Gc(28,Le,2,1,"div",38),a.Gc(29,Oe,2,0,"div",39),a.Tb(),a.Gc(30,Ge,2,0,"div",40),a.Gc(31,$e,3,0,"button",41),a.Tb(),a.Tb(),a.Ub(32,"div",43),a.Ub(33,"button",44),a.gc("click",(function(){return t.$implicit.close("Close click")})),a.Ic(34,"Close"),a.Tb(),a.Tb()}if(2&e){const e=a.ic(3);a.Cb(7),a.oc("formGroup",e.surveyForm),a.Cb(11),a.oc("ngClass",a.sc(8,Se,e.submitted&&e.s.name.errors)),a.Cb(2),a.oc("ngIf",e.submitted&&e.s.name.errors),a.Cb(6),a.oc("ngClass",a.tc(10,ke,e.submitted&&e.s.link.errors,e.validQuiz)),a.Cb(2),a.oc("ngIf",e.submitted&&e.s.link.errors),a.Cb(1),a.oc("ngIf",e.validQuiz),a.Cb(1),a.oc("ngIf",e.invalidQuiz&&!e.validQuiz),a.Cb(1),a.oc("ngIf",e.isAdmin||e.isInstructor)}}function Ee(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",8),a.gc("click",(function(){a.yc(e),a.ic();const t=a.wc(12);return a.ic(2).open(t)})),a.Ic(1,"Add Quiz/Exam"),a.Tb()}}function Qe(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",59),a.gc("click",(function(){a.yc(e);const t=a.ic(2).index;return a.ic().openModule(t)})),a.Qb(1,"i",60),a.Ub(2,"strong"),a.Ic(3),a.Tb(),a.Ic(4),a.Tb()}if(2&e){const e=a.ic(2).$implicit;a.Cb(3),a.Kc("Module ",e.module_number," "),a.Cb(1),a.Kc("| ",e.module_title," ")}}function Re(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",59),a.gc("click",(function(){a.yc(e);const t=a.ic(2).index;return a.ic().openModule(t)})),a.Qb(1,"i",61),a.Ub(2,"strong"),a.Ic(3),a.Tb(),a.Ic(4),a.Tb()}if(2&e){const e=a.ic(2).$implicit;a.Cb(3),a.Kc("Module ",e.module_number," "),a.Cb(1),a.Kc("| ",e.module_title," ")}}function qe(e,t){if(1&e&&(a.Ub(0,"div",27),a.Ub(1,"h4",28),a.Ic(2),a.Tb(),a.Ub(3,"button",29),a.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),a.Ub(4,"span",30),a.Ic(5,"\xd7"),a.Tb(),a.Tb(),a.Tb(),a.Ub(6,"div",31),a.Ub(7,"div",74),a.Qb(8,"iframe",75),a.Tb(),a.Tb(),a.Ub(9,"div",43),a.Ub(10,"button",44),a.gc("click",(function(){return t.$implicit.close("Close click")})),a.Ic(11,"Close"),a.Tb(),a.Tb()),2&e){const e=a.ic(),t=e.index,i=e.$implicit,n=a.ic(5).$implicit;a.Cb(2),a.Lc("",n.module_title," - Pdf ",t+1,""),a.Cb(6),a.oc("src",i.pdf,a.Ac)}}function ze(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",76),a.gc("click",(function(){a.yc(e);const t=a.ic(),i=t.$implicit,n=t.index;return a.ic(6).deletePDF(i.pdf_id,n)})),a.Ic(1,"Delete Pdf"),a.Tb()}}function je(e,t){1&e&&(a.Ub(0,"div"),a.Ic(1,"Pdf is required"),a.Tb())}function Ne(e,t){if(1&e&&(a.Ub(0,"div",45),a.Gc(1,je,2,0,"div",6),a.Tb()),2&e){const e=a.ic(8);a.Cb(1),a.oc("ngIf",e.pu.pdf.errors.required)}}function He(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",27),a.Ub(1,"h4",28),a.Ic(2,"Edit PDF"),a.Tb(),a.Ub(3,"button",29),a.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),a.Ub(4,"span",30),a.Ic(5,"\xd7"),a.Tb(),a.Tb(),a.Tb(),a.Ub(6,"div",31),a.Ub(7,"form",50),a.gc("ngSubmit",(function(){a.yc(e);const t=a.ic().$implicit,i=a.ic(5).$implicit;return a.ic().updatePDF(t.pdf_id,i.module_id)})),a.Ub(8,"div",34),a.Ub(9,"label",51),a.Ub(10,"span",26),a.Ic(11,"*"),a.Tb(),a.Ic(12,"Select a PDF File"),a.Tb(),a.Ub(13,"input",52,53),a.gc("change",(function(t){return a.yc(e),a.ic(7).handleFileInputUpdate(t)})),a.Tb(),a.Gc(15,Ne,2,1,"div",38),a.Tb(),a.Ub(16,"button",54),a.Qb(17,"i",9),a.Ic(18," Update PDF"),a.Tb(),a.Tb(),a.Tb(),a.Ub(19,"div",43),a.Ub(20,"button",44),a.gc("click",(function(){return t.$implicit.close("Close click")})),a.Ic(21,"Close"),a.Tb(),a.Tb()}if(2&e){const e=a.ic(7);a.Cb(7),a.oc("formGroup",e.updatePdfForm),a.Cb(6),a.oc("ngClass",a.sc(3,Se,e.submitted&&e.pu.pdf.errors)),a.Cb(2),a.oc("ngIf",e.submitted&&e.pu.pdf.errors)}}function Be(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",77),a.gc("click",(function(){a.yc(e);const t=a.ic().$implicit,i=a.wc(8);return a.ic(6).openUpdatePDF(i,t.rawPdf)})),a.Ic(1,"Edit PDF"),a.Tb()}}function Je(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",67),a.Qb(1,"i",68),a.Gc(2,qe,12,3,"ng-template",null,69,a.Hc),a.Ub(4,"button",70),a.gc("click",(function(){a.yc(e);const t=a.wc(3);return a.ic(6).open(t)})),a.Ic(5),a.Tb(),a.Gc(6,ze,2,0,"button",71),a.Gc(7,He,22,5,"ng-template",null,72,a.Hc),a.Gc(9,Be,2,0,"button",73),a.Tb()}if(2&e){const e=t.index,i=a.ic(6);a.Cb(5),a.Kc("View Pdf ",e+1,""),a.Cb(1),a.oc("ngIf",i.isAdmin||i.isInstructor),a.Cb(3),a.oc("ngIf",i.isAdmin||i.isInstructor)}}function Ke(e,t){if(1&e&&(a.Ub(0,"div"),a.Gc(1,Je,10,3,"div",66),a.Tb()),2&e){const e=a.ic().$implicit;a.Cb(1),a.oc("ngForOf",e.value)}}function Ye(e,t){if(1&e&&(a.Ub(0,"div",65),a.Gc(1,Ke,2,1,"div",6),a.Tb()),2&e){const e=t.$implicit,i=a.ic(3).$implicit;a.Cb(1),a.oc("ngIf",e.key==i.module_id)}}function Ze(e,t){if(1&e&&(a.Ub(0,"div",27),a.Ub(1,"h4",28),a.Ic(2),a.Tb(),a.Ub(3,"button",29),a.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),a.Ub(4,"span",30),a.Ic(5,"\xd7"),a.Tb(),a.Tb(),a.Tb(),a.Ub(6,"div",31),a.Ub(7,"div",74),a.Qb(8,"iframe",84),a.Tb(),a.Tb(),a.Ub(9,"div",43),a.Ub(10,"button",44),a.gc("click",(function(){return t.$implicit.close("Close click")})),a.Ic(11,"Close"),a.Tb(),a.Tb()),2&e){const e=a.ic(),t=e.index,i=e.$implicit,n=a.ic(5).$implicit;a.Cb(2),a.Lc("",n.module_title," - Video ",t+1,""),a.Cb(6),a.oc("src",i.videoUrl,a.Ac)}}function Xe(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",76),a.gc("click",(function(){a.yc(e);const t=a.ic(),i=t.$implicit,n=t.index;return a.ic(6).deleteVideo(i.video_id,n)})),a.Ic(1,"Delete Video"),a.Tb()}}function We(e,t){1&e&&(a.Ub(0,"div"),a.Ic(1,"Link is required"),a.Tb())}function et(e,t){if(1&e&&(a.Ub(0,"div",45),a.Gc(1,We,2,0,"div",6),a.Tb()),2&e){const e=a.ic(8);a.Cb(1),a.oc("ngIf",e.vu.linkInput.errors.required)}}function tt(e,t){1&e&&(a.Ub(0,"div",46),a.Ic(1," Valid youtube link "),a.Tb())}function it(e,t){1&e&&(a.Ub(0,"div",47),a.Ic(1," Invalid Youtube Link "),a.Tb())}function nt(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",27),a.Ub(1,"h4",28),a.Ic(2,"Edit Youtube Video"),a.Tb(),a.Ub(3,"button",29),a.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),a.Ub(4,"span",30),a.Ic(5,"\xd7"),a.Tb(),a.Tb(),a.Tb(),a.Ub(6,"div",31),a.Ub(7,"form",32),a.Ub(8,"div",33),a.Ub(9,"p"),a.Ic(10,"Valid youtube links are of the formats:"),a.Qb(11,"br"),a.Ic(12," https://youtu.be/*********** "),a.Qb(13,"br"),a.Ic(14,"And "),a.Qb(15,"br"),a.Ic(16,"https://www.youtube.com/watch?v=***********"),a.Tb(),a.Tb(),a.Ub(17,"div",34),a.Ub(18,"label",85),a.Ub(19,"span",26),a.Ic(20,"*"),a.Tb(),a.Ic(21,"New Link"),a.Tb(),a.Ub(22,"input",86,87),a.gc("keyup",(function(t){return a.yc(e),a.ic(7).handleValidLink(t)})),a.Tb(),a.Gc(24,et,2,1,"div",38),a.Gc(25,tt,2,0,"div",39),a.Tb(),a.Gc(26,it,2,0,"div",40),a.Ub(27,"button",48),a.gc("click",(function(){a.yc(e);const t=a.wc(23),i=a.ic().$implicit;return a.ic(6).updateVideo(t.value,i.video_id)})),a.Qb(28,"i",9),a.Ic(29," Update Video"),a.Tb(),a.Tb(),a.Tb(),a.Ub(30,"div",43),a.Ub(31,"button",44),a.gc("click",(function(){return t.$implicit.close("Close click")})),a.Ic(32,"Close"),a.Tb(),a.Tb()}if(2&e){const e=a.ic(7);a.Cb(7),a.oc("formGroup",e.updateVideoForm),a.Cb(15),a.oc("ngClass",a.tc(5,ke,e.submitted&&e.vu.linkInput.errors,e.validLink)),a.Cb(2),a.oc("ngIf",e.submitted&&e.vu.linkInput.errors),a.Cb(1),a.oc("ngIf",e.validLink),a.Cb(1),a.oc("ngIf",e.invalidLink&&!e.validLink)}}function ot(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",77),a.gc("click",(function(){a.yc(e);const t=a.ic().$implicit,i=a.wc(8);return a.ic(6).openUpdateVideo(i,t.url)})),a.Ic(1,"Edit Video"),a.Tb()}}function st(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",80),a.Qb(1,"i",81),a.Gc(2,Ze,12,3,"ng-template",null,82,a.Hc),a.Ub(4,"button",70),a.gc("click",(function(){a.yc(e);const t=a.wc(3);return a.ic(6).open(t)})),a.Ic(5),a.Tb(),a.Gc(6,Xe,2,0,"button",71),a.Gc(7,nt,33,8,"ng-template",null,83,a.Hc),a.Gc(9,ot,2,0,"button",73),a.Tb()}if(2&e){const e=t.index,i=a.ic(6);a.Cb(5),a.Kc("Watch Video ",e+1,""),a.Cb(1),a.oc("ngIf",i.isAdmin||i.isInstructor),a.Cb(3),a.oc("ngIf",i.isAdmin||i.isInstructor)}}function ct(e,t){if(1&e&&(a.Ub(0,"div"),a.Gc(1,st,10,3,"div",79),a.Tb()),2&e){const e=a.ic().$implicit;a.Cb(1),a.oc("ngForOf",e.value)}}function rt(e,t){if(1&e&&(a.Ub(0,"div",78),a.Gc(1,ct,2,1,"div",6),a.Tb()),2&e){const e=t.$implicit,i=a.ic(3).$implicit;a.Cb(1),a.oc("ngIf",e.key==i.module_id)}}function ut(e,t){if(1&e&&(a.Ub(0,"div",27),a.Ub(1,"h4",28),a.Ic(2),a.Tb(),a.Ub(3,"button",29),a.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),a.Ub(4,"span",30),a.Ic(5,"\xd7"),a.Tb(),a.Tb(),a.Tb(),a.Ub(6,"div",31),a.Ub(7,"div",74),a.Qb(8,"iframe",84),a.Tb(),a.Tb(),a.Ub(9,"div",43),a.Ub(10,"button",44),a.gc("click",(function(){return t.$implicit.close("Close click")})),a.Ic(11,"Close"),a.Tb(),a.Tb()),2&e){const e=a.ic().$implicit,t=a.ic(5).$implicit;a.Cb(2),a.Lc("",t.module_title," - ",e.name,""),a.Cb(6),a.oc("src",e.surveyUrl,a.Ac)}}function at(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",76),a.gc("click",(function(){a.yc(e);const t=a.ic(),i=t.$implicit,n=t.index;return a.ic(6).deleteSurvey(i.survey_id,n)})),a.Ic(1,"Delete Quiz/Exam"),a.Tb()}}function lt(e,t){1&e&&(a.Ub(0,"div"),a.Ic(1,"Name is required"),a.Tb())}function dt(e,t){if(1&e&&(a.Ub(0,"div",45),a.Gc(1,lt,2,0,"div",6),a.Tb()),2&e){const e=a.ic(8);a.Cb(1),a.oc("ngIf",e.su.name.errors.required)}}function bt(e,t){1&e&&(a.Ub(0,"div"),a.Ic(1,"Link is required"),a.Tb())}function ft(e,t){if(1&e&&(a.Ub(0,"div",45),a.Gc(1,bt,2,0,"div",6),a.Tb()),2&e){const e=a.ic(8);a.Cb(1),a.oc("ngIf",e.su.link.errors.required)}}function ht(e,t){1&e&&(a.Ub(0,"div",46),a.Ic(1," Valid Qualtrics link "),a.Tb())}function pt(e,t){1&e&&(a.Ub(0,"div",47),a.Ic(1," Invalid Qualtrics Link "),a.Tb())}function mt(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",27),a.Ub(1,"h4",28),a.Ic(2,"Edit Quiz/Exam"),a.Tb(),a.Ub(3,"button",29),a.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),a.Ub(4,"span",30),a.Ic(5,"\xd7"),a.Tb(),a.Tb(),a.Tb(),a.Ub(6,"div",31),a.Ub(7,"form",32),a.Ub(8,"div",33),a.Ub(9,"p"),a.Ic(10,"Valid Qualtrics links are of the formats:"),a.Qb(11,"br"),a.Ic(12," https://fiu.qualtrics.com/jfe/form/******************"),a.Tb(),a.Tb(),a.Ub(13,"div",34),a.Ub(14,"label",55),a.Ub(15,"span",26),a.Ic(16,"*"),a.Tb(),a.Ic(17,"New Name"),a.Tb(),a.Qb(18,"input",91,57),a.Gc(20,dt,2,1,"div",38),a.Tb(),a.Ub(21,"div",34),a.Ub(22,"label",35),a.Ub(23,"span",26),a.Ic(24,"*"),a.Tb(),a.Ic(25,"New Link"),a.Tb(),a.Ub(26,"input",92,37),a.gc("keyup",(function(t){return a.yc(e),a.ic(7).handleValidQuiz(t)})),a.Tb(),a.Gc(28,ft,2,1,"div",38),a.Gc(29,ht,2,0,"div",39),a.Tb(),a.Gc(30,pt,2,0,"div",40),a.Ub(31,"button",48),a.gc("click",(function(){a.yc(e);const t=a.wc(19),i=a.wc(27),n=a.ic().$implicit;return a.ic(6).updateSurvey(t.value,i.value,n.survey_id)})),a.Qb(32,"i",9),a.Ic(33," Update Quiz/Exam"),a.Tb(),a.Tb(),a.Tb(),a.Ub(34,"div",43),a.Ub(35,"button",44),a.gc("click",(function(){return t.$implicit.close("Close click")})),a.Ic(36,"Close"),a.Tb(),a.Tb()}if(2&e){const e=a.ic(7);a.Cb(7),a.oc("formGroup",e.updateSurveyForm),a.Cb(11),a.oc("ngClass",a.sc(7,Se,e.submitted&&e.su.name.errors)),a.Cb(2),a.oc("ngIf",e.submitted&&e.su.name.errors),a.Cb(6),a.oc("ngClass",a.tc(9,ke,e.submitted&&e.su.link.errors,e.validQuiz)),a.Cb(2),a.oc("ngIf",e.submitted&&e.su.link.errors),a.Cb(1),a.oc("ngIf",e.validQuiz),a.Cb(1),a.oc("ngIf",e.invalidQuiz&&!e.validQuiz)}}function gt(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",77),a.gc("click",(function(){a.yc(e);const t=a.ic().$implicit,i=a.wc(8);return a.ic(6).openUpdateSurvey(i,t.name,t.url)})),a.Ic(1,"Edit Quiz/Exam"),a.Tb()}}function vt(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",80),a.Qb(1,"i",88),a.Gc(2,ut,12,3,"ng-template",null,89,a.Hc),a.Ub(4,"button",70),a.gc("click",(function(){a.yc(e);const t=a.wc(3);return a.ic(6).open(t)})),a.Ic(5),a.Tb(),a.Gc(6,at,2,0,"button",71),a.Gc(7,mt,37,12,"ng-template",null,90,a.Hc),a.Gc(9,gt,2,0,"button",73),a.Tb()}if(2&e){const e=t.index,i=a.ic(6);a.Cb(5),a.Kc("Take Quiz ",e+1,""),a.Cb(1),a.oc("ngIf",i.isAdmin||i.isInstructor),a.Cb(3),a.oc("ngIf",i.isAdmin||i.isInstructor)}}function Ct(e,t){if(1&e&&(a.Ub(0,"div"),a.Gc(1,vt,10,3,"div",79),a.Tb()),2&e){const e=a.ic().$implicit;a.Cb(1),a.oc("ngForOf",e.value)}}function yt(e,t){if(1&e&&(a.Ub(0,"div",78),a.Gc(1,Ct,2,1,"div",6),a.Tb()),2&e){const e=t.$implicit,i=a.ic(3).$implicit;a.Cb(1),a.oc("ngIf",e.key==i.module_id)}}function It(e,t){if(1&e&&(a.Ub(0,"div",62),a.Gc(1,Ye,2,1,"div",63),a.jc(2,"keyvalue"),a.Gc(3,rt,2,1,"div",64),a.jc(4,"keyvalue"),a.Gc(5,yt,2,1,"div",64),a.jc(6,"keyvalue"),a.Tb()),2&e){const e=a.ic(3);a.Cb(1),a.oc("ngForOf",a.kc(2,3,e.safePdfs)),a.Cb(2),a.oc("ngForOf",a.kc(4,5,e.safeLinks)),a.Cb(2),a.oc("ngForOf",a.kc(6,7,e.safeSurveys))}}function Ut(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",96),a.gc("click",(function(){a.yc(e);const t=a.ic(3).$implicit;return a.ic().editModule(t.course_id,t.module_id)})),a.Qb(1,"i",98),a.Ic(2," Edit"),a.Tb()}}function kt(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",99),a.gc("click",(function(){a.yc(e);const t=a.ic(3).$implicit;return a.ic().deleteModule(t.module_id,t.module_number)})),a.Qb(1,"i",100),a.Ic(2," Delete"),a.Tb()}}function xt(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",93),a.Gc(1,Ut,3,0,"button",94),a.Gc(2,kt,3,0,"button",95),a.Ub(3,"button",96),a.gc("click",(function(){a.yc(e);const t=a.ic(2).$implicit;return a.ic().viewDiscussion(t.course_id,t.module_id)})),a.Qb(4,"i",97),a.Ic(5," View Discussion"),a.Tb(),a.Tb()}if(2&e){const e=a.ic(3);a.Cb(1),a.oc("ngIf",e.isAdmin||e.isInstructor),a.Cb(1),a.oc("ngIf",e.isAdmin||e.isInstructor)}}function Tt(e,t){if(1&e&&(a.Sb(0),a.Gc(1,he,2,1,"span",13),a.Gc(2,me,1,1,"ng-template",null,14,a.Hc),a.Ub(4,"div",15),a.Gc(5,xe,32,10,"ng-template",null,16,a.Hc),a.Gc(7,Te,2,0,"button",17),a.Gc(8,Pe,22,5,"ng-template",null,18,a.Hc),a.Gc(10,De,2,0,"button",17),a.Gc(11,Ve,35,13,"ng-template",null,19,a.Hc),a.Gc(13,Ee,2,0,"button",17),a.Tb(),a.Gc(14,Qe,5,2,"div",20),a.Gc(15,Re,5,2,"ng-template",null,21,a.Hc),a.Gc(17,It,7,9,"div",22),a.Gc(18,xt,6,2,"div",23),a.Rb()),2&e){const e=a.wc(3),t=a.wc(16),i=a.ic().index,n=a.ic();a.Cb(1),a.oc("ngIf",!n.moduleLocked[i]&&(n.isAdmin||n.isInstructor))("ngIfElse",e),a.Cb(6),a.oc("ngIf",n.isAdmin||n.isInstructor),a.Cb(3),a.oc("ngIf",n.isAdmin||n.isInstructor),a.Cb(3),a.oc("ngIf",n.isAdmin||n.isInstructor),a.Cb(1),a.oc("ngIf",!n.toggleContent[i])("ngIfElse",t),a.Cb(3),a.oc("ngIf",n.toggleContent[i]),a.Cb(1),a.oc("ngIf",n.currentUser)}}function _t(e,t){if(1&e){const e=a.Vb();a.Ub(0,"span",26),a.Ic(1),a.Tb(),a.Ub(2,"div",101),a.gc("click",(function(){a.yc(e);const t=a.ic().index;return a.ic().openModule(t)})),a.Qb(3,"i",60),a.Ub(4,"strong"),a.Ic(5),a.Tb(),a.Ic(6),a.Tb()}if(2&e){const e=a.ic().$implicit;a.Cb(1),a.Kc("locked until: ",e.lockedUntil,""),a.Cb(4),a.Kc("Module ",e.module_number," "),a.Cb(1),a.Kc("| ",e.module_title," ")}}function wt(e,t){if(1&e&&(a.Ub(0,"div",10),a.Gc(1,Tt,19,9,"ng-container",11),a.Gc(2,_t,7,3,"ng-template",null,12,a.Hc),a.Tb()),2&e){const e=t.index,i=a.wc(3),n=a.ic();a.Cb(1),a.oc("ngIf",!n.moduleLocked[e]||n.isAdmin||n.isInstructor)("ngIfElse",i)}}let St=(()=>{class e{constructor(e,t,i,n,o,s,c,r,u,a,l){this.moduleService=e,this.videoService=t,this.pdfService=i,this.surveyService=n,this.authenticationService=o,this.studentCourseService=s,this.fb=c,this.router=r,this.route=u,this.sanitizer=a,this.modalService=l,this.modules=[],this.moduleLocked=[],this.linksFromDB=new Array,this.links=new Array,this.safeLinks=new Map,this.pdfsFromDB=new Array,this.pdfs=new Array,this.safePdfs=new Map,this.surveysFromDB=new Array,this.surveys=new Array,this.safeSurveys=new Map,this.resources=["pdf1","pdf2","worddoc1"],this.quizzes=["quiz1","quiz2","quiz3"],this.toggleContent=[],this.moduleVideosFetched=[],this.modulePDFsFetched=[],this.moduleSurveysFetched=[],this.submitted=!1,this.error="",this.invalidLink=!1,this.validLink=!1,this.invalidQuiz=!1,this.validQuiz=!1,this.fileToUpload=null,this.contentObject={course_id:0,course_name:"",module_id:0,module_number:0,module_title:"",lockedUntil:"",link:""},this.authenticationService.currentUser.subscribe(e=>this.currentUser=e),this.makeForms()}ngOnInit(){this.route.params.subscribe(e=>{this.courseId=e.id,console.log("param id is: "+e.id)}),this.todayDate=new Date,this.isAdmin="admin"===this.currentUser.role,this.isInstructor="instructor"===this.currentUser.role,this.isStudent="student"===this.currentUser.role,this.fetchModules(this.courseId),this.getAvgStudentPoints(this.courseId,this.currentUser.id),this.studentCourseService.getStudentsByCourseId(this.courseId).subscribe(e=>{e.forEach((e,t,i)=>{e.student_id==this.currentUser.id&&(this.points=e.points,console.log("Points: "+this.points))})})}ngOnDestroy(){}waitForProgressBar(){console.log("waiting for progress bar"),document.getElementById("progressbarAvg")?document.getElementById("progressbarAvg").style.width=this.averagePoints.average+"%":this.waitForProgressBarTimeout=setTimeout(()=>{this.waitForProgressBar()},1e3)}makeForms(){this.videoForm=this.fb.group({link:["",s.o.required]}),this.updateVideoForm=this.fb.group({linkInput:["",s.o.required]}),this.pdfForm=this.fb.group({pdf:["",s.o.required]}),this.updatePdfForm=this.fb.group({pdf:["",s.o.required]}),this.surveyForm=this.fb.group({name:["",s.o.required],link:["",s.o.required]}),this.updateSurveyForm=this.fb.group({name:["",s.o.required],link:["",s.o.required]})}get v(){return this.videoForm.controls}get p(){return this.pdfForm.controls}get s(){return this.surveyForm.controls}get vu(){return this.updateVideoForm.controls}get pu(){return this.updatePdfForm.controls}get su(){return this.updateSurveyForm.controls}pushLinksToArray(e,t){e.forEach(e=>{t.push({link:e.link,module_id:e.module_id,video_id:e.video_id})})}updateVideoUrl(e,t){e.forEach(e=>{if(e.module_id===t){this.moduleVideosFetched[t]=!0;let i,n,o,s=e.link.length;s>=43?i=e.link.substring(32,43):28==s&&(i=e.link.substring(17,28));let c={};o="https://www.youtube.com/embed/"+i,n=this.sanitizer.bypassSecurityTrustResourceUrl(o),c={videoUrl:n,video_id:e.video_id,url:e.link},this.safeLinks.get(t)?this.safeLinks.get(t).push(c):this.safeLinks.set(t,[c])}})}pushPDFsToArray(e,t){e.forEach(e=>{let i=Uint8Array.from(e.pdf.data),n=new Blob([i.buffer],{type:"application/pdf"});t.push({module_id:e.module_id,pdf_id:e.pdf_id,pdf:n})})}updatePdfData(e,t){e.forEach(e=>{if(e.module_id===t){this.modulePDFsFetched[t]=!0;let i,n={},o=URL.createObjectURL(e.pdf);i=this.sanitizer.bypassSecurityTrustResourceUrl(o),n={pdf_id:e.pdf_id,pdf:i,rawPdf:e.pdf},this.safePdfs.get(t)?this.safePdfs.get(t).push(n):this.safePdfs.set(t,[n])}})}pushSurveysToArray(e,t){e.forEach(e=>{t.push({name:e.survey_name,link:e.link,module_id:e.module_id,survey_id:e.survey_id})})}updateSurveyUrl(e,t){e.forEach(e=>{if(e.module_id===t){let i;this.moduleSurveysFetched[t]=!0,i=this.sanitizer.bypassSecurityTrustResourceUrl(e.link);let n={surveyUrl:i,survey_id:e.survey_id,name:e.name,url:e.link};this.safeSurveys.get(t)?this.safeSurveys.get(t).push(n):this.safeSurveys.set(t,[n])}})}open(e){this.submitted=!1,this.invalidLink=!1,this.invalidQuiz=!1,this.validLink=!1,this.invalidQuiz=!1,this.modalService.open(e,{size:"lg",centered:!0})}openModule(e){this.toggleContent[e]=!this.toggleContent[e]}openUpdateVideo(e,t){this.submitted=!1,this.invalidLink=!1,this.validLink=!1,this.modalService.open(e,{size:"lg",centered:!0}),this.updateVideoForm.get("linkInput").setValue(t)}openUpdatePDF(e,t){this.submitted=!1,this.modalService.open(e,{size:"lg",centered:!0}),console.log("The updatePDF: "+t)}openUpdateSurvey(e,t,i){this.submitted=!1,this.invalidQuiz=!1,this.validQuiz=!1,this.modalService.open(e,{size:"lg",centered:!0}),this.updateSurveyForm.get("name").setValue(t),this.updateSurveyForm.get("link").setValue(i)}getAvgStudentPoints(e,t){console.log("Called avgstudentpoints on student_id: "+t),this.studentCourseService.getAvgStudentPoints(e,t).subscribe(e=>{this.averagePoints=e,console.log("avg: "+JSON.stringify(e)),this.averagePoints.average=this.toFixed(this.averagePoints.average,2)})}toFixed(e,t){var i=Math.pow(10,t||0);return String(Math.round(e*i)/i)}viewDiscussion(e,t){this.router.navigate([`courses/${e}/discussion/${t}`])}createModule(e){this.router.navigate([`courses/${e}/create-module`])}fetchModules(e){this.moduleService.getModulesByCourseId(e).subscribe(t=>{t.forEach((e,t,i)=>{let n=new Date(e.lockedUntil),o=String(n.getDate()+1).padStart(2,"0"),s=String(n.getMonth()+1).padStart(2,"0")+"/"+o+"/"+n.getFullYear();this.moduleLocked[t]=!1,this.todayDate<n&&(this.moduleLocked[t]=!0),e.lockedUntil=s}),this.modules=t,this.fetchVideos(e,t),this.fetchPdfs(e,t),this.fetchSurveys(e,t)})}editModule(e,t){this.router.navigate([`courses/${e}/edit-module/${t}`])}deleteModule(e,t){if(1==confirm(`Delete Module ${t}: Are you sure?`)){this.moduleService.deleteModule(e).subscribe(()=>{console.log("Deleted module "+e)});const t=this.modules.find(t=>t.id===e);this.modules.splice(this.modules.indexOf(t))}}handleValidLink(e){let t=e.target.value,i=!1,n=t.length;t.includes("https://www.youtube.com/watch?v=")||t.includes("https://youtu.be/")?(console.log("Includes youtube link"),i=!0):i=!1,(28==n||n>=43)&&i?(this.validLink=!0,this.invalidLink=!1):this.validLink=!1}addVideo(e,t){this.submitted=!0,this.videoForm.invalid||(this.validLink?this.videoService.addVideo(e,t).subscribe(e=>{alert("Added video")},e=>{this.error=e}):this.invalidLink=!0)}updateVideo(e,t){this.submitted=!0,this.updateVideoForm.invalid||(this.validLink?this.videoService.updateVideo(e,t).subscribe(()=>{alert("Updated video")}):this.invalidLink=!0)}deleteVideo(e,t){confirm("Delete video "+(t+1)+": Are you sure?")&&this.videoService.deleteVideo(e).subscribe(()=>{alert("Deleted video")})}fetchVideos(e,t){console.log("Fetching videos: "+e),this.videoService.fetchVideos(e).subscribe(e=>{this.linksFromDB=e,this.pushLinksToArray(e,this.links),t.forEach((t,i,n)=>{let o=t;for(let s=0;s<e.length;s++){let t=e[s];if(t.module_id==o.module_id){if(1==this.moduleVideosFetched[t.module_id]){console.log("Modules videos fetched true");break}this.updateVideoUrl(this.links,t.module_id)}}})})}handleFileInput(e){if(e.target.files.length>0){const t=e.target.files[0];this.pdfForm.get("pdf").setValue(t)}}handleFileInputUpdate(e){if(e.target.files.length>0){const t=e.target.files[0];this.updatePdfForm.get("pdf").setValue(t)}}addPdf(e){if(this.submitted=!0,this.pdfForm.invalid)return;const t=new FormData;t.append("fileKey",this.pdfForm.get("pdf").value),t.append("fileKey",e),this.pdfService.addPDF(t).subscribe(e=>{console.log(e),alert("Added PDF!")},e=>{console.log(e),this.error=e})}fetchPdfs(e,t){console.log("Fetching pdfs: "+e),this.pdfService.fetchPDFs(e).subscribe(e=>{this.pdfsFromDB=e,this.pushPDFsToArray(e,this.pdfs),t.forEach((t,i,n)=>{let o=t;for(let s=0;s<e.length;s++){let t=e[s];if(t.module_id==o.module_id){if(1==this.modulePDFsFetched[t.module_id]){console.log("Modules pdfs fetched true");break}this.updatePdfData(this.pdfs,t.module_id)}}})})}updatePDF(e,t){if(this.submitted=!0,this.updatePdfForm.invalid)return;const i=new FormData;i.append("fileKey",this.updatePdfForm.get("pdf").value),i.append("fileKey",t),this.pdfService.updatePDF(e,i).subscribe(()=>{alert("Updated pdf")})}deletePDF(e,t){confirm("Delete PDF "+(t+1)+": Are you sure?")&&this.pdfService.deletePDF(e).subscribe(()=>{alert("Deleted pdf")})}handleValidQuiz(e){let t=e.target.value,i=t.length,n=!1;n=!!t.includes("https://fiu.qualtrics.com/jfe/form/"),53==i&&n?(this.validQuiz=!0,this.invalidQuiz=!1):this.validQuiz=!1}addSurvey(e,t,i){this.submitted=!0,this.surveyForm.invalid||(this.validQuiz?this.surveyService.addSurvey(e,t,i).subscribe(()=>{alert("Added survey")}):this.invalidQuiz=!0)}fetchSurveys(e,t){console.log("Fetching surveys: "+e),this.surveyService.fetchSurveys(e).subscribe(e=>{this.surveysFromDB=e,this.pushSurveysToArray(e,this.surveys),t.forEach(t=>{let i=t;for(let n=0;n<e.length;n++){let t=e[n];if(t.module_id==i.module_id){if(1==this.moduleSurveysFetched[t.module_id]){console.log("Modules surveys fetched true");break}this.updateSurveyUrl(this.surveys,t.module_id)}}})})}updateSurvey(e,t,i){this.submitted=!0,this.updateSurveyForm.invalid||(this.validQuiz?this.surveyService.updateSurvey(e,t,i).subscribe(()=>{alert("Updated Quiz/Exam")}):this.invalidQuiz=!0)}deleteSurvey(e,t){confirm("Delete Quiz/Exam "+(t+1)+": Are you sure?")&&this.surveyService.deleteSurvey(e).subscribe(()=>{alert("Deleted Quiz/Exam")})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(ue),a.Pb(ae),a.Pb(le),a.Pb(de),a.Pb(G.a),a.Pb(L.a),a.Pb(s.b),a.Pb(A.c),a.Pb(A.a),a.Pb(be.b),a.Pb(o.b))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-modules"]],decls:16,vars:8,consts:[["id","main"],[1,"flexbox-row"],[1,"flexbox-top-container"],[1,"align-self-stretch"],["type","info","textType","white","height","30px",3,"value","showValue","striped"],["type","primary","textType","white","height","30px",3,"value","showValue","striped"],[4,"ngIf"],["class","flexbox-container",4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"click"],[1,"fas","fa-plus-circle"],[1,"flexbox-container"],[4,"ngIf","ngIfElse"],["lockedBlock",""],["style","color: blue;",4,"ngIf","ngIfElse"],["lockedBlock0",""],[1,"flexbox-options"],["contentVideoAdd",""],["class","btn btn-success",3,"click",4,"ngIf"],["contentPdfAdd",""],["contentSurveyAdd",""],["class","flexbox-item","style","cursor:pointer",3,"click",4,"ngIf","ngIfElse"],["moduleBlock",""],["class","flexbox-subcontainer",4,"ngIf"],["class","flexbox-item-module-actions",4,"ngIf"],[2,"color","blue"],["style","color: red",4,"ngIf"],[2,"color","red"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-9",3,"formGroup"],[1,"alert","alert-info"],[1,"form-group"],["for","link"],["type","text","required","","formControlName","link",1,"form-control",3,"ngClass","keyup"],["link",""],["class","invalid-feedback",4,"ngIf"],["class","valid-feedback",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["type","submit","class","btn btn-primary",3,"click",4,"ngIf"],["class","alert alert-danger mt-3 mb-0",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],[1,"invalid-feedback"],[1,"valid-feedback"],[1,"alert","alert-danger"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"alert","alert-danger","mt-3","mb-0"],["method","POST","enctype","multipart/form-data",1,"col-9",3,"formGroup","ngSubmit"],["for","pdf"],["id","theFile","type","file","name","pdf","required","",1,"form-control",3,"ngClass","change"],["file",""],["type","submit",1,"btn","btn-primary"],["for","name"],["type","text","formControlName","name","required","",1,"form-control",3,"ngClass"],["name",""],["type","text","formControlName","link","required","",1,"form-control",3,"ngClass","keyup"],[1,"flexbox-item",2,"cursor","pointer",3,"click"],[1,"fas","fa-caret-right"],[1,"fas","fa-caret-down"],[1,"flexbox-subcontainer"],["class","flexbox-resources",4,"ngFor","ngForOf"],["class","flexbox-links",4,"ngFor","ngForOf"],[1,"flexbox-resources"],["class","flexbox-resources-inner",4,"ngFor","ngForOf"],[1,"flexbox-resources-inner"],[1,"fas","fa-paperclip"],["contentPdf",""],[1,"btn","btn-primary",3,"click"],["class","btn btn-danger flexbox-module-options",3,"click",4,"ngIf"],["contentPdfUpdate",""],["class","btn btn-success flexbox-module-options",3,"click",4,"ngIf"],[1,"embed-responsive","embed-responsive-16by9"],["width","780","height","480",1,"embed-responsive-item",3,"src"],[1,"btn","btn-danger","flexbox-module-options",3,"click"],[1,"btn","btn-success","flexbox-module-options",3,"click"],[1,"flexbox-links"],["class","flexbox-links-inner",4,"ngFor","ngForOf"],[1,"flexbox-links-inner"],[1,"fab","fa-youtube"],["contentVideo",""],["contentVideoUpdate",""],["width","780","height","480","frameborder","0","allow","accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",1,"embed-responsive-item",3,"src"],["for","linkInput"],["type","text","formControlName","linkInput","required","",1,"form-control","form-control-lg",3,"ngClass","keyup"],["linkInput",""],[1,"fas","fa-paper-plane"],["contentSurvey",""],["contentSurveyUpdate",""],["type","text","formControlName","name","required","",1,"form-control","form-control-lg",3,"ngClass"],["type","text","formControlName","link","required","",1,"form-control","form-control-lg",3,"ngClass","keyup"],[1,"flexbox-item-module-actions"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-comments"],[1,"fas","fa-edit"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fas","fa-minus-circle"],[1,"flexbox-item",2,"cursor","not-allowed","opacity","0.5",3,"click"]],template:function(e,t){1&e&&(a.Qb(0,"app-sidebar"),a.Ub(1,"div",0),a.Ub(2,"div",1),a.Ub(3,"div",2),a.Ub(4,"div",3),a.Ub(5,"span"),a.Ic(6,"Class Average Points"),a.Tb(),a.Ub(7,"p"),a.Qb(8,"ngb-progressbar",4),a.Tb(),a.Tb(),a.Ub(9,"div",3),a.Ub(10,"span"),a.Ic(11,"Your points"),a.Tb(),a.Ub(12,"p"),a.Qb(13,"ngb-progressbar",5),a.Tb(),a.Tb(),a.Gc(14,fe,4,0,"div",6),a.Tb(),a.Gc(15,wt,4,2,"div",7),a.Tb(),a.Tb()),2&e&&(a.Cb(8),a.oc("value",t.averagePoints?t.averagePoints.average:0)("showValue",!0)("striped",!0),a.Cb(5),a.oc("value",t.points?t.points:0)("showValue",!0)("striped",!0),a.Cb(1),a.oc("ngIf",t.currentUser&&(t.isAdmin||t.isInstructor)),a.Cb(1),a.oc("ngForOf",t.modules))},directives:[oe,o.e,n.n,n.m,s.q,s.j,s.d,s.a,s.n,s.i,s.c,n.l],pipes:[n.h],styles:[".flexbox-row[_ngcontent-%COMP%]{justify-content:center}.flexbox-container[_ngcontent-%COMP%], .flexbox-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;align-items:center}.flexbox-container[_ngcontent-%COMP%]{width:600px;padding:20px;justify-content:space-evenly;background-color:#ececec;border-left:1px solid #000;border-right:1px solid #000;border-bottom:1px dotted grey}.flexbox-options[_ngcontent-%COMP%]{margin-bottom:15px;align-self:flex-end}.flexbox-item[_ngcontent-%COMP%]{align-self:stretch;background-color:transparent;border:1px solid #afafaf}.flexbox-top-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;width:600px;padding:20px;justify-content:space-evenly;align-items:center}.flexbox-top-container[_ngcontent-%COMP%]   .flexbox-top-options[_ngcontent-%COMP%]{margin-bottom:15px}.flexbox-top-container[_ngcontent-%COMP%]   .flexbox-progress-bar[_ngcontent-%COMP%]{align-self:stretch;background-color:#dbdbdb}.flexbox-item-module-actions[_ngcontent-%COMP%]{margin-top:15px;align-self:flex-end;background-color:transparent;border:1px solid #000}.flexbox-subcontainer[_ngcontent-%COMP%]{margin-top:15px;align-self:flex-start;display:flex;flex-direction:column;width:560px;justify-content:center;align-items:flex-start;background-color:#fafafa}.flexbox-module-options[_ngcontent-%COMP%]{float:right}.flexbox-links[_ngcontent-%COMP%]{align-self:stretch}.flexbox-links[_ngcontent-%COMP%]   .flexbox-links-inner[_ngcontent-%COMP%]{align-self:stretch;border:1px solid #000}.flexbox-links[_ngcontent-%COMP%]   .flexbox-links-inner[_ngcontent-%COMP%]:hover{background-color:#d9deff}.flexbox-resources[_ngcontent-%COMP%]{align-self:stretch}.flexbox-resources[_ngcontent-%COMP%]   .flexbox-resources-inner[_ngcontent-%COMP%]{align-self:stretch;border:1px solid #000}.flexbox-resources[_ngcontent-%COMP%]   .flexbox-resources-inner[_ngcontent-%COMP%]:hover{background-color:#d9deff}.flexbox-quizzes[_ngcontent-%COMP%]{align-self:stretch;border:1px solid #000}.flexbox-quizzes[_ngcontent-%COMP%]:hover{background-color:#d9deff}"]}),e})();function Pt(e,t){if(1&e&&(a.Ub(0,"div",1),a.Ub(1,"div",2),a.Ub(2,"div",3),a.Ic(3),a.Tb(),a.Ub(4,"div",4),a.Ic(5),a.Tb(),a.Tb(),a.Tb()),2&e){const e=t.$implicit;a.Cb(3),a.Jc(e.student_id),a.Cb(2),a.Jc(e.points)}}function Dt(e,t){if(1&e&&(a.Ub(0,"span"),a.Ic(1),a.Tb()),2&e){const e=a.ic();a.Cb(1),a.Kc("Class average: ",e.average.average,"")}}let Ft=(()=>{class e{constructor(e,t,i,n){this.studentCourseService=e,this.router=t,this.route=i,this.authenticationService=n,this.students=[],this.authenticationService.currentUser.subscribe(e=>this.currentUser=e)}ngOnInit(){this.route.params.subscribe(e=>{this.courseId=e.id,console.log("param id is: "+e.id)}),this.fetchStudents(this.courseId),this.getAvgStudentPoints(this.courseId,this.currentUser.id)}fetchStudents(e){console.log("fetching students"),this.studentCourseService.getStudentsByCourseId(e).subscribe(e=>{this.students=e,console.log(e)})}getAvgStudentPoints(e,t){console.log("Called avgstudentpoints on student_id: "+t),this.studentCourseService.getAvgStudentPoints(e,t).subscribe(e=>{this.average=e,console.log("avg: "+JSON.stringify(e)),this.average.average=this.toFixed(this.average.average,2)})}toFixed(e,t){var i=Math.pow(10,t||0);return String(Math.round(e*i)/i)}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(L.a),a.Pb(A.c),a.Pb(A.a),a.Pb(G.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-leaderboard"]],decls:13,vars:2,consts:[[1,"main"],[1,"flexbox-row"],[1,"flexbox-container"],[1,"flexbox-cell","left"],[1,"flexbox-cell","right"],["class","flexbox-row",4,"ngFor","ngForOf"],[1,"center-form",2,"margin-top","15px"],[4,"ngIf"]],template:function(e,t){1&e&&(a.Qb(0,"app-sidebar"),a.Ub(1,"div",0),a.Ub(2,"div",1),a.Ub(3,"h2"),a.Ic(4," Leaderboard "),a.Tb(),a.Ub(5,"div",2),a.Ub(6,"div",3),a.Ic(7,"ID"),a.Tb(),a.Ub(8,"div",4),a.Ic(9,"Points"),a.Tb(),a.Tb(),a.Gc(10,Pt,6,2,"div",5),a.Ub(11,"div",6),a.Gc(12,Dt,2,1,"span",7),a.Tb(),a.Tb(),a.Tb()),2&e&&(a.Cb(10),a.oc("ngForOf",t.students),a.Cb(2),a.oc("ngIf",t.average))},directives:[oe,n.m,n.n],styles:[".flexbox-container[_ngcontent-%COMP%]{flex-direction:row;width:600px;padding:20px;justify-content:space-around;background-color:#ececec;border-left:1px solid #000;border-right:1px solid #000;border-bottom:1px dotted grey}.flexbox-container[_ngcontent-%COMP%], .flexbox-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center}.flexbox-row[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}.flexbox-column[_ngcontent-%COMP%]{background-color:#d9deff;display:flex;flex-direction:row;justify-content:space-evenly;align-items:center}.flexbox-cell[_ngcontent-%COMP%]{width:100px;text-align:center}"]}),e})();function At(e,t){1&e&&(a.Ub(0,"div"),a.Ic(1,"Number is required"),a.Tb())}function Mt(e,t){if(1&e&&(a.Ub(0,"div",18),a.Gc(1,At,2,0,"div",19),a.Tb()),2&e){const e=a.ic();a.Cb(1),a.oc("ngIf",e.m.number.errors.required)}}function Lt(e,t){1&e&&(a.Ub(0,"div"),a.Ic(1,"Title is required"),a.Tb())}function Ot(e,t){if(1&e&&(a.Ub(0,"div",18),a.Gc(1,Lt,2,0,"div",19),a.Tb()),2&e){const e=a.ic();a.Cb(1),a.oc("ngIf",e.m.title.errors.required)}}function Gt(e,t){1&e&&(a.Ub(0,"div"),a.Ic(1,"Locked Until is required"),a.Tb())}function $t(e,t){if(1&e&&(a.Ub(0,"div",18),a.Gc(1,Gt,2,0,"div",19),a.Tb()),2&e){const e=a.ic();a.Cb(1),a.oc("ngIf",e.m.lockedUntil.errors.required)}}const Vt=function(e){return{"is-invalid":e}};let Et=(()=>{class e{constructor(e,t,i,n){this.router=e,this.route=t,this.moduleService=i,this.fb=n,this.labels=["number","title","lockedUntil"],this.submitted=!1,this.todayDate=null,this.moduleForm=this.fb.group({number:["",s.o.required],title:["",s.o.required],lockedUntil:["",s.o.required]})}get m(){return this.moduleForm.controls}ngOnInit(){this.route.params.subscribe(e=>{this.courseId=e.id,console.log("params id create: "+e.id)});let e=new Date,t=String(e.getDate()).padStart(2,"0"),i=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear();this.todayDate=new Promise((e,o)=>{e(i+"/"+t+"/"+n)})}addModule(e,t,i){this.submitted=!0;let n=new Date(i),o=String(n.getDate()).padStart(2,"0"),s=String(n.getMonth()+1).padStart(2,"0");i=n.getFullYear()+"-"+s+"-"+o,console.log("going to submit lockedUntil: "+i),this.moduleForm.valid&&this.moduleService.addModule(this.courseId,e,t,i).subscribe(()=>{alert("Added module successfully!")})}onDateSelect(e){this.todayDate=new Promise((t,i)=>{t(String(e.month).padStart(2,"0")+"/"+String(e.day).padStart(2,"0")+"/"+e.year)})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(A.c),a.Pb(A.a),a.Pb(ue),a.Pb(s.b))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-create-module"]],decls:30,vars:16,consts:[[1,"center-form"],[1,"col-sm-4",3,"formGroup"],[1,"form-group"],["for","number"],["type","text","formControlName","number","required","",1,"form-control",3,"ngClass"],["number",""],["class","invalid-feedback",4,"ngIf"],["for","title"],["formControlName","title","required","",1,"form-control",3,"ngClass"],["title",""],["for","lockedUntil"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","formControlName","lockedUntil","readonly","","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d","ngbDatepicker","lockedUntil",""],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","far","fa-calendar-alt",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",0),a.Ub(1,"h2"),a.Ic(2,"Create New Module"),a.Tb(),a.Ub(3,"form",1),a.Ub(4,"div",2),a.Ub(5,"label",3),a.Ic(6,"Number"),a.Tb(),a.Qb(7,"input",4,5),a.Gc(9,Mt,2,1,"div",6),a.Tb(),a.Ub(10,"div",2),a.Ub(11,"label",7),a.Ic(12,"Title"),a.Tb(),a.Qb(13,"textarea",8,9),a.Gc(15,Ot,2,1,"div",6),a.Tb(),a.Ub(16,"div",2),a.Ub(17,"label",10),a.Ic(18,"Locked Until"),a.Tb(),a.Ub(19,"div",11),a.Ub(20,"input",12,13),a.gc("dateSelect",(function(e){return t.onDateSelect(e)})),a.jc(23,"async"),a.Tb(),a.Ub(24,"div",14),a.Ub(25,"button",15),a.gc("click",(function(){return a.yc(e),a.wc(21).toggle()})),a.Tb(),a.Tb(),a.Gc(26,$t,2,1,"div",6),a.Tb(),a.Tb(),a.Ub(27,"button",16),a.gc("click",(function(){a.yc(e);const i=a.wc(8),n=a.wc(14),o=a.wc(22);return t.addModule(i.value,n.value,o.value)})),a.Qb(28,"i",17),a.Ic(29," Create Module"),a.Tb(),a.Tb(),a.Tb()}2&e&&(a.Cb(3),a.oc("formGroup",t.moduleForm),a.Cb(4),a.oc("ngClass",a.sc(10,Vt,t.submitted&&t.m.number.errors)),a.Cb(2),a.oc("ngIf",t.submitted&&t.m.number.errors),a.Cb(4),a.oc("ngClass",a.sc(12,Vt,t.submitted&&t.m.title.errors)),a.Cb(2),a.oc("ngIf",t.submitted&&t.m.title.errors),a.Cb(5),a.oc("value",a.kc(23,8,t.todayDate))("ngClass",a.sc(14,Vt,t.submitted&&t.m.lockedUntil.errors)),a.Cb(6),a.oc("ngIf",t.submitted&&t.m.lockedUntil.errors))},directives:[s.q,s.j,s.d,s.a,s.i,s.c,s.n,n.l,n.n,o.a],pipes:[n.b],styles:[""]}),e})();function Qt(e,t){1&e&&(a.Ub(0,"div"),a.Ic(1,"Number is required"),a.Tb())}function Rt(e,t){if(1&e&&(a.Ub(0,"div",18),a.Gc(1,Qt,2,0,"div",19),a.Tb()),2&e){const e=a.ic();a.Cb(1),a.oc("ngIf",e.mu.number.errors.required)}}function qt(e,t){1&e&&(a.Ub(0,"div"),a.Ic(1,"Title is required"),a.Tb())}function zt(e,t){if(1&e&&(a.Ub(0,"div",18),a.Gc(1,qt,2,0,"div",19),a.Tb()),2&e){const e=a.ic();a.Cb(1),a.oc("ngIf",e.mu.title.errors.required)}}function jt(e,t){1&e&&(a.Ub(0,"div"),a.Ic(1,"Locked Until is required"),a.Tb())}function Nt(e,t){if(1&e&&(a.Ub(0,"div",18),a.Gc(1,jt,2,0,"div",19),a.Tb()),2&e){const e=a.ic();a.Cb(1),a.oc("ngIf",e.mu.lockedUntil.errors.required)}}const Ht=function(e){return{"is-invalid":e}};let Bt=(()=>{class e{constructor(e,t,i,n){this.moduleService=e,this.router=t,this.route=i,this.fb=n,this.submitted=!1,this.givenDate=null,this.CreateForm()}CreateForm(){this.updateForm=this.fb.group({number:["",s.o.required],title:["",s.o.required],lockedUntil:["",s.o.required]})}get mu(){return this.updateForm.controls}ngOnInit(){this.route.params.subscribe(e=>{this.id=e.moduleId,this.moduleService.getModuleById(this.id).subscribe(e=>{this.module=e[0],this.moduleNumber=this.module.number,this.updateForm.get("number").setValue(this.module.number),this.updateForm.get("title").setValue(this.module.title),this.updateForm.get("lockedUntil").setValue(this.module.lockedUntil);let t=new Date(this.module.lockedUntil.toString()),i=String(t.getDate()+1).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),o=t.getFullYear();this.givenDate=new Promise((e,t)=>{e(n+"/"+i+"/"+o)}),this.startDate=(""+this.module.lockedUntil).split("-")})})}updateModule(e,t,i){this.submitted=!0;let n=new Date(i),o=String(n.getDate()).padStart(2,"0"),s=String(n.getMonth()+1).padStart(2,"0");i=n.getFullYear()+"-"+s+"-"+o,this.updateForm.valid&&this.moduleService.updateModule(this.id,e,t,i).subscribe(e=>{alert("Module updated successfully")})}onDateSelect(e){this.givenDate=new Promise((t,i)=>{t(String(e.month).padStart(2,"0")+"/"+String(e.day).padStart(2,"0")+"/"+e.year)})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(ue),a.Pb(A.c),a.Pb(A.a),a.Pb(s.b))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-edit-module"]],decls:30,vars:17,consts:[[1,"center-form"],[1,"col-sm-4",3,"formGroup"],[1,"form-group"],["for","number"],["type","text","formControlName","number","required","",1,"form-control",3,"ngClass"],["number",""],["class","invalid-feedback",4,"ngIf"],["for","title"],["formControlName","title","required","",1,"form-control",3,"ngClass"],["title",""],["for","lockedUntil"],[1,"input-group"],["type","text","placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","readonly","","formControlName","lockedUntil","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d","ngbDatepicker","lockedUntil",""],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","far","fa-calendar-alt",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",0),a.Ub(1,"h2"),a.Ic(2),a.Tb(),a.Ub(3,"form",1),a.Ub(4,"div",2),a.Ub(5,"label",3),a.Ic(6,"Number"),a.Tb(),a.Qb(7,"input",4,5),a.Gc(9,Rt,2,1,"div",6),a.Tb(),a.Ub(10,"div",2),a.Ub(11,"label",7),a.Ic(12,"Title"),a.Tb(),a.Qb(13,"textarea",8,9),a.Gc(15,zt,2,1,"div",6),a.Tb(),a.Ub(16,"div",2),a.Ub(17,"label",10),a.Ic(18,"Locked Until"),a.Tb(),a.Ub(19,"div",11),a.Ub(20,"input",12,13),a.gc("dateSelect",(function(e){return t.onDateSelect(e)})),a.jc(23,"async"),a.Tb(),a.Ub(24,"div",14),a.Ub(25,"button",15),a.gc("click",(function(){return a.yc(e),a.wc(21).toggle()})),a.Tb(),a.Tb(),a.Gc(26,Nt,2,1,"div",6),a.Tb(),a.Tb(),a.Ub(27,"button",16),a.gc("click",(function(){a.yc(e);const i=a.wc(8),n=a.wc(14),o=a.wc(22);return t.updateModule(i.value,n.value,o.value)})),a.Qb(28,"i",17),a.Ic(29," Update Module"),a.Tb(),a.Tb(),a.Tb()}2&e&&(a.Cb(2),a.Kc("Edit Module ",t.moduleNumber,""),a.Cb(1),a.oc("formGroup",t.updateForm),a.Cb(4),a.oc("ngClass",a.sc(11,Ht,t.submitted&&t.mu.number.errors)),a.Cb(2),a.oc("ngIf",t.submitted&&t.mu.number.errors),a.Cb(4),a.oc("ngClass",a.sc(13,Ht,t.submitted&&t.mu.title.errors)),a.Cb(2),a.oc("ngIf",t.submitted&&t.mu.title.errors),a.Cb(5),a.oc("value",a.kc(23,9,t.givenDate))("ngClass",a.sc(15,Ht,t.submitted&&t.mu.lockedUntil.errors)),a.Cb(6),a.oc("ngIf",t.submitted&&t.mu.lockedUntil.errors))},directives:[s.q,s.j,s.d,s.a,s.i,s.c,s.n,n.l,n.n,o.a],pipes:[n.b],styles:[""]}),e})();function Jt(e,t){if(1&e){const e=a.Vb();a.Sb(0),a.Ub(1,"ckeditor",2),a.gc("change",(function(t){return a.yc(e),a.ic().onChange(t)})),a.Tb(),a.Ub(2,"span"),a.Ub(3,"button",3),a.gc("click",(function(){a.yc(e);const i=t.ngIf;return a.ic().onSubmit(i.id)})),a.Ic(4,"Submit"),a.Tb(),a.Ub(5,"button",4),a.gc("click",(function(){a.yc(e);const i=t.ngIf;return a.ic().onClearButtonClicked(i.id)})),a.Ic(6,"Clear and Submit"),a.Tb(),a.Ub(7,"a",5),a.Qb(8,"i",6),a.Ic(9," Go back"),a.Tb(),a.Tb(),a.Qb(10,"hr"),a.Ub(11,"h2"),a.Ic(12,"Preview"),a.Tb(),a.Qb(13,"div",7),a.Rb()}if(2&e){const e=t.ngIf,i=a.ic();a.Cb(1),a.oc("editor",i.Editor)("data",i.editorData?i.editorData:e.content),a.Cb(6),a.qc("routerLink","/courses/",i.courseId,""),a.Cb(6),a.oc("innerHTML",i.editorData?i.editorData:e.content,a.zc)}}let Kt=(()=>{class e{constructor(e,t,i){this.courseDetailsService=e,this.route=t,this.router=i,this.Editor=te,this.isCleared=!1}ngOnInit(){this.route.params.subscribe(e=>{this.courseId=e.id}),this.courseContent=this.courseDetailsService.getCourseDetails(this.courseId),this.courseDetailsService.getCourseDetails(this.courseId).subscribe(e=>{this.courseDetails=e})}onReady(e){e.setData("")}onChange({editor:e}){this.editorData=e.getData(),this.isCleared&&(e.setData(""),this.isCleared=!1),console.log(this.editorData)}onSubmit(e){this.courseDetailsService.updateCourseDetails(e,this.editorData).subscribe(()=>{alert("Submitted Content"),this.router.navigate(["courses",this.courseId])})}onClearButtonClicked(e){confirm("Clear content; Are you sure?")&&this.courseDetailsService.clearCourseDetails(e).subscribe(()=>{alert("Cleared Content"),this.isCleared=!0,this.router.navigate(["courses",this.courseId])})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(ie.a),a.Pb(A.a),a.Pb(A.c))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-home-edit"]],decls:3,vars:3,consts:[[1,"flexbox-row"],[4,"ngIf"],[1,"clamp-words",3,"editor","data","change"],[1,"btn","btn-primary",2,"margin-right","15px",3,"click"],[1,"btn","btn-warning",2,"margin-left","15px",3,"click"],[1,"btn","btn-secondary",2,"margin-left","15px",3,"routerLink"],[1,"fas","fa-arrow-circle-left"],[1,"custom-font","clamp-words",2,"margin-top","30px",3,"innerHTML"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Gc(1,Jt,14,4,"ng-container",1),a.jc(2,"async"),a.Tb()),2&e&&(a.Cb(1),a.oc("ngIf",a.kc(2,1,t.courseContent)))},directives:[n.n,c.a,A.f],pipes:[n.b],styles:[".flexbox-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;align-items:center;position:relative;margin-top:30px}"]}),e})(),Yt=(()=>{class e{constructor(e){this.http=e}createDiscussion(e,t,i,n,o,s){return this.http.post(`${$.a.apiURL}/discussions`,{user:e,post:t,created:i,changed:n,module_id:o,user_id:s})}getDiscussionsInModule(e){return this.http.get(`${$.a.apiURL}/discussions/m/${e}`)}updateDiscussion(e,t,i){return this.http.put(`${$.a.apiURL}/discussions/${i}`,{post:e,changed:t})}deleteDiscussion(e){return this.http.delete(`${$.a.apiURL}/discussions/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(a.cc(E.b))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Zt=["textArea"];function Xt(e,t){1&e&&(a.Ub(0,"div"),a.Ic(1,"Post cannot be empty"),a.Tb())}function Wt(e,t){if(1&e&&(a.Ub(0,"div",8),a.Gc(1,Xt,2,0,"div",9),a.Tb()),2&e){const e=a.ic();a.Cb(1),a.oc("ngIf",e.p.post.errors.required)}}const ei=function(e){return{"is-invalid":e}};let ti=(()=>{class e{constructor(e,t,i,n,o){this.fb=e,this.discussionService=t,this.moduleService=i,this.authenticationService=n,this.route=o,this.module=null,this.submitted=!1,this.authenticationService.currentUser.subscribe(e=>this.currentUser=e)}get p(){return this.postForm.controls}ngOnInit(){this.route.params.subscribe(e=>{this.moduleService.getModuleById(e.moduleId).subscribe(e=>{this.module=new Promise((t,i)=>{t(e[0])})})}),this.createForm()}createForm(){this.postForm=this.fb.group({post:["",s.o.required]})}createPost(e){this.submitted=!0,this.postForm.valid&&this.module.then(t=>{let i=this.currentUser.f_name+" "+this.currentUser.l_name,n=new Date;this.discussionService.createDiscussion(i,e,n,n,t.id,this.currentUser.id).subscribe(()=>{alert("Created post")})})}autoGrow(){const e=this.textArea.nativeElement;e.style.overflow="hidden",e.style.height="0px",e.style.height=e.scrollHeight+"px"}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(s.b),a.Pb(Yt),a.Pb(ue),a.Pb(G.a),a.Pb(A.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-create-post"]],viewQuery:function(e,t){var i;1&e&&a.Mc(Zt,!0,a.l),2&e&&a.vc(i=a.hc())&&(t.textArea=i.first)},decls:9,vars:5,consts:[[1,"center-form","announcement"],[3,"formGroup"],[1,"form-group"],["rows","2","placeholder","Add a post...","required","","formControlName","post","matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","2",1,"form-control",2,"width","300px",3,"ngClass"],["post",""],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",0),a.Ub(1,"form",1),a.Ub(2,"div",2),a.Qb(3,"textarea",3,4),a.Gc(5,Wt,2,1,"div",5),a.Tb(),a.Ub(6,"button",6),a.gc("click",(function(){a.yc(e);const i=a.wc(4);return t.createPost(i.value)})),a.Qb(7,"i",7),a.Ic(8," Create Post"),a.Tb(),a.Tb(),a.Tb()}2&e&&(a.Cb(1),a.oc("formGroup",t.postForm),a.Cb(2),a.oc("ngClass",a.sc(3,ei,t.submitted&&t.p.post.errors)),a.Cb(2),a.oc("ngIf",t.submitted&&t.p.post.errors))},directives:[s.q,s.j,s.d,s.a,D,U,s.n,s.i,s.c,n.l,n.n],styles:[""]}),e})();function ii(e,t){1&e&&(a.Ub(0,"div"),a.Ic(1,"Post is required"),a.Tb())}function ni(e,t){if(1&e&&(a.Ub(0,"div",17),a.Gc(1,ii,2,0,"div",18),a.Tb()),2&e){const e=a.ic(2);a.Cb(1),a.oc("ngIf",e.up.post.errors.required)}}const oi=function(e){return{"is-invalid":e}};function si(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",2),a.Ub(1,"h4",3),a.Ic(2,"Edit Your Post"),a.Tb(),a.Ub(3,"button",4),a.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),a.Ub(4,"span",5),a.Ic(5,"\xd7"),a.Tb(),a.Tb(),a.Tb(),a.Ub(6,"div",6),a.Ub(7,"form",7),a.Ub(8,"div",8),a.Ub(9,"label",9),a.Ic(10,"Post"),a.Tb(),a.Qb(11,"textarea",10,11),a.Gc(13,ni,2,1,"div",12),a.Tb(),a.Ub(14,"button",13),a.gc("click",(function(){a.yc(e);const t=a.wc(12);return a.ic().updatePost(t.value)})),a.Qb(15,"i",14),a.Ic(16," Update Post"),a.Tb(),a.Tb(),a.Tb(),a.Ub(17,"div",15),a.Ub(18,"button",16),a.gc("click",(function(){return t.$implicit.close("Close click")})),a.Ic(19,"Close"),a.Tb(),a.Tb()}if(2&e){const e=a.ic();a.Cb(7),a.oc("formGroup",e.editPostForm),a.Cb(4),a.oc("ngClass",a.sc(3,oi,e.submitted&&e.up.post.errors)),a.Cb(2),a.oc("ngIf",e.submitted&&e.up.post.errors)}}let ci=(()=>{class e{constructor(e,t,i){this.modalService=e,this.fb=t,this.discussionService=i,this.submitted=!1}ngOnInit(){this.makeForm()}get up(){return this.editPostForm.controls}makeForm(){this.editPostForm=this.fb.group({post:["",s.o.required]})}open(e){this.editPostForm.get("post").setValue(this.discussionData.post),this.modalService.open(e,{size:"lg",centered:!0})}updatePost(e){if(this.submitted=!0,!this.editPostForm.valid)return;let t=new Date;this.discussionService.updateDiscussion(e,t,this.discussionData.discussion_id).subscribe(()=>{alert("Updated post")})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(o.b),a.Pb(s.b),a.Pb(Yt))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-edit-post"]],inputs:{discussionData:"discussionData"},decls:4,vars:0,consts:[["contentPostEdit",""],[1,"btn","btn-success",3,"click"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-9",3,"formGroup"],[1,"form-group"],["for","post"],["rows","3","required","","formControlName","post",1,"form-control",3,"ngClass"],["post",""],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){if(1&e){const e=a.Vb();a.Gc(0,si,20,5,"ng-template",null,0,a.Hc),a.Ub(2,"button",1),a.gc("click",(function(){a.yc(e);const i=a.wc(1);return t.open(i)})),a.Ic(3,"Edit Post"),a.Tb()}},directives:[s.q,s.j,s.d,s.a,s.n,s.i,s.c,n.l,n.n],styles:[""]}),e})();function ri(e,t){if(1&e&&(a.Ub(0,"div"),a.Ub(1,"h1",3),a.Ic(2,"Discussion"),a.Tb(),a.Ub(3,"h2",3),a.Ic(4),a.Tb(),a.Ub(5,"h3"),a.Ic(6),a.Tb(),a.Tb()),2&e){const e=t.ngIf;a.Cb(4),a.Kc("Module ",e.number,""),a.Cb(2),a.Jc(e.title)}}function ui(e,t){if(1&e&&a.Qb(0,"app-edit-post",7),2&e){const e=a.ic().$implicit;a.oc("discussionData",e)}}function ai(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",8),a.gc("click",(function(){a.yc(e);const t=a.ic().$implicit;return a.ic().deletePost(t.discussion_id)})),a.Ic(1,"Delete Post"),a.Tb()}}function li(e,t){if(1&e&&(a.Ub(0,"div",4),a.Ub(1,"p"),a.Ic(2),a.jc(3,"date"),a.jc(4,"date"),a.Qb(5,"br"),a.Ic(6),a.Qb(7,"br"),a.Gc(8,ui,1,1,"app-edit-post",5),a.Gc(9,ai,2,0,"button",6),a.Tb(),a.Tb()),2&e){const e=t.$implicit,i=a.ic();a.Cb(2),a.Lc(" ",e.user," | ",e.created>=e.changed?a.lc(3,5,e.created,"short"):a.lc(4,8,e.changed,"short"),""),a.Cb(4),a.Kc(" ",e.post,""),a.Cb(2),a.oc("ngIf",e.user_id==i.currentUser.id),a.Cb(1),a.oc("ngIf",e.user_id==i.currentUser.id)}}let di=(()=>{class e{constructor(e,t,i,n){this.discussionService=e,this.moduleService=t,this.authenticationService=i,this.route=n,this.discussions=[],this.moduleDetails={},this.authenticationService.currentUser.subscribe(e=>this.currentUser=e)}ngOnInit(){this.route.params.subscribe(e=>{this.discussionService.getDiscussionsInModule(e.moduleId).subscribe(e=>{console.log(e),this.discussions=e}),this.moduleService.getModuleById(e.moduleId).subscribe(e=>{console.log(e[0]),this.moduleDetails=e[0]})})}deletePost(e){confirm("Delete post: Are you sure?")&&this.discussionService.deleteDiscussion(e).subscribe(()=>{alert("Deleted post successfully")})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(Yt),a.Pb(ue),a.Pb(G.a),a.Pb(A.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-discussion"]],decls:4,vars:2,consts:[[1,"center-form"],[4,"ngIf"],["class","announcement",4,"ngFor","ngForOf"],[2,"text-align","center"],[1,"announcement"],[3,"discussionData",4,"ngIf"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],[3,"discussionData"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Gc(1,ri,7,2,"div",1),a.Qb(2,"app-create-post"),a.Gc(3,li,10,11,"div",2),a.Tb()),2&e&&(a.Cb(1),a.oc("ngIf",t.moduleDetails),a.Cb(2),a.oc("ngForOf",t.discussions))},directives:[n.n,ti,n.m,ci],pipes:[n.e],styles:[".flex-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;background-color:#add8e6;margin:15px;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content}.flex-item[_ngcontent-%COMP%]{align-self:stretch}.announcement[_ngcontent-%COMP%]{background-color:#ccf5ff;width:300px;max-width:300px;margin-top:15px}"]}),e})(),bi=(()=>{class e{constructor(e){this.http=e}createCourseAnnouncement(e,t){return this.http.post(`${$.a.apiURL}/courseAnnouncements`,{course_id:e,announcement_id:t})}fetchCourseAnnouncements(){return this.http.get(`${$.a.apiURL}/courseAnnouncements`)}fetchCourseAnnouncementById(e){return this.http.get(`${$.a.apiURL}/courseAnnouncements/${e}`)}updateCourseAnnouncement(e,t,i){return this.http.put(`${$.a.apiURL}/courseAnnouncements/${e}`,{course_id:t,announcement_id:i})}deleteCourseAnnouncement(e){return this.http.delete(`${$.a.apiURL}/courseAnnouncements/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(a.cc(E.b))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function fi(e,t){if(1&e&&(a.Ub(0,"p"),a.Ic(1),a.Tb()),2&e){const e=a.ic().$implicit;a.Cb(1),a.Jc(e.name)}}function hi(e,t){if(1&e&&(a.Ub(0,"div",8),a.Gc(1,fi,2,1,"p",9),a.Tb()),2&e){const e=t.$implicit;a.Cb(1),a.oc("ngIf",e)}}let pi=(()=>{class e{constructor(e,t,i,n,o){this.announcementService=e,this.courseAnnouncementService=t,this.authenticationService=i,this.courseService=n,this.router=o,this.checkedCourses=[],this.Editor=te,this.editorData="",this.courses=[],this.authenticationService.currentUser.subscribe(e=>this.currentUser=e)}ngOnInit(){console.log(this.currentUser.f_name),this.subscription=this.announcementService.sharedCheckedCourses.subscribe(e=>{this.checkedCourses=e,console.log(e),this.checkedCourses.forEach((e,t,i)=>{this.courseService.getCourseById(e).subscribe(e=>{this.courses[t]=e,console.log(e)})})},e=>{console.log(e)},()=>{console.log("complete")})}ngOnDestroy(){this.subscription.unsubscribe()}onReady(e){e.setData("")}onChange({editor:e}){this.editorData=e.getData(),this.isCleared&&(e.setData(""),this.isCleared=!1),console.log(this.editorData)}createAnnouncement(){let e=this.currentUser.f_name+" "+this.currentUser.l_name,t=new Date;this.announcementService.createAnnouncement(e,this.editorData,t,t,this.currentUser.id).subscribe(e=>{console.log(e);for(let t=0;t<this.checkedCourses.length;t++)this.courseAnnouncementService.createCourseAnnouncement(this.checkedCourses[t],e.id).subscribe(e=>{console.log(e)});alert("Created announcement successfully")})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(Q),a.Pb(bi),a.Pb(G.a),a.Pb(O.a),a.Pb(A.c))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-create-announcement"]],decls:16,vars:4,consts:[[1,"flexbox-row",2,"margin-top","30px"],[1,"row"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"clamp-words",3,"editor","data","change"],[1,"btn","btn-primary",2,"margin-right","15px",3,"click"],["routerLink","/courses",1,"btn","btn-secondary",2,"margin-left","15px"],[1,"fas","fa-arrow-circle-left"],[1,"custom-font","clamp-words",2,"margin-top","30px",3,"innerHTML"],[1,"col-md-4"],[4,"ngIf"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"h3"),a.Ic(2,"Create announcement for courses:"),a.Tb(),a.Ub(3,"div",1),a.Gc(4,hi,2,1,"div",2),a.Tb(),a.Ub(5,"ckeditor",3),a.gc("change",(function(e){return t.onChange(e)})),a.Tb(),a.Ub(6,"span"),a.Ub(7,"button",4),a.gc("click",(function(){return t.createAnnouncement()})),a.Ic(8,"Submit"),a.Tb(),a.Ub(9,"a",5),a.Qb(10,"i",6),a.Ic(11," Go back"),a.Tb(),a.Tb(),a.Qb(12,"hr"),a.Ub(13,"h2"),a.Ic(14,"Announcement Preview"),a.Tb(),a.Qb(15,"div",7),a.Tb()),2&e&&(a.Cb(4),a.oc("ngForOf",t.courses),a.Cb(1),a.oc("editor",t.Editor)("data",t.editorData),a.Cb(10),a.oc("innerHTML",t.editorData,a.zc))},directives:[n.m,c.a,A.f,n.n],styles:[""]}),e})();function mi(e,t){if(1&e&&(a.Ub(0,"div"),a.Qb(1,"div",3),a.Tb()),2&e){const e=t.$implicit;a.Cb(1),a.oc("innerHTML",e.content,a.zc)}}let gi=(()=>{class e{constructor(e,t){this.announcementService=e,this.route=t}ngOnInit(){this.route.params.subscribe(e=>{console.log(e.id),this.announcementService.fetchAnnouncementsByCourseId(e.id).subscribe(e=>{this.announcements=Promise.resolve(e),console.log(e)})})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(Q),a.Pb(A.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-announcements"]],decls:7,vars:3,consts:[["id","main"],[1,"flexbox-row"],[4,"ngFor","ngForOf"],[1,"announcement",3,"innerHTML"]],template:function(e,t){1&e&&(a.Qb(0,"app-sidebar"),a.Ub(1,"div",0),a.Ub(2,"div",1),a.Ub(3,"h2"),a.Ic(4,"Announcements"),a.Tb(),a.Gc(5,mi,2,1,"div",2),a.jc(6,"async"),a.Tb(),a.Tb()),2&e&&(a.Cb(5),a.oc("ngForOf",a.kc(6,1,t.announcements)))},directives:[oe,n.m],pipes:[n.b],styles:[""]}),e})();function vi(e,t){if(1&e&&(a.Ub(0,"p"),a.Ic(1),a.Tb()),2&e){const e=a.ic().$implicit;a.Cb(1),a.Jc(e.course_name)}}function Ci(e,t){if(1&e&&(a.Ub(0,"div",9),a.Gc(1,vi,2,1,"p",10),a.Tb()),2&e){const e=t.$implicit;a.Cb(1),a.oc("ngIf",e)}}function yi(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",1),a.Ub(1,"h2"),a.Ic(2,"Edit announcement "),a.Ub(3,"span"),a.Ic(4),a.jc(5,"async"),a.Tb(),a.Ic(6," for courses:"),a.Tb(),a.Ub(7,"div",2),a.Gc(8,Ci,2,1,"div",3),a.jc(9,"async"),a.Tb(),a.Ub(10,"ckeditor",4),a.gc("change",(function(t){return a.yc(e),a.ic().onChange(t)})),a.Tb(),a.Ub(11,"span"),a.Ub(12,"button",5),a.gc("click",(function(){return a.yc(e),a.ic().editAnnouncement()})),a.Ic(13,"Submit"),a.Tb(),a.Ub(14,"a",6),a.Qb(15,"i",7),a.Ic(16," Go back"),a.Tb(),a.Tb(),a.Qb(17,"hr"),a.Ub(18,"h2"),a.Ic(19,"Announcement Preview"),a.Tb(),a.Qb(20,"div",8),a.Tb()}if(2&e){const e=t.ngIf,i=a.ic();a.Cb(4),a.Jc(a.kc(5,5,i.announcementId)),a.Cb(4),a.oc("ngForOf",a.kc(9,7,i.announcements)),a.Cb(2),a.oc("editor",i.Editor)("data",i.editorData?i.editorData:e.content),a.Cb(10),a.oc("innerHTML",i.editorData?i.editorData:e.content,a.zc)}}let Ii=(()=>{class e{constructor(e,t,i){this.router=e,this.route=t,this.announcementService=i,this.Editor=te}ngOnInit(){this.route.params.subscribe(e=>{this.announcementId=Promise.resolve(e.announcementId)}),this.announcementId.then(e=>{console.log(e),this.announcement=this.announcementService.fetchAnnouncementById(e)}),this.subscription=this.announcementService.sharedEditCourses.subscribe(e=>{console.log("announcements edit: \n"),console.log(e),this.announcements=Promise.resolve(e)})}ngAfterViewInit(){this.subscription.unsubscribe()}ngOnDestroy(){this.subscription.unsubscribe()}onChange({editor:e}){this.editorData=e.getData(),console.log(this.editorData)}editAnnouncement(){this.editorData?this.announcementId.then(e=>{this.announcementService.updateAnnouncement(e,this.editorData,new Date).subscribe(()=>{alert("Updated announcement"),this.router.navigate(["/courses/view-created-announcements"])})}):this.announcement.subscribe(e=>{console.log(e.content),this.announcementId.then(t=>{this.announcementService.updateAnnouncement(t,e.content,new Date).subscribe(()=>{alert("Updated announcement"),this.router.navigate(["/courses/view-created-announcements"])})})})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(A.c),a.Pb(A.a),a.Pb(Q))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-edit-announcement"]],decls:2,vars:3,consts:[["class","flexbox-row","style","margin-top: 30px;",4,"ngIf"],[1,"flexbox-row",2,"margin-top","30px"],[1,"row"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"clamp-words",3,"editor","data","change"],[1,"btn","btn-primary",2,"margin-right","15px",3,"click"],["routerLink","/courses/view-created-announcements",1,"btn","btn-secondary",2,"margin-left","15px"],[1,"fas","fa-arrow-circle-left"],[1,"custom-font","clamp-words",2,"margin-top","30px",3,"innerHTML"],[1,"col-md-4"],[4,"ngIf"]],template:function(e,t){1&e&&(a.Gc(0,yi,21,9,"div",0),a.jc(1,"async")),2&e&&a.oc("ngIf",a.kc(1,1,t.announcement))},directives:[n.n,n.m,c.a,A.f],pipes:[n.b],styles:[""]}),e})();function Ui(e,t){if(1&e&&(a.Ub(0,"div",5),a.Ic(1),a.Tb()),2&e){const e=a.ic(2);a.Cb(1),a.Kc("Total announcements: ",e.groupedAnnouncements.size,"")}}function ki(e,t){1&e&&(a.Ub(0,"span"),a.Ic(1,","),a.Tb())}function xi(e,t){1&e&&(a.Ub(0,"h4"),a.Qb(1,"hr"),a.Ic(2,"Announcement: "),a.Tb())}function Ti(e,t){if(1&e&&a.Qb(0,"div",10),2&e){const e=a.ic().$implicit;a.oc("innerHTML",e.content,a.zc)}}function _i(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",11),a.gc("click",(function(){a.yc(e);const t=a.ic().$implicit,i=a.ic().$implicit;return a.ic().editAnnouncement(t.announcement_id,i.value)})),a.Ic(1,"Edit"),a.Tb()}}function wi(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",12),a.gc("click",(function(){a.yc(e);const t=a.ic().$implicit;return a.ic(2).deleteAnnouncement(t.announcement_id)})),a.Ic(1,"Delete"),a.Tb()}}function Si(e,t){if(1&e&&(a.Ub(0,"div"),a.Ub(1,"span"),a.Ic(2),a.Gc(3,ki,2,0,"span",6),a.Tb(),a.Gc(4,xi,3,0,"h4",6),a.Gc(5,Ti,1,1,"div",7),a.Ub(6,"div"),a.Gc(7,_i,2,0,"button",8),a.Gc(8,wi,2,0,"button",9),a.Tb(),a.Tb()),2&e){const e=t.$implicit,i=t.index,n=a.ic().$implicit;a.Cb(2),a.Jc(e.course_name),a.Cb(1),a.oc("ngIf",i!=n.value.length-1),a.Cb(1),a.oc("ngIf",i==n.value.length-1),a.Cb(1),a.oc("ngIf",i==n.value.length-1),a.Cb(2),a.oc("ngIf",i==n.value.length-1),a.Cb(1),a.oc("ngIf",i==n.value.length-1)}}function Pi(e,t){if(1&e&&(a.Ub(0,"div",2),a.Gc(1,Ui,2,1,"div",3),a.Ub(2,"span"),a.Ic(3),a.Tb(),a.Ub(4,"h4"),a.Ic(5,"Courses: "),a.Tb(),a.Gc(6,Si,9,6,"div",4),a.Tb()),2&e){const e=t.$implicit,i=t.index;a.Cb(1),a.oc("ngIf",0==i),a.Cb(2),a.Kc("Id: ",e.key,""),a.Cb(3),a.oc("ngForOf",e.value)}}const Di=[{path:"create-announcement",component:pi,canActivate:[G.a],data:{expectedRole:"admin"},pathMatch:"full"},{path:"view-created-announcements",component:(()=>{class e{constructor(e,t,i){this.announcementService=e,this.router=t,this.route=i,this.announcementSet=new Set,this.groupedAnnouncements=new Map}ngOnInit(){this.announcementService.fetchAnnouncements().subscribe(e=>{e.forEach((e,t,i)=>{this.announcementSet.add(e.announcement_id);let n=e.content.substring(0,25);e.content=n}),this.announcements=e,console.log(e),this.announcementSet.forEach(e=>{console.log(e),this.announcements.forEach((t,i)=>{e==t.announcement_id&&(console.log("grouped"),console.log(t),this.groupedAnnouncements.get(e)?this.groupedAnnouncements.get(e).push(t):this.groupedAnnouncements.set(e,[t]),console.log(this.groupedAnnouncements.get(e)))})})})}editAnnouncement(e,t){console.log(e),console.log("announcements: \n"),console.log(t),this.announcementService.nextEditCourses(t),this.router.navigate(["../edit-announcement",e],{relativeTo:this.route})}deleteAnnouncement(e){confirm("Delete announcement: "+e+"\nAre you sure?")&&(console.log("deleted: "+e),this.announcementService.deleteAnnouncement(e).subscribe(()=>{alert("Deleted announcement: "+e)}))}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(Q),a.Pb(A.c),a.Pb(A.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-view-created-announcements"]],decls:5,vars:3,consts:[[1,"flexbox-row"],["class","announcement",4,"ngFor","ngForOf"],[1,"announcement"],["style","background-color:white; padding-bottom: 10px",4,"ngIf"],[4,"ngFor","ngForOf"],[2,"background-color","white","padding-bottom","10px"],[4,"ngIf"],["style","padding-top:10px; background-color: lightgray",3,"innerHTML",4,"ngIf"],["class","btn btn-success",3,"click",4,"ngIf"],["class","btn btn-danger",3,"click",4,"ngIf"],[2,"padding-top","10px","background-color","lightgray",3,"innerHTML"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"h2"),a.Ic(2,"Manage Announcements"),a.Tb(),a.Gc(3,Pi,7,3,"div",1),a.jc(4,"keyvalue"),a.Tb()),2&e&&(a.Cb(3),a.oc("ngForOf",a.kc(4,1,t.groupedAnnouncements)))},directives:[n.m,n.n],pipes:[n.h],styles:["hr[_ngcontent-%COMP%]{border:1px solid #add8e6}"]}),e})(),canActivate:[G.a],data:{expectedRole:"admin"},pathMatch:"full"},{path:"edit-announcement/:announcementId",component:Ii,canActivate:[G.a],data:{expectedRole:"admin"},pathMatch:"full"},{path:"",component:ee,canActivate:[G.a],pathMatch:"full"},{path:":id",component:re,canActivate:[G.a],pathMatch:"full"},{path:":id/announcements",component:gi,canActivate:[G.a]},{path:":id/modules",component:St,canActivate:[G.a]},{path:":id/leaderboard",component:Ft,canActivate:[G.a]},{path:":id/create-module",component:Et,canActivate:[G.a],data:{expectedRole:"instructor"}},{path:":id/edit-module/:moduleId",component:Bt,canActivate:[G.a],data:{expectedRole:"instructor"}},{path:":id/edit-home",component:Kt,canActivate:[G.a],data:{expectedRole:"instructor"}},{path:":id/discussion/:moduleId",component:di,canActivate:[G.a]}];let Fi=(()=>{class e{}return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},imports:[[A.g.forChild(Di)],A.g]}),e})();i.d(t,"CourseModule",(function(){return Ai}));let Ai=(()=>{class e{}return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},imports:[[n.c,Fi,s.m,o.c,c.b,m,F]]}),e})()}}]);