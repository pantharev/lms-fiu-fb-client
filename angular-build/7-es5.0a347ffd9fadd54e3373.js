function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"13Ib":function(e,t,n){"use strict";n.r(t);var r=n("ofXK"),c=n("3Pt+"),a=n("1kSV"),i=n("tyNb"),s=n("BOF4"),o=n.n(s),u=n("fXoL"),b=n("Un6b"),d=n("y8gV"),l=n("ZY/4");function f(e,t){1&e&&(u.Ub(0,"div"),u.Ub(1,"h2"),u.Hc(2,"Courses"),u.Tb(),u.Ub(3,"nav",12),u.Ub(4,"a",13),u.Qb(5,"i",14),u.Hc(6," Create New Course"),u.Tb(),u.Tb(),u.Tb())}function g(e,t){if(1&e&&(u.Ub(0,"th",15),u.Hc(1),u.Tb()),2&e){var n=t.$implicit;u.Cb(1),u.Ic(n)}}function m(e,t){if(1&e&&(u.Ub(0,"span",26),u.Hc(1),u.Tb()),2&e){var n=u.ic().index,r=u.ic(2);u.Cb(1),u.Ic(r.students[n])}}function p(e,t){if(1&e){var n=u.Vb();u.Ub(0,"tr",16),u.Ub(1,"th",17),u.Hc(2),u.Tb(),u.Ub(3,"td",18),u.Hc(4),u.Tb(),u.Ub(5,"td",19),u.Hc(6),u.Tb(),u.Ub(7,"td"),u.Hc(8),u.Tb(),u.Ub(9,"td"),u.Hc(10),u.Tb(),u.Ub(11,"td"),u.Hc(12),u.Tb(),u.Ub(13,"td"),u.Ub(14,"button",20),u.gc("click",(function(){u.xc(n);var e=t.$implicit;return u.ic(2).editCourse(e.id)})),u.Qb(15,"i",21),u.Hc(16," Edit"),u.Tb(),u.Ub(17,"button",22),u.gc("click",(function(){u.xc(n);var e=t.$implicit;return u.ic(2).deleteCourse(e.id)})),u.Qb(18,"i",23),u.Hc(19," Delete"),u.Tb(),u.Ub(20,"button",24),u.gc("click",(function(){u.xc(n);var e=t.$implicit;return u.ic(2).pendingEnrollment(e.id)})),u.Fc(21,m,2,1,"span",25),u.Hc(22," Pending Enrollments"),u.Tb(),u.Tb(),u.Tb()}if(2&e){var r=t.$implicit,c=t.index,a=u.ic(2);u.Cb(2),u.Ic(r.id),u.Cb(2),u.Ic(r.name),u.Cb(2),u.Ic(r.description),u.Cb(2),u.Ic(r.seats),u.Cb(2),u.Ic(r.start_date),u.Cb(2),u.Ic(r.end_date),u.Cb(9),u.oc("ngIf",a.students[c]>0)}}function v(e,t){if(1&e){var n=u.Vb();u.Sb(0),u.Ub(1,"li",27),u.Ub(2,"button",28),u.gc("click",(function(){u.xc(n);var e=u.ic(2);return e.fetchPageCourses(e.page-1)})),u.Hc(3,"Previous"),u.Tb(),u.Tb(),u.Rb()}}function h(e,t){if(1&e){var n=u.Vb();u.Ub(0,"li",29),u.Ub(1,"button",28),u.gc("click",(function(){u.xc(n);var e=u.ic(2);return e.fetchPageCourses(e.page-1)})),u.Hc(2,"Previous"),u.Tb(),u.Tb()}}function C(e,t){if(1&e){var n=u.Vb();u.Sb(0),u.Ub(1,"li",29),u.Ub(2,"button",28),u.gc("click",(function(){u.xc(n);var e=t.index;return u.ic(2).fetchPageCourses(e)})),u.Hc(3),u.Tb(),u.Tb(),u.Rb()}if(2&e){var r=t.index;u.Cb(3),u.Ic(r)}}function U(e,t){if(1&e){var n=u.Vb();u.Sb(0),u.Ub(1,"li",27),u.Ub(2,"button",28),u.gc("click",(function(){u.xc(n);var e=u.ic(2);return e.fetchPageCourses(e.page+1)})),u.Hc(3,"Next"),u.Tb(),u.Tb(),u.Rb()}}function T(e,t){if(1&e){var n=u.Vb();u.Ub(0,"li",29),u.Ub(1,"button",28),u.gc("click",(function(){u.xc(n);var e=u.ic(2);return e.fetchPageCourses(e.page+1)})),u.Hc(2,"Next"),u.Tb(),u.Tb()}}function S(e,t){if(1&e&&(u.Ub(0,"div",0),u.Fc(1,f,7,0,"div",2),u.Ub(2,"table",3),u.Ub(3,"thead"),u.Ub(4,"tr"),u.Fc(5,g,2,1,"th",4),u.Tb(),u.Tb(),u.Ub(6,"tbody"),u.Fc(7,p,23,7,"tr",5),u.Tb(),u.Tb(),u.Ub(8,"nav",6),u.Ub(9,"ul",7),u.Fc(10,v,4,0,"ng-container",8),u.Fc(11,h,3,0,"ng-template",null,9,u.Gc),u.Fc(13,C,4,1,"ng-container",10),u.Fc(14,U,4,0,"ng-container",8),u.Fc(15,T,3,0,"ng-template",null,11,u.Gc),u.Tb(),u.Tb(),u.Tb()),2&e){var n=u.wc(12),r=u.wc(16),c=u.ic();u.Cb(1),u.oc("ngIf",c.currentUser),u.Cb(4),u.oc("ngForOf",c.displayedColumns),u.Cb(2),u.oc("ngForOf",c.courses.res),u.Cb(3),u.oc("ngIf",0==c.page)("ngIfElse",n),u.Cb(3),u.oc("ngForOf",c.maxPagesArray),u.Cb(1),u.oc("ngIf",c.page==c.maxPages-1)("ngIfElse",r)}}var y,k=((y=function(){function e(t,n,r,c,a){_classCallCheck(this,e),this.courseService=t,this.router=n,this.route=r,this.authenticationService=c,this.studentCourseService=a,this.courses={},this.displayedColumns=["id","name","description","seats","start_date","end_date","Actions"],this.page=0,this.pages=[],this.students=[],this.numberPerPage=5}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this.route.snapshot.paramMap.get("page")||this.page;this.fetchCourses(e),this.currentUser=this.authenticationService.currentUserValue,this.currentUser&&(this.tokenPayload=o()(this.currentUser.token),this.isAdmin="admin"===this.tokenPayload.role,console.log("Current user in Admin: "+JSON.stringify(this.currentUser)),console.log("tokenPayload: "+JSON.stringify(this.tokenPayload)))}},{key:"pendingEnrollmentsNotification",value:function(e){var t=this;e.forEach((function(e,n,r){var c=new Date(e.start_date.toString()),a=new Date(e.end_date.toString());e.start_date=c.toLocaleDateString(),e.end_date=a.toLocaleDateString(),e.seats<1||(t.students[n]=0,t.studentCourseService.getStudentsByCourseId(e.id).subscribe((function(r){r.forEach((function(e){"pending"==e.enrollment_status&&t.students[n]++})),console.log(e.name+" pending students: "+t.students[n])})))}))}},{key:"fetchCourses",value:function(e){var t=this;this.courseService.getCourses(e,this.numberPerPage).subscribe((function(n){t.courses=n,t.page=e,t.currentPage=t.courses.pagination.current,t.maxPages=t.courses.pagination.maxPages,t.maxPagesArray=new Array(t.maxPages),t.pages=Object.values(t.courses.pagination),console.log("Data requested..."),t.pendingEnrollmentsNotification(t.courses.res),t.router.navigate(["/admin",{page:e}])}))}},{key:"fetchPageCourses",value:function(e){var t=this;e<0||this.courseService.getCourses(e,this.numberPerPage).subscribe((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.courses=n,t.page=e,t.currentPage=t.courses.pagination.current,t.maxPages=t.courses.pagination.maxPages,t.pendingEnrollmentsNotification(t.courses.res),console.log("Data requested..."+e),t.router.navigate(["/admin",{page:t.courses.pagination.current}])}))}},{key:"editCourse",value:function(e){this.router.navigate(["admin/edit-course/".concat(e)])}},{key:"deleteCourse",value:function(e){if(1==confirm("Delete Course ".concat(e,": Are you sure?"))){this.courseService.deleteCourse(e).subscribe((function(){}));var t=this.courses.res.find((function(t){return t.id===e}));this.courses.res.splice(this.courses.res.indexOf(t))}}},{key:"pendingEnrollment",value:function(e){this.router.navigate(["admin/pending-enrollment/".concat(e)])}}]),e}()).\u0275fac=function(e){return new(e||y)(u.Pb(b.a),u.Pb(i.c),u.Pb(i.a),u.Pb(d.a),u.Pb(l.a))},y.\u0275cmp=u.Jb({type:y,selectors:[["app-dashboard"]],decls:3,vars:1,consts:[[1,"center-form"],["class","center-form",4,"ngIf"],[4,"ngIf"],[1,"table"],["scope","col",4,"ngFor","ngForOf"],["class","trstyle",4,"ngFor","ngForOf"],["aria-label","Page navigation course-library"],[1,"pagination"],[4,"ngIf","ngIfElse"],["elseBlock",""],[4,"ngFor","ngForOf"],["elseBlock2",""],[1,"nav","flex-column","col-sm-1"],["routerLink","/admin/create-course","routerLinkActive","active",1,"nav-link","btn","btn-success"],[1,"fas","fa-plus-circle"],["scope","col"],[1,"trstyle"],["scope","row"],[2,"max-width","125px","word-wrap","break-word"],[2,"max-width","200px","word-wrap","break-word"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-edit"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fas","fa-minus-circle"],["type","button",1,"btn","btn-warning",2,"margin-left","20px",3,"click"],["class","badge badge-light",4,"ngIf"],[1,"badge","badge-light"],[1,"page-item","disabled"],[1,"page-link",3,"click"],[1,"page-item"]],template:function(e,t){1&e&&(u.Ub(0,"h2",0),u.Hc(1,"Admin Dashboard"),u.Tb(),u.Fc(2,S,17,8,"div",1)),2&e&&(u.Cb(2),u.oc("ngIf",t.currentUser&&t.isAdmin))},directives:[r.n,r.m,i.f,i.e],styles:[""]}),y),D=n("rptU");function _(e,t){1&e&&(u.Ub(0,"div"),u.Hc(1,"Name is required"),u.Tb())}function H(e,t){if(1&e&&(u.Ub(0,"div",28),u.Fc(1,_,2,0,"div",29),u.Tb()),2&e){var n=u.ic();u.Cb(1),u.oc("ngIf",n.c.name.errors.required)}}function F(e,t){1&e&&(u.Ub(0,"div"),u.Hc(1,"Description is required"),u.Tb())}function w(e,t){if(1&e&&(u.Ub(0,"div",28),u.Fc(1,F,2,0,"div",29),u.Tb()),2&e){var n=u.ic();u.Cb(1),u.oc("ngIf",n.c.description.errors.required)}}function I(e,t){1&e&&(u.Ub(0,"div"),u.Hc(1,"Seats is required"),u.Tb())}function P(e,t){if(1&e&&(u.Ub(0,"div",28),u.Fc(1,I,2,0,"div",29),u.Tb()),2&e){var n=u.ic();u.Cb(1),u.oc("ngIf",n.c.seats.errors.required)}}function x(e,t){1&e&&(u.Ub(0,"div"),u.Hc(1,"Start Date is required"),u.Tb())}function E(e,t){if(1&e&&(u.Ub(0,"div",28),u.Fc(1,x,2,0,"div",29),u.Tb()),2&e){var n=u.ic();u.Cb(1),u.oc("ngIf",n.c.start_date.errors.required)}}function q(e,t){1&e&&(u.Ub(0,"div"),u.Hc(1,"End Date is required"),u.Tb())}function N(e,t){if(1&e&&(u.Ub(0,"div",28),u.Fc(1,q,2,0,"div",29),u.Tb()),2&e){var n=u.ic();u.Cb(1),u.oc("ngIf",n.c.end_date.errors.required)}}var O=function(e){return{"is-invalid":e}};function A(e,t){1&e&&(u.Ub(0,"div"),u.Hc(1,"Name is required"),u.Tb())}function V(e,t){if(1&e&&(u.Ub(0,"div",27),u.Fc(1,A,2,0,"div",28),u.Tb()),2&e){var n=u.ic();u.Cb(1),u.oc("ngIf",n.cu.name.errors.required)}}function Q(e,t){1&e&&(u.Ub(0,"div"),u.Hc(1,"Description is required"),u.Tb())}function j(e,t){if(1&e&&(u.Ub(0,"div",27),u.Fc(1,Q,2,0,"div",28),u.Tb()),2&e){var n=u.ic();u.Cb(1),u.oc("ngIf",n.cu.description.errors.required)}}function B(e,t){1&e&&(u.Ub(0,"div"),u.Hc(1,"Seats is required"),u.Tb())}function J(e,t){if(1&e&&(u.Ub(0,"div",27),u.Fc(1,B,2,0,"div",28),u.Tb()),2&e){var n=u.ic();u.Cb(1),u.oc("ngIf",n.cu.seats.errors.required)}}function L(e,t){1&e&&(u.Ub(0,"div"),u.Hc(1,"Start Date is required"),u.Tb())}function G(e,t){if(1&e&&(u.Ub(0,"div",27),u.Fc(1,L,2,0,"div",28),u.Tb()),2&e){var n=u.ic();u.Cb(1),u.oc("ngIf",n.cu.start_date.errors.required)}}function M(e,t){1&e&&(u.Ub(0,"div"),u.Hc(1,"End Date is required"),u.Tb())}function R(e,t){if(1&e&&(u.Ub(0,"div",27),u.Fc(1,M,2,0,"div",28),u.Tb()),2&e){var n=u.ic();u.Cb(1),u.oc("ngIf",n.cu.end_date.errors.required)}}var $=function(e){return{"is-invalid":e}};function Y(e,t){if(1&e&&(u.Ub(0,"h2"),u.Hc(1),u.Ub(2,"span",5),u.Hc(3),u.Tb(),u.Tb()),2&e){var n=u.ic();u.Cb(1),u.Jc("",n.course.name," "),u.Cb(2),u.Jc("Seats: ",n.course.seats,"")}}function X(e,t){if(1&e){var n=u.Vb();u.Sb(0),u.Ub(1,"th",9),u.Hc(2),u.Tb(),u.Ub(3,"td"),u.Hc(4),u.Tb(),u.Ub(5,"td"),u.Hc(6),u.Tb(),u.Ub(7,"td"),u.Hc(8),u.Tb(),u.Ub(9,"td"),u.Ub(10,"button",10),u.gc("click",(function(){u.xc(n);var e=u.ic().$implicit;return u.ic(2).acceptEnrollment(e.student_id,e.course_id,"enrolled")})),u.Hc(11,"Accept"),u.Tb(),u.Ub(12,"button",11),u.gc("click",(function(){u.xc(n);var e=u.ic().$implicit;return u.ic(2).declineEnrollment(e.student_id,e.course_id)})),u.Hc(13,"Decline"),u.Tb(),u.Tb(),u.Rb()}if(2&e){var r=u.ic().$implicit;u.Cb(2),u.Ic(r.student_id),u.Cb(2),u.Ic(r.email),u.Cb(2),u.Ic(r.f_name),u.Cb(2),u.Ic(r.l_name)}}function K(e,t){if(1&e&&(u.Ub(0,"tr"),u.Fc(1,X,14,4,"ng-container",0),u.Tb()),2&e){var n=t.$implicit;u.Cb(1),u.oc("ngIf","pending"==n.enrollment_status)}}function Z(e,t){if(1&e&&(u.Ub(0,"table",6),u.Ub(1,"thead"),u.Ub(2,"tr"),u.Ub(3,"th",7),u.Hc(4,"studentID"),u.Tb(),u.Ub(5,"th",7),u.Hc(6,"email"),u.Tb(),u.Ub(7,"th",7),u.Hc(8,"First Name"),u.Tb(),u.Ub(9,"th",7),u.Hc(10,"Last Name"),u.Tb(),u.Ub(11,"th",7),u.Hc(12,"Enroll"),u.Tb(),u.Tb(),u.Tb(),u.Ub(13,"tbody"),u.Fc(14,K,2,1,"tr",8),u.Tb(),u.Tb()),2&e){var n=u.ic();u.Cb(14),u.oc("ngForOf",n.students)}}function z(e,t){1&e&&(u.Ub(0,"h2",12),u.Hc(1,"No seats available!"),u.Tb())}var W,ee,te,ne,re=[{path:"",component:k,canActivate:[d.a],data:{expectedRole:"admin"}},{path:"create-course",component:(te=function(){function e(t,n,r,a){_classCallCheck(this,e),this.courseService=t,this.courseDetailsService=n,this.fb=r,this.router=a,this.labels=["name","description","seats","start_date","end_date"],this.submitted=!1,this.todayDate=null,this.startDateEvent=null,this.endDateEvent=null,this.startDateSelected=!1,this.endDateSelected=!1,this.courseForm=this.fb.group({name:["",c.m.required],description:["",c.m.required],seats:["",c.m.required],start_date:["",c.m.required],end_date:["",c.m.required]})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),r=e.getFullYear();this.todayDate=new Promise((function(e,c){e(n+"/"+t+"/"+r)}))}},{key:"addCourse",value:function(e,t,n,r,c){var a=this;this.submitted=!0,r=this.formatDate(r),console.log("going to submit start_date: "+r),c=this.formatDate(c),console.log("going to submit end_date: "+c),this.courseForm.valid&&this.courseService.addCourse(e,t,n,r,c).subscribe((function(e){a.courseDetailsService.createCourseDetails(e.id,"<p>Recommended inputs: Course Name, Instructor Name, Office (location/hours), Phone number, and email.</p>").subscribe((function(){console.log("course details created")})),a.router.navigate(["/admin"])}))}},{key:"onStartDateSelect",value:function(e){console.log("startDateSelected"),this.startDateEvent=new Promise((function(t,n){t(String(e.month).padStart(2,"0")+"/"+String(e.day).padStart(2,"0")+"/"+e.year)})),this.startDateSelected=!0}},{key:"onEndDateSelect",value:function(e){console.log("endDateSelected"),this.endDateEvent=new Promise((function(t,n){t(String(e.month).padStart(2,"0")+"/"+String(e.day).padStart(2,"0")+"/"+e.year)})),this.endDateSelected=!0}},{key:"formatDate",value:function(e){var t=new Date(e),n=String(t.getDate()).padStart(2,"0"),r=String(t.getMonth()+1).padStart(2,"0");return t.getFullYear()+"-"+r+"-"+n}},{key:"c",get:function(){return this.courseForm.controls}}]),e}(),te.\u0275fac=function(e){return new(e||te)(u.Pb(b.a),u.Pb(D.a),u.Pb(c.b),u.Pb(i.c))},te.\u0275cmp=u.Jb({type:te,selectors:[["app-create-course"]],decls:62,vars:31,consts:[[1,"center-form"],[1,"col-sm-4",3,"formGroup"],[1,"form-group"],["for","name"],[2,"color","red"],["type","text","formControlName","name","required","",1,"form-control",3,"ngClass"],["name",""],["class","invalid-feedback",4,"ngIf"],["for","description"],["formControlName","description","required","",1,"form-control",3,"ngClass"],["description",""],["for","seats"],["type","text","formControlName","seats","required","",1,"form-control",3,"ngClass"],["seats",""],["for","start_date"],[1,"input-group"],["name","dp","ngbDatepicker","","formControlName","start_date","readonly","","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d","ngbDatepicker","start_date",""],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","far","fa-calendar-alt",3,"click"],["data-provide","datepicker",1,"form-group"],["for","end_date"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","formControlName","end_date","readonly","","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d2","ngbDatepicker","end_date",""],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],["routerLink","/admin",1,"btn","btn-warning"],[1,"fas","fa-arrow-circle-left"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){if(1&e){var n=u.Vb();u.Ub(0,"div",0),u.Ub(1,"h2"),u.Hc(2,"Create New Course"),u.Tb(),u.Ub(3,"form",1),u.Ub(4,"div",2),u.Ub(5,"label",3),u.Ub(6,"span",4),u.Hc(7,"*"),u.Tb(),u.Hc(8,"Name"),u.Tb(),u.Qb(9,"input",5,6),u.Fc(11,H,2,1,"div",7),u.Tb(),u.Ub(12,"div",2),u.Ub(13,"label",8),u.Ub(14,"span",4),u.Hc(15,"*"),u.Tb(),u.Hc(16,"Description"),u.Tb(),u.Qb(17,"textarea",9,10),u.Fc(19,w,2,1,"div",7),u.Tb(),u.Ub(20,"div",2),u.Ub(21,"label",11),u.Ub(22,"span",4),u.Hc(23,"*"),u.Tb(),u.Hc(24,"Number of Seats"),u.Tb(),u.Qb(25,"input",12,13),u.Fc(27,P,2,1,"div",7),u.Tb(),u.Ub(28,"div",2),u.Ub(29,"label",14),u.Ub(30,"span",4),u.Hc(31,"*"),u.Tb(),u.Hc(32,"Start Date"),u.Tb(),u.Ub(33,"div",15),u.Ub(34,"input",16,17),u.gc("dateSelect",(function(e){return t.onStartDateSelect(e)})),u.jc(37,"async"),u.jc(38,"async"),u.Tb(),u.Ub(39,"div",18),u.Ub(40,"button",19),u.gc("click",(function(){return u.xc(n),u.wc(35).toggle()})),u.Tb(),u.Tb(),u.Fc(41,E,2,1,"div",7),u.Tb(),u.Tb(),u.Ub(42,"div",20),u.Ub(43,"label",21),u.Ub(44,"span",4),u.Hc(45,"*"),u.Tb(),u.Hc(46,"End Date"),u.Tb(),u.Ub(47,"div",15),u.Ub(48,"input",22,23),u.gc("dateSelect",(function(e){return t.onEndDateSelect(e)})),u.jc(51,"async"),u.jc(52,"async"),u.Tb(),u.Ub(53,"div",18),u.Ub(54,"button",19),u.gc("click",(function(){return u.xc(n),u.wc(49).toggle()})),u.Tb(),u.Tb(),u.Fc(55,N,2,1,"div",7),u.Tb(),u.Tb(),u.Ub(56,"button",24),u.gc("click",(function(){u.xc(n);var e=u.wc(10),r=u.wc(18),c=u.wc(26),a=u.wc(36),i=u.wc(50);return t.addCourse(e.value,r.value,c.value,a.value,i.value)})),u.Qb(57,"i",25),u.Hc(58," Create Course"),u.Tb(),u.Ub(59,"a",26),u.Qb(60,"i",27),u.Hc(61," Go Back"),u.Tb(),u.Tb(),u.Tb()}2&e&&(u.Cb(3),u.oc("formGroup",t.courseForm),u.Cb(6),u.oc("ngClass",u.sc(21,O,t.submitted&&t.c.name.errors)),u.Cb(2),u.oc("ngIf",t.submitted&&t.c.name.errors),u.Cb(6),u.oc("ngClass",u.sc(23,O,t.submitted&&t.c.description.errors)),u.Cb(2),u.oc("ngIf",t.submitted&&t.c.description.errors),u.Cb(6),u.oc("ngClass",u.sc(25,O,t.submitted&&t.c.seats.errors)),u.Cb(2),u.oc("ngIf",t.submitted&&t.c.seats.errors),u.Cb(7),u.oc("value",t.startDateSelected?u.kc(37,13,t.startDateEvent):u.kc(38,15,t.todayDate))("ngClass",u.sc(27,O,t.submitted&&t.c.start_date.errors)),u.Cb(7),u.oc("ngIf",t.submitted&&t.c.start_date.errors),u.Cb(7),u.oc("value",t.endDateSelected?u.kc(51,17,t.endDateEvent):u.kc(52,19,t.todayDate))("ngClass",u.sc(29,O,t.submitted&&t.c.end_date.errors)),u.Cb(7),u.oc("ngIf",t.submitted&&t.c.end_date.errors))},directives:[c.o,c.i,c.d,c.a,c.h,c.c,c.l,r.l,r.n,a.a,i.f],pipes:[r.b],styles:[""]}),te),canActivate:[d.a],data:{expectedRole:"admin"}},{path:"edit-course/:id",component:(ee=function(){function e(t,n,r,c){_classCallCheck(this,e),this.courseService=t,this.router=n,this.route=r,this.fb=c,this.submitted=!1,this.startDate=null,this.startDateSelected=!1,this.startDateEvent=null,this.endDate=null,this.endDateSelected=!1,this.endDateEvent=null,this.CreateForm()}return _createClass(e,[{key:"CreateForm",value:function(){this.updateForm=this.fb.group({name:["",c.m.required],description:["",c.m.required],seats:["",c.m.required],start_date:["",c.m.required],end_date:["",c.m.required]})}},{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.id=t.id,e.courseService.getCourseById(e.id).subscribe((function(t){e.course=t,e.hDateFormat(e.course),e.updateForm.get("name").setValue(e.course.name),e.updateForm.get("description").setValue(e.course.description),e.updateForm.get("seats").setValue(e.course.seats);var n=new Date(e.course.start_date.toString()),r=String(n.getDate()).padStart(2,"0"),c=String(n.getMonth()+1).padStart(2,"0"),a=n.getFullYear();e.startDate=new Promise((function(e,t){e(c+"/"+r+"/"+a)})),n=new Date(e.course.end_date.toString()),r=String(n.getDate()).padStart(2,"0"),c=String(n.getMonth()+1).padStart(2,"0"),a=n.getFullYear(),e.endDate=new Promise((function(e,t){e(c+"/"+r+"/"+a)}))}))}))}},{key:"updateCourse",value:function(e,t,n,r,c){var a=this;this.submitted=!0,r=this.formatDate(r),console.log("going to submit start_date: "+r),c=this.formatDate(c),console.log("going to submit end_date: "+c),this.updateForm.valid&&this.courseService.updateCourse(this.id,e,t,n,r,c).subscribe((function(e){a.router.navigate(["/admin"])}))}},{key:"hDateFormat",value:function(e){var t=new Date(e.start_date.toString()),n=new Date(e.end_date.toString());e.start_date=t.toLocaleDateString(),e.end_date=n.toLocaleDateString()}},{key:"formatDate",value:function(e){var t=new Date(e),n=String(t.getDate()).padStart(2,"0"),r=String(t.getMonth()+1).padStart(2,"0");return t.getFullYear()+"-"+r+"-"+n}},{key:"onStartDateSelect",value:function(e){this.startDateSelected=!0,this.startDateEvent=new Promise((function(t,n){t(String(e.month).padStart(2,"0")+"/"+String(e.day).padStart(2,"0")+"/"+e.year)}))}},{key:"onEndDateSelect",value:function(e){this.endDateSelected=!0,this.endDateEvent=new Promise((function(t,n){t(String(e.month).padStart(2,"0")+"/"+String(e.day).padStart(2,"0")+"/"+e.year)}))}},{key:"cu",get:function(){return this.updateForm.controls}}]),e}(),ee.\u0275fac=function(e){return new(e||ee)(u.Pb(b.a),u.Pb(i.c),u.Pb(i.a),u.Pb(c.b))},ee.\u0275cmp=u.Jb({type:ee,selectors:[["app-edit-course"]],decls:62,vars:32,consts:[[1,"center-form"],[1,"col-sm-4",3,"formGroup"],[1,"form-group"],["for","name"],[2,"color","red"],["type","text","formControlName","name","required","",1,"form-control",3,"ngClass"],["name",""],["class","invalid-feedback",4,"ngIf"],["for","description"],["formControlName","description","required","",1,"form-control",3,"ngClass"],["description",""],["for","seats"],["type","text","formControlName","seats","required","",1,"form-control",3,"ngClass"],["seats",""],["for","start_date"],[1,"input-group"],["type","text","placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","formControlName","start_date","readonly","","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d","ngbDatepicker","start_date",""],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","far","fa-calendar-alt",3,"click"],["for","end_date"],["type","text","placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","formControlName","end_date","readonly","","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d2","ngbDatepicker","end_date",""],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],["routerLink","/admin",1,"btn","btn-warning"],[1,"fas","fa-arrow-circle-left"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){if(1&e){var n=u.Vb();u.Ub(0,"div",0),u.Ub(1,"h2"),u.Hc(2),u.Tb(),u.Ub(3,"form",1),u.Ub(4,"div",2),u.Ub(5,"label",3),u.Ub(6,"span",4),u.Hc(7,"*"),u.Tb(),u.Hc(8,"Name"),u.Tb(),u.Qb(9,"input",5,6),u.Fc(11,V,2,1,"div",7),u.Tb(),u.Ub(12,"div",2),u.Ub(13,"label",8),u.Ub(14,"span",4),u.Hc(15,"*"),u.Tb(),u.Hc(16,"Description"),u.Tb(),u.Qb(17,"textarea",9,10),u.Fc(19,j,2,1,"div",7),u.Tb(),u.Ub(20,"div",2),u.Ub(21,"label",11),u.Ub(22,"span",4),u.Hc(23,"*"),u.Tb(),u.Hc(24,"Number of Seats"),u.Tb(),u.Qb(25,"input",12,13),u.Fc(27,J,2,1,"div",7),u.Tb(),u.Ub(28,"div",2),u.Ub(29,"label",14),u.Ub(30,"span",4),u.Hc(31,"*"),u.Tb(),u.Hc(32,"Start Date"),u.Tb(),u.Ub(33,"div",15),u.Ub(34,"input",16,17),u.gc("dateSelect",(function(e){return t.onStartDateSelect(e)})),u.jc(37,"async"),u.jc(38,"async"),u.Tb(),u.Ub(39,"div",18),u.Ub(40,"button",19),u.gc("click",(function(){return u.xc(n),u.wc(35).toggle()})),u.Tb(),u.Tb(),u.Fc(41,G,2,1,"div",7),u.Tb(),u.Tb(),u.Ub(42,"div",2),u.Ub(43,"label",20),u.Ub(44,"span",4),u.Hc(45,"*"),u.Tb(),u.Hc(46,"End Date"),u.Tb(),u.Ub(47,"div",15),u.Ub(48,"input",21,22),u.gc("dateSelect",(function(e){return t.onEndDateSelect(e)})),u.jc(51,"async"),u.jc(52,"async"),u.Tb(),u.Ub(53,"div",18),u.Ub(54,"button",19),u.gc("click",(function(){return u.xc(n),u.wc(49).toggle()})),u.Tb(),u.Tb(),u.Fc(55,R,2,1,"div",7),u.Tb(),u.Tb(),u.Ub(56,"button",23),u.gc("click",(function(){u.xc(n);var e=u.wc(10),r=u.wc(18),c=u.wc(26),a=u.wc(36),i=u.wc(50);return t.updateCourse(e.value,r.value,c.value,a.value,i.value)})),u.Qb(57,"i",24),u.Hc(58," Update Course"),u.Tb(),u.Ub(59,"a",25),u.Qb(60,"i",26),u.Hc(61," Go Back"),u.Tb(),u.Tb(),u.Tb()}2&e&&(u.Cb(2),u.Jc("Edit Course ",t.id,""),u.Cb(1),u.oc("formGroup",t.updateForm),u.Cb(6),u.oc("ngClass",u.sc(22,$,t.submitted&&t.cu.name.errors)),u.Cb(2),u.oc("ngIf",t.submitted&&t.cu.name.errors),u.Cb(6),u.oc("ngClass",u.sc(24,$,t.submitted&&t.cu.description.errors)),u.Cb(2),u.oc("ngIf",t.submitted&&t.cu.description.errors),u.Cb(6),u.oc("ngClass",u.sc(26,$,t.submitted&&t.cu.seats.errors)),u.Cb(2),u.oc("ngIf",t.submitted&&t.cu.seats.errors),u.Cb(7),u.oc("value",t.startDateSelected?u.kc(37,14,t.startDateEvent):u.kc(38,16,t.startDate))("ngClass",u.sc(28,$,t.submitted&&t.cu.start_date.errors)),u.Cb(7),u.oc("ngIf",t.submitted&&t.cu.start_date.errors),u.Cb(7),u.oc("value",t.endDateSelected?u.kc(51,18,t.endDateEvent):u.kc(52,20,t.endDate))("ngClass",u.sc(30,$,t.submitted&&t.cu.end_date.errors)),u.Cb(7),u.oc("ngIf",t.submitted&&t.cu.end_date.errors))},directives:[c.o,c.i,c.d,c.a,c.h,c.c,c.l,r.l,r.n,a.a,i.f],pipes:[r.b],styles:[""]}),ee),canActivate:[d.a],data:{expectedRole:"admin"}},{path:"pending-enrollment/:id",component:(W=function(){function e(t,n,r){_classCallCheck(this,e),this.studentCourseService=t,this.courseService=n,this.route=r,this.students=[],this.noSeats=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.id=t.id,e.courseService.getCourseById(e.id).subscribe((function(t){e.course=t,e.course.seats<1&&(e.noSeats=!0,console.log("no seats: "+e.noSeats)),console.log(e.course),e.noSeats||e.studentCourseService.getStudentsByCourseId(e.id).subscribe((function(t){e.students=t}))}))}))}},{key:"acceptEnrollment",value:function(e,t,n){var r=this;1==confirm("Accept student ".concat(e," enrollment?"))&&this.studentCourseService.acceptStudentEnrollment(e,t,n).subscribe((function(n){for(var c=0;c<r.students.length;c++)r.students[c].student_id===e&&r.students.splice(c,1);r.courseService.updateCourseSeats(t,r.course.seats-1).subscribe((function(){console.log("seats decremented by 1"),r.course.seats=r.course.seats-1}))}))}},{key:"declineEnrollment",value:function(e,t){var n=this;1==confirm("Decline student ".concat(e," enrollment?"))&&this.studentCourseService.declineStudentEnrollment(e,t).subscribe((function(t){for(var r=0;r<n.students.length;r++)n.students[r].student_id===e&&n.students.splice(r,1)}))}}]),e}(),W.\u0275fac=function(e){return new(e||W)(u.Pb(l.a),u.Pb(b.a),u.Pb(i.a))},W.\u0275cmp=u.Jb({type:W,selectors:[["app-pending-enrollment"]],decls:7,vars:3,consts:[[4,"ngIf"],["class","table",4,"ngIf","ngIfElse"],["elseBlock",""],["routerLink","/admin",1,"btn","btn-warning"],[1,"fas","fa-arrow-circle-left"],[2,"float","right"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"center-form"]],template:function(e,t){if(1&e&&(u.Fc(0,Y,4,2,"h2",0),u.Fc(1,Z,15,1,"table",1),u.Fc(2,z,2,0,"ng-template",null,2,u.Gc),u.Ub(4,"a",3),u.Qb(5,"i",4),u.Hc(6," Go Back"),u.Tb()),2&e){var n=u.wc(3);u.oc("ngIf",t.course),u.Cb(1),u.oc("ngIf",!t.noSeats)("ngIfElse",n)}},directives:[r.n,i.f,r.m],styles:[""]}),W),canActivate:[d.a],data:{expectedRole:"admin"}}],ce=((ne=function e(){_classCallCheck(this,e)}).\u0275mod=u.Nb({type:ne}),ne.\u0275inj=u.Mb({factory:function(e){return new(e||ne)},imports:[[i.g.forChild(re)],i.g]}),ne);n.d(t,"AdminModule",(function(){return ie}));var ae,ie=((ae=function e(){_classCallCheck(this,e)}).\u0275mod=u.Nb({type:ae}),ae.\u0275inj=u.Mb({factory:function(e){return new(e||ae)},imports:[[r.c,ce,c.k,a.c]]}),ae)}}]);