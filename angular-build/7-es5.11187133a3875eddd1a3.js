function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{BUtp:function(e,t,i){"use strict";i.r(t);var n=i("ofXK"),o=i("1kSV"),c=i("3Pt+"),r=i("zioG"),s=i("tyNb"),u=i("mrSG"),a=i("BOF4"),l=i.n(a),d=i("fXoL"),b=i("ZY/4"),f=i("Un6b"),v=i("y8gV");function p(e,t){if(1&e){var i=d.Vb();d.Ub(0,"button",16),d.gc("click",(function(){return d.xc(i),d.ic(4).toggleDropCourse()})),d.Hc(1,"Toggle Course Drop"),d.Tb()}}function m(e,t){if(1&e){var i=d.Vb();d.Ub(0,"button",17),d.gc("click",(function(){d.xc(i);var e=d.ic(2).$implicit;return d.ic(2).dropCourse(e.course_id)})),d.Hc(1,"Drop Course"),d.Tb()}}var g=function(e){return[e,"modules"]};function h(e,t){if(1&e&&(d.Sb(0),d.Fc(1,p,2,0,"button",7),d.Ub(2,"div",8),d.Ub(3,"div",9),d.Ub(4,"div",10),d.Ub(5,"h5",11),d.Hc(6),d.Tb(),d.Ub(7,"p",12),d.Hc(8),d.Tb(),d.Ub(9,"div",13),d.Ub(10,"a",14),d.Hc(11,"Go to Course"),d.Tb(),d.Fc(12,m,2,0,"button",15),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Rb()),2&e){var i=d.ic(),n=i.index,o=i.$implicit,c=d.ic(2);d.Cb(1),d.oc("ngIf",0==n),d.Cb(5),d.Ic(o.name),d.Cb(2),d.Ic(o.description),d.Cb(2),d.oc("routerLink",d.sc(5,g,o.course_id)),d.Cb(2),d.oc("ngIf",c.courseDrop)}}function k(e,t){if(1&e&&(d.Sb(0),d.Fc(1,h,13,7,"ng-container",6),d.Rb()),2&e){var i=t.$implicit;d.Cb(1),d.oc("ngIf","enrolled"==i.enrollment_status)}}function y(e,t){if(1&e&&(d.Sb(0),d.Ub(1,"div",4),d.Fc(2,k,2,1,"ng-container",5),d.jc(3,"async"),d.Tb(),d.Rb()),2&e){var i=d.ic();d.Cb(2),d.oc("ngForOf",d.kc(3,1,i.listCourses))}}function C(e,t){1&e&&(d.Ub(0,"p"),d.Hc(1,"You have no courses!"),d.Tb(),d.Ub(2,"label"),d.Hc(3,"Enroll in courses"),d.Tb(),d.Ub(4,"button",18),d.Hc(5,"Enroll"),d.Tb())}var U,x,T=((U=function(){function e(t,i,n){_classCallCheck(this,e),this.studentCourseService=t,this.courseService=i,this.authService=n,this.courses=[],this.courseDrop=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.currentStudent=this.authService.currentUserValue,this.currentStudent&&(this.tokenPayload=l()(this.currentStudent.token),this.studentId=this.tokenPayload.id,this.listCourses=this.studentCourseService.getCoursesByStudentId(this.studentId),console.log(this.studentId))}},{key:"fetchStudentCourses",value:function(e){var t=this;return new Promise((function(i,n){t.studentCourseService.getCoursesByStudentId(e).subscribe((function(e){for(var o=0;o<e.length;o++)e[o]?("enrolled"==e[o].enrollment_status?(t.courses.push(e[o]),console.log("Enrolled"),console.log(e[o])):(console.log("Not enrolled"),console.log(e[o])),o==e.length&&(console.log("got data"),i(!0))):(console.log("got no data"),n(!1))}),(function(e){n(e),console.log("error: "+e)}))})).then((function(e){return console.log("resthen: "+e),!0})).catch((function(e){return console.log("ERROR: "+e),!1}))}},{key:"asyncFetchStudentCourses",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("calling"),t.next=3,this.fetchStudentCourses(e);case 3:this.hasCourses=t.sent,console.log("resasync: "+this.hasCourses);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"dropCourse",value:function(e){var t=this;this.courseService.getCourseById(e).subscribe((function(e){t.course=e})),confirm("Drop the course? Are you sure?")&&this.studentCourseService.declineStudentEnrollment(this.studentId,e).subscribe((function(){alert("Dropped the course"),t.courseService.updateCourseSeats(e,t.course.seats+1).subscribe((function(){console.log("incremented seats by 1: "+(t.course.seats+1))}))}))}},{key:"toggleDropCourse",value:function(){this.courseDrop=0==this.courseDrop}}]),e}()).\u0275fac=function(e){return new(e||U)(d.Pb(b.a),d.Pb(f.a),d.Pb(v.a))},U.\u0275cmp=d.Jb({type:U,selectors:[["app-dashboard"]],decls:7,vars:4,consts:[[1,"center-form",2,"position","relative"],[4,"ngIf","ngIfElse"],["class","center-form"],["elseBlock",""],[1,"row"],[4,"ngFor","ngForOf"],[4,"ngIf"],["type","button","class","btn btn-danger btn-sm center-form","style","position: absolute; top: 5px; left: 20px;",3,"click",4,"ngIf"],[1,"col"],[1,"card",2,"max-width","18rem"],[1,"card-body"],[1,"card-title","text-wrap",2,"word-wrap","break-word"],[1,"card-text","text-wrap",2,"word-wrap","break-word"],[1,"flex-container"],[1,"btn","btn-primary","flex-item",3,"routerLink"],["type","button","class","btn btn-danger btn-sm flex-item",3,"click",4,"ngIf"],["type","button",1,"btn","btn-danger","btn-sm","center-form",2,"position","absolute","top","5px","left","20px",3,"click"],["type","button",1,"btn","btn-danger","btn-sm","flex-item",3,"click"],["routerLink","../course-library",1,"btn","btn-primary",2,"margin-left","10px"]],template:function(e,t){if(1&e&&(d.Ub(0,"div",0),d.Ub(1,"h2"),d.Hc(2,"Dashboard"),d.Tb(),d.Fc(3,y,4,3,"ng-container",1),d.jc(4,"async"),d.Fc(5,C,6,0,"ng-template",2,3,d.Gc),d.Tb()),2&e){var i=d.wc(6);d.Cb(3),d.oc("ngIf",d.kc(4,2,t.listCourses))("ngIfElse",i)}},directives:[n.n,n.m,s.f,s.d],pipes:[n.b],styles:[".flex-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.flex-item[_ngcontent-%COMP%]{align-self:center;margin:10px}.card[_ngcontent-%COMP%]{transition:.7s;box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19)}.card[_ngcontent-%COMP%]:hover{transition:.7s;box-shadow:0 4px 8px 0 rgba(0,0,0,.8),0 6px 20px 0 rgba(0,0,0,.8)}"]}),U),F=i("+z1p"),I=i("rptU"),P=function(e){return["/courses",e]},S=((x=function(){function e(t){_classCallCheck(this,e),this.route=t}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.courseId=t.id}));var t,i=document.getElementsByClassName("dropdown-btn");for(t=0;t<i.length;t++)i[t].addEventListener("click",(function(){this.classList.toggle("active");var e=this.nextElementSibling;e.style.display="block"===e.style.display?"none":"block"}))}}]),e}()).\u0275fac=function(e){return new(e||x)(d.Pb(s.a))},x.\u0275cmp=d.Jb({type:x,selectors:[["app-sidebar"]],decls:11,vars:5,consts:[["id","mySidenav",1,"sidenav"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],["routerLink","/courses","routerLinkActive","active",1,"nav-link"],["routerLink","/admin","routerLinkActive","active",1,"nav-link"]],template:function(e,t){1&e&&(d.Ub(0,"div",0),d.Ub(1,"a",1),d.Hc(2,"Home"),d.Tb(),d.Ub(3,"a",2),d.Hc(4,"Courses"),d.Tb(),d.Ub(5,"a",3),d.Hc(6,"Admin"),d.Tb(),d.Ub(7,"a",1),d.Hc(8,"Leaderboard"),d.Tb(),d.Ub(9,"a",1),d.Hc(10,"Modules"),d.Tb(),d.Tb()),2&e&&(d.Cb(1),d.oc("routerLink",d.sc(3,P,t.courseId)),d.Cb(6),d.qc("routerLink","/courses/",t.courseId,"/leaderboard"),d.Cb(2),d.qc("routerLink","/courses/",t.courseId,"/modules"))},directives:[s.f,s.e],styles:[".sidenav[_ngcontent-%COMP%]{height:100%;width:0;position:absolute;z-index:0;top:55px;left:0;background-color:#425efd;overflow-x:hidden;transition:.5s}.dropdown-btn[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px;text-decoration:none;font-size:25px;color:#000;display:block}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, dropdown-btn[_ngcontent-%COMP%]:hover{background-color:#2d3d97;color:#fff}#main[_ngcontent-%COMP%]{padding:16px}.dropdown-container[_ngcontent-%COMP%]{display:none;background-color:#262626;padding-left:8px}.fa-caret-down[_ngcontent-%COMP%]{float:right;padding-right:8px}@media screen and (max-height:450px){.sidenav[_ngcontent-%COMP%]{padding-top:15px}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px}}"]}),x);function w(e,t){if(1&e){var i=d.Vb();d.Ub(0,"div",1),d.Ub(1,"span",2),d.gc("click",(function(){return d.xc(i),d.ic().openNav()})),d.Qb(2,"i",3),d.Tb(),d.Tb()}}function _(e,t){if(1&e){var i=d.Vb();d.Ub(0,"div",1),d.Ub(1,"span",2),d.gc("click",(function(){return d.xc(i),d.ic().closeNav()})),d.Qb(2,"i",4),d.Tb(),d.Tb()}}var H,D=((H=function(){function e(){_classCallCheck(this,e),this.sidebarIsOpen=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"openNav",value:function(){document.getElementById("mySidenav").style.width="250px",document.getElementById("main").style.marginLeft="250px",document.getElementById("mySidenav").style.display="block",this.sidebarIsOpen=!0}},{key:"closeNav",value:function(){document.getElementById("mySidenav").style.display="none",document.getElementById("mySidenav").style.width="0",document.getElementById("main").style.marginLeft="0",this.sidebarIsOpen=!1}}]),e}()).\u0275fac=function(e){return new(e||H)},H.\u0275cmp=d.Jb({type:H,selectors:[["app-sidebar-button"]],decls:2,vars:2,consts:[["class","flexbox-row",4,"ngIf"],[1,"flexbox-row"],[1,"flexbox-side",2,"cursor","pointer",3,"click"],[1,"fas","fa-angle-double-right","fa-5x"],[1,"fas","fa-angle-double-left","fa-5x"]],template:function(e,t){1&e&&(d.Fc(0,w,3,0,"div",0),d.Fc(1,_,3,0,"div",0)),2&e&&(d.oc("ngIf",0==t.sidebarIsOpen),d.Cb(1),d.oc("ngIf",1==t.sidebarIsOpen))},directives:[n.n],styles:[""]}),H);function M(e,t){if(1&e&&(d.Ub(0,"a",4),d.Hc(1,"Edit"),d.Tb()),2&e){var i=d.ic();d.qc("routerLink","/courses/",i.courseId,"/edit-home")}}function L(e,t){if(1&e&&(d.Sb(0),d.Qb(1,"div",5),d.Rb()),2&e){var i=t.ngIf;d.Cb(1),d.oc("innerHTML",i.content,d.yc)}}var V,O,Q,A,q,$=((V=function(){function e(t,i,n){var o=this;_classCallCheck(this,e),this.courseDetailsService=t,this.route=i,this.authenticationService=n,this.Editor=F,this.isCleared=!1,this.authenticationService.currentUser.subscribe((function(e){return o.currentUser=e}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.tokenPayload=l()(this.currentUser.token),this.isAdmin="admin"===this.tokenPayload.role,this.isInstructor="instructor"===this.tokenPayload.role,this.isStudent="student"===this.tokenPayload.role,this.route.params.subscribe((function(t){e.courseId=t.id})),this.courseContent=this.courseDetailsService.getCourseDetails(this.courseId),this.courseDetailsService.getCourseDetails(this.courseId).subscribe((function(t){e.courseDetails=t}))}},{key:"onReady",value:function(e){e.setData("")}},{key:"onChange",value:function(e){var t=e.editor;this.editorData=t.getData(),this.isCleared&&(t.setData(""),this.isCleared=!1),console.log(this.editorData)}},{key:"onSubmit",value:function(e){this.courseDetailsService.updateCourseDetails(e,this.editorData).subscribe((function(){alert("Submitted Content")}))}},{key:"onClearButtonClicked",value:function(e){var t=this;confirm("Clear content; Are you sure?")&&this.courseDetailsService.clearCourseDetails(e).subscribe((function(){alert("Cleared Content"),t.isCleared=!0}))}}]),e}()).\u0275fac=function(e){return new(e||V)(d.Pb(I.a),d.Pb(s.a),d.Pb(v.a))},V.\u0275cmp=d.Jb({type:V,selectors:[["app-home"]],decls:7,vars:4,consts:[["id","main"],[1,"flexbox-row"],["class","btn btn-primary",3,"routerLink",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-primary",3,"routerLink"],[1,"custom-font",2,"margin-top","30px",3,"innerHTML"]],template:function(e,t){1&e&&(d.Qb(0,"app-sidebar"),d.Ub(1,"div",0),d.Qb(2,"app-sidebar-button"),d.Ub(3,"div",1),d.Fc(4,M,2,1,"a",2),d.Fc(5,L,2,1,"ng-container",3),d.jc(6,"async"),d.Tb(),d.Tb()),2&e&&(d.Cb(4),d.oc("ngIf",t.isAdmin||t.isInstructor),d.Cb(1),d.oc("ngIf",d.kc(6,2,t.courseContent)))},directives:[S,D,n.n,s.f],pipes:[n.b],styles:[".flexbox-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;align-items:center;position:relative;margin-top:30px}"]}),V),z=i("AytR"),E=i("tk/3"),R=((q=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"addModule",value:function(e,t,i,n){return this.http.post("".concat(z.a.apiURL,"/modules/").concat(e),{number:t,title:i,lockedUntil:n})}},{key:"getModuleById",value:function(e){return this.http.get("".concat(z.a.apiURL,"/modules/m/").concat(e))}},{key:"getModulesByCourseId",value:function(e){return this.http.get("".concat(z.a.apiURL,"/modules/c/").concat(e))}},{key:"updateModule",value:function(e,t,i,n){return this.http.put("".concat(z.a.apiURL,"/modules/").concat(e),{number:t,title:i,lockedUntil:n})}},{key:"deleteModule",value:function(e){return this.http.delete("".concat(z.a.apiURL,"/modules/").concat(e))}}]),e}()).\u0275fac=function(e){return new(e||q)(d.cc(E.b))},q.\u0275prov=d.Lb({token:q,factory:q.\u0275fac,providedIn:"root"}),q),N=((A=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"addVideo",value:function(e,t){return this.http.post("".concat(z.a.apiURL,"/videos"),{link:e,module_id:t})}},{key:"fetchVideos",value:function(e){return this.http.get("".concat(z.a.apiURL,"/videos/").concat(e))}},{key:"updateVideo",value:function(e,t){return this.http.put("".concat(z.a.apiURL,"/videos/").concat(t),{link:e})}},{key:"deleteVideo",value:function(e){return this.http.delete("".concat(z.a.apiURL,"/videos/").concat(e))}}]),e}()).\u0275fac=function(e){return new(e||A)(d.cc(E.b))},A.\u0275prov=d.Lb({token:A,factory:A.\u0275fac,providedIn:"root"}),A),B=((Q=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"addPDF",value:function(e){return this.http.post("".concat(z.a.apiURL,"/pdfs"),e)}},{key:"fetchPDFs",value:function(e){return this.http.get("".concat(z.a.apiURL,"/pdfs/").concat(e))}},{key:"updatePDF",value:function(e,t){return this.http.put("".concat(z.a.apiURL,"/pdfs/").concat(e),t)}},{key:"deletePDF",value:function(e){return this.http.delete("".concat(z.a.apiURL,"/pdfs/").concat(e))}}]),e}()).\u0275fac=function(e){return new(e||Q)(d.cc(E.b))},Q.\u0275prov=d.Lb({token:Q,factory:Q.\u0275fac,providedIn:"root"}),Q),G=((O=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"addSurvey",value:function(e,t,i){return this.http.post("".concat(z.a.apiURL,"/surveys"),{name:e,link:t,module_id:i})}},{key:"fetchSurveys",value:function(e){return this.http.get("".concat(z.a.apiURL,"/surveys/").concat(e))}},{key:"updateSurvey",value:function(e,t,i){return this.http.put("".concat(z.a.apiURL,"/surveys/").concat(i),{name:e,link:t})}},{key:"deleteSurvey",value:function(e){return this.http.delete("".concat(z.a.apiURL,"/surveys/").concat(e))}}]),e}()).\u0275fac=function(e){return new(e||O)(d.cc(E.b))},O.\u0275prov=d.Lb({token:O,factory:O.\u0275fac,providedIn:"root"}),O),J=i("jhN1");function j(e,t){if(1&e&&(d.Ub(0,"div",10),d.Hc(1),d.Tb()),2&e){var i=d.ic();d.Cb(1),d.Jc("",i.averagePoints.average,"%")}}function Y(e,t){if(1&e){var i=d.Vb();d.Ub(0,"div"),d.Ub(1,"button",11),d.gc("click",(function(){d.xc(i);var e=d.ic();return e.createModule(e.courseId)})),d.Qb(2,"i",12),d.Hc(3," Create Module"),d.Tb(),d.Tb()}}function K(e,t){if(1&e&&(d.Ub(0,"span",27),d.Hc(1),d.Tb()),2&e){var i=d.ic(2).$implicit;d.Cb(1),d.Jc("locked until: ",i.lockedUntil,"")}}function X(e,t){if(1&e&&(d.Ub(0,"span",29),d.Hc(1),d.Tb()),2&e){var i=d.ic(3).$implicit;d.Cb(1),d.Jc("locked until: ",i.lockedUntil,"")}}function W(e,t){if(1&e&&d.Fc(0,X,2,1,"span",28),2&e){var i=d.ic(3);d.oc("ngIf",i.isAdmin||i.isInstructor)}}function Z(e,t){1&e&&(d.Ub(0,"div"),d.Hc(1,"Link is required"),d.Tb())}function ee(e,t){if(1&e&&(d.Ub(0,"div",48),d.Fc(1,Z,2,0,"div",8),d.Tb()),2&e){var i=d.ic(4);d.Cb(1),d.oc("ngIf",i.v.link.errors.required)}}function te(e,t){1&e&&(d.Ub(0,"div",49),d.Hc(1," Valid youtube link "),d.Tb())}function ie(e,t){1&e&&(d.Ub(0,"div",50),d.Hc(1," Invalid Youtube Link "),d.Tb())}function ne(e,t){if(1&e){var i=d.Vb();d.Ub(0,"button",51),d.gc("click",(function(){d.xc(i),d.ic();var e=d.wc(23),t=d.ic(2).$implicit;return d.ic().addVideo(e.value,t.module_id)})),d.Qb(1,"i",12),d.Hc(2," Add Video"),d.Tb()}}function oe(e,t){if(1&e&&(d.Ub(0,"div",52),d.Hc(1),d.Tb()),2&e){var i=d.ic(4);d.Cb(1),d.Ic(i.error)}}var ce=function(e,t){return{"is-invalid":e,"is-valid":t}};function re(e,t){if(1&e){var i=d.Vb();d.Ub(0,"div",30),d.Ub(1,"h4",31),d.Hc(2,"Add Youtube Video"),d.Tb(),d.Ub(3,"button",32),d.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),d.Ub(4,"span",33),d.Hc(5,"\xd7"),d.Tb(),d.Tb(),d.Tb(),d.Ub(6,"div",34),d.Ub(7,"form",35),d.Ub(8,"div",36),d.Ub(9,"p"),d.Hc(10,"Valid youtube links are of the formats:"),d.Qb(11,"br"),d.Hc(12," https://youtu.be/*********** "),d.Qb(13,"br"),d.Hc(14,"And "),d.Qb(15,"br"),d.Hc(16,"https://www.youtube.com/watch?v=***********"),d.Tb(),d.Tb(),d.Ub(17,"div",37),d.Ub(18,"label",38),d.Ub(19,"span",29),d.Hc(20,"*"),d.Tb(),d.Hc(21,"Link"),d.Tb(),d.Ub(22,"input",39,40),d.gc("keyup",(function(e){return d.xc(i),d.ic(3).handleValidLink(e)})),d.Tb(),d.Fc(24,ee,2,1,"div",41),d.Fc(25,te,2,0,"div",42),d.Tb(),d.Fc(26,ie,2,0,"div",43),d.Fc(27,ne,3,0,"button",44),d.Fc(28,oe,2,1,"div",45),d.Tb(),d.Tb(),d.Ub(29,"div",46),d.Ub(30,"button",47),d.gc("click",(function(){return t.$implicit.close("Close click")})),d.Hc(31,"Close"),d.Tb(),d.Tb()}if(2&e){var n=d.ic(3);d.Cb(7),d.oc("formGroup",n.videoForm),d.Cb(15),d.oc("ngClass",d.tc(7,ce,n.submitted&&n.v.link.errors,n.validLink)),d.Cb(2),d.oc("ngIf",n.submitted&&n.v.link.errors),d.Cb(1),d.oc("ngIf",n.validLink),d.Cb(1),d.oc("ngIf",n.invalidLink&&!n.validLink),d.Cb(1),d.oc("ngIf",n.isAdmin||n.isInstructor),d.Cb(1),d.oc("ngIf",n.error)}}function se(e,t){if(1&e){var i=d.Vb();d.Ub(0,"button",11),d.gc("click",(function(){d.xc(i),d.ic();var e=d.wc(6);return d.ic(2).open(e)})),d.Hc(1,"Add Video"),d.Tb()}}function ue(e,t){1&e&&(d.Ub(0,"div"),d.Hc(1,"Pdf is required"),d.Tb())}function ae(e,t){if(1&e&&(d.Ub(0,"div",48),d.Fc(1,ue,2,0,"div",8),d.Tb()),2&e){var i=d.ic(4);d.Cb(1),d.oc("ngIf",i.p.pdf.errors.required)}}var le=function(e){return{"is-invalid":e}};function de(e,t){if(1&e){var i=d.Vb();d.Ub(0,"div",30),d.Ub(1,"h4",31),d.Hc(2,"Add PDF File"),d.Tb(),d.Ub(3,"button",32),d.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),d.Ub(4,"span",33),d.Hc(5,"\xd7"),d.Tb(),d.Tb(),d.Tb(),d.Ub(6,"div",34),d.Ub(7,"form",53),d.gc("ngSubmit",(function(){d.xc(i);var e=d.ic(2).$implicit;return d.ic().addPdf(e.module_id)})),d.Ub(8,"div",37),d.Ub(9,"label",54),d.Ub(10,"span",29),d.Hc(11,"*"),d.Tb(),d.Hc(12,"Select a PDF File"),d.Tb(),d.Ub(13,"input",55,56),d.gc("change",(function(e){return d.xc(i),d.ic(3).handleFileInput(e)})),d.Tb(),d.Fc(15,ae,2,1,"div",41),d.Tb(),d.Ub(16,"button",57),d.Qb(17,"i",12),d.Hc(18," Add PDF"),d.Tb(),d.Tb(),d.Tb(),d.Ub(19,"div",46),d.Ub(20,"button",47),d.gc("click",(function(){return t.$implicit.close("Close click")})),d.Hc(21,"Close"),d.Tb(),d.Tb()}if(2&e){var n=d.ic(3);d.Cb(7),d.oc("formGroup",n.pdfForm),d.Cb(6),d.oc("ngClass",d.sc(3,le,n.submitted&&n.p.pdf.errors)),d.Cb(2),d.oc("ngIf",n.submitted&&n.p.pdf.errors)}}function be(e,t){if(1&e){var i=d.Vb();d.Ub(0,"button",11),d.gc("click",(function(){d.xc(i),d.ic();var e=d.wc(9);return d.ic(2).open(e)})),d.Hc(1,"Add PDF"),d.Tb()}}function fe(e,t){1&e&&(d.Ub(0,"div"),d.Hc(1,"Name is required"),d.Tb())}function ve(e,t){if(1&e&&(d.Ub(0,"div",48),d.Fc(1,fe,2,0,"div",8),d.Tb()),2&e){var i=d.ic(4);d.Cb(1),d.oc("ngIf",i.s.name.errors.required)}}function pe(e,t){1&e&&(d.Ub(0,"div"),d.Hc(1,"Link is required"),d.Tb())}function me(e,t){if(1&e&&(d.Ub(0,"div",48),d.Fc(1,pe,2,0,"div",8),d.Tb()),2&e){var i=d.ic(4);d.Cb(1),d.oc("ngIf",i.s.link.errors.required)}}function ge(e,t){1&e&&(d.Ub(0,"div",49),d.Hc(1," Valid Qualtrics link "),d.Tb())}function he(e,t){1&e&&(d.Ub(0,"div",50),d.Hc(1," Invalid Qualtrics Link "),d.Tb())}function ke(e,t){if(1&e){var i=d.Vb();d.Ub(0,"button",51),d.gc("click",(function(){d.xc(i),d.ic();var e=d.wc(19),t=d.wc(27),n=d.ic(2).$implicit;return d.ic().addSurvey(e.value,t.value,n.module_id)})),d.Qb(1,"i",12),d.Hc(2," Add Quiz/Exam"),d.Tb()}}function ye(e,t){if(1&e){var i=d.Vb();d.Ub(0,"div",30),d.Ub(1,"h4",31),d.Hc(2,"Add Qualtrics Quiz/Exam"),d.Tb(),d.Ub(3,"button",32),d.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),d.Ub(4,"span",33),d.Hc(5,"\xd7"),d.Tb(),d.Tb(),d.Tb(),d.Ub(6,"div",34),d.Ub(7,"form",35),d.Ub(8,"div",36),d.Ub(9,"p"),d.Hc(10,"Valid Qualtrics links are of the formats:"),d.Qb(11,"br"),d.Hc(12," https://fiu.qualtrics.com/jfe/form/******************"),d.Tb(),d.Tb(),d.Ub(13,"div",37),d.Ub(14,"label",58),d.Ub(15,"span",29),d.Hc(16,"*"),d.Tb(),d.Hc(17,"Name"),d.Tb(),d.Qb(18,"input",59,60),d.Fc(20,ve,2,1,"div",41),d.Tb(),d.Ub(21,"div",37),d.Ub(22,"label",38),d.Ub(23,"span",29),d.Hc(24,"*"),d.Tb(),d.Hc(25,"Link"),d.Tb(),d.Ub(26,"input",61,40),d.gc("keyup",(function(e){return d.xc(i),d.ic(3).handleValidQuiz(e)})),d.Tb(),d.Fc(28,me,2,1,"div",41),d.Fc(29,ge,2,0,"div",42),d.Tb(),d.Fc(30,he,2,0,"div",43),d.Fc(31,ke,3,0,"button",44),d.Tb(),d.Tb(),d.Ub(32,"div",46),d.Ub(33,"button",47),d.gc("click",(function(){return t.$implicit.close("Close click")})),d.Hc(34,"Close"),d.Tb(),d.Tb()}if(2&e){var n=d.ic(3);d.Cb(7),d.oc("formGroup",n.surveyForm),d.Cb(11),d.oc("ngClass",d.sc(8,le,n.submitted&&n.s.name.errors)),d.Cb(2),d.oc("ngIf",n.submitted&&n.s.name.errors),d.Cb(6),d.oc("ngClass",d.tc(10,ce,n.submitted&&n.s.link.errors,n.validQuiz)),d.Cb(2),d.oc("ngIf",n.submitted&&n.s.link.errors),d.Cb(1),d.oc("ngIf",n.validQuiz),d.Cb(1),d.oc("ngIf",n.invalidQuiz&&!n.validQuiz),d.Cb(1),d.oc("ngIf",n.isAdmin||n.isInstructor)}}function Ce(e,t){if(1&e){var i=d.Vb();d.Ub(0,"button",11),d.gc("click",(function(){d.xc(i),d.ic();var e=d.wc(12);return d.ic(2).open(e)})),d.Hc(1,"Add Quiz/Exam"),d.Tb()}}function Ue(e,t){if(1&e){var i=d.Vb();d.Ub(0,"div",62),d.gc("click",(function(){d.xc(i);var e=d.ic(2).index;return d.ic().openModule(e)})),d.Qb(1,"i",63),d.Ub(2,"strong"),d.Hc(3),d.Tb(),d.Hc(4),d.Tb()}if(2&e){var n=d.ic(2).$implicit;d.Cb(3),d.Jc("Module ",n.module_number," "),d.Cb(1),d.Jc("| ",n.module_title," ")}}function xe(e,t){if(1&e){var i=d.Vb();d.Ub(0,"div",62),d.gc("click",(function(){d.xc(i);var e=d.ic(2).index;return d.ic().openModule(e)})),d.Qb(1,"i",64),d.Ub(2,"strong"),d.Hc(3),d.Tb(),d.Hc(4),d.Tb()}if(2&e){var n=d.ic(2).$implicit;d.Cb(3),d.Jc("Module ",n.module_number," "),d.Cb(1),d.Jc("| ",n.module_title," ")}}function Te(e,t){if(1&e&&(d.Ub(0,"div",30),d.Ub(1,"h4",31),d.Hc(2),d.Tb(),d.Ub(3,"button",32),d.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),d.Ub(4,"span",33),d.Hc(5,"\xd7"),d.Tb(),d.Tb(),d.Tb(),d.Ub(6,"div",34),d.Ub(7,"div",77),d.Qb(8,"iframe",78),d.Tb(),d.Tb(),d.Ub(9,"div",46),d.Ub(10,"button",47),d.gc("click",(function(){return t.$implicit.close("Close click")})),d.Hc(11,"Close"),d.Tb(),d.Tb()),2&e){var i=d.ic(),n=i.index,o=i.$implicit,c=d.ic(5).$implicit;d.Cb(2),d.Kc("",c.module_title," - Pdf ",n+1,""),d.Cb(6),d.oc("src",o.pdf,d.zc)}}function Fe(e,t){if(1&e){var i=d.Vb();d.Ub(0,"button",79),d.gc("click",(function(){d.xc(i);var e=d.ic(),t=e.$implicit,n=e.index;return d.ic(6).deletePDF(t.pdf_id,n)})),d.Hc(1,"Delete Pdf"),d.Tb()}}function Ie(e,t){1&e&&(d.Ub(0,"div"),d.Hc(1,"Pdf is required"),d.Tb())}function Pe(e,t){if(1&e&&(d.Ub(0,"div",48),d.Fc(1,Ie,2,0,"div",8),d.Tb()),2&e){var i=d.ic(8);d.Cb(1),d.oc("ngIf",i.pu.pdf.errors.required)}}function Se(e,t){if(1&e){var i=d.Vb();d.Ub(0,"div",30),d.Ub(1,"h4",31),d.Hc(2,"Edit PDF"),d.Tb(),d.Ub(3,"button",32),d.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),d.Ub(4,"span",33),d.Hc(5,"\xd7"),d.Tb(),d.Tb(),d.Tb(),d.Ub(6,"div",34),d.Ub(7,"form",53),d.gc("ngSubmit",(function(){d.xc(i);var e=d.ic().$implicit,t=d.ic(5).$implicit;return d.ic().updatePDF(e.pdf_id,t.module_id)})),d.Ub(8,"div",37),d.Ub(9,"label",54),d.Ub(10,"span",29),d.Hc(11,"*"),d.Tb(),d.Hc(12,"Select a PDF File"),d.Tb(),d.Ub(13,"input",55,56),d.gc("change",(function(e){return d.xc(i),d.ic(7).handleFileInputUpdate(e)})),d.Tb(),d.Fc(15,Pe,2,1,"div",41),d.Tb(),d.Ub(16,"button",57),d.Qb(17,"i",12),d.Hc(18," Update PDF"),d.Tb(),d.Tb(),d.Tb(),d.Ub(19,"div",46),d.Ub(20,"button",47),d.gc("click",(function(){return t.$implicit.close("Close click")})),d.Hc(21,"Close"),d.Tb(),d.Tb()}if(2&e){var n=d.ic(7);d.Cb(7),d.oc("formGroup",n.updatePdfForm),d.Cb(6),d.oc("ngClass",d.sc(3,le,n.submitted&&n.pu.pdf.errors)),d.Cb(2),d.oc("ngIf",n.submitted&&n.pu.pdf.errors)}}function we(e,t){if(1&e){var i=d.Vb();d.Ub(0,"button",80),d.gc("click",(function(){d.xc(i);var e=d.ic().$implicit,t=d.wc(8);return d.ic(6).openUpdatePDF(t,e.rawPdf)})),d.Hc(1,"Edit PDF"),d.Tb()}}function _e(e,t){if(1&e){var i=d.Vb();d.Ub(0,"div",70),d.Qb(1,"i",71),d.Fc(2,Te,12,3,"ng-template",null,72,d.Gc),d.Ub(4,"button",73),d.gc("click",(function(){d.xc(i);var e=d.wc(3);return d.ic(6).open(e)})),d.Hc(5),d.Tb(),d.Fc(6,Fe,2,0,"button",74),d.Fc(7,Se,22,5,"ng-template",null,75,d.Gc),d.Fc(9,we,2,0,"button",76),d.Tb()}if(2&e){var n=t.index,o=d.ic(6);d.Cb(5),d.Jc("View Pdf ",n+1,""),d.Cb(1),d.oc("ngIf",o.isAdmin||o.isInstructor),d.Cb(3),d.oc("ngIf",o.isAdmin||o.isInstructor)}}function He(e,t){if(1&e&&(d.Ub(0,"div"),d.Fc(1,_e,10,3,"div",69),d.Tb()),2&e){var i=d.ic().$implicit;d.Cb(1),d.oc("ngForOf",i.value)}}function De(e,t){if(1&e&&(d.Ub(0,"div",68),d.Fc(1,He,2,1,"div",8),d.Tb()),2&e){var i=t.$implicit,n=d.ic(3).$implicit;d.Cb(1),d.oc("ngIf",i.key==n.module_id)}}function Me(e,t){if(1&e&&(d.Ub(0,"div",30),d.Ub(1,"h4",31),d.Hc(2),d.Tb(),d.Ub(3,"button",32),d.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),d.Ub(4,"span",33),d.Hc(5,"\xd7"),d.Tb(),d.Tb(),d.Tb(),d.Ub(6,"div",34),d.Ub(7,"div",77),d.Qb(8,"iframe",87),d.Tb(),d.Tb(),d.Ub(9,"div",46),d.Ub(10,"button",47),d.gc("click",(function(){return t.$implicit.close("Close click")})),d.Hc(11,"Close"),d.Tb(),d.Tb()),2&e){var i=d.ic(),n=i.index,o=i.$implicit,c=d.ic(5).$implicit;d.Cb(2),d.Kc("",c.module_title," - Video ",n+1,""),d.Cb(6),d.oc("src",o.videoUrl,d.zc)}}function Le(e,t){if(1&e){var i=d.Vb();d.Ub(0,"button",79),d.gc("click",(function(){d.xc(i);var e=d.ic(),t=e.$implicit,n=e.index;return d.ic(6).deleteVideo(t.video_id,n)})),d.Hc(1,"Delete Video"),d.Tb()}}function Ve(e,t){1&e&&(d.Ub(0,"div"),d.Hc(1,"Link is required"),d.Tb())}function Oe(e,t){if(1&e&&(d.Ub(0,"div",48),d.Fc(1,Ve,2,0,"div",8),d.Tb()),2&e){var i=d.ic(8);d.Cb(1),d.oc("ngIf",i.vu.linkInput.errors.required)}}function Qe(e,t){1&e&&(d.Ub(0,"div",49),d.Hc(1," Valid youtube link "),d.Tb())}function Ae(e,t){1&e&&(d.Ub(0,"div",50),d.Hc(1," Invalid Youtube Link "),d.Tb())}function qe(e,t){if(1&e){var i=d.Vb();d.Ub(0,"div",30),d.Ub(1,"h4",31),d.Hc(2,"Edit Youtube Video"),d.Tb(),d.Ub(3,"button",32),d.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),d.Ub(4,"span",33),d.Hc(5,"\xd7"),d.Tb(),d.Tb(),d.Tb(),d.Ub(6,"div",34),d.Ub(7,"form",35),d.Ub(8,"div",36),d.Ub(9,"p"),d.Hc(10,"Valid youtube links are of the formats:"),d.Qb(11,"br"),d.Hc(12," https://youtu.be/*********** "),d.Qb(13,"br"),d.Hc(14,"And "),d.Qb(15,"br"),d.Hc(16,"https://www.youtube.com/watch?v=***********"),d.Tb(),d.Tb(),d.Ub(17,"div",37),d.Ub(18,"label",88),d.Ub(19,"span",29),d.Hc(20,"*"),d.Tb(),d.Hc(21,"New Link"),d.Tb(),d.Ub(22,"input",89,90),d.gc("keyup",(function(e){return d.xc(i),d.ic(7).handleValidLink(e)})),d.Tb(),d.Fc(24,Oe,2,1,"div",41),d.Fc(25,Qe,2,0,"div",42),d.Tb(),d.Fc(26,Ae,2,0,"div",43),d.Ub(27,"button",51),d.gc("click",(function(){d.xc(i);var e=d.wc(23),t=d.ic().$implicit;return d.ic(6).updateVideo(e.value,t.video_id)})),d.Qb(28,"i",12),d.Hc(29," Update Video"),d.Tb(),d.Tb(),d.Tb(),d.Ub(30,"div",46),d.Ub(31,"button",47),d.gc("click",(function(){return t.$implicit.close("Close click")})),d.Hc(32,"Close"),d.Tb(),d.Tb()}if(2&e){var n=d.ic(7);d.Cb(7),d.oc("formGroup",n.updateVideoForm),d.Cb(15),d.oc("ngClass",d.tc(5,ce,n.submitted&&n.vu.linkInput.errors,n.validLink)),d.Cb(2),d.oc("ngIf",n.submitted&&n.vu.linkInput.errors),d.Cb(1),d.oc("ngIf",n.validLink),d.Cb(1),d.oc("ngIf",n.invalidLink&&!n.validLink)}}function $e(e,t){if(1&e){var i=d.Vb();d.Ub(0,"button",80),d.gc("click",(function(){d.xc(i);var e=d.ic().$implicit,t=d.wc(8);return d.ic(6).openUpdateVideo(t,e.url)})),d.Hc(1,"Edit Video"),d.Tb()}}function ze(e,t){if(1&e){var i=d.Vb();d.Ub(0,"div",83),d.Qb(1,"i",84),d.Fc(2,Me,12,3,"ng-template",null,85,d.Gc),d.Ub(4,"button",73),d.gc("click",(function(){d.xc(i);var e=d.wc(3);return d.ic(6).open(e)})),d.Hc(5),d.Tb(),d.Fc(6,Le,2,0,"button",74),d.Fc(7,qe,33,8,"ng-template",null,86,d.Gc),d.Fc(9,$e,2,0,"button",76),d.Tb()}if(2&e){var n=t.index,o=d.ic(6);d.Cb(5),d.Jc("Watch Video ",n+1,""),d.Cb(1),d.oc("ngIf",o.isAdmin||o.isInstructor),d.Cb(3),d.oc("ngIf",o.isAdmin||o.isInstructor)}}function Ee(e,t){if(1&e&&(d.Ub(0,"div"),d.Fc(1,ze,10,3,"div",82),d.Tb()),2&e){var i=d.ic().$implicit;d.Cb(1),d.oc("ngForOf",i.value)}}function Re(e,t){if(1&e&&(d.Ub(0,"div",81),d.Fc(1,Ee,2,1,"div",8),d.Tb()),2&e){var i=t.$implicit,n=d.ic(3).$implicit;d.Cb(1),d.oc("ngIf",i.key==n.module_id)}}function Ne(e,t){if(1&e&&(d.Ub(0,"div",30),d.Ub(1,"h4",31),d.Hc(2),d.Tb(),d.Ub(3,"button",32),d.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),d.Ub(4,"span",33),d.Hc(5,"\xd7"),d.Tb(),d.Tb(),d.Tb(),d.Ub(6,"div",34),d.Ub(7,"div",77),d.Qb(8,"iframe",87),d.Tb(),d.Tb(),d.Ub(9,"div",46),d.Ub(10,"button",47),d.gc("click",(function(){return t.$implicit.close("Close click")})),d.Hc(11,"Close"),d.Tb(),d.Tb()),2&e){var i=d.ic().$implicit,n=d.ic(5).$implicit;d.Cb(2),d.Kc("",n.module_title," - ",i.name,""),d.Cb(6),d.oc("src",i.surveyUrl,d.zc)}}function Be(e,t){if(1&e){var i=d.Vb();d.Ub(0,"button",79),d.gc("click",(function(){d.xc(i);var e=d.ic(),t=e.$implicit,n=e.index;return d.ic(6).deleteSurvey(t.survey_id,n)})),d.Hc(1,"Delete Quiz/Exam"),d.Tb()}}function Ge(e,t){1&e&&(d.Ub(0,"div"),d.Hc(1,"Name is required"),d.Tb())}function Je(e,t){if(1&e&&(d.Ub(0,"div",48),d.Fc(1,Ge,2,0,"div",8),d.Tb()),2&e){var i=d.ic(8);d.Cb(1),d.oc("ngIf",i.su.name.errors.required)}}function je(e,t){1&e&&(d.Ub(0,"div"),d.Hc(1,"Link is required"),d.Tb())}function Ye(e,t){if(1&e&&(d.Ub(0,"div",48),d.Fc(1,je,2,0,"div",8),d.Tb()),2&e){var i=d.ic(8);d.Cb(1),d.oc("ngIf",i.su.link.errors.required)}}function Ke(e,t){1&e&&(d.Ub(0,"div",49),d.Hc(1," Valid Qualtrics link "),d.Tb())}function Xe(e,t){1&e&&(d.Ub(0,"div",50),d.Hc(1," Invalid Qualtrics Link "),d.Tb())}function We(e,t){if(1&e){var i=d.Vb();d.Ub(0,"div",30),d.Ub(1,"h4",31),d.Hc(2,"Edit Quiz/Exam"),d.Tb(),d.Ub(3,"button",32),d.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),d.Ub(4,"span",33),d.Hc(5,"\xd7"),d.Tb(),d.Tb(),d.Tb(),d.Ub(6,"div",34),d.Ub(7,"form",35),d.Ub(8,"div",36),d.Ub(9,"p"),d.Hc(10,"Valid Qualtrics links are of the formats:"),d.Qb(11,"br"),d.Hc(12," https://fiu.qualtrics.com/jfe/form/******************"),d.Tb(),d.Tb(),d.Ub(13,"div",37),d.Ub(14,"label",58),d.Ub(15,"span",29),d.Hc(16,"*"),d.Tb(),d.Hc(17,"New Name"),d.Tb(),d.Qb(18,"input",94,60),d.Fc(20,Je,2,1,"div",41),d.Tb(),d.Ub(21,"div",37),d.Ub(22,"label",38),d.Ub(23,"span",29),d.Hc(24,"*"),d.Tb(),d.Hc(25,"New Link"),d.Tb(),d.Ub(26,"input",95,40),d.gc("keyup",(function(e){return d.xc(i),d.ic(7).handleValidQuiz(e)})),d.Tb(),d.Fc(28,Ye,2,1,"div",41),d.Fc(29,Ke,2,0,"div",42),d.Tb(),d.Fc(30,Xe,2,0,"div",43),d.Ub(31,"button",51),d.gc("click",(function(){d.xc(i);var e=d.wc(19),t=d.wc(27),n=d.ic().$implicit;return d.ic(6).updateSurvey(e.value,t.value,n.survey_id)})),d.Qb(32,"i",12),d.Hc(33," Update Quiz/Exam"),d.Tb(),d.Tb(),d.Tb(),d.Ub(34,"div",46),d.Ub(35,"button",47),d.gc("click",(function(){return t.$implicit.close("Close click")})),d.Hc(36,"Close"),d.Tb(),d.Tb()}if(2&e){var n=d.ic(7);d.Cb(7),d.oc("formGroup",n.updateSurveyForm),d.Cb(11),d.oc("ngClass",d.sc(7,le,n.submitted&&n.su.name.errors)),d.Cb(2),d.oc("ngIf",n.submitted&&n.su.name.errors),d.Cb(6),d.oc("ngClass",d.tc(9,ce,n.submitted&&n.su.link.errors,n.validQuiz)),d.Cb(2),d.oc("ngIf",n.submitted&&n.su.link.errors),d.Cb(1),d.oc("ngIf",n.validQuiz),d.Cb(1),d.oc("ngIf",n.invalidQuiz&&!n.validQuiz)}}function Ze(e,t){if(1&e){var i=d.Vb();d.Ub(0,"button",80),d.gc("click",(function(){d.xc(i);var e=d.ic().$implicit,t=d.wc(8);return d.ic(6).openUpdateSurvey(t,e.name,e.url)})),d.Hc(1,"Edit Quiz/Exam"),d.Tb()}}function et(e,t){if(1&e){var i=d.Vb();d.Ub(0,"div",83),d.Qb(1,"i",91),d.Fc(2,Ne,12,3,"ng-template",null,92,d.Gc),d.Ub(4,"button",73),d.gc("click",(function(){d.xc(i);var e=d.wc(3);return d.ic(6).open(e)})),d.Hc(5),d.Tb(),d.Fc(6,Be,2,0,"button",74),d.Fc(7,We,37,12,"ng-template",null,93,d.Gc),d.Fc(9,Ze,2,0,"button",76),d.Tb()}if(2&e){var n=t.index,o=d.ic(6);d.Cb(5),d.Jc("Take Quiz ",n+1,""),d.Cb(1),d.oc("ngIf",o.isAdmin||o.isInstructor),d.Cb(3),d.oc("ngIf",o.isAdmin||o.isInstructor)}}function tt(e,t){if(1&e&&(d.Ub(0,"div"),d.Fc(1,et,10,3,"div",82),d.Tb()),2&e){var i=d.ic().$implicit;d.Cb(1),d.oc("ngForOf",i.value)}}function it(e,t){if(1&e&&(d.Ub(0,"div",81),d.Fc(1,tt,2,1,"div",8),d.Tb()),2&e){var i=t.$implicit,n=d.ic(3).$implicit;d.Cb(1),d.oc("ngIf",i.key==n.module_id)}}function nt(e,t){if(1&e&&(d.Ub(0,"div",65),d.Fc(1,De,2,1,"div",66),d.jc(2,"keyvalue"),d.Fc(3,Re,2,1,"div",67),d.jc(4,"keyvalue"),d.Fc(5,it,2,1,"div",67),d.jc(6,"keyvalue"),d.Tb()),2&e){var i=d.ic(3);d.Cb(1),d.oc("ngForOf",d.kc(2,3,i.safePdfs)),d.Cb(2),d.oc("ngForOf",d.kc(4,5,i.safeLinks)),d.Cb(2),d.oc("ngForOf",d.kc(6,7,i.safeSurveys))}}function ot(e,t){if(1&e){var i=d.Vb();d.Ub(0,"button",99),d.gc("click",(function(){d.xc(i);var e=d.ic(3).$implicit;return d.ic().editModule(e.course_id,e.module_id)})),d.Qb(1,"i",101),d.Hc(2," Edit"),d.Tb()}}function ct(e,t){if(1&e){var i=d.Vb();d.Ub(0,"button",102),d.gc("click",(function(){d.xc(i);var e=d.ic(3).$implicit;return d.ic().deleteModule(e.module_id,e.module_number)})),d.Qb(1,"i",103),d.Hc(2," Delete"),d.Tb()}}function rt(e,t){if(1&e){var i=d.Vb();d.Ub(0,"div",96),d.Fc(1,ot,3,0,"button",97),d.Fc(2,ct,3,0,"button",98),d.Ub(3,"button",99),d.gc("click",(function(){d.xc(i);var e=d.ic(2).$implicit;return d.ic().viewDiscussion(e.course_id,e.module_id)})),d.Qb(4,"i",100),d.Hc(5," View Discussion"),d.Tb(),d.Tb()}if(2&e){var n=d.ic(3);d.Cb(1),d.oc("ngIf",n.isAdmin||n.isInstructor),d.Cb(1),d.oc("ngIf",n.isAdmin||n.isInstructor)}}function st(e,t){if(1&e&&(d.Sb(0),d.Fc(1,K,2,1,"span",16),d.Fc(2,W,1,1,"ng-template",null,17,d.Gc),d.Ub(4,"div",18),d.Fc(5,re,32,10,"ng-template",null,19,d.Gc),d.Fc(7,se,2,0,"button",20),d.Fc(8,de,22,5,"ng-template",null,21,d.Gc),d.Fc(10,be,2,0,"button",20),d.Fc(11,ye,35,13,"ng-template",null,22,d.Gc),d.Fc(13,Ce,2,0,"button",20),d.Tb(),d.Fc(14,Ue,5,2,"div",23),d.Fc(15,xe,5,2,"ng-template",null,24,d.Gc),d.Fc(17,nt,7,9,"div",25),d.Fc(18,rt,6,2,"div",26),d.Rb()),2&e){var i=d.wc(3),n=d.wc(16),o=d.ic().index,c=d.ic();d.Cb(1),d.oc("ngIf",!c.moduleLocked[o]&&(c.isAdmin||c.isInstructor))("ngIfElse",i),d.Cb(6),d.oc("ngIf",c.isAdmin||c.isInstructor),d.Cb(3),d.oc("ngIf",c.isAdmin||c.isInstructor),d.Cb(3),d.oc("ngIf",c.isAdmin||c.isInstructor),d.Cb(1),d.oc("ngIf",!c.toggleContent[o])("ngIfElse",n),d.Cb(3),d.oc("ngIf",c.toggleContent[o]),d.Cb(1),d.oc("ngIf",c.currentUser)}}function ut(e,t){if(1&e){var i=d.Vb();d.Ub(0,"span",29),d.Hc(1),d.Tb(),d.Ub(2,"div",104),d.gc("click",(function(){d.xc(i);var e=d.ic().index;return d.ic().openModule(e)})),d.Qb(3,"i",63),d.Ub(4,"strong"),d.Hc(5),d.Tb(),d.Hc(6),d.Tb()}if(2&e){var n=d.ic().$implicit;d.Cb(1),d.Jc("locked until: ",n.lockedUntil,""),d.Cb(4),d.Jc("Module ",n.module_number," "),d.Cb(1),d.Jc("| ",n.module_title," ")}}function at(e,t){if(1&e&&(d.Ub(0,"div",13),d.Fc(1,st,19,9,"ng-container",14),d.Fc(2,ut,7,3,"ng-template",null,15,d.Gc),d.Tb()),2&e){var i=t.index,n=d.wc(3),o=d.ic();d.Cb(1),d.oc("ngIf",!o.moduleLocked[i]||o.isAdmin||o.isInstructor)("ngIfElse",n)}}var lt,dt=((lt=function(){function e(t,i,n,o,c,r,s,u,a,l,d){var b=this;_classCallCheck(this,e),this.moduleService=t,this.videoService=i,this.pdfService=n,this.surveyService=o,this.authenticationService=c,this.studentCourseService=r,this.fb=s,this.router=u,this.route=a,this.sanitizer=l,this.modalService=d,this.modules=[],this.moduleLocked=[],this.linksFromDB=new Array,this.links=new Array,this.safeLinks=new Map,this.pdfsFromDB=new Array,this.pdfs=new Array,this.safePdfs=new Map,this.surveysFromDB=new Array,this.surveys=new Array,this.safeSurveys=new Map,this.resources=["pdf1","pdf2","worddoc1"],this.quizzes=["quiz1","quiz2","quiz3"],this.toggleContent=[],this.moduleVideosFetched=[],this.modulePDFsFetched=[],this.moduleSurveysFetched=[],this.submitted=!1,this.error="",this.invalidLink=!1,this.validLink=!1,this.invalidQuiz=!1,this.validQuiz=!1,this.fileToUpload=null,this.contentObject={course_id:0,course_name:"",module_id:0,module_number:0,module_title:"",lockedUntil:"",link:""},this.authenticationService.currentUser.subscribe((function(e){return b.currentUser=e})),this.makeForms()}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.courseId=t.id,console.log("param id is: "+t.id)})),this.currentUser&&(this.todayDate=new Date,this.tokenPayload=l()(this.currentUser.token),this.isAdmin="admin"===this.tokenPayload.role,this.isInstructor="instructor"===this.tokenPayload.role,this.isStudent="student"===this.tokenPayload.role,this.fetchModules(this.courseId),this.getAvgStudentPoints(this.courseId,this.tokenPayload.id),this.waitForProgressBar(),this.studentCourseService.getStudentsByCourseId(this.courseId).subscribe((function(t){t.forEach((function(t,i,n){t.student_id==e.tokenPayload.id&&(e.points=t.points,console.log("Points: "+e.points),document.getElementById("progressbar").style.width=e.points+"%")}))})))}},{key:"waitForProgressBar",value:function(){var e=this;console.log("waiting for progress bar"),document.getElementById("progressbarAvg")?document.getElementById("progressbarAvg").style.width=this.averagePoints.average+"%":setTimeout((function(){e.waitForProgressBar()}),1e3)}},{key:"makeForms",value:function(){this.videoForm=this.fb.group({link:["",c.m.required]}),this.updateVideoForm=this.fb.group({linkInput:["",c.m.required]}),this.pdfForm=this.fb.group({pdf:["",c.m.required]}),this.updatePdfForm=this.fb.group({pdf:["",c.m.required]}),this.surveyForm=this.fb.group({name:["",c.m.required],link:["",c.m.required]}),this.updateSurveyForm=this.fb.group({name:["",c.m.required],link:["",c.m.required]})}},{key:"pushLinksToArray",value:function(e,t){e.forEach((function(e){t.push({link:e.link,module_id:e.module_id,video_id:e.video_id})}))}},{key:"updateVideoUrl",value:function(e,t){var i=this;e.forEach((function(e){if(e.module_id===t){i.moduleVideosFetched[t]=!0;var n,o,c,r=e.link.length;r>=43?n=e.link.substring(32,43):28==r&&(n=e.link.substring(17,28)),o="https://www.youtube.com/embed/"+n,c={videoUrl:i.sanitizer.bypassSecurityTrustResourceUrl(o),video_id:e.video_id,url:e.link},i.safeLinks.get(t)?i.safeLinks.get(t).push(c):i.safeLinks.set(t,[c])}}))}},{key:"pushPDFsToArray",value:function(e,t){e.forEach((function(e){var i=Uint8Array.from(e.pdf.data),n=new Blob([i.buffer],{type:"application/pdf"});t.push({module_id:e.module_id,pdf_id:e.pdf_id,pdf:n})}))}},{key:"updatePdfData",value:function(e,t){var i=this;e.forEach((function(e){if(e.module_id===t){i.modulePDFsFetched[t]=!0;var n,o,c=URL.createObjectURL(e.pdf);n=i.sanitizer.bypassSecurityTrustResourceUrl(c),o={pdf_id:e.pdf_id,pdf:n,rawPdf:e.pdf},i.safePdfs.get(t)?i.safePdfs.get(t).push(o):i.safePdfs.set(t,[o])}}))}},{key:"pushSurveysToArray",value:function(e,t){e.forEach((function(e){t.push({name:e.survey_name,link:e.link,module_id:e.module_id,survey_id:e.survey_id})}))}},{key:"updateSurveyUrl",value:function(e,t){var i=this;e.forEach((function(e){if(e.module_id===t){i.moduleSurveysFetched[t]=!0;var n={surveyUrl:i.sanitizer.bypassSecurityTrustResourceUrl(e.link),survey_id:e.survey_id,name:e.name,url:e.link};i.safeSurveys.get(t)?i.safeSurveys.get(t).push(n):i.safeSurveys.set(t,[n])}}))}},{key:"open",value:function(e){this.submitted=!1,this.invalidLink=!1,this.invalidQuiz=!1,this.validLink=!1,this.invalidQuiz=!1,this.modalService.open(e,{size:"lg",centered:!0})}},{key:"openModule",value:function(e){this.toggleContent[e]=!this.toggleContent[e]}},{key:"openUpdateVideo",value:function(e,t){this.submitted=!1,this.invalidLink=!1,this.validLink=!1,this.modalService.open(e,{size:"lg",centered:!0}),this.updateVideoForm.get("linkInput").setValue(t)}},{key:"openUpdatePDF",value:function(e,t){this.submitted=!1,this.modalService.open(e,{size:"lg",centered:!0}),console.log("The updatePDF: "+t)}},{key:"openUpdateSurvey",value:function(e,t,i){this.submitted=!1,this.invalidQuiz=!1,this.validQuiz=!1,this.modalService.open(e,{size:"lg",centered:!0}),this.updateSurveyForm.get("name").setValue(t),this.updateSurveyForm.get("link").setValue(i)}},{key:"getAvgStudentPoints",value:function(e,t){var i=this;console.log("Called avgstudentpoints on student_id: "+t),this.studentCourseService.getAvgStudentPoints(e,t).subscribe((function(e){i.averagePoints=e,console.log("avg: "+JSON.stringify(e)),i.averagePoints.average=i.toFixed(i.averagePoints.average,2)}))}},{key:"toFixed",value:function(e,t){var i=Math.pow(10,t||0);return String(Math.round(e*i)/i)}},{key:"viewDiscussion",value:function(e,t){this.router.navigate(["courses/".concat(e,"/discussion/").concat(t)])}},{key:"createModule",value:function(e){this.router.navigate(["courses/".concat(e,"/create-module")])}},{key:"fetchModules",value:function(e){var t=this;this.moduleService.getModulesByCourseId(e).subscribe((function(i){i.forEach((function(e,i,n){var o=new Date(e.lockedUntil),c=String(o.getDate()+1).padStart(2,"0"),r=String(o.getMonth()+1).padStart(2,"0")+"/"+c+"/"+o.getFullYear();t.moduleLocked[i]=!1,t.todayDate<o&&(t.moduleLocked[i]=!0),e.lockedUntil=r})),t.modules=i,t.fetchVideos(e,i),t.fetchPdfs(e,i),t.fetchSurveys(e,i)}))}},{key:"editModule",value:function(e,t){this.router.navigate(["courses/".concat(e,"/edit-module/").concat(t)])}},{key:"deleteModule",value:function(e,t){if(1==confirm("Delete Module ".concat(t,": Are you sure?"))){this.moduleService.deleteModule(e).subscribe((function(){console.log("Deleted module "+e)}));var i=this.modules.find((function(t){return t.id===e}));this.modules.splice(this.modules.indexOf(i))}}},{key:"handleValidLink",value:function(e){var t=e.target.value,i=!1,n=t.length;t.includes("https://www.youtube.com/watch?v=")||t.includes("https://youtu.be/")?(console.log("Includes youtube link"),i=!0):i=!1,(28==n||n>=43)&&i?(this.validLink=!0,this.invalidLink=!1):this.validLink=!1}},{key:"addVideo",value:function(e,t){var i=this;this.submitted=!0,this.videoForm.invalid||(this.validLink?this.videoService.addVideo(e,t).subscribe((function(e){alert("Added video")}),(function(e){i.error=e})):this.invalidLink=!0)}},{key:"updateVideo",value:function(e,t){this.submitted=!0,this.updateVideoForm.invalid||(this.validLink?this.videoService.updateVideo(e,t).subscribe((function(){alert("Updated video")})):this.invalidLink=!0)}},{key:"deleteVideo",value:function(e,t){confirm("Delete video "+(t+1)+": Are you sure?")&&this.videoService.deleteVideo(e).subscribe((function(){alert("Deleted video")}))}},{key:"fetchVideos",value:function(e,t){var i=this;console.log("Fetching videos: "+e),this.videoService.fetchVideos(e).subscribe((function(e){i.linksFromDB=e,i.pushLinksToArray(e,i.links),t.forEach((function(t,n,o){for(var c=t,r=0;r<e.length;r++){var s=e[r];if(s.module_id==c.module_id){if(1==i.moduleVideosFetched[s.module_id]){console.log("Modules videos fetched true");break}i.updateVideoUrl(i.links,s.module_id)}}}))}))}},{key:"handleFileInput",value:function(e){if(e.target.files.length>0){var t=e.target.files[0];this.pdfForm.get("pdf").setValue(t)}}},{key:"handleFileInputUpdate",value:function(e){if(e.target.files.length>0){var t=e.target.files[0];this.updatePdfForm.get("pdf").setValue(t)}}},{key:"addPdf",value:function(e){var t=this;if(this.submitted=!0,!this.pdfForm.invalid){var i=new FormData;i.append("fileKey",this.pdfForm.get("pdf").value),i.append("fileKey",e),this.pdfService.addPDF(i).subscribe((function(e){console.log(e),alert("Added PDF!")}),(function(e){console.log(e),t.error=e}))}}},{key:"fetchPdfs",value:function(e,t){var i=this;console.log("Fetching pdfs: "+e),this.pdfService.fetchPDFs(e).subscribe((function(e){i.pdfsFromDB=e,i.pushPDFsToArray(e,i.pdfs),t.forEach((function(t,n,o){for(var c=t,r=0;r<e.length;r++){var s=e[r];if(s.module_id==c.module_id){if(1==i.modulePDFsFetched[s.module_id]){console.log("Modules pdfs fetched true");break}i.updatePdfData(i.pdfs,s.module_id)}}}))}))}},{key:"updatePDF",value:function(e,t){if(this.submitted=!0,!this.updatePdfForm.invalid){var i=new FormData;i.append("fileKey",this.updatePdfForm.get("pdf").value),i.append("fileKey",t),this.pdfService.updatePDF(e,i).subscribe((function(){alert("Updated pdf")}))}}},{key:"deletePDF",value:function(e,t){confirm("Delete PDF "+(t+1)+": Are you sure?")&&this.pdfService.deletePDF(e).subscribe((function(){alert("Deleted pdf")}))}},{key:"handleValidQuiz",value:function(e){var t,i=e.target.value,n=i.length;t=!!i.includes("https://fiu.qualtrics.com/jfe/form/"),53==n&&t?(this.validQuiz=!0,this.invalidQuiz=!1):this.validQuiz=!1}},{key:"addSurvey",value:function(e,t,i){this.submitted=!0,this.surveyForm.invalid||(this.validQuiz?this.surveyService.addSurvey(e,t,i).subscribe((function(){alert("Added survey")})):this.invalidQuiz=!0)}},{key:"fetchSurveys",value:function(e,t){var i=this;console.log("Fetching surveys: "+e),this.surveyService.fetchSurveys(e).subscribe((function(e){i.surveysFromDB=e,i.pushSurveysToArray(e,i.surveys),t.forEach((function(t){for(var n=t,o=0;o<e.length;o++){var c=e[o];if(c.module_id==n.module_id){if(1==i.moduleSurveysFetched[c.module_id]){console.log("Modules surveys fetched true");break}i.updateSurveyUrl(i.surveys,c.module_id)}}}))}))}},{key:"updateSurvey",value:function(e,t,i){this.submitted=!0,this.updateSurveyForm.invalid||(this.validQuiz?this.surveyService.updateSurvey(e,t,i).subscribe((function(){alert("Updated Quiz/Exam")})):this.invalidQuiz=!0)}},{key:"deleteSurvey",value:function(e,t){confirm("Delete Quiz/Exam "+(t+1)+": Are you sure?")&&this.surveyService.deleteSurvey(e).subscribe((function(){alert("Deleted Quiz/Exam")}))}},{key:"v",get:function(){return this.videoForm.controls}},{key:"p",get:function(){return this.pdfForm.controls}},{key:"s",get:function(){return this.surveyForm.controls}},{key:"vu",get:function(){return this.updateVideoForm.controls}},{key:"pu",get:function(){return this.updatePdfForm.controls}},{key:"su",get:function(){return this.updateSurveyForm.controls}}]),e}()).\u0275fac=function(e){return new(e||lt)(d.Pb(R),d.Pb(N),d.Pb(B),d.Pb(G),d.Pb(v.a),d.Pb(b.a),d.Pb(c.b),d.Pb(s.c),d.Pb(s.a),d.Pb(J.b),d.Pb(o.b))},lt.\u0275cmp=d.Jb({type:lt,selectors:[["app-modules"]],decls:18,vars:4,consts:[["id","main"],[1,"flexbox-row"],[1,"flexbox-top-container"],[1,"align-self-stretch"],[1,"progress","flexbox-progress-bar","flexbox-top-options",2,"height","30px"],["id","progressbar","role","progressbar","aria-valuenow","10","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped",2,"width","10%"],[2,"align-self","stretch"],["class","progress-bar progress-bar-striped bg-info","id","progressbarAvg","role","progressbar","style","width: 10%","aria-valuenow","10","aria-valuemin","0","aria-valuemax","100",4,"ngIf"],[4,"ngIf"],["class","flexbox-container",4,"ngFor","ngForOf"],["id","progressbarAvg","role","progressbar","aria-valuenow","10","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","bg-info",2,"width","10%"],[1,"btn","btn-success",3,"click"],[1,"fas","fa-plus-circle"],[1,"flexbox-container"],[4,"ngIf","ngIfElse"],["lockedBlock",""],["style","color: blue;",4,"ngIf","ngIfElse"],["lockedBlock0",""],[1,"flexbox-options"],["contentVideoAdd",""],["class","btn btn-success",3,"click",4,"ngIf"],["contentPdfAdd",""],["contentSurveyAdd",""],["class","flexbox-item","style","cursor:pointer",3,"click",4,"ngIf","ngIfElse"],["moduleBlock",""],["class","flexbox-subcontainer",4,"ngIf"],["class","flexbox-item-module-actions",4,"ngIf"],[2,"color","blue"],["style","color: red",4,"ngIf"],[2,"color","red"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-9",3,"formGroup"],[1,"alert","alert-info"],[1,"form-group"],["for","link"],["type","text","required","","formControlName","link",1,"form-control",3,"ngClass","keyup"],["link",""],["class","invalid-feedback",4,"ngIf"],["class","valid-feedback",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["type","submit","class","btn btn-primary",3,"click",4,"ngIf"],["class","alert alert-danger mt-3 mb-0",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],[1,"invalid-feedback"],[1,"valid-feedback"],[1,"alert","alert-danger"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"alert","alert-danger","mt-3","mb-0"],["method","POST","enctype","multipart/form-data",1,"col-9",3,"formGroup","ngSubmit"],["for","pdf"],["id","theFile","type","file","name","pdf","required","",1,"form-control",3,"ngClass","change"],["file",""],["type","submit",1,"btn","btn-primary"],["for","name"],["type","text","formControlName","name","required","",1,"form-control",3,"ngClass"],["name",""],["type","text","formControlName","link","required","",1,"form-control",3,"ngClass","keyup"],[1,"flexbox-item",2,"cursor","pointer",3,"click"],[1,"fas","fa-caret-right"],[1,"fas","fa-caret-down"],[1,"flexbox-subcontainer"],["class","flexbox-resources",4,"ngFor","ngForOf"],["class","flexbox-links",4,"ngFor","ngForOf"],[1,"flexbox-resources"],["class","flexbox-resources-inner",4,"ngFor","ngForOf"],[1,"flexbox-resources-inner"],[1,"fas","fa-paperclip"],["contentPdf",""],[1,"btn","btn-primary",3,"click"],["class","btn btn-danger flexbox-module-options",3,"click",4,"ngIf"],["contentPdfUpdate",""],["class","btn btn-success flexbox-module-options",3,"click",4,"ngIf"],[1,"embed-responsive","embed-responsive-16by9"],["width","780","height","480",1,"embed-responsive-item",3,"src"],[1,"btn","btn-danger","flexbox-module-options",3,"click"],[1,"btn","btn-success","flexbox-module-options",3,"click"],[1,"flexbox-links"],["class","flexbox-links-inner",4,"ngFor","ngForOf"],[1,"flexbox-links-inner"],[1,"fab","fa-youtube"],["contentVideo",""],["contentVideoUpdate",""],["width","780","height","480","frameborder","0","allow","accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",1,"embed-responsive-item",3,"src"],["for","linkInput"],["type","text","formControlName","linkInput","required","",1,"form-control","form-control-lg",3,"ngClass","keyup"],["linkInput",""],[1,"fas","fa-paper-plane"],["contentSurvey",""],["contentSurveyUpdate",""],["type","text","formControlName","name","required","",1,"form-control","form-control-lg",3,"ngClass"],["type","text","formControlName","link","required","",1,"form-control","form-control-lg",3,"ngClass","keyup"],[1,"flexbox-item-module-actions"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-comments"],[1,"fas","fa-edit"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fas","fa-minus-circle"],[1,"flexbox-item",2,"cursor","not-allowed","opacity","0.5",3,"click"]],template:function(e,t){1&e&&(d.Qb(0,"app-sidebar"),d.Ub(1,"div",0),d.Qb(2,"app-sidebar-button"),d.Ub(3,"div",1),d.Ub(4,"div",2),d.Ub(5,"div",3),d.Ub(6,"span"),d.Hc(7,"Your Points"),d.Tb(),d.Ub(8,"div",4),d.Ub(9,"div",5),d.Hc(10),d.Tb(),d.Tb(),d.Tb(),d.Ub(11,"div",6),d.Ub(12,"span"),d.Hc(13,"Class Average Points"),d.Tb(),d.Ub(14,"div",4),d.Fc(15,j,2,1,"div",7),d.Tb(),d.Tb(),d.Fc(16,Y,4,0,"div",8),d.Tb(),d.Fc(17,at,4,2,"div",9),d.Tb(),d.Tb()),2&e&&(d.Cb(10),d.Jc("",t.points,"%"),d.Cb(5),d.oc("ngIf",t.averagePoints),d.Cb(1),d.oc("ngIf",t.currentUser&&(t.isAdmin||t.isInstructor)),d.Cb(1),d.oc("ngForOf",t.modules))},directives:[S,D,n.n,n.m,c.o,c.i,c.d,c.a,c.l,c.h,c.c,n.l],pipes:[n.h],styles:[".flexbox-row[_ngcontent-%COMP%]{justify-content:center}.flexbox-container[_ngcontent-%COMP%], .flexbox-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;align-items:center}.flexbox-container[_ngcontent-%COMP%]{width:600px;padding:20px;justify-content:space-evenly;background-color:#ececec;border-left:1px solid #000;border-right:1px solid #000;border-bottom:1px dotted grey}.flexbox-options[_ngcontent-%COMP%]{margin-bottom:15px;align-self:flex-end}.flexbox-item[_ngcontent-%COMP%]{align-self:stretch;background-color:transparent;border:1px solid #afafaf}.flexbox-top-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;width:600px;padding:20px;justify-content:space-evenly;align-items:center}.flexbox-top-container[_ngcontent-%COMP%]   .flexbox-top-options[_ngcontent-%COMP%]{margin-bottom:15px}.flexbox-top-container[_ngcontent-%COMP%]   .flexbox-progress-bar[_ngcontent-%COMP%]{align-self:stretch;background-color:#dbdbdb}.flexbox-item-module-actions[_ngcontent-%COMP%]{margin-top:15px;align-self:flex-end;background-color:transparent;border:1px solid #000}.flexbox-subcontainer[_ngcontent-%COMP%]{margin-top:15px;align-self:flex-start;display:flex;flex-direction:column;width:560px;justify-content:center;align-items:flex-start;background-color:#fafafa}.flexbox-module-options[_ngcontent-%COMP%]{float:right}.flexbox-links[_ngcontent-%COMP%]{align-self:stretch}.flexbox-links[_ngcontent-%COMP%]   .flexbox-links-inner[_ngcontent-%COMP%]{align-self:stretch;border:1px solid #000}.flexbox-links[_ngcontent-%COMP%]   .flexbox-links-inner[_ngcontent-%COMP%]:hover{background-color:#d9deff}.flexbox-resources[_ngcontent-%COMP%]{align-self:stretch}.flexbox-resources[_ngcontent-%COMP%]   .flexbox-resources-inner[_ngcontent-%COMP%]{align-self:stretch;border:1px solid #000}.flexbox-resources[_ngcontent-%COMP%]   .flexbox-resources-inner[_ngcontent-%COMP%]:hover{background-color:#d9deff}.flexbox-quizzes[_ngcontent-%COMP%]{align-self:stretch;border:1px solid #000}.flexbox-quizzes[_ngcontent-%COMP%]:hover{background-color:#d9deff}"]}),lt);function bt(e,t){if(1&e&&(d.Ub(0,"div",1),d.Ub(1,"div",2),d.Ub(2,"div",3),d.Hc(3),d.Tb(),d.Ub(4,"div",4),d.Hc(5),d.Tb(),d.Ub(6,"div",5),d.Hc(7),d.Tb(),d.Tb(),d.Tb()),2&e){var i=t.$implicit;d.Cb(3),d.Ic(i.student_id),d.Cb(2),d.Kc("",i.f_name," ",i.l_name,""),d.Cb(2),d.Ic(i.points)}}function ft(e,t){if(1&e&&(d.Ub(0,"span"),d.Hc(1),d.Tb()),2&e){var i=d.ic();d.Cb(1),d.Jc("Class average: ",i.average.average,"")}}var vt,pt=((vt=function(){function e(t,i,n,o){var c=this;_classCallCheck(this,e),this.studentCourseService=t,this.router=i,this.route=n,this.authenticationService=o,this.students=[],this.authenticationService.currentUser.subscribe((function(e){return c.currentUser=e}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.courseId=t.id,console.log("param id is: "+t.id)})),this.userPayload=l()(this.currentUser.token),this.fetchStudents(this.courseId),this.getAvgStudentPoints(this.courseId,this.userPayload.id)}},{key:"fetchStudents",value:function(e){var t=this;console.log("fetching students"),this.studentCourseService.getStudentsByCourseId(e).subscribe((function(e){t.students=e,console.log(e)}))}},{key:"getAvgStudentPoints",value:function(e,t){var i=this;console.log("Called avgstudentpoints on student_id: "+t),this.studentCourseService.getAvgStudentPoints(e,t).subscribe((function(e){i.average=e,console.log("avg: "+JSON.stringify(e)),i.average.average=i.toFixed(i.average.average,2)}))}},{key:"toFixed",value:function(e,t){var i=Math.pow(10,t||0);return String(Math.round(e*i)/i)}}]),e}()).\u0275fac=function(e){return new(e||vt)(d.Pb(b.a),d.Pb(s.c),d.Pb(s.a),d.Pb(v.a))},vt.\u0275cmp=d.Jb({type:vt,selectors:[["app-leaderboard"]],decls:16,vars:2,consts:[["id","main"],[1,"flexbox-row"],[1,"flexbox-container"],[1,"flexbox-cell","left"],[1,"flexbox-cell","center"],[1,"flexbox-cell","right"],["class","flexbox-row",4,"ngFor","ngForOf"],[1,"center-form",2,"margin-top","15px"],[4,"ngIf"]],template:function(e,t){1&e&&(d.Qb(0,"app-sidebar"),d.Ub(1,"div",0),d.Qb(2,"app-sidebar-button"),d.Ub(3,"div",1),d.Ub(4,"h2"),d.Hc(5," Leaderboard "),d.Tb(),d.Ub(6,"div",2),d.Ub(7,"div",3),d.Hc(8,"ID"),d.Tb(),d.Ub(9,"div",4),d.Hc(10,"Name"),d.Tb(),d.Ub(11,"div",5),d.Hc(12,"Points"),d.Tb(),d.Tb(),d.Fc(13,bt,8,4,"div",6),d.Ub(14,"div",7),d.Fc(15,ft,2,1,"span",8),d.Tb(),d.Tb(),d.Tb()),2&e&&(d.Cb(13),d.oc("ngForOf",t.students),d.Cb(2),d.oc("ngIf",t.average))},directives:[S,D,n.m,n.n],styles:[".flexbox-container[_ngcontent-%COMP%]{flex-direction:row;width:600px;padding:20px;justify-content:space-around;background-color:#ececec;border-left:1px solid #000;border-right:1px solid #000;border-bottom:1px dotted grey}.flexbox-container[_ngcontent-%COMP%], .flexbox-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center}.flexbox-row[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}.flexbox-column[_ngcontent-%COMP%]{background-color:#d9deff;display:flex;flex-direction:row;justify-content:space-evenly;align-items:center}.flexbox-cell[_ngcontent-%COMP%]{width:100px;text-align:center}"]}),vt);function mt(e,t){1&e&&(d.Ub(0,"div"),d.Hc(1,"Number is required"),d.Tb())}function gt(e,t){if(1&e&&(d.Ub(0,"div",18),d.Fc(1,mt,2,0,"div",19),d.Tb()),2&e){var i=d.ic();d.Cb(1),d.oc("ngIf",i.m.number.errors.required)}}function ht(e,t){1&e&&(d.Ub(0,"div"),d.Hc(1,"Title is required"),d.Tb())}function kt(e,t){if(1&e&&(d.Ub(0,"div",18),d.Fc(1,ht,2,0,"div",19),d.Tb()),2&e){var i=d.ic();d.Cb(1),d.oc("ngIf",i.m.title.errors.required)}}function yt(e,t){1&e&&(d.Ub(0,"div"),d.Hc(1,"Locked Until is required"),d.Tb())}function Ct(e,t){if(1&e&&(d.Ub(0,"div",18),d.Fc(1,yt,2,0,"div",19),d.Tb()),2&e){var i=d.ic();d.Cb(1),d.oc("ngIf",i.m.lockedUntil.errors.required)}}var Ut,xt=function(e){return{"is-invalid":e}},Tt=((Ut=function(){function e(t,i,n,o){_classCallCheck(this,e),this.router=t,this.route=i,this.moduleService=n,this.fb=o,this.labels=["number","title","lockedUntil"],this.submitted=!1,this.todayDate=null,this.moduleForm=this.fb.group({number:["",c.m.required],title:["",c.m.required],lockedUntil:["",c.m.required]})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.courseId=t.id,console.log("params id create: "+t.id)}));var t=new Date,i=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),o=t.getFullYear();this.todayDate=new Promise((function(e,t){e(n+"/"+i+"/"+o)}))}},{key:"addModule",value:function(e,t,i){this.submitted=!0;var n=new Date(i),o=String(n.getDate()).padStart(2,"0"),c=String(n.getMonth()+1).padStart(2,"0");i=n.getFullYear()+"-"+c+"-"+o,console.log("going to submit lockedUntil: "+i),this.moduleForm.valid&&this.moduleService.addModule(this.courseId,e,t,i).subscribe((function(){alert("Added module successfully!")}))}},{key:"onDateSelect",value:function(e){this.todayDate=new Promise((function(t,i){t(String(e.month).padStart(2,"0")+"/"+String(e.day).padStart(2,"0")+"/"+e.year)}))}},{key:"m",get:function(){return this.moduleForm.controls}}]),e}()).\u0275fac=function(e){return new(e||Ut)(d.Pb(s.c),d.Pb(s.a),d.Pb(R),d.Pb(c.b))},Ut.\u0275cmp=d.Jb({type:Ut,selectors:[["app-create-module"]],decls:30,vars:16,consts:[[1,"center-form"],[1,"col-sm-4",3,"formGroup"],[1,"form-group"],["for","number"],["type","text","formControlName","number","required","",1,"form-control",3,"ngClass"],["number",""],["class","invalid-feedback",4,"ngIf"],["for","title"],["formControlName","title","required","",1,"form-control",3,"ngClass"],["title",""],["for","lockedUntil"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","formControlName","lockedUntil","readonly","","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d","ngbDatepicker","lockedUntil",""],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","far","fa-calendar-alt",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){if(1&e){var i=d.Vb();d.Ub(0,"div",0),d.Ub(1,"h2"),d.Hc(2,"Create New Module"),d.Tb(),d.Ub(3,"form",1),d.Ub(4,"div",2),d.Ub(5,"label",3),d.Hc(6,"Number"),d.Tb(),d.Qb(7,"input",4,5),d.Fc(9,gt,2,1,"div",6),d.Tb(),d.Ub(10,"div",2),d.Ub(11,"label",7),d.Hc(12,"Title"),d.Tb(),d.Qb(13,"textarea",8,9),d.Fc(15,kt,2,1,"div",6),d.Tb(),d.Ub(16,"div",2),d.Ub(17,"label",10),d.Hc(18,"Locked Until"),d.Tb(),d.Ub(19,"div",11),d.Ub(20,"input",12,13),d.gc("dateSelect",(function(e){return t.onDateSelect(e)})),d.jc(23,"async"),d.Tb(),d.Ub(24,"div",14),d.Ub(25,"button",15),d.gc("click",(function(){return d.xc(i),d.wc(21).toggle()})),d.Tb(),d.Tb(),d.Fc(26,Ct,2,1,"div",6),d.Tb(),d.Tb(),d.Ub(27,"button",16),d.gc("click",(function(){d.xc(i);var e=d.wc(8),n=d.wc(14),o=d.wc(22);return t.addModule(e.value,n.value,o.value)})),d.Qb(28,"i",17),d.Hc(29," Create Module"),d.Tb(),d.Tb(),d.Tb()}2&e&&(d.Cb(3),d.oc("formGroup",t.moduleForm),d.Cb(4),d.oc("ngClass",d.sc(10,xt,t.submitted&&t.m.number.errors)),d.Cb(2),d.oc("ngIf",t.submitted&&t.m.number.errors),d.Cb(4),d.oc("ngClass",d.sc(12,xt,t.submitted&&t.m.title.errors)),d.Cb(2),d.oc("ngIf",t.submitted&&t.m.title.errors),d.Cb(5),d.oc("value",d.kc(23,8,t.todayDate))("ngClass",d.sc(14,xt,t.submitted&&t.m.lockedUntil.errors)),d.Cb(6),d.oc("ngIf",t.submitted&&t.m.lockedUntil.errors))},directives:[c.o,c.i,c.d,c.a,c.h,c.c,c.l,n.l,n.n,o.a],pipes:[n.b],styles:[""]}),Ut);function Ft(e,t){1&e&&(d.Ub(0,"div"),d.Hc(1,"Number is required"),d.Tb())}function It(e,t){if(1&e&&(d.Ub(0,"div",18),d.Fc(1,Ft,2,0,"div",19),d.Tb()),2&e){var i=d.ic();d.Cb(1),d.oc("ngIf",i.mu.number.errors.required)}}function Pt(e,t){1&e&&(d.Ub(0,"div"),d.Hc(1,"Title is required"),d.Tb())}function St(e,t){if(1&e&&(d.Ub(0,"div",18),d.Fc(1,Pt,2,0,"div",19),d.Tb()),2&e){var i=d.ic();d.Cb(1),d.oc("ngIf",i.mu.title.errors.required)}}function wt(e,t){1&e&&(d.Ub(0,"div"),d.Hc(1,"Locked Until is required"),d.Tb())}function _t(e,t){if(1&e&&(d.Ub(0,"div",18),d.Fc(1,wt,2,0,"div",19),d.Tb()),2&e){var i=d.ic();d.Cb(1),d.oc("ngIf",i.mu.lockedUntil.errors.required)}}var Ht,Dt=function(e){return{"is-invalid":e}},Mt=((Ht=function(){function e(t,i,n,o){_classCallCheck(this,e),this.moduleService=t,this.router=i,this.route=n,this.fb=o,this.submitted=!1,this.givenDate=null,this.CreateForm()}return _createClass(e,[{key:"CreateForm",value:function(){this.updateForm=this.fb.group({number:["",c.m.required],title:["",c.m.required],lockedUntil:["",c.m.required]})}},{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.id=t.moduleId,e.moduleService.getModuleById(e.id).subscribe((function(t){e.module=t[0],e.moduleNumber=e.module.number,e.updateForm.get("number").setValue(e.module.number),e.updateForm.get("title").setValue(e.module.title),e.updateForm.get("lockedUntil").setValue(e.module.lockedUntil);var i=new Date(e.module.lockedUntil.toString()),n=String(i.getDate()+1).padStart(2,"0"),o=String(i.getMonth()+1).padStart(2,"0"),c=i.getFullYear();e.givenDate=new Promise((function(e,t){e(o+"/"+n+"/"+c)})),e.startDate=(""+e.module.lockedUntil).split("-")}))}))}},{key:"updateModule",value:function(e,t,i){this.submitted=!0;var n=new Date(i),o=String(n.getDate()).padStart(2,"0"),c=String(n.getMonth()+1).padStart(2,"0");i=n.getFullYear()+"-"+c+"-"+o,this.updateForm.valid&&this.moduleService.updateModule(this.id,e,t,i).subscribe((function(e){alert("Module updated successfully")}))}},{key:"onDateSelect",value:function(e){this.givenDate=new Promise((function(t,i){t(String(e.month).padStart(2,"0")+"/"+String(e.day).padStart(2,"0")+"/"+e.year)}))}},{key:"mu",get:function(){return this.updateForm.controls}}]),e}()).\u0275fac=function(e){return new(e||Ht)(d.Pb(R),d.Pb(s.c),d.Pb(s.a),d.Pb(c.b))},Ht.\u0275cmp=d.Jb({type:Ht,selectors:[["app-edit-module"]],decls:30,vars:17,consts:[[1,"center-form"],[1,"col-sm-4",3,"formGroup"],[1,"form-group"],["for","number"],["type","text","formControlName","number","required","",1,"form-control",3,"ngClass"],["number",""],["class","invalid-feedback",4,"ngIf"],["for","title"],["formControlName","title","required","",1,"form-control",3,"ngClass"],["title",""],["for","lockedUntil"],[1,"input-group"],["type","text","placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","readonly","","formControlName","lockedUntil","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d","ngbDatepicker","lockedUntil",""],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","far","fa-calendar-alt",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){if(1&e){var i=d.Vb();d.Ub(0,"div",0),d.Ub(1,"h2"),d.Hc(2),d.Tb(),d.Ub(3,"form",1),d.Ub(4,"div",2),d.Ub(5,"label",3),d.Hc(6,"Number"),d.Tb(),d.Qb(7,"input",4,5),d.Fc(9,It,2,1,"div",6),d.Tb(),d.Ub(10,"div",2),d.Ub(11,"label",7),d.Hc(12,"Title"),d.Tb(),d.Qb(13,"textarea",8,9),d.Fc(15,St,2,1,"div",6),d.Tb(),d.Ub(16,"div",2),d.Ub(17,"label",10),d.Hc(18,"Locked Until"),d.Tb(),d.Ub(19,"div",11),d.Ub(20,"input",12,13),d.gc("dateSelect",(function(e){return t.onDateSelect(e)})),d.jc(23,"async"),d.Tb(),d.Ub(24,"div",14),d.Ub(25,"button",15),d.gc("click",(function(){return d.xc(i),d.wc(21).toggle()})),d.Tb(),d.Tb(),d.Fc(26,_t,2,1,"div",6),d.Tb(),d.Tb(),d.Ub(27,"button",16),d.gc("click",(function(){d.xc(i);var e=d.wc(8),n=d.wc(14),o=d.wc(22);return t.updateModule(e.value,n.value,o.value)})),d.Qb(28,"i",17),d.Hc(29," Update Module"),d.Tb(),d.Tb(),d.Tb()}2&e&&(d.Cb(2),d.Jc("Edit Module ",t.moduleNumber,""),d.Cb(1),d.oc("formGroup",t.updateForm),d.Cb(4),d.oc("ngClass",d.sc(11,Dt,t.submitted&&t.mu.number.errors)),d.Cb(2),d.oc("ngIf",t.submitted&&t.mu.number.errors),d.Cb(4),d.oc("ngClass",d.sc(13,Dt,t.submitted&&t.mu.title.errors)),d.Cb(2),d.oc("ngIf",t.submitted&&t.mu.title.errors),d.Cb(5),d.oc("value",d.kc(23,9,t.givenDate))("ngClass",d.sc(15,Dt,t.submitted&&t.mu.lockedUntil.errors)),d.Cb(6),d.oc("ngIf",t.submitted&&t.mu.lockedUntil.errors))},directives:[c.o,c.i,c.d,c.a,c.h,c.c,c.l,n.l,n.n,o.a],pipes:[n.b],styles:[""]}),Ht);function Lt(e,t){if(1&e){var i=d.Vb();d.Sb(0),d.Ub(1,"ckeditor",2),d.gc("change",(function(e){return d.xc(i),d.ic().onChange(e)})),d.Tb(),d.Ub(2,"span"),d.Ub(3,"button",3),d.gc("click",(function(){d.xc(i);var e=t.ngIf;return d.ic().onSubmit(e.id)})),d.Hc(4,"Submit"),d.Tb(),d.Ub(5,"button",4),d.gc("click",(function(){d.xc(i);var e=t.ngIf;return d.ic().onClearButtonClicked(e.id)})),d.Hc(6,"Clear and Submit"),d.Tb(),d.Ub(7,"a",5),d.Qb(8,"i",6),d.Hc(9," Go back"),d.Tb(),d.Tb(),d.Qb(10,"hr"),d.Ub(11,"h2"),d.Hc(12,"Preview"),d.Tb(),d.Qb(13,"div",7),d.Rb()}if(2&e){var n=t.ngIf,o=d.ic();d.Cb(1),d.oc("editor",o.Editor)("data",o.editorData?o.editorData:n.content),d.Cb(6),d.qc("routerLink","/courses/",o.courseId,""),d.Cb(6),d.oc("innerHTML",o.editorData?o.editorData:n.content,d.yc)}}var Vt,Ot,Qt=((Ot=function(){function e(t,i,n){_classCallCheck(this,e),this.courseDetailsService=t,this.route=i,this.router=n,this.Editor=F,this.isCleared=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.courseId=t.id})),this.courseContent=this.courseDetailsService.getCourseDetails(this.courseId),this.courseDetailsService.getCourseDetails(this.courseId).subscribe((function(t){e.courseDetails=t}))}},{key:"onReady",value:function(e){e.setData("")}},{key:"onChange",value:function(e){var t=e.editor;this.editorData=t.getData(),this.isCleared&&(t.setData(""),this.isCleared=!1),console.log(this.editorData)}},{key:"onSubmit",value:function(e){var t=this;this.courseDetailsService.updateCourseDetails(e,this.editorData).subscribe((function(){alert("Submitted Content"),t.router.navigate(["courses",t.courseId])}))}},{key:"onClearButtonClicked",value:function(e){var t=this;confirm("Clear content; Are you sure?")&&this.courseDetailsService.clearCourseDetails(e).subscribe((function(){alert("Cleared Content"),t.isCleared=!0,t.router.navigate(["courses",t.courseId])}))}}]),e}()).\u0275fac=function(e){return new(e||Ot)(d.Pb(I.a),d.Pb(s.a),d.Pb(s.c))},Ot.\u0275cmp=d.Jb({type:Ot,selectors:[["app-home-edit"]],decls:3,vars:3,consts:[[1,"flexbox-row"],[4,"ngIf"],[3,"editor","data","change"],[1,"btn","btn-primary",2,"margin-right","15px",3,"click"],[1,"btn","btn-warning",2,"margin-left","15px",3,"click"],[1,"btn","btn-secondary",2,"margin-left","15px",3,"routerLink"],[1,"fas","fa-arrow-circle-left"],[1,"custom-font",2,"margin-top","30px",3,"innerHTML"]],template:function(e,t){1&e&&(d.Ub(0,"div",0),d.Fc(1,Lt,14,4,"ng-container",1),d.jc(2,"async"),d.Tb()),2&e&&(d.Cb(1),d.oc("ngIf",d.kc(2,1,t.courseContent)))},directives:[n.n,r.a,s.f],pipes:[n.b],styles:[".flexbox-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;align-items:center;position:relative;margin-top:30px}"]}),Ot),At=((Vt=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"createDiscussion",value:function(e,t,i,n,o,c){return this.http.post("".concat(z.a.apiURL,"/discussions"),{user:e,post:t,created:i,changed:n,module_id:o,user_id:c})}},{key:"getDiscussionsInModule",value:function(e){return this.http.get("".concat(z.a.apiURL,"/discussions/m/").concat(e))}},{key:"updateDiscussion",value:function(e,t,i){return this.http.put("".concat(z.a.apiURL,"/discussions/").concat(i),{post:e,changed:t})}},{key:"deleteDiscussion",value:function(e){return this.http.delete("".concat(z.a.apiURL,"/discussions/").concat(e))}}]),e}()).\u0275fac=function(e){return new(e||Vt)(d.cc(E.b))},Vt.\u0275prov=d.Lb({token:Vt,factory:Vt.\u0275fac,providedIn:"root"}),Vt);function qt(e,t){1&e&&(d.Ub(0,"div"),d.Hc(1,"Post cannot be empty"),d.Tb())}function $t(e,t){if(1&e&&(d.Ub(0,"div",8),d.Fc(1,qt,2,0,"div",9),d.Tb()),2&e){var i=d.ic();d.Cb(1),d.oc("ngIf",i.p.post.errors.required)}}var zt,Et=function(e){return{"is-invalid":e}},Rt=((zt=function(){function e(t,i,n,o,c){var r=this;_classCallCheck(this,e),this.fb=t,this.discussionService=i,this.moduleService=n,this.authenticationService=o,this.route=c,this.module=null,this.submitted=!1,this.authenticationService.currentUser.subscribe((function(e){return r.currentUser=e}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.userPayload=l()(this.currentUser.token),this.route.params.subscribe((function(t){e.moduleService.getModuleById(t.moduleId).subscribe((function(t){e.module=new Promise((function(e,i){e(t[0])}))}))})),this.createForm()}},{key:"createForm",value:function(){this.postForm=this.fb.group({post:["",c.m.required]})}},{key:"createPost",value:function(e){var t=this;this.submitted=!0,this.postForm.valid&&this.module.then((function(i){var n=t.userPayload.f_name+" "+t.userPayload.l_name,o=new Date;t.discussionService.createDiscussion(n,e,o,o,i.id,t.userPayload.id).subscribe((function(){alert("Created post")}))}))}},{key:"p",get:function(){return this.postForm.controls}}]),e}()).\u0275fac=function(e){return new(e||zt)(d.Pb(c.b),d.Pb(At),d.Pb(R),d.Pb(v.a),d.Pb(s.a))},zt.\u0275cmp=d.Jb({type:zt,selectors:[["app-create-post"]],decls:9,vars:5,consts:[[1,"center-form"],[3,"formGroup"],[1,"form-group"],["rows","3","required","","formControlName","post",1,"form-control",3,"ngClass"],["post",""],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){if(1&e){var i=d.Vb();d.Ub(0,"div",0),d.Ub(1,"form",1),d.Ub(2,"div",2),d.Qb(3,"textarea",3,4),d.Fc(5,$t,2,1,"div",5),d.Tb(),d.Ub(6,"button",6),d.gc("click",(function(){d.xc(i);var e=d.wc(4);return t.createPost(e.value)})),d.Qb(7,"i",7),d.Hc(8," Create Post"),d.Tb(),d.Tb(),d.Tb()}2&e&&(d.Cb(1),d.oc("formGroup",t.postForm),d.Cb(2),d.oc("ngClass",d.sc(3,Et,t.submitted&&t.p.post.errors)),d.Cb(2),d.oc("ngIf",t.submitted&&t.p.post.errors))},directives:[c.o,c.i,c.d,c.a,c.l,c.h,c.c,n.l,n.n],styles:[""]}),zt);function Nt(e,t){1&e&&(d.Ub(0,"div"),d.Hc(1,"Post is required"),d.Tb())}function Bt(e,t){if(1&e&&(d.Ub(0,"div",17),d.Fc(1,Nt,2,0,"div",18),d.Tb()),2&e){var i=d.ic(2);d.Cb(1),d.oc("ngIf",i.up.post.errors.required)}}var Gt=function(e){return{"is-invalid":e}};function Jt(e,t){if(1&e){var i=d.Vb();d.Ub(0,"div",2),d.Ub(1,"h4",3),d.Hc(2,"Edit Your Post"),d.Tb(),d.Ub(3,"button",4),d.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),d.Ub(4,"span",5),d.Hc(5,"\xd7"),d.Tb(),d.Tb(),d.Tb(),d.Ub(6,"div",6),d.Ub(7,"form",7),d.Ub(8,"div",8),d.Ub(9,"label",9),d.Hc(10,"Post"),d.Tb(),d.Qb(11,"textarea",10,11),d.Fc(13,Bt,2,1,"div",12),d.Tb(),d.Ub(14,"button",13),d.gc("click",(function(){d.xc(i);var e=d.wc(12);return d.ic().updatePost(e.value)})),d.Qb(15,"i",14),d.Hc(16," Update Post"),d.Tb(),d.Tb(),d.Tb(),d.Ub(17,"div",15),d.Ub(18,"button",16),d.gc("click",(function(){return t.$implicit.close("Close click")})),d.Hc(19,"Close"),d.Tb(),d.Tb()}if(2&e){var n=d.ic();d.Cb(7),d.oc("formGroup",n.editPostForm),d.Cb(4),d.oc("ngClass",d.sc(3,Gt,n.submitted&&n.up.post.errors)),d.Cb(2),d.oc("ngIf",n.submitted&&n.up.post.errors)}}var jt,Yt=((jt=function(){function e(t,i,n){_classCallCheck(this,e),this.modalService=t,this.fb=i,this.discussionService=n,this.submitted=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.makeForm()}},{key:"makeForm",value:function(){this.editPostForm=this.fb.group({post:["",c.m.required]})}},{key:"open",value:function(e){this.editPostForm.get("post").setValue(this.discussionData.post),this.modalService.open(e,{size:"lg",centered:!0})}},{key:"updatePost",value:function(e){if(this.submitted=!0,this.editPostForm.valid){var t=new Date;this.discussionService.updateDiscussion(e,t,this.discussionData.discussion_id).subscribe((function(){alert("Updated post")}))}}},{key:"up",get:function(){return this.editPostForm.controls}}]),e}()).\u0275fac=function(e){return new(e||jt)(d.Pb(o.b),d.Pb(c.b),d.Pb(At))},jt.\u0275cmp=d.Jb({type:jt,selectors:[["app-edit-post"]],inputs:{discussionData:"discussionData"},decls:4,vars:0,consts:[["contentPostEdit",""],[1,"btn","btn-success",3,"click"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-9",3,"formGroup"],[1,"form-group"],["for","post"],["rows","3","required","","formControlName","post",1,"form-control",3,"ngClass"],["post",""],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){if(1&e){var i=d.Vb();d.Fc(0,Jt,20,5,"ng-template",null,0,d.Gc),d.Ub(2,"button",1),d.gc("click",(function(){d.xc(i);var e=d.wc(1);return t.open(e)})),d.Hc(3,"Edit Post"),d.Tb()}},directives:[c.o,c.i,c.d,c.a,c.l,c.h,c.c,n.l,n.n],styles:[""]}),jt);function Kt(e,t){if(1&e&&(d.Ub(0,"div"),d.Ub(1,"h1",3),d.Hc(2,"Discussion"),d.Tb(),d.Ub(3,"h2",3),d.Hc(4),d.Tb(),d.Ub(5,"h3"),d.Hc(6),d.Tb(),d.Tb()),2&e){var i=t.ngIf;d.Cb(4),d.Jc("Module ",i.number,""),d.Cb(2),d.Ic(i.title)}}function Xt(e,t){if(1&e&&d.Qb(0,"app-edit-post",8),2&e){var i=d.ic().$implicit;d.oc("discussionData",i)}}function Wt(e,t){if(1&e){var i=d.Vb();d.Ub(0,"button",9),d.gc("click",(function(){d.xc(i);var e=d.ic().$implicit;return d.ic().deletePost(e.discussion_id)})),d.Hc(1,"Delete Post"),d.Tb()}}function Zt(e,t){if(1&e&&(d.Ub(0,"div",4),d.Ub(1,"p",5),d.Hc(2),d.jc(3,"date"),d.jc(4,"date"),d.Qb(5,"br"),d.Hc(6),d.Qb(7,"br"),d.Fc(8,Xt,1,1,"app-edit-post",6),d.Fc(9,Wt,2,0,"button",7),d.Tb(),d.Tb()),2&e){var i=t.$implicit,n=d.ic();d.Cb(2),d.Kc(" ",i.user," | ",i.created>=i.changed?d.lc(3,5,i.created,"short"):d.lc(4,8,i.changed,"short"),""),d.Cb(4),d.Jc(" ",i.post,""),d.Cb(2),d.oc("ngIf",i.user_id==n.userPayload.id),d.Cb(1),d.oc("ngIf",i.user_id==n.userPayload.id)}}var ei,ti,ii=[{path:"",component:T,canActivate:[v.a]},{path:":id",component:$,canActivate:[v.a]},{path:":id/modules",component:dt,canActivate:[v.a]},{path:":id/leaderboard",component:pt,canActivate:[v.a]},{path:":id/create-module",component:Tt,canActivate:[v.a],data:{expectedRole:"instructor"}},{path:":id/edit-module/:moduleId",component:Mt,canActivate:[v.a],data:{expectedRole:"instructor"}},{path:":id/edit-home",component:Qt,canActivate:[v.a],data:{expectedRole:"instructor"}},{path:":id/discussion/:moduleId",component:(ei=function(){function e(t,i,n,o){var c=this;_classCallCheck(this,e),this.discussionService=t,this.moduleService=i,this.authenticationService=n,this.route=o,this.discussions=[],this.moduleDetails={},this.authenticationService.currentUser.subscribe((function(e){return c.currentUser=e}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.userPayload=l()(this.currentUser.token),this.route.params.subscribe((function(t){e.discussionService.getDiscussionsInModule(t.moduleId).subscribe((function(t){console.log(t),e.discussions=t})),e.moduleService.getModuleById(t.moduleId).subscribe((function(t){console.log(t[0]),e.moduleDetails=t[0]}))}))}},{key:"deletePost",value:function(e){confirm("Delete post: Are you sure?")&&this.discussionService.deleteDiscussion(e).subscribe((function(){alert("Deleted post successfully")}))}}]),e}(),ei.\u0275fac=function(e){return new(e||ei)(d.Pb(At),d.Pb(R),d.Pb(v.a),d.Pb(s.a))},ei.\u0275cmp=d.Jb({type:ei,selectors:[["app-discussion"]],decls:4,vars:2,consts:[[1,"center-form"],[4,"ngIf"],["class","flex-row",4,"ngFor","ngForOf"],[2,"text-align","center"],[1,"flex-row"],[1,"flex-item"],[3,"discussionData",4,"ngIf"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],[3,"discussionData"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(d.Ub(0,"div",0),d.Fc(1,Kt,7,2,"div",1),d.Qb(2,"app-create-post"),d.Fc(3,Zt,10,11,"div",2),d.Tb()),2&e&&(d.Cb(1),d.oc("ngIf",t.moduleDetails),d.Cb(2),d.oc("ngForOf",t.discussions))},directives:[n.n,Rt,n.m,Yt],pipes:[n.e],styles:[".flex-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;background-color:#add8e6;margin:15px;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content}.flex-item[_ngcontent-%COMP%]{align-self:stretch}"]}),ei),canActivate:[v.a]}],ni=((ti=function e(){_classCallCheck(this,e)}).\u0275mod=d.Nb({type:ti}),ti.\u0275inj=d.Mb({factory:function(e){return new(e||ti)},imports:[[s.g.forChild(ii)],s.g]}),ti);i.d(t,"CourseModule",(function(){return ci}));var oi,ci=((oi=function e(){_classCallCheck(this,e)}).\u0275mod=d.Nb({type:oi}),oi.\u0275inj=d.Mb({factory:function(e){return new(e||oi)},imports:[[n.c,ni,c.k,o.c,r.b]]}),oi)}}]);