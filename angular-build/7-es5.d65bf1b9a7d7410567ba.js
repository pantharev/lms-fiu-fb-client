function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{BUtp:function(e,t,n){"use strict";n.r(t);var i=n("ofXK"),o=n("1kSV"),c=n("3Pt+"),r=n("zioG"),s=n("rDax"),a=n("u47x"),u=n("fXoL"),l=n("FKr1"),d=n("8LU1"),b=(n("FtGj"),n("nLfN")),f=n("XNiG");n("itXk"),n("GyhO"),n("HDdC"),n("IzEk"),n("7o/Q"),n("Kj3r"),n("lJxs"),n("JX91");var p=n("1G5W");n("+rOU"),n("R0Ic"),n("vxfF"),n("cH1L");var v,m,h,g,y,k,C,I={provide:new u.q("mat-tooltip-scroll-strategy"),deps:[s.a],useFactory:function(e){return function(){return e.scrollStrategies.reposition({scrollThrottle:20})}}},U=((v=function e(){_classCallCheck(this,e)}).\u0275mod=u.Nb({type:v}),v.\u0275inj=u.Mb({factory:function(e){return new(e||v)},providers:[I],imports:[[a.a,i.c,s.c,l.d],l.d]}),v),x=n("EY2u"),T=n("xgIS"),_=n("3UWI"),w=Object(b.f)({passive:!0}),P=((g=function(){function e(t,n){_classCallCheck(this,e),this._platform=t,this._ngZone=n,this._monitoredElements=new Map}return _createClass(e,[{key:"monitor",value:function(e){var t=this;if(!this._platform.isBrowser)return x.a;var n=Object(d.d)(e),i=this._monitoredElements.get(n);if(i)return i.subject.asObservable();var o=new f.a,c="cdk-text-field-autofilled",r=function(e){"cdk-text-field-autofill-start"!==e.animationName||n.classList.contains(c)?"cdk-text-field-autofill-end"===e.animationName&&n.classList.contains(c)&&(n.classList.remove(c),t._ngZone.run((function(){return o.next({target:e.target,isAutofilled:!1})}))):(n.classList.add(c),t._ngZone.run((function(){return o.next({target:e.target,isAutofilled:!0})})))};return this._ngZone.runOutsideAngular((function(){n.addEventListener("animationstart",r,w),n.classList.add("cdk-text-field-autofill-monitored")})),this._monitoredElements.set(n,{subject:o,unlisten:function(){n.removeEventListener("animationstart",r,w)}}),o.asObservable()}},{key:"stopMonitoring",value:function(e){var t=Object(d.d)(e),n=this._monitoredElements.get(t);n&&(n.unlisten(),n.subject.complete(),t.classList.remove("cdk-text-field-autofill-monitored"),t.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(t))}},{key:"ngOnDestroy",value:function(){var e=this;this._monitoredElements.forEach((function(t,n){return e.stopMonitoring(n)}))}}]),e}()).\u0275fac=function(e){return new(e||g)(u.cc(b.a),u.cc(u.z))},g.\u0275prov=Object(u.Lb)({factory:function(){return new g(Object(u.cc)(b.a),Object(u.cc)(u.z))},token:g,providedIn:"root"}),g),S=((h=function(){function e(t,n,i,o){_classCallCheck(this,e),this._elementRef=t,this._platform=n,this._ngZone=i,this._destroyed=new f.a,this._enabled=!0,this._previousMinRows=-1,this._document=o,this._textareaElement=this._elementRef.nativeElement}return _createClass(e,[{key:"_setMinHeight",value:function(){var e=this.minRows&&this._cachedLineHeight?"".concat(this.minRows*this._cachedLineHeight,"px"):null;e&&(this._textareaElement.style.minHeight=e)}},{key:"_setMaxHeight",value:function(){var e=this.maxRows&&this._cachedLineHeight?"".concat(this.maxRows*this._cachedLineHeight,"px"):null;e&&(this._textareaElement.style.maxHeight=e)}},{key:"ngAfterViewInit",value:function(){var e=this;this._platform.isBrowser&&(this._initialHeight=this._textareaElement.style.height,this.resizeToFitContent(),this._ngZone.runOutsideAngular((function(){var t=e._getWindow();Object(T.a)(t,"resize").pipe(Object(_.a)(16),Object(p.a)(e._destroyed)).subscribe((function(){return e.resizeToFitContent(!0)}))})))}},{key:"ngOnDestroy",value:function(){this._destroyed.next(),this._destroyed.complete()}},{key:"_cacheTextareaLineHeight",value:function(){if(!this._cachedLineHeight){var e=this._textareaElement.cloneNode(!1);e.rows=1,e.style.position="absolute",e.style.visibility="hidden",e.style.border="none",e.style.padding="0",e.style.height="",e.style.minHeight="",e.style.maxHeight="",e.style.overflow="hidden",this._textareaElement.parentNode.appendChild(e),this._cachedLineHeight=e.clientHeight,this._textareaElement.parentNode.removeChild(e),this._setMinHeight(),this._setMaxHeight()}}},{key:"ngDoCheck",value:function(){this._platform.isBrowser&&this.resizeToFitContent()}},{key:"resizeToFitContent",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._enabled&&(this._cacheTextareaLineHeight(),this._cachedLineHeight)){var n=this._elementRef.nativeElement,i=n.value;if(t||this._minRows!==this._previousMinRows||i!==this._previousValue){var o=n.placeholder;n.classList.add("cdk-textarea-autosize-measuring"),n.placeholder="",n.style.height="".concat(n.scrollHeight-4,"px"),n.classList.remove("cdk-textarea-autosize-measuring"),n.placeholder=o,this._ngZone.runOutsideAngular((function(){"undefined"!=typeof requestAnimationFrame?requestAnimationFrame((function(){return e._scrollToCaretPosition(n)})):setTimeout((function(){return e._scrollToCaretPosition(n)}))})),this._previousValue=i,this._previousMinRows=this._minRows}}}},{key:"reset",value:function(){void 0!==this._initialHeight&&(this._textareaElement.style.height=this._initialHeight)}},{key:"_noopInputHandler",value:function(){}},{key:"_getDocument",value:function(){return this._document||document}},{key:"_getWindow",value:function(){return this._getDocument().defaultView||window}},{key:"_scrollToCaretPosition",value:function(e){var t=e.selectionStart,n=e.selectionEnd,i=this._getDocument();this._destroyed.isStopped||i.activeElement!==e||e.setSelectionRange(t,n)}},{key:"minRows",get:function(){return this._minRows},set:function(e){this._minRows=Object(d.e)(e),this._setMinHeight()}},{key:"maxRows",get:function(){return this._maxRows},set:function(e){this._maxRows=Object(d.e)(e),this._setMaxHeight()}},{key:"enabled",get:function(){return this._enabled},set:function(e){e=Object(d.b)(e),this._enabled!==e&&((this._enabled=e)?this.resizeToFitContent(!0):this.reset())}}]),e}()).\u0275fac=function(e){return new(e||h)(u.Pb(u.l),u.Pb(b.a),u.Pb(u.z),u.Pb(i.d,8))},h.\u0275dir=u.Kb({type:h,selectors:[["textarea","cdkTextareaAutosize",""]],hostAttrs:["rows","1",1,"cdk-textarea-autosize"],hostBindings:function(e,t){1&e&&u.gc("input",(function(){return t._noopInputHandler()}))},inputs:{minRows:["cdkAutosizeMinRows","minRows"],maxRows:["cdkAutosizeMaxRows","maxRows"],enabled:["cdkTextareaAutosize","enabled"]},exportAs:["cdkTextareaAutosize"]}),h),D=((m=function e(){_classCallCheck(this,e)}).\u0275mod=u.Nb({type:m}),m.\u0275inj=u.Mb({factory:function(e){return new(e||m)},imports:[[b.b]]}),m),F=n("kmnG"),A=new u.q("MAT_INPUT_VALUE_ACCESSOR"),M=["button","checkbox","file","hidden","image","radio","range","reset","submit"],O=0,L=Object(l.p)((function e(t,n,i,o){_classCallCheck(this,e),this._defaultErrorStateMatcher=t,this._parentForm=n,this._parentFormGroup=i,this.ngControl=o})),G=((k=function(e){function t(e,n,i,o,c,r,s,a,u){var l;_classCallCheck(this,t),(l=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,r,o,c,i)))._elementRef=e,l._platform=n,l.ngControl=i,l._autofillMonitor=a,l._uid="mat-input-".concat(O++),l._isServer=!1,l._isNativeSelect=!1,l.focused=!1,l.stateChanges=new f.a,l.controlType="mat-input",l.autofilled=!1,l._disabled=!1,l._required=!1,l._type="text",l._readonly=!1,l._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter((function(e){return Object(b.e)().has(e)}));var d=l._elementRef.nativeElement;return l._inputValueAccessor=s||d,l._previousNativeValue=l.value,l.id=l.id,n.IOS&&u.runOutsideAngular((function(){e.nativeElement.addEventListener("keyup",(function(e){var t=e.target;t.value||t.selectionStart||t.selectionEnd||(t.setSelectionRange(1,1),t.setSelectionRange(0,0))}))})),l._isServer=!l._platform.isBrowser,l._isNativeSelect="select"===d.nodeName.toLowerCase(),l._isNativeSelect&&(l.controlType=d.multiple?"mat-native-select-multiple":"mat-native-select"),l}return _inherits(t,e),_createClass(t,[{key:"ngOnInit",value:function(){var e=this;this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe((function(t){e.autofilled=t.isAutofilled,e.stateChanges.next()}))}},{key:"ngOnChanges",value:function(){this.stateChanges.next()}},{key:"ngOnDestroy",value:function(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}},{key:"ngDoCheck",value:function(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue()}},{key:"focus",value:function(e){this._elementRef.nativeElement.focus(e)}},{key:"_focusChanged",value:function(e){e===this.focused||this.readonly&&e||(this.focused=e,this.stateChanges.next())}},{key:"_onInput",value:function(){}},{key:"_isTextarea",value:function(){return"textarea"===this._elementRef.nativeElement.nodeName.toLowerCase()}},{key:"_dirtyCheckNativeValue",value:function(){var e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}},{key:"_validateType",value:function(){if(M.indexOf(this._type)>-1)throw Error('Input type "'.concat(this._type,"\" isn't supported by matInput."))}},{key:"_isNeverEmpty",value:function(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}},{key:"_isBadInput",value:function(){var e=this._elementRef.nativeElement.validity;return e&&e.badInput}},{key:"setDescribedByIds",value:function(e){this._ariaDescribedby=e.join(" ")}},{key:"onContainerClick",value:function(){this.focused||this.focus()}},{key:"disabled",get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(e){this._disabled=Object(d.b)(e),this.focused&&(this.focused=!1,this.stateChanges.next())}},{key:"id",get:function(){return this._id},set:function(e){this._id=e||this._uid}},{key:"required",get:function(){return this._required},set:function(e){this._required=Object(d.b)(e)}},{key:"type",get:function(){return this._type},set:function(e){this._type=e||"text",this._validateType(),!this._isTextarea()&&Object(b.e)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}},{key:"value",get:function(){return this._inputValueAccessor.value},set:function(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}},{key:"readonly",get:function(){return this._readonly},set:function(e){this._readonly=Object(d.b)(e)}},{key:"empty",get:function(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}},{key:"shouldLabelFloat",get:function(){if(this._isNativeSelect){var e=this._elementRef.nativeElement,t=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&t&&t.label)}return this.focused||!this.empty}}]),t}(L)).\u0275fac=function(e){return new(e||k)(u.Pb(u.l),u.Pb(b.a),u.Pb(c.h,10),u.Pb(c.k,8),u.Pb(c.d,8),u.Pb(l.a),u.Pb(A,10),u.Pb(P),u.Pb(u.z))},k.\u0275dir=u.Kb({type:k,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:10,hostBindings:function(e,t){1&e&&u.gc("blur",(function(){return t._focusChanged(!1)}))("focus",(function(){return t._focusChanged(!0)}))("input",(function(){return t._onInput()})),2&e&&(u.Xb("disabled",t.disabled)("required",t.required),u.Db("id",t.id)("placeholder",t.placeholder)("readonly",t.readonly&&!t._isNativeSelect||null)("aria-describedby",t._ariaDescribedby||null)("aria-invalid",t.errorState)("aria-required",t.required.toString()),u.Hb("mat-input-server",t._isServer))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher"},exportAs:["matInput"],features:[u.Bb([{provide:F.b,useExisting:k}]),u.zb,u.Ab]}),k),V=((y=function e(){_classCallCheck(this,e)}).\u0275mod=u.Nb({type:y}),y.\u0275inj=u.Mb({factory:function(e){return new(e||y)},providers:[l.a],imports:[[D,F.c],D,F.c]}),y),E=n("tyNb"),Q=n("mrSG"),R=n("ZY/4"),q=n("Un6b"),z=n("y8gV"),$=n("AytR"),j=n("2Vo4"),N=n("tk/3"),H=((C=function(){function e(t){_classCallCheck(this,e),this.http=t,this.checkedCourses=new j.a([0]),this.sharedCheckedCourses=this.checkedCourses.asObservable(),this.editCourses=new j.a([{}]),this.sharedEditCourses=this.editCourses.asObservable()}return _createClass(e,[{key:"nextCheckedCourses",value:function(e){this.checkedCourses.next(e)}},{key:"nextEditCourses",value:function(e){this.editCourses.next(e)}},{key:"createAnnouncement",value:function(e,t,n,i,o){return this.http.post("".concat($.a.apiURL,"/announcements"),{user:e,content:t,created:n,changed:i,user_id:o})}},{key:"fetchAnnouncements",value:function(){return this.http.get("".concat($.a.apiURL,"/announcements"))}},{key:"fetchAnnouncementById",value:function(e){return this.http.get("".concat($.a.apiURL,"/announcements/a/").concat(e))}},{key:"fetchAnnouncementsByCourseId",value:function(e){return this.http.get("".concat($.a.apiURL,"/announcements/c/").concat(e))}},{key:"updateAnnouncement",value:function(e,t,n){return this.http.put("".concat($.a.apiURL,"/announcements/").concat(e),{id:e,content:t,changed:n})}},{key:"deleteAnnouncement",value:function(e){return this.http.delete("".concat($.a.apiURL,"/announcements/").concat(e))}}]),e}()).\u0275fac=function(e){return new(e||C)(u.cc(N.b))},C.\u0275prov=u.Lb({token:C,factory:C.\u0275fac,providedIn:"root"}),C);function B(e,t){if(1&e){var n=u.Vb();u.Ub(0,"button",20),u.gc("click",(function(){return u.yc(n),u.ic(4).toggleDropCourse()})),u.Ic(1,"Toggle Course Drop"),u.Tb()}}var J=function(e){return{hideInfo:e}};function K(e,t){if(1&e){var n=u.Vb();u.Ub(0,"button",21),u.gc("click",(function(){return u.yc(n),u.ic(4).createAnnouncement()})),u.Ic(1,"Create Announcement "),u.Tb()}if(2&e){var i=u.ic(4);u.oc("disabled",i.checkedCourses.length<=0)("ngClass",u.sc(2,J,i.checkedCourses.length<=0))}}function Y(e,t){if(1&e&&(u.Ub(0,"button",22),u.Ic(1," add announcement info "),u.Tb()),2&e){var n=u.ic(4);u.oc("ngClass",u.sc(2,J,n.checkedCourses.length>0))("disabled",n.checkedCourses.length>0)}}function Z(e,t){1&e&&(u.Ub(0,"a",23),u.Ic(1,"Manage Announcements "),u.Tb())}function X(e,t){if(1&e&&u.Qb(0,"input",24),2&e){var n=u.ic(2).index,i=u.ic(2);u.oc("checked",i.isChecked[n])}}function W(e,t){if(1&e){var n=u.Vb();u.Ub(0,"button",25),u.gc("click",(function(){u.yc(n);var e=u.ic(2).$implicit;return u.ic(2).dropCourse(e.course_id)})),u.Ic(1,"Drop Course"),u.Tb()}}var ee=function(e){return{"checked-color":e}},te=function(e){return[e,"modules"]};function ne(e,t){if(1&e){var n=u.Vb();u.Sb(0),u.Gc(1,B,2,0,"button",7),u.Gc(2,K,2,4,"button",8),u.Gc(3,Y,2,4,"button",9),u.Gc(4,Z,2,0,"a",10),u.Ub(5,"div",11),u.Ub(6,"div",12),u.gc("click",(function(){u.yc(n);var e=u.ic(),t=e.index,i=e.$implicit;return u.ic(2).checkBox(t,i.course_id)})),u.Ub(7,"div",13),u.Gc(8,X,1,1,"input",14),u.Ub(9,"h5",15),u.Ic(10),u.Tb(),u.Ub(11,"p",16),u.Ic(12),u.Tb(),u.Ub(13,"div",17),u.Ub(14,"a",18),u.Ic(15,"Go to Course"),u.Tb(),u.Gc(16,W,2,0,"button",19),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Rb()}if(2&e){var i=u.ic(),o=i.index,c=i.$implicit,r=u.ic(2);u.Cb(1),u.oc("ngIf",0==o),u.Cb(1),u.oc("ngIf",0==o&&r.isAdmin),u.Cb(1),u.oc("ngIf",0==o&&r.isAdmin),u.Cb(1),u.oc("ngIf",0==o&&r.isAdmin),u.Cb(2),u.Eb(u.sc(11,ee,r.isChecked[o])),u.Cb(2),u.oc("ngIf",r.isAdmin),u.Cb(2),u.Jc(c.name),u.Cb(2),u.Jc(c.description),u.Cb(2),u.oc("routerLink",u.sc(13,te,c.course_id)),u.Cb(2),u.oc("ngIf",r.courseDrop)}}function ie(e,t){if(1&e&&(u.Sb(0),u.Gc(1,ne,17,15,"ng-container",6),u.Rb()),2&e){var n=t.$implicit;u.Cb(1),u.oc("ngIf","enrolled"==n.enrollment_status)}}function oe(e,t){if(1&e&&(u.Sb(0),u.Ub(1,"div",4),u.Gc(2,ie,2,1,"ng-container",5),u.jc(3,"async"),u.Tb(),u.Rb()),2&e){var n=u.ic();u.Cb(2),u.oc("ngForOf",u.kc(3,1,n.listCourses))}}function ce(e,t){1&e&&(u.Ub(0,"p"),u.Ic(1,"You have no courses!"),u.Tb(),u.Ub(2,"label"),u.Ic(3,"Enroll in courses"),u.Tb(),u.Ub(4,"button",26),u.Ic(5,"Enroll"),u.Tb())}var re,se,ae=((re=function(){function e(t,n,i,o,c){_classCallCheck(this,e),this.studentCourseService=t,this.courseService=n,this.authService=i,this.router=o,this.announcementService=c,this.courses=[],this.courseDrop=!1,this.checkedCourses=[],this.isChecked=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.currentUser=this.authService.currentUserValue,this.currentUser&&(this.isAdmin="admin"==this.currentUser.role,this.studentId=this.currentUser.id,this.listCourses=this.studentCourseService.getCoursesByStudentId(this.studentId),console.log(this.studentId))}},{key:"fetchStudentCourses",value:function(e){var t=this;return new Promise((function(n,i){t.studentCourseService.getCoursesByStudentId(e).subscribe((function(e){for(var o=0;o<e.length;o++)e[o]?("enrolled"==e[o].enrollment_status?(t.courses.push(e[o]),console.log("Enrolled"),console.log(e[o])):(console.log("Not enrolled"),console.log(e[o])),o==e.length&&(console.log("got data"),n(!0))):(console.log("got no data"),i(!1))}),(function(e){i(e),console.log("error: "+e)}))})).then((function(e){return console.log("resthen: "+e),!0})).catch((function(e){return console.log("ERROR: "+e),!1}))}},{key:"asyncFetchStudentCourses",value:function(e){return Object(Q.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("calling"),t.next=3,this.fetchStudentCourses(e);case 3:this.hasCourses=t.sent,console.log("resasync: "+this.hasCourses);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"dropCourse",value:function(e){var t=this;this.courseService.getCourseById(e).subscribe((function(e){t.course=e})),confirm("Drop the course? Are you sure?")&&this.studentCourseService.declineStudentEnrollment(this.studentId,e).subscribe((function(){alert("Dropped the course"),t.courseService.updateCourseSeats(e,t.course.seats+1).subscribe((function(){console.log("incremented seats by 1: "+(t.course.seats+1))}))}))}},{key:"toggleDropCourse",value:function(){this.courseDrop=0==this.courseDrop}},{key:"createAnnouncement",value:function(){this.announcementService.nextCheckedCourses(this.checkedCourses),this.router.navigate(["/courses/create-announcement"])}},{key:"checkBox",value:function(e,t){var n=this;"admin"==this.currentUser.role&&(this.isChecked[e]?(this.isChecked[e]=!1,this.checkedCourses.forEach((function(e,i,o){e==t&&(console.log(t+" "+i),n.checkedCourses.splice(i,1))}))):(this.isChecked[e]=!0,console.log("courseId: "+t+" has been checked"),this.checkedCourses.push(t)),console.log(this.isChecked[e]))}}]),e}()).\u0275fac=function(e){return new(e||re)(u.Pb(R.a),u.Pb(q.a),u.Pb(z.a),u.Pb(E.c),u.Pb(H))},re.\u0275cmp=u.Jb({type:re,selectors:[["app-dashboard"]],decls:7,vars:4,consts:[[1,"center-form",2,"position","relative"],[4,"ngIf","ngIfElse"],["class","center-form"],["elseBlock",""],[1,"row"],[4,"ngFor","ngForOf"],[4,"ngIf"],["type","button","class","btn btn-danger btn-sm center-form","style","position: absolute; top: 5px; left: 20px;",3,"click",4,"ngIf"],["type","button","class","btn btn-success btn-sm center-form","style","position: absolute; top: 5px; left: 170px;","placement","bottom","ngbTooltip","Click on courses (cards) to broadcast announcements to",3,"disabled","ngClass","click",4,"ngIf"],["placement","bottom","ngbTooltip","Click on courses (cards) to broadcast announcement to","class","btn btn-success btn-sm center-form","style","position: absolute; top: 5px; left: 170px;","triggers","click:blur",3,"ngClass","disabled",4,"ngIf"],["routerLink","/courses/view-created-announcements","class","btn btn-info btn-sm center-form","style","position: absolute; top: 5px; left: 335px;",4,"ngIf"],[1,"col"],[1,"card",2,"max-width","18rem",3,"click"],[1,"card-body"],["type","checkbox",3,"checked",4,"ngIf"],[1,"card-title","text-wrap",2,"word-wrap","break-word"],[1,"card-text","text-wrap",2,"word-wrap","break-word"],[1,"flex-container"],[1,"btn","btn-primary","flex-item",3,"routerLink"],["type","button","class","btn btn-danger btn-sm flex-item",3,"click",4,"ngIf"],["type","button",1,"btn","btn-danger","btn-sm","center-form",2,"position","absolute","top","5px","left","20px",3,"click"],["type","button","placement","bottom","ngbTooltip","Click on courses (cards) to broadcast announcements to",1,"btn","btn-success","btn-sm","center-form",2,"position","absolute","top","5px","left","170px",3,"disabled","ngClass","click"],["placement","bottom","ngbTooltip","Click on courses (cards) to broadcast announcement to","triggers","click:blur",1,"btn","btn-success","btn-sm","center-form",2,"position","absolute","top","5px","left","170px",3,"ngClass","disabled"],["routerLink","/courses/view-created-announcements",1,"btn","btn-info","btn-sm","center-form",2,"position","absolute","top","5px","left","335px"],["type","checkbox",3,"checked"],["type","button",1,"btn","btn-danger","btn-sm","flex-item",3,"click"],["routerLink","../course-library",1,"btn","btn-primary",2,"margin-left","10px"]],template:function(e,t){if(1&e&&(u.Ub(0,"div",0),u.Ub(1,"h2"),u.Ic(2,"Dashboard"),u.Tb(),u.Gc(3,oe,4,3,"ng-container",1),u.jc(4,"async"),u.Gc(5,ce,6,0,"ng-template",2,3,u.Hc),u.Tb()),2&e){var n=u.wc(6);u.Cb(3),u.oc("ngIf",u.kc(4,2,t.listCourses))("ngIfElse",n)}},directives:[i.n,i.m,E.f,o.f,i.l,E.d],pipes:[i.b],styles:[".flex-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.flex-item[_ngcontent-%COMP%]{align-self:center;margin:10px}.card[_ngcontent-%COMP%]{transition:.7s;box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19)}.card[_ngcontent-%COMP%]:hover{transition:.7s;box-shadow:0 4px 8px 0 rgba(0,0,0,.8),0 6px 20px 0 rgba(0,0,0,.8)}input.larger[_ngcontent-%COMP%]{width:50px;height:50px}.checked-color[_ngcontent-%COMP%]{background-color:#90ee90}.hideInfo[_ngcontent-%COMP%]{display:none;z-index:-1}"]}),re),ue=n("+z1p"),le=n("rptU"),de=function(e){return["/courses",e]},be=((se=function(){function e(t){_classCallCheck(this,e),this.route=t,this.sidebarIsOpen=!0}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.courseId=t.id})),document.getElementById("mySidenav").style.width="250px",document.getElementById("main").style.marginLeft="250px",document.getElementById("mySidenav").style.display="block"}}]),e}()).\u0275fac=function(e){return new(e||se)(u.Pb(E.a))},se.\u0275cmp=u.Jb({type:se,selectors:[["app-sidebar"]],decls:9,vars:6,consts:[["id","mySidenav",1,"sidenav"],["routerLinkActive","active",1,"nav-link",3,"routerLink"]],template:function(e,t){1&e&&(u.Ub(0,"div",0),u.Ub(1,"a",1),u.Ic(2,"Home"),u.Tb(),u.Ub(3,"a",1),u.Ic(4,"Announcements"),u.Tb(),u.Ub(5,"a",1),u.Ic(6,"Leaderboard"),u.Tb(),u.Ub(7,"a",1),u.Ic(8,"Modules"),u.Tb(),u.Tb()),2&e&&(u.Cb(1),u.oc("routerLink",u.sc(4,de,t.courseId)),u.Cb(2),u.qc("routerLink","/courses/",t.courseId,"/announcements"),u.Cb(2),u.qc("routerLink","/courses/",t.courseId,"/leaderboard"),u.Cb(2),u.qc("routerLink","/courses/",t.courseId,"/modules"))},directives:[E.f,E.e],styles:[".sidenav[_ngcontent-%COMP%]{height:100%;width:0;position:absolute;z-index:0;top:55px;left:0;background-color:#425efd;overflow-x:hidden;transition:.5s}.dropdown-btn[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px;text-decoration:none;font-size:25px;color:#000;display:block}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, dropdown-btn[_ngcontent-%COMP%]:hover{background-color:#2d3d97;color:#fff}#main[_ngcontent-%COMP%]{padding:16px}.dropdown-container[_ngcontent-%COMP%]{display:none;background-color:#262626;padding-left:8px}.fa-caret-down[_ngcontent-%COMP%]{float:right;padding-right:8px}@media screen and (max-height:450px){.sidenav[_ngcontent-%COMP%]{padding-top:15px}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px}}"]}),se);function fe(e,t){if(1&e&&(u.Ub(0,"a",4),u.Ic(1,"Edit"),u.Tb()),2&e){var n=u.ic();u.qc("routerLink","/courses/",n.courseId,"/edit-home")}}function pe(e,t){if(1&e&&(u.Sb(0),u.Qb(1,"div",5),u.Rb()),2&e){var n=t.ngIf;u.Cb(1),u.oc("innerHTML",n.content,u.zc)}}var ve,me,he,ge,ye,ke=((ye=function(){function e(t,n,i){var o=this;_classCallCheck(this,e),this.courseDetailsService=t,this.route=n,this.authenticationService=i,this.Editor=ue,this.isCleared=!1,this.authenticationService.currentUser.subscribe((function(e){return o.currentUser=e}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.isAdmin="admin"===this.currentUser.role,this.isInstructor="instructor"===this.currentUser.role,this.isStudent="student"===this.currentUser.role,this.route.params.subscribe((function(t){e.courseId=t.id})),this.courseContent=this.courseDetailsService.getCourseDetails(this.courseId),this.courseDetailsService.getCourseDetails(this.courseId).subscribe((function(t){e.courseDetails=t}))}},{key:"onReady",value:function(e){e.setData("")}},{key:"onChange",value:function(e){var t=e.editor;this.editorData=t.getData(),this.isCleared&&(t.setData(""),this.isCleared=!1),console.log(this.editorData)}},{key:"onSubmit",value:function(e){this.courseDetailsService.updateCourseDetails(e,this.editorData).subscribe((function(){alert("Submitted Content")}))}},{key:"onClearButtonClicked",value:function(e){var t=this;confirm("Clear content; Are you sure?")&&this.courseDetailsService.clearCourseDetails(e).subscribe((function(){alert("Cleared Content"),t.isCleared=!0}))}}]),e}()).\u0275fac=function(e){return new(e||ye)(u.Pb(le.a),u.Pb(E.a),u.Pb(z.a))},ye.\u0275cmp=u.Jb({type:ye,selectors:[["app-home"]],decls:6,vars:4,consts:[["id","main"],[1,"flexbox-row"],["class","btn btn-primary",3,"routerLink",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-primary",3,"routerLink"],[1,"custom-font","clamp-words",2,"margin-top","30px",3,"innerHTML"]],template:function(e,t){1&e&&(u.Qb(0,"app-sidebar"),u.Ub(1,"div",0),u.Ub(2,"div",1),u.Gc(3,fe,2,1,"a",2),u.Gc(4,pe,2,1,"ng-container",3),u.jc(5,"async"),u.Tb(),u.Tb()),2&e&&(u.Cb(3),u.oc("ngIf",t.isAdmin||t.isInstructor),u.Cb(1),u.oc("ngIf",u.kc(5,2,t.courseContent)))},directives:[be,i.n,E.f],pipes:[i.b],styles:[".flexbox-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;align-items:center;position:relative;margin-top:30px}"]}),ye),Ce=((ge=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"addModule",value:function(e,t,n,i){return this.http.post("".concat($.a.apiURL,"/modules/").concat(e),{number:t,title:n,lockedUntil:i})}},{key:"getModuleById",value:function(e){return this.http.get("".concat($.a.apiURL,"/modules/m/").concat(e))}},{key:"getModulesByCourseId",value:function(e){return this.http.get("".concat($.a.apiURL,"/modules/c/").concat(e))}},{key:"updateModule",value:function(e,t,n,i){return this.http.put("".concat($.a.apiURL,"/modules/").concat(e),{number:t,title:n,lockedUntil:i})}},{key:"deleteModule",value:function(e){return this.http.delete("".concat($.a.apiURL,"/modules/").concat(e))}}]),e}()).\u0275fac=function(e){return new(e||ge)(u.cc(N.b))},ge.\u0275prov=u.Lb({token:ge,factory:ge.\u0275fac,providedIn:"root"}),ge),Ie=((he=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"addVideo",value:function(e,t){return this.http.post("".concat($.a.apiURL,"/videos"),{link:e,module_id:t})}},{key:"fetchVideos",value:function(e){return this.http.get("".concat($.a.apiURL,"/videos/").concat(e))}},{key:"updateVideo",value:function(e,t){return this.http.put("".concat($.a.apiURL,"/videos/").concat(t),{link:e})}},{key:"deleteVideo",value:function(e){return this.http.delete("".concat($.a.apiURL,"/videos/").concat(e))}}]),e}()).\u0275fac=function(e){return new(e||he)(u.cc(N.b))},he.\u0275prov=u.Lb({token:he,factory:he.\u0275fac,providedIn:"root"}),he),Ue=((me=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"addPDF",value:function(e){return this.http.post("".concat($.a.apiURL,"/pdfs"),e)}},{key:"fetchPDFs",value:function(e){return this.http.get("".concat($.a.apiURL,"/pdfs/").concat(e))}},{key:"updatePDF",value:function(e,t){return this.http.put("".concat($.a.apiURL,"/pdfs/").concat(e),t)}},{key:"deletePDF",value:function(e){return this.http.delete("".concat($.a.apiURL,"/pdfs/").concat(e))}}]),e}()).\u0275fac=function(e){return new(e||me)(u.cc(N.b))},me.\u0275prov=u.Lb({token:me,factory:me.\u0275fac,providedIn:"root"}),me),xe=((ve=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"addSurvey",value:function(e,t,n){return this.http.post("".concat($.a.apiURL,"/surveys"),{name:e,link:t,module_id:n})}},{key:"fetchSurveys",value:function(e){return this.http.get("".concat($.a.apiURL,"/surveys/").concat(e))}},{key:"updateSurvey",value:function(e,t,n){return this.http.put("".concat($.a.apiURL,"/surveys/").concat(n),{name:e,link:t})}},{key:"deleteSurvey",value:function(e){return this.http.delete("".concat($.a.apiURL,"/surveys/").concat(e))}}]),e}()).\u0275fac=function(e){return new(e||ve)(u.cc(N.b))},ve.\u0275prov=u.Lb({token:ve,factory:ve.\u0275fac,providedIn:"root"}),ve),Te=n("jhN1");function _e(e,t){if(1&e){var n=u.Vb();u.Ub(0,"div"),u.Ub(1,"button",8),u.gc("click",(function(){u.yc(n);var e=u.ic();return e.createModule(e.courseId)})),u.Qb(2,"i",9),u.Ic(3," Create Module"),u.Tb(),u.Tb()}}function we(e,t){if(1&e&&(u.Ub(0,"span",24),u.Ic(1),u.Tb()),2&e){var n=u.ic(2).$implicit;u.Cb(1),u.Kc("locked until: ",n.lockedUntil,"")}}function Pe(e,t){if(1&e&&(u.Ub(0,"span",26),u.Ic(1),u.Tb()),2&e){var n=u.ic(3).$implicit;u.Cb(1),u.Kc("locked until: ",n.lockedUntil,"")}}function Se(e,t){if(1&e&&u.Gc(0,Pe,2,1,"span",25),2&e){var n=u.ic(3);u.oc("ngIf",n.isAdmin||n.isInstructor)}}function De(e,t){1&e&&(u.Ub(0,"div"),u.Ic(1,"Link is required"),u.Tb())}function Fe(e,t){if(1&e&&(u.Ub(0,"div",45),u.Gc(1,De,2,0,"div",6),u.Tb()),2&e){var n=u.ic(4);u.Cb(1),u.oc("ngIf",n.v.link.errors.required)}}function Ae(e,t){1&e&&(u.Ub(0,"div",46),u.Ic(1," Valid youtube link "),u.Tb())}function Me(e,t){1&e&&(u.Ub(0,"div",47),u.Ic(1," Invalid Youtube Link "),u.Tb())}function Oe(e,t){if(1&e){var n=u.Vb();u.Ub(0,"button",48),u.gc("click",(function(){u.yc(n),u.ic();var e=u.wc(23),t=u.ic(2).$implicit;return u.ic().addVideo(e.value,t.module_id)})),u.Qb(1,"i",9),u.Ic(2," Add Video"),u.Tb()}}function Le(e,t){if(1&e&&(u.Ub(0,"div",49),u.Ic(1),u.Tb()),2&e){var n=u.ic(4);u.Cb(1),u.Jc(n.error)}}var Ge=function(e,t){return{"is-invalid":e,"is-valid":t}};function Ve(e,t){if(1&e){var n=u.Vb();u.Ub(0,"div",27),u.Ub(1,"h4",28),u.Ic(2,"Add Youtube Video"),u.Tb(),u.Ub(3,"button",29),u.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),u.Ub(4,"span",30),u.Ic(5,"\xd7"),u.Tb(),u.Tb(),u.Tb(),u.Ub(6,"div",31),u.Ub(7,"form",32),u.Ub(8,"div",33),u.Ub(9,"p"),u.Ic(10,"Valid youtube links are of the formats:"),u.Qb(11,"br"),u.Ic(12," https://youtu.be/*********** "),u.Qb(13,"br"),u.Ic(14,"And "),u.Qb(15,"br"),u.Ic(16,"https://www.youtube.com/watch?v=***********"),u.Tb(),u.Tb(),u.Ub(17,"div",34),u.Ub(18,"label",35),u.Ub(19,"span",26),u.Ic(20,"*"),u.Tb(),u.Ic(21,"Link"),u.Tb(),u.Ub(22,"input",36,37),u.gc("keyup",(function(e){return u.yc(n),u.ic(3).handleValidLink(e)})),u.Tb(),u.Gc(24,Fe,2,1,"div",38),u.Gc(25,Ae,2,0,"div",39),u.Tb(),u.Gc(26,Me,2,0,"div",40),u.Gc(27,Oe,3,0,"button",41),u.Gc(28,Le,2,1,"div",42),u.Tb(),u.Tb(),u.Ub(29,"div",43),u.Ub(30,"button",44),u.gc("click",(function(){return t.$implicit.close("Close click")})),u.Ic(31,"Close"),u.Tb(),u.Tb()}if(2&e){var i=u.ic(3);u.Cb(7),u.oc("formGroup",i.videoForm),u.Cb(15),u.oc("ngClass",u.tc(7,Ge,i.submitted&&i.v.link.errors,i.validLink)),u.Cb(2),u.oc("ngIf",i.submitted&&i.v.link.errors),u.Cb(1),u.oc("ngIf",i.validLink),u.Cb(1),u.oc("ngIf",i.invalidLink&&!i.validLink),u.Cb(1),u.oc("ngIf",i.isAdmin||i.isInstructor),u.Cb(1),u.oc("ngIf",i.error)}}function Ee(e,t){if(1&e){var n=u.Vb();u.Ub(0,"button",8),u.gc("click",(function(){u.yc(n),u.ic();var e=u.wc(6);return u.ic(2).open(e)})),u.Ic(1,"Add Video"),u.Tb()}}function Qe(e,t){1&e&&(u.Ub(0,"div"),u.Ic(1,"Pdf is required"),u.Tb())}function Re(e,t){if(1&e&&(u.Ub(0,"div",45),u.Gc(1,Qe,2,0,"div",6),u.Tb()),2&e){var n=u.ic(4);u.Cb(1),u.oc("ngIf",n.p.pdf.errors.required)}}var qe=function(e){return{"is-invalid":e}};function ze(e,t){if(1&e){var n=u.Vb();u.Ub(0,"div",27),u.Ub(1,"h4",28),u.Ic(2,"Add PDF File"),u.Tb(),u.Ub(3,"button",29),u.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),u.Ub(4,"span",30),u.Ic(5,"\xd7"),u.Tb(),u.Tb(),u.Tb(),u.Ub(6,"div",31),u.Ub(7,"form",50),u.gc("ngSubmit",(function(){u.yc(n);var e=u.ic(2).$implicit;return u.ic().addPdf(e.module_id)})),u.Ub(8,"div",34),u.Ub(9,"label",51),u.Ub(10,"span",26),u.Ic(11,"*"),u.Tb(),u.Ic(12,"Select a PDF File"),u.Tb(),u.Ub(13,"input",52,53),u.gc("change",(function(e){return u.yc(n),u.ic(3).handleFileInput(e)})),u.Tb(),u.Gc(15,Re,2,1,"div",38),u.Tb(),u.Ub(16,"button",54),u.Qb(17,"i",9),u.Ic(18," Add PDF"),u.Tb(),u.Tb(),u.Tb(),u.Ub(19,"div",43),u.Ub(20,"button",44),u.gc("click",(function(){return t.$implicit.close("Close click")})),u.Ic(21,"Close"),u.Tb(),u.Tb()}if(2&e){var i=u.ic(3);u.Cb(7),u.oc("formGroup",i.pdfForm),u.Cb(6),u.oc("ngClass",u.sc(3,qe,i.submitted&&i.p.pdf.errors)),u.Cb(2),u.oc("ngIf",i.submitted&&i.p.pdf.errors)}}function $e(e,t){if(1&e){var n=u.Vb();u.Ub(0,"button",8),u.gc("click",(function(){u.yc(n),u.ic();var e=u.wc(9);return u.ic(2).open(e)})),u.Ic(1,"Add PDF"),u.Tb()}}function je(e,t){1&e&&(u.Ub(0,"div"),u.Ic(1,"Name is required"),u.Tb())}function Ne(e,t){if(1&e&&(u.Ub(0,"div",45),u.Gc(1,je,2,0,"div",6),u.Tb()),2&e){var n=u.ic(4);u.Cb(1),u.oc("ngIf",n.s.name.errors.required)}}function He(e,t){1&e&&(u.Ub(0,"div"),u.Ic(1,"Link is required"),u.Tb())}function Be(e,t){if(1&e&&(u.Ub(0,"div",45),u.Gc(1,He,2,0,"div",6),u.Tb()),2&e){var n=u.ic(4);u.Cb(1),u.oc("ngIf",n.s.link.errors.required)}}function Je(e,t){1&e&&(u.Ub(0,"div",46),u.Ic(1," Valid Qualtrics link "),u.Tb())}function Ke(e,t){1&e&&(u.Ub(0,"div",47),u.Ic(1," Invalid Qualtrics Link "),u.Tb())}function Ye(e,t){if(1&e){var n=u.Vb();u.Ub(0,"button",48),u.gc("click",(function(){u.yc(n),u.ic();var e=u.wc(19),t=u.wc(27),i=u.ic(2).$implicit;return u.ic().addSurvey(e.value,t.value,i.module_id)})),u.Qb(1,"i",9),u.Ic(2," Add Quiz/Exam"),u.Tb()}}function Ze(e,t){if(1&e){var n=u.Vb();u.Ub(0,"div",27),u.Ub(1,"h4",28),u.Ic(2,"Add Qualtrics Quiz/Exam"),u.Tb(),u.Ub(3,"button",29),u.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),u.Ub(4,"span",30),u.Ic(5,"\xd7"),u.Tb(),u.Tb(),u.Tb(),u.Ub(6,"div",31),u.Ub(7,"form",32),u.Ub(8,"div",33),u.Ub(9,"p"),u.Ic(10,"Valid Qualtrics links are of the formats:"),u.Qb(11,"br"),u.Ic(12," https://fiu.qualtrics.com/jfe/form/******************"),u.Tb(),u.Tb(),u.Ub(13,"div",34),u.Ub(14,"label",55),u.Ub(15,"span",26),u.Ic(16,"*"),u.Tb(),u.Ic(17,"Name"),u.Tb(),u.Qb(18,"input",56,57),u.Gc(20,Ne,2,1,"div",38),u.Tb(),u.Ub(21,"div",34),u.Ub(22,"label",35),u.Ub(23,"span",26),u.Ic(24,"*"),u.Tb(),u.Ic(25,"Link"),u.Tb(),u.Ub(26,"input",58,37),u.gc("keyup",(function(e){return u.yc(n),u.ic(3).handleValidQuiz(e)})),u.Tb(),u.Gc(28,Be,2,1,"div",38),u.Gc(29,Je,2,0,"div",39),u.Tb(),u.Gc(30,Ke,2,0,"div",40),u.Gc(31,Ye,3,0,"button",41),u.Tb(),u.Tb(),u.Ub(32,"div",43),u.Ub(33,"button",44),u.gc("click",(function(){return t.$implicit.close("Close click")})),u.Ic(34,"Close"),u.Tb(),u.Tb()}if(2&e){var i=u.ic(3);u.Cb(7),u.oc("formGroup",i.surveyForm),u.Cb(11),u.oc("ngClass",u.sc(8,qe,i.submitted&&i.s.name.errors)),u.Cb(2),u.oc("ngIf",i.submitted&&i.s.name.errors),u.Cb(6),u.oc("ngClass",u.tc(10,Ge,i.submitted&&i.s.link.errors,i.validQuiz)),u.Cb(2),u.oc("ngIf",i.submitted&&i.s.link.errors),u.Cb(1),u.oc("ngIf",i.validQuiz),u.Cb(1),u.oc("ngIf",i.invalidQuiz&&!i.validQuiz),u.Cb(1),u.oc("ngIf",i.isAdmin||i.isInstructor)}}function Xe(e,t){if(1&e){var n=u.Vb();u.Ub(0,"button",8),u.gc("click",(function(){u.yc(n),u.ic();var e=u.wc(12);return u.ic(2).open(e)})),u.Ic(1,"Add Quiz/Exam"),u.Tb()}}function We(e,t){if(1&e){var n=u.Vb();u.Ub(0,"div",59),u.gc("click",(function(){u.yc(n);var e=u.ic(2).index;return u.ic().openModule(e)})),u.Qb(1,"i",60),u.Ub(2,"strong"),u.Ic(3),u.Tb(),u.Ic(4),u.Tb()}if(2&e){var i=u.ic(2).$implicit;u.Cb(3),u.Kc("Module ",i.module_number," "),u.Cb(1),u.Kc("| ",i.module_title," ")}}function et(e,t){if(1&e){var n=u.Vb();u.Ub(0,"div",59),u.gc("click",(function(){u.yc(n);var e=u.ic(2).index;return u.ic().openModule(e)})),u.Qb(1,"i",61),u.Ub(2,"strong"),u.Ic(3),u.Tb(),u.Ic(4),u.Tb()}if(2&e){var i=u.ic(2).$implicit;u.Cb(3),u.Kc("Module ",i.module_number," "),u.Cb(1),u.Kc("| ",i.module_title," ")}}function tt(e,t){if(1&e&&(u.Ub(0,"div",27),u.Ub(1,"h4",28),u.Ic(2),u.Tb(),u.Ub(3,"button",29),u.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),u.Ub(4,"span",30),u.Ic(5,"\xd7"),u.Tb(),u.Tb(),u.Tb(),u.Ub(6,"div",31),u.Ub(7,"div",74),u.Qb(8,"iframe",75),u.Tb(),u.Tb(),u.Ub(9,"div",43),u.Ub(10,"button",44),u.gc("click",(function(){return t.$implicit.close("Close click")})),u.Ic(11,"Close"),u.Tb(),u.Tb()),2&e){var n=u.ic(),i=n.index,o=n.$implicit,c=u.ic(5).$implicit;u.Cb(2),u.Lc("",c.module_title," - Pdf ",i+1,""),u.Cb(6),u.oc("src",o.pdf,u.Ac)}}function nt(e,t){if(1&e){var n=u.Vb();u.Ub(0,"button",76),u.gc("click",(function(){u.yc(n);var e=u.ic(),t=e.$implicit,i=e.index;return u.ic(6).deletePDF(t.pdf_id,i)})),u.Ic(1,"Delete Pdf"),u.Tb()}}function it(e,t){1&e&&(u.Ub(0,"div"),u.Ic(1,"Pdf is required"),u.Tb())}function ot(e,t){if(1&e&&(u.Ub(0,"div",45),u.Gc(1,it,2,0,"div",6),u.Tb()),2&e){var n=u.ic(8);u.Cb(1),u.oc("ngIf",n.pu.pdf.errors.required)}}function ct(e,t){if(1&e){var n=u.Vb();u.Ub(0,"div",27),u.Ub(1,"h4",28),u.Ic(2,"Edit PDF"),u.Tb(),u.Ub(3,"button",29),u.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),u.Ub(4,"span",30),u.Ic(5,"\xd7"),u.Tb(),u.Tb(),u.Tb(),u.Ub(6,"div",31),u.Ub(7,"form",50),u.gc("ngSubmit",(function(){u.yc(n);var e=u.ic().$implicit,t=u.ic(5).$implicit;return u.ic().updatePDF(e.pdf_id,t.module_id)})),u.Ub(8,"div",34),u.Ub(9,"label",51),u.Ub(10,"span",26),u.Ic(11,"*"),u.Tb(),u.Ic(12,"Select a PDF File"),u.Tb(),u.Ub(13,"input",52,53),u.gc("change",(function(e){return u.yc(n),u.ic(7).handleFileInputUpdate(e)})),u.Tb(),u.Gc(15,ot,2,1,"div",38),u.Tb(),u.Ub(16,"button",54),u.Qb(17,"i",9),u.Ic(18," Update PDF"),u.Tb(),u.Tb(),u.Tb(),u.Ub(19,"div",43),u.Ub(20,"button",44),u.gc("click",(function(){return t.$implicit.close("Close click")})),u.Ic(21,"Close"),u.Tb(),u.Tb()}if(2&e){var i=u.ic(7);u.Cb(7),u.oc("formGroup",i.updatePdfForm),u.Cb(6),u.oc("ngClass",u.sc(3,qe,i.submitted&&i.pu.pdf.errors)),u.Cb(2),u.oc("ngIf",i.submitted&&i.pu.pdf.errors)}}function rt(e,t){if(1&e){var n=u.Vb();u.Ub(0,"button",77),u.gc("click",(function(){u.yc(n);var e=u.ic().$implicit,t=u.wc(8);return u.ic(6).openUpdatePDF(t,e.rawPdf)})),u.Ic(1,"Edit PDF"),u.Tb()}}function st(e,t){if(1&e){var n=u.Vb();u.Ub(0,"div",67),u.Qb(1,"i",68),u.Gc(2,tt,12,3,"ng-template",null,69,u.Hc),u.Ub(4,"button",70),u.gc("click",(function(){u.yc(n);var e=u.wc(3);return u.ic(6).open(e)})),u.Ic(5),u.Tb(),u.Gc(6,nt,2,0,"button",71),u.Gc(7,ct,22,5,"ng-template",null,72,u.Hc),u.Gc(9,rt,2,0,"button",73),u.Tb()}if(2&e){var i=t.index,o=u.ic(6);u.Cb(5),u.Kc("View Pdf ",i+1,""),u.Cb(1),u.oc("ngIf",o.isAdmin||o.isInstructor),u.Cb(3),u.oc("ngIf",o.isAdmin||o.isInstructor)}}function at(e,t){if(1&e&&(u.Ub(0,"div"),u.Gc(1,st,10,3,"div",66),u.Tb()),2&e){var n=u.ic().$implicit;u.Cb(1),u.oc("ngForOf",n.value)}}function ut(e,t){if(1&e&&(u.Ub(0,"div",65),u.Gc(1,at,2,1,"div",6),u.Tb()),2&e){var n=t.$implicit,i=u.ic(3).$implicit;u.Cb(1),u.oc("ngIf",n.key==i.module_id)}}function lt(e,t){if(1&e&&(u.Ub(0,"div",27),u.Ub(1,"h4",28),u.Ic(2),u.Tb(),u.Ub(3,"button",29),u.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),u.Ub(4,"span",30),u.Ic(5,"\xd7"),u.Tb(),u.Tb(),u.Tb(),u.Ub(6,"div",31),u.Ub(7,"div",74),u.Qb(8,"iframe",84),u.Tb(),u.Tb(),u.Ub(9,"div",43),u.Ub(10,"button",44),u.gc("click",(function(){return t.$implicit.close("Close click")})),u.Ic(11,"Close"),u.Tb(),u.Tb()),2&e){var n=u.ic(),i=n.index,o=n.$implicit,c=u.ic(5).$implicit;u.Cb(2),u.Lc("",c.module_title," - Video ",i+1,""),u.Cb(6),u.oc("src",o.videoUrl,u.Ac)}}function dt(e,t){if(1&e){var n=u.Vb();u.Ub(0,"button",76),u.gc("click",(function(){u.yc(n);var e=u.ic(),t=e.$implicit,i=e.index;return u.ic(6).deleteVideo(t.video_id,i)})),u.Ic(1,"Delete Video"),u.Tb()}}function bt(e,t){1&e&&(u.Ub(0,"div"),u.Ic(1,"Link is required"),u.Tb())}function ft(e,t){if(1&e&&(u.Ub(0,"div",45),u.Gc(1,bt,2,0,"div",6),u.Tb()),2&e){var n=u.ic(8);u.Cb(1),u.oc("ngIf",n.vu.linkInput.errors.required)}}function pt(e,t){1&e&&(u.Ub(0,"div",46),u.Ic(1," Valid youtube link "),u.Tb())}function vt(e,t){1&e&&(u.Ub(0,"div",47),u.Ic(1," Invalid Youtube Link "),u.Tb())}function mt(e,t){if(1&e){var n=u.Vb();u.Ub(0,"div",27),u.Ub(1,"h4",28),u.Ic(2,"Edit Youtube Video"),u.Tb(),u.Ub(3,"button",29),u.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),u.Ub(4,"span",30),u.Ic(5,"\xd7"),u.Tb(),u.Tb(),u.Tb(),u.Ub(6,"div",31),u.Ub(7,"form",32),u.Ub(8,"div",33),u.Ub(9,"p"),u.Ic(10,"Valid youtube links are of the formats:"),u.Qb(11,"br"),u.Ic(12," https://youtu.be/*********** "),u.Qb(13,"br"),u.Ic(14,"And "),u.Qb(15,"br"),u.Ic(16,"https://www.youtube.com/watch?v=***********"),u.Tb(),u.Tb(),u.Ub(17,"div",34),u.Ub(18,"label",85),u.Ub(19,"span",26),u.Ic(20,"*"),u.Tb(),u.Ic(21,"New Link"),u.Tb(),u.Ub(22,"input",86,87),u.gc("keyup",(function(e){return u.yc(n),u.ic(7).handleValidLink(e)})),u.Tb(),u.Gc(24,ft,2,1,"div",38),u.Gc(25,pt,2,0,"div",39),u.Tb(),u.Gc(26,vt,2,0,"div",40),u.Ub(27,"button",48),u.gc("click",(function(){u.yc(n);var e=u.wc(23),t=u.ic().$implicit;return u.ic(6).updateVideo(e.value,t.video_id)})),u.Qb(28,"i",9),u.Ic(29," Update Video"),u.Tb(),u.Tb(),u.Tb(),u.Ub(30,"div",43),u.Ub(31,"button",44),u.gc("click",(function(){return t.$implicit.close("Close click")})),u.Ic(32,"Close"),u.Tb(),u.Tb()}if(2&e){var i=u.ic(7);u.Cb(7),u.oc("formGroup",i.updateVideoForm),u.Cb(15),u.oc("ngClass",u.tc(5,Ge,i.submitted&&i.vu.linkInput.errors,i.validLink)),u.Cb(2),u.oc("ngIf",i.submitted&&i.vu.linkInput.errors),u.Cb(1),u.oc("ngIf",i.validLink),u.Cb(1),u.oc("ngIf",i.invalidLink&&!i.validLink)}}function ht(e,t){if(1&e){var n=u.Vb();u.Ub(0,"button",77),u.gc("click",(function(){u.yc(n);var e=u.ic().$implicit,t=u.wc(8);return u.ic(6).openUpdateVideo(t,e.url)})),u.Ic(1,"Edit Video"),u.Tb()}}function gt(e,t){if(1&e){var n=u.Vb();u.Ub(0,"div",80),u.Qb(1,"i",81),u.Gc(2,lt,12,3,"ng-template",null,82,u.Hc),u.Ub(4,"button",70),u.gc("click",(function(){u.yc(n);var e=u.wc(3);return u.ic(6).open(e)})),u.Ic(5),u.Tb(),u.Gc(6,dt,2,0,"button",71),u.Gc(7,mt,33,8,"ng-template",null,83,u.Hc),u.Gc(9,ht,2,0,"button",73),u.Tb()}if(2&e){var i=t.index,o=u.ic(6);u.Cb(5),u.Kc("Watch Video ",i+1,""),u.Cb(1),u.oc("ngIf",o.isAdmin||o.isInstructor),u.Cb(3),u.oc("ngIf",o.isAdmin||o.isInstructor)}}function yt(e,t){if(1&e&&(u.Ub(0,"div"),u.Gc(1,gt,10,3,"div",79),u.Tb()),2&e){var n=u.ic().$implicit;u.Cb(1),u.oc("ngForOf",n.value)}}function kt(e,t){if(1&e&&(u.Ub(0,"div",78),u.Gc(1,yt,2,1,"div",6),u.Tb()),2&e){var n=t.$implicit,i=u.ic(3).$implicit;u.Cb(1),u.oc("ngIf",n.key==i.module_id)}}function Ct(e,t){if(1&e&&(u.Ub(0,"div",27),u.Ub(1,"h4",28),u.Ic(2),u.Tb(),u.Ub(3,"button",29),u.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),u.Ub(4,"span",30),u.Ic(5,"\xd7"),u.Tb(),u.Tb(),u.Tb(),u.Ub(6,"div",31),u.Ub(7,"div",74),u.Qb(8,"iframe",84),u.Tb(),u.Tb(),u.Ub(9,"div",43),u.Ub(10,"button",44),u.gc("click",(function(){return t.$implicit.close("Close click")})),u.Ic(11,"Close"),u.Tb(),u.Tb()),2&e){var n=u.ic().$implicit,i=u.ic(5).$implicit;u.Cb(2),u.Lc("",i.module_title," - ",n.name,""),u.Cb(6),u.oc("src",n.surveyUrl,u.Ac)}}function It(e,t){if(1&e){var n=u.Vb();u.Ub(0,"button",76),u.gc("click",(function(){u.yc(n);var e=u.ic(),t=e.$implicit,i=e.index;return u.ic(6).deleteSurvey(t.survey_id,i)})),u.Ic(1,"Delete Quiz/Exam"),u.Tb()}}function Ut(e,t){1&e&&(u.Ub(0,"div"),u.Ic(1,"Name is required"),u.Tb())}function xt(e,t){if(1&e&&(u.Ub(0,"div",45),u.Gc(1,Ut,2,0,"div",6),u.Tb()),2&e){var n=u.ic(8);u.Cb(1),u.oc("ngIf",n.su.name.errors.required)}}function Tt(e,t){1&e&&(u.Ub(0,"div"),u.Ic(1,"Link is required"),u.Tb())}function _t(e,t){if(1&e&&(u.Ub(0,"div",45),u.Gc(1,Tt,2,0,"div",6),u.Tb()),2&e){var n=u.ic(8);u.Cb(1),u.oc("ngIf",n.su.link.errors.required)}}function wt(e,t){1&e&&(u.Ub(0,"div",46),u.Ic(1," Valid Qualtrics link "),u.Tb())}function Pt(e,t){1&e&&(u.Ub(0,"div",47),u.Ic(1," Invalid Qualtrics Link "),u.Tb())}function St(e,t){if(1&e){var n=u.Vb();u.Ub(0,"div",27),u.Ub(1,"h4",28),u.Ic(2,"Edit Quiz/Exam"),u.Tb(),u.Ub(3,"button",29),u.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),u.Ub(4,"span",30),u.Ic(5,"\xd7"),u.Tb(),u.Tb(),u.Tb(),u.Ub(6,"div",31),u.Ub(7,"form",32),u.Ub(8,"div",33),u.Ub(9,"p"),u.Ic(10,"Valid Qualtrics links are of the formats:"),u.Qb(11,"br"),u.Ic(12," https://fiu.qualtrics.com/jfe/form/******************"),u.Tb(),u.Tb(),u.Ub(13,"div",34),u.Ub(14,"label",55),u.Ub(15,"span",26),u.Ic(16,"*"),u.Tb(),u.Ic(17,"New Name"),u.Tb(),u.Qb(18,"input",91,57),u.Gc(20,xt,2,1,"div",38),u.Tb(),u.Ub(21,"div",34),u.Ub(22,"label",35),u.Ub(23,"span",26),u.Ic(24,"*"),u.Tb(),u.Ic(25,"New Link"),u.Tb(),u.Ub(26,"input",92,37),u.gc("keyup",(function(e){return u.yc(n),u.ic(7).handleValidQuiz(e)})),u.Tb(),u.Gc(28,_t,2,1,"div",38),u.Gc(29,wt,2,0,"div",39),u.Tb(),u.Gc(30,Pt,2,0,"div",40),u.Ub(31,"button",48),u.gc("click",(function(){u.yc(n);var e=u.wc(19),t=u.wc(27),i=u.ic().$implicit;return u.ic(6).updateSurvey(e.value,t.value,i.survey_id)})),u.Qb(32,"i",9),u.Ic(33," Update Quiz/Exam"),u.Tb(),u.Tb(),u.Tb(),u.Ub(34,"div",43),u.Ub(35,"button",44),u.gc("click",(function(){return t.$implicit.close("Close click")})),u.Ic(36,"Close"),u.Tb(),u.Tb()}if(2&e){var i=u.ic(7);u.Cb(7),u.oc("formGroup",i.updateSurveyForm),u.Cb(11),u.oc("ngClass",u.sc(7,qe,i.submitted&&i.su.name.errors)),u.Cb(2),u.oc("ngIf",i.submitted&&i.su.name.errors),u.Cb(6),u.oc("ngClass",u.tc(9,Ge,i.submitted&&i.su.link.errors,i.validQuiz)),u.Cb(2),u.oc("ngIf",i.submitted&&i.su.link.errors),u.Cb(1),u.oc("ngIf",i.validQuiz),u.Cb(1),u.oc("ngIf",i.invalidQuiz&&!i.validQuiz)}}function Dt(e,t){if(1&e){var n=u.Vb();u.Ub(0,"button",77),u.gc("click",(function(){u.yc(n);var e=u.ic().$implicit,t=u.wc(8);return u.ic(6).openUpdateSurvey(t,e.name,e.url)})),u.Ic(1,"Edit Quiz/Exam"),u.Tb()}}function Ft(e,t){if(1&e){var n=u.Vb();u.Ub(0,"div",80),u.Qb(1,"i",88),u.Gc(2,Ct,12,3,"ng-template",null,89,u.Hc),u.Ub(4,"button",70),u.gc("click",(function(){u.yc(n);var e=u.wc(3);return u.ic(6).open(e)})),u.Ic(5),u.Tb(),u.Gc(6,It,2,0,"button",71),u.Gc(7,St,37,12,"ng-template",null,90,u.Hc),u.Gc(9,Dt,2,0,"button",73),u.Tb()}if(2&e){var i=t.index,o=u.ic(6);u.Cb(5),u.Kc("Take Quiz ",i+1,""),u.Cb(1),u.oc("ngIf",o.isAdmin||o.isInstructor),u.Cb(3),u.oc("ngIf",o.isAdmin||o.isInstructor)}}function At(e,t){if(1&e&&(u.Ub(0,"div"),u.Gc(1,Ft,10,3,"div",79),u.Tb()),2&e){var n=u.ic().$implicit;u.Cb(1),u.oc("ngForOf",n.value)}}function Mt(e,t){if(1&e&&(u.Ub(0,"div",78),u.Gc(1,At,2,1,"div",6),u.Tb()),2&e){var n=t.$implicit,i=u.ic(3).$implicit;u.Cb(1),u.oc("ngIf",n.key==i.module_id)}}function Ot(e,t){if(1&e&&(u.Ub(0,"div",62),u.Gc(1,ut,2,1,"div",63),u.jc(2,"keyvalue"),u.Gc(3,kt,2,1,"div",64),u.jc(4,"keyvalue"),u.Gc(5,Mt,2,1,"div",64),u.jc(6,"keyvalue"),u.Tb()),2&e){var n=u.ic(3);u.Cb(1),u.oc("ngForOf",u.kc(2,3,n.safePdfs)),u.Cb(2),u.oc("ngForOf",u.kc(4,5,n.safeLinks)),u.Cb(2),u.oc("ngForOf",u.kc(6,7,n.safeSurveys))}}function Lt(e,t){if(1&e){var n=u.Vb();u.Ub(0,"button",96),u.gc("click",(function(){u.yc(n);var e=u.ic(3).$implicit;return u.ic().editModule(e.course_id,e.module_id)})),u.Qb(1,"i",98),u.Ic(2," Edit"),u.Tb()}}function Gt(e,t){if(1&e){var n=u.Vb();u.Ub(0,"button",99),u.gc("click",(function(){u.yc(n);var e=u.ic(3).$implicit;return u.ic().deleteModule(e.module_id,e.module_number)})),u.Qb(1,"i",100),u.Ic(2," Delete"),u.Tb()}}function Vt(e,t){if(1&e){var n=u.Vb();u.Ub(0,"div",93),u.Gc(1,Lt,3,0,"button",94),u.Gc(2,Gt,3,0,"button",95),u.Ub(3,"button",96),u.gc("click",(function(){u.yc(n);var e=u.ic(2).$implicit;return u.ic().viewDiscussion(e.course_id,e.module_id)})),u.Qb(4,"i",97),u.Ic(5," View Discussion"),u.Tb(),u.Tb()}if(2&e){var i=u.ic(3);u.Cb(1),u.oc("ngIf",i.isAdmin||i.isInstructor),u.Cb(1),u.oc("ngIf",i.isAdmin||i.isInstructor)}}function Et(e,t){if(1&e&&(u.Sb(0),u.Gc(1,we,2,1,"span",13),u.Gc(2,Se,1,1,"ng-template",null,14,u.Hc),u.Ub(4,"div",15),u.Gc(5,Ve,32,10,"ng-template",null,16,u.Hc),u.Gc(7,Ee,2,0,"button",17),u.Gc(8,ze,22,5,"ng-template",null,18,u.Hc),u.Gc(10,$e,2,0,"button",17),u.Gc(11,Ze,35,13,"ng-template",null,19,u.Hc),u.Gc(13,Xe,2,0,"button",17),u.Tb(),u.Gc(14,We,5,2,"div",20),u.Gc(15,et,5,2,"ng-template",null,21,u.Hc),u.Gc(17,Ot,7,9,"div",22),u.Gc(18,Vt,6,2,"div",23),u.Rb()),2&e){var n=u.wc(3),i=u.wc(16),o=u.ic().index,c=u.ic();u.Cb(1),u.oc("ngIf",!c.moduleLocked[o]&&(c.isAdmin||c.isInstructor))("ngIfElse",n),u.Cb(6),u.oc("ngIf",c.isAdmin||c.isInstructor),u.Cb(3),u.oc("ngIf",c.isAdmin||c.isInstructor),u.Cb(3),u.oc("ngIf",c.isAdmin||c.isInstructor),u.Cb(1),u.oc("ngIf",!c.toggleContent[o])("ngIfElse",i),u.Cb(3),u.oc("ngIf",c.toggleContent[o]),u.Cb(1),u.oc("ngIf",c.currentUser)}}function Qt(e,t){if(1&e){var n=u.Vb();u.Ub(0,"span",26),u.Ic(1),u.Tb(),u.Ub(2,"div",101),u.gc("click",(function(){u.yc(n);var e=u.ic().index;return u.ic().openModule(e)})),u.Qb(3,"i",60),u.Ub(4,"strong"),u.Ic(5),u.Tb(),u.Ic(6),u.Tb()}if(2&e){var i=u.ic().$implicit;u.Cb(1),u.Kc("locked until: ",i.lockedUntil,""),u.Cb(4),u.Kc("Module ",i.module_number," "),u.Cb(1),u.Kc("| ",i.module_title," ")}}function Rt(e,t){if(1&e&&(u.Ub(0,"div",10),u.Gc(1,Et,19,9,"ng-container",11),u.Gc(2,Qt,7,3,"ng-template",null,12,u.Hc),u.Tb()),2&e){var n=t.index,i=u.wc(3),o=u.ic();u.Cb(1),u.oc("ngIf",!o.moduleLocked[n]||o.isAdmin||o.isInstructor)("ngIfElse",i)}}var qt,zt=((qt=function(){function e(t,n,i,o,c,r,s,a,u,l,d){var b=this;_classCallCheck(this,e),this.moduleService=t,this.videoService=n,this.pdfService=i,this.surveyService=o,this.authenticationService=c,this.studentCourseService=r,this.fb=s,this.router=a,this.route=u,this.sanitizer=l,this.modalService=d,this.modules=[],this.moduleLocked=[],this.linksFromDB=new Array,this.links=new Array,this.safeLinks=new Map,this.pdfsFromDB=new Array,this.pdfs=new Array,this.safePdfs=new Map,this.surveysFromDB=new Array,this.surveys=new Array,this.safeSurveys=new Map,this.resources=["pdf1","pdf2","worddoc1"],this.quizzes=["quiz1","quiz2","quiz3"],this.toggleContent=[],this.moduleVideosFetched=[],this.modulePDFsFetched=[],this.moduleSurveysFetched=[],this.submitted=!1,this.error="",this.invalidLink=!1,this.validLink=!1,this.invalidQuiz=!1,this.validQuiz=!1,this.fileToUpload=null,this.contentObject={course_id:0,course_name:"",module_id:0,module_number:0,module_title:"",lockedUntil:"",link:""},this.authenticationService.currentUser.subscribe((function(e){return b.currentUser=e})),this.makeForms()}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.courseId=t.id,console.log("param id is: "+t.id)})),this.todayDate=new Date,this.isAdmin="admin"===this.currentUser.role,this.isInstructor="instructor"===this.currentUser.role,this.isStudent="student"===this.currentUser.role,this.fetchModules(this.courseId),this.getAvgStudentPoints(this.courseId,this.currentUser.id),this.studentCourseService.getStudentsByCourseId(this.courseId).subscribe((function(t){t.forEach((function(t,n,i){t.student_id==e.currentUser.id&&(e.points=t.points,console.log("Points: "+e.points))}))}))}},{key:"ngOnDestroy",value:function(){}},{key:"waitForProgressBar",value:function(){var e=this;console.log("waiting for progress bar"),document.getElementById("progressbarAvg")?document.getElementById("progressbarAvg").style.width=this.averagePoints.average+"%":this.waitForProgressBarTimeout=setTimeout((function(){e.waitForProgressBar()}),1e3)}},{key:"makeForms",value:function(){this.videoForm=this.fb.group({link:["",c.o.required]}),this.updateVideoForm=this.fb.group({linkInput:["",c.o.required]}),this.pdfForm=this.fb.group({pdf:["",c.o.required]}),this.updatePdfForm=this.fb.group({pdf:["",c.o.required]}),this.surveyForm=this.fb.group({name:["",c.o.required],link:["",c.o.required]}),this.updateSurveyForm=this.fb.group({name:["",c.o.required],link:["",c.o.required]})}},{key:"pushLinksToArray",value:function(e,t){e.forEach((function(e){t.push({link:e.link,module_id:e.module_id,video_id:e.video_id})}))}},{key:"updateVideoUrl",value:function(e,t){var n=this;e.forEach((function(e){if(e.module_id===t){n.moduleVideosFetched[t]=!0;var i,o,c,r=e.link.length;r>=43?i=e.link.substring(32,43):28==r&&(i=e.link.substring(17,28)),o="https://www.youtube.com/embed/"+i,c={videoUrl:n.sanitizer.bypassSecurityTrustResourceUrl(o),video_id:e.video_id,url:e.link},n.safeLinks.get(t)?n.safeLinks.get(t).push(c):n.safeLinks.set(t,[c])}}))}},{key:"pushPDFsToArray",value:function(e,t){e.forEach((function(e){var n=Uint8Array.from(e.pdf.data),i=new Blob([n.buffer],{type:"application/pdf"});t.push({module_id:e.module_id,pdf_id:e.pdf_id,pdf:i})}))}},{key:"updatePdfData",value:function(e,t){var n=this;e.forEach((function(e){if(e.module_id===t){n.modulePDFsFetched[t]=!0;var i,o,c=URL.createObjectURL(e.pdf);i=n.sanitizer.bypassSecurityTrustResourceUrl(c),o={pdf_id:e.pdf_id,pdf:i,rawPdf:e.pdf},n.safePdfs.get(t)?n.safePdfs.get(t).push(o):n.safePdfs.set(t,[o])}}))}},{key:"pushSurveysToArray",value:function(e,t){e.forEach((function(e){t.push({name:e.survey_name,link:e.link,module_id:e.module_id,survey_id:e.survey_id})}))}},{key:"updateSurveyUrl",value:function(e,t){var n=this;e.forEach((function(e){if(e.module_id===t){n.moduleSurveysFetched[t]=!0;var i={surveyUrl:n.sanitizer.bypassSecurityTrustResourceUrl(e.link),survey_id:e.survey_id,name:e.name,url:e.link};n.safeSurveys.get(t)?n.safeSurveys.get(t).push(i):n.safeSurveys.set(t,[i])}}))}},{key:"open",value:function(e){this.submitted=!1,this.invalidLink=!1,this.invalidQuiz=!1,this.validLink=!1,this.invalidQuiz=!1,this.modalService.open(e,{size:"lg",centered:!0})}},{key:"openModule",value:function(e){this.toggleContent[e]=!this.toggleContent[e]}},{key:"openUpdateVideo",value:function(e,t){this.submitted=!1,this.invalidLink=!1,this.validLink=!1,this.modalService.open(e,{size:"lg",centered:!0}),this.updateVideoForm.get("linkInput").setValue(t)}},{key:"openUpdatePDF",value:function(e,t){this.submitted=!1,this.modalService.open(e,{size:"lg",centered:!0}),console.log("The updatePDF: "+t)}},{key:"openUpdateSurvey",value:function(e,t,n){this.submitted=!1,this.invalidQuiz=!1,this.validQuiz=!1,this.modalService.open(e,{size:"lg",centered:!0}),this.updateSurveyForm.get("name").setValue(t),this.updateSurveyForm.get("link").setValue(n)}},{key:"getAvgStudentPoints",value:function(e,t){var n=this;console.log("Called avgstudentpoints on student_id: "+t),this.studentCourseService.getAvgStudentPoints(e,t).subscribe((function(e){n.averagePoints=e,console.log("avg: "+JSON.stringify(e)),n.averagePoints.average=n.toFixed(n.averagePoints.average,2)}))}},{key:"toFixed",value:function(e,t){var n=Math.pow(10,t||0);return String(Math.round(e*n)/n)}},{key:"viewDiscussion",value:function(e,t){this.router.navigate(["courses/".concat(e,"/discussion/").concat(t)])}},{key:"createModule",value:function(e){this.router.navigate(["courses/".concat(e,"/create-module")])}},{key:"fetchModules",value:function(e){var t=this;this.moduleService.getModulesByCourseId(e).subscribe((function(n){n.forEach((function(e,n,i){var o=new Date(e.lockedUntil),c=String(o.getDate()+1).padStart(2,"0"),r=String(o.getMonth()+1).padStart(2,"0")+"/"+c+"/"+o.getFullYear();t.moduleLocked[n]=!1,t.todayDate<o&&(t.moduleLocked[n]=!0),e.lockedUntil=r})),t.modules=n,t.fetchVideos(e,n),t.fetchPdfs(e,n),t.fetchSurveys(e,n)}))}},{key:"editModule",value:function(e,t){this.router.navigate(["courses/".concat(e,"/edit-module/").concat(t)])}},{key:"deleteModule",value:function(e,t){if(1==confirm("Delete Module ".concat(t,": Are you sure?"))){this.moduleService.deleteModule(e).subscribe((function(){console.log("Deleted module "+e)}));var n=this.modules.find((function(t){return t.id===e}));this.modules.splice(this.modules.indexOf(n))}}},{key:"handleValidLink",value:function(e){var t=e.target.value,n=!1,i=t.length;t.includes("https://www.youtube.com/watch?v=")||t.includes("https://youtu.be/")?(console.log("Includes youtube link"),n=!0):n=!1,(28==i||i>=43)&&n?(this.validLink=!0,this.invalidLink=!1):this.validLink=!1}},{key:"addVideo",value:function(e,t){var n=this;this.submitted=!0,this.videoForm.invalid||(this.validLink?this.videoService.addVideo(e,t).subscribe((function(e){alert("Added video")}),(function(e){n.error=e})):this.invalidLink=!0)}},{key:"updateVideo",value:function(e,t){this.submitted=!0,this.updateVideoForm.invalid||(this.validLink?this.videoService.updateVideo(e,t).subscribe((function(){alert("Updated video")})):this.invalidLink=!0)}},{key:"deleteVideo",value:function(e,t){confirm("Delete video "+(t+1)+": Are you sure?")&&this.videoService.deleteVideo(e).subscribe((function(){alert("Deleted video")}))}},{key:"fetchVideos",value:function(e,t){var n=this;console.log("Fetching videos: "+e),this.videoService.fetchVideos(e).subscribe((function(e){n.linksFromDB=e,n.pushLinksToArray(e,n.links),t.forEach((function(t,i,o){for(var c=t,r=0;r<e.length;r++){var s=e[r];if(s.module_id==c.module_id){if(1==n.moduleVideosFetched[s.module_id]){console.log("Modules videos fetched true");break}n.updateVideoUrl(n.links,s.module_id)}}}))}))}},{key:"handleFileInput",value:function(e){if(e.target.files.length>0){var t=e.target.files[0];this.pdfForm.get("pdf").setValue(t)}}},{key:"handleFileInputUpdate",value:function(e){if(e.target.files.length>0){var t=e.target.files[0];this.updatePdfForm.get("pdf").setValue(t)}}},{key:"addPdf",value:function(e){var t=this;if(this.submitted=!0,!this.pdfForm.invalid){var n=new FormData;n.append("fileKey",this.pdfForm.get("pdf").value),n.append("fileKey",e),this.pdfService.addPDF(n).subscribe((function(e){console.log(e),alert("Added PDF!")}),(function(e){console.log(e),t.error=e}))}}},{key:"fetchPdfs",value:function(e,t){var n=this;console.log("Fetching pdfs: "+e),this.pdfService.fetchPDFs(e).subscribe((function(e){n.pdfsFromDB=e,n.pushPDFsToArray(e,n.pdfs),t.forEach((function(t,i,o){for(var c=t,r=0;r<e.length;r++){var s=e[r];if(s.module_id==c.module_id){if(1==n.modulePDFsFetched[s.module_id]){console.log("Modules pdfs fetched true");break}n.updatePdfData(n.pdfs,s.module_id)}}}))}))}},{key:"updatePDF",value:function(e,t){if(this.submitted=!0,!this.updatePdfForm.invalid){var n=new FormData;n.append("fileKey",this.updatePdfForm.get("pdf").value),n.append("fileKey",t),this.pdfService.updatePDF(e,n).subscribe((function(){alert("Updated pdf")}))}}},{key:"deletePDF",value:function(e,t){confirm("Delete PDF "+(t+1)+": Are you sure?")&&this.pdfService.deletePDF(e).subscribe((function(){alert("Deleted pdf")}))}},{key:"handleValidQuiz",value:function(e){var t,n=e.target.value,i=n.length;t=!!n.includes("https://fiu.qualtrics.com/jfe/form/"),53==i&&t?(this.validQuiz=!0,this.invalidQuiz=!1):this.validQuiz=!1}},{key:"addSurvey",value:function(e,t,n){this.submitted=!0,this.surveyForm.invalid||(this.validQuiz?this.surveyService.addSurvey(e,t,n).subscribe((function(){alert("Added survey")})):this.invalidQuiz=!0)}},{key:"fetchSurveys",value:function(e,t){var n=this;console.log("Fetching surveys: "+e),this.surveyService.fetchSurveys(e).subscribe((function(e){n.surveysFromDB=e,n.pushSurveysToArray(e,n.surveys),t.forEach((function(t){for(var i=t,o=0;o<e.length;o++){var c=e[o];if(c.module_id==i.module_id){if(1==n.moduleSurveysFetched[c.module_id]){console.log("Modules surveys fetched true");break}n.updateSurveyUrl(n.surveys,c.module_id)}}}))}))}},{key:"updateSurvey",value:function(e,t,n){this.submitted=!0,this.updateSurveyForm.invalid||(this.validQuiz?this.surveyService.updateSurvey(e,t,n).subscribe((function(){alert("Updated Quiz/Exam")})):this.invalidQuiz=!0)}},{key:"deleteSurvey",value:function(e,t){confirm("Delete Quiz/Exam "+(t+1)+": Are you sure?")&&this.surveyService.deleteSurvey(e).subscribe((function(){alert("Deleted Quiz/Exam")}))}},{key:"v",get:function(){return this.videoForm.controls}},{key:"p",get:function(){return this.pdfForm.controls}},{key:"s",get:function(){return this.surveyForm.controls}},{key:"vu",get:function(){return this.updateVideoForm.controls}},{key:"pu",get:function(){return this.updatePdfForm.controls}},{key:"su",get:function(){return this.updateSurveyForm.controls}}]),e}()).\u0275fac=function(e){return new(e||qt)(u.Pb(Ce),u.Pb(Ie),u.Pb(Ue),u.Pb(xe),u.Pb(z.a),u.Pb(R.a),u.Pb(c.b),u.Pb(E.c),u.Pb(E.a),u.Pb(Te.b),u.Pb(o.b))},qt.\u0275cmp=u.Jb({type:qt,selectors:[["app-modules"]],decls:16,vars:8,consts:[["id","main"],[1,"flexbox-row"],[1,"flexbox-top-container"],[1,"align-self-stretch"],["type","info","textType","white","height","30px",3,"value","showValue","striped"],["type","primary","textType","white","height","30px",3,"value","showValue","striped"],[4,"ngIf"],["class","flexbox-container",4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"click"],[1,"fas","fa-plus-circle"],[1,"flexbox-container"],[4,"ngIf","ngIfElse"],["lockedBlock",""],["style","color: blue;",4,"ngIf","ngIfElse"],["lockedBlock0",""],[1,"flexbox-options"],["contentVideoAdd",""],["class","btn btn-success",3,"click",4,"ngIf"],["contentPdfAdd",""],["contentSurveyAdd",""],["class","flexbox-item","style","cursor:pointer",3,"click",4,"ngIf","ngIfElse"],["moduleBlock",""],["class","flexbox-subcontainer",4,"ngIf"],["class","flexbox-item-module-actions",4,"ngIf"],[2,"color","blue"],["style","color: red",4,"ngIf"],[2,"color","red"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-9",3,"formGroup"],[1,"alert","alert-info"],[1,"form-group"],["for","link"],["type","text","required","","formControlName","link",1,"form-control",3,"ngClass","keyup"],["link",""],["class","invalid-feedback",4,"ngIf"],["class","valid-feedback",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["type","submit","class","btn btn-primary",3,"click",4,"ngIf"],["class","alert alert-danger mt-3 mb-0",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],[1,"invalid-feedback"],[1,"valid-feedback"],[1,"alert","alert-danger"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"alert","alert-danger","mt-3","mb-0"],["method","POST","enctype","multipart/form-data",1,"col-9",3,"formGroup","ngSubmit"],["for","pdf"],["id","theFile","type","file","name","pdf","required","",1,"form-control",3,"ngClass","change"],["file",""],["type","submit",1,"btn","btn-primary"],["for","name"],["type","text","formControlName","name","required","",1,"form-control",3,"ngClass"],["name",""],["type","text","formControlName","link","required","",1,"form-control",3,"ngClass","keyup"],[1,"flexbox-item",2,"cursor","pointer",3,"click"],[1,"fas","fa-caret-right"],[1,"fas","fa-caret-down"],[1,"flexbox-subcontainer"],["class","flexbox-resources",4,"ngFor","ngForOf"],["class","flexbox-links",4,"ngFor","ngForOf"],[1,"flexbox-resources"],["class","flexbox-resources-inner",4,"ngFor","ngForOf"],[1,"flexbox-resources-inner"],[1,"fas","fa-paperclip"],["contentPdf",""],[1,"btn","btn-primary",3,"click"],["class","btn btn-danger flexbox-module-options",3,"click",4,"ngIf"],["contentPdfUpdate",""],["class","btn btn-success flexbox-module-options",3,"click",4,"ngIf"],[1,"embed-responsive","embed-responsive-16by9"],["width","780","height","480",1,"embed-responsive-item",3,"src"],[1,"btn","btn-danger","flexbox-module-options",3,"click"],[1,"btn","btn-success","flexbox-module-options",3,"click"],[1,"flexbox-links"],["class","flexbox-links-inner",4,"ngFor","ngForOf"],[1,"flexbox-links-inner"],[1,"fab","fa-youtube"],["contentVideo",""],["contentVideoUpdate",""],["width","780","height","480","frameborder","0","allow","accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",1,"embed-responsive-item",3,"src"],["for","linkInput"],["type","text","formControlName","linkInput","required","",1,"form-control","form-control-lg",3,"ngClass","keyup"],["linkInput",""],[1,"fas","fa-paper-plane"],["contentSurvey",""],["contentSurveyUpdate",""],["type","text","formControlName","name","required","",1,"form-control","form-control-lg",3,"ngClass"],["type","text","formControlName","link","required","",1,"form-control","form-control-lg",3,"ngClass","keyup"],[1,"flexbox-item-module-actions"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-comments"],[1,"fas","fa-edit"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fas","fa-minus-circle"],[1,"flexbox-item",2,"cursor","not-allowed","opacity","0.5",3,"click"]],template:function(e,t){1&e&&(u.Qb(0,"app-sidebar"),u.Ub(1,"div",0),u.Ub(2,"div",1),u.Ub(3,"div",2),u.Ub(4,"div",3),u.Ub(5,"span"),u.Ic(6,"Class Average Points"),u.Tb(),u.Ub(7,"p"),u.Qb(8,"ngb-progressbar",4),u.Tb(),u.Tb(),u.Ub(9,"div",3),u.Ub(10,"span"),u.Ic(11,"Your points"),u.Tb(),u.Ub(12,"p"),u.Qb(13,"ngb-progressbar",5),u.Tb(),u.Tb(),u.Gc(14,_e,4,0,"div",6),u.Tb(),u.Gc(15,Rt,4,2,"div",7),u.Tb(),u.Tb()),2&e&&(u.Cb(8),u.oc("value",t.averagePoints?t.averagePoints.average:0)("showValue",!0)("striped",!0),u.Cb(5),u.oc("value",t.points?t.points:0)("showValue",!0)("striped",!0),u.Cb(1),u.oc("ngIf",t.currentUser&&(t.isAdmin||t.isInstructor)),u.Cb(1),u.oc("ngForOf",t.modules))},directives:[be,o.e,i.n,i.m,c.q,c.j,c.d,c.a,c.n,c.i,c.c,i.l],pipes:[i.h],styles:[".flexbox-row[_ngcontent-%COMP%]{justify-content:center}.flexbox-container[_ngcontent-%COMP%], .flexbox-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;align-items:center}.flexbox-container[_ngcontent-%COMP%]{width:600px;padding:20px;justify-content:space-evenly;background-color:#ececec;border-left:1px solid #000;border-right:1px solid #000;border-bottom:1px dotted grey}.flexbox-options[_ngcontent-%COMP%]{margin-bottom:15px;align-self:flex-end}.flexbox-item[_ngcontent-%COMP%]{align-self:stretch;background-color:transparent;border:1px solid #afafaf}.flexbox-top-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;width:600px;padding:20px;justify-content:space-evenly;align-items:center}.flexbox-top-container[_ngcontent-%COMP%]   .flexbox-top-options[_ngcontent-%COMP%]{margin-bottom:15px}.flexbox-top-container[_ngcontent-%COMP%]   .flexbox-progress-bar[_ngcontent-%COMP%]{align-self:stretch;background-color:#dbdbdb}.flexbox-item-module-actions[_ngcontent-%COMP%]{margin-top:15px;align-self:flex-end;background-color:transparent;border:1px solid #000}.flexbox-subcontainer[_ngcontent-%COMP%]{margin-top:15px;align-self:flex-start;display:flex;flex-direction:column;width:560px;justify-content:center;align-items:flex-start;background-color:#fafafa}.flexbox-module-options[_ngcontent-%COMP%]{float:right}.flexbox-links[_ngcontent-%COMP%]{align-self:stretch}.flexbox-links[_ngcontent-%COMP%]   .flexbox-links-inner[_ngcontent-%COMP%]{align-self:stretch;border:1px solid #000}.flexbox-links[_ngcontent-%COMP%]   .flexbox-links-inner[_ngcontent-%COMP%]:hover{background-color:#d9deff}.flexbox-resources[_ngcontent-%COMP%]{align-self:stretch}.flexbox-resources[_ngcontent-%COMP%]   .flexbox-resources-inner[_ngcontent-%COMP%]{align-self:stretch;border:1px solid #000}.flexbox-resources[_ngcontent-%COMP%]   .flexbox-resources-inner[_ngcontent-%COMP%]:hover{background-color:#d9deff}.flexbox-quizzes[_ngcontent-%COMP%]{align-self:stretch;border:1px solid #000}.flexbox-quizzes[_ngcontent-%COMP%]:hover{background-color:#d9deff}"]}),qt);function $t(e,t){if(1&e&&(u.Ub(0,"div",1),u.Ub(1,"div",2),u.Ub(2,"div",3),u.Ic(3),u.Tb(),u.Ub(4,"div",4),u.Ic(5),u.Tb(),u.Tb(),u.Tb()),2&e){var n=t.$implicit;u.Cb(3),u.Jc(n.student_id),u.Cb(2),u.Jc(n.points)}}function jt(e,t){if(1&e&&(u.Ub(0,"span"),u.Ic(1),u.Tb()),2&e){var n=u.ic();u.Cb(1),u.Kc("Class average: ",n.average.average,"")}}var Nt,Ht=((Nt=function(){function e(t,n,i,o){var c=this;_classCallCheck(this,e),this.studentCourseService=t,this.router=n,this.route=i,this.authenticationService=o,this.students=[],this.authenticationService.currentUser.subscribe((function(e){return c.currentUser=e}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.courseId=t.id,console.log("param id is: "+t.id)})),this.fetchStudents(this.courseId),this.getAvgStudentPoints(this.courseId,this.currentUser.id)}},{key:"fetchStudents",value:function(e){var t=this;console.log("fetching students"),this.studentCourseService.getStudentsByCourseId(e).subscribe((function(e){t.students=e,console.log(e)}))}},{key:"getAvgStudentPoints",value:function(e,t){var n=this;console.log("Called avgstudentpoints on student_id: "+t),this.studentCourseService.getAvgStudentPoints(e,t).subscribe((function(e){n.average=e,console.log("avg: "+JSON.stringify(e)),n.average.average=n.toFixed(n.average.average,2)}))}},{key:"toFixed",value:function(e,t){var n=Math.pow(10,t||0);return String(Math.round(e*n)/n)}}]),e}()).\u0275fac=function(e){return new(e||Nt)(u.Pb(R.a),u.Pb(E.c),u.Pb(E.a),u.Pb(z.a))},Nt.\u0275cmp=u.Jb({type:Nt,selectors:[["app-leaderboard"]],decls:13,vars:2,consts:[[1,"main"],[1,"flexbox-row"],[1,"flexbox-container"],[1,"flexbox-cell","left"],[1,"flexbox-cell","right"],["class","flexbox-row",4,"ngFor","ngForOf"],[1,"center-form",2,"margin-top","15px"],[4,"ngIf"]],template:function(e,t){1&e&&(u.Qb(0,"app-sidebar"),u.Ub(1,"div",0),u.Ub(2,"div",1),u.Ub(3,"h2"),u.Ic(4," Leaderboard "),u.Tb(),u.Ub(5,"div",2),u.Ub(6,"div",3),u.Ic(7,"ID"),u.Tb(),u.Ub(8,"div",4),u.Ic(9,"Points"),u.Tb(),u.Tb(),u.Gc(10,$t,6,2,"div",5),u.Ub(11,"div",6),u.Gc(12,jt,2,1,"span",7),u.Tb(),u.Tb(),u.Tb()),2&e&&(u.Cb(10),u.oc("ngForOf",t.students),u.Cb(2),u.oc("ngIf",t.average))},directives:[be,i.m,i.n],styles:[".flexbox-container[_ngcontent-%COMP%]{flex-direction:row;width:600px;padding:20px;justify-content:space-around;background-color:#ececec;border-left:1px solid #000;border-right:1px solid #000;border-bottom:1px dotted grey}.flexbox-container[_ngcontent-%COMP%], .flexbox-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center}.flexbox-row[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}.flexbox-column[_ngcontent-%COMP%]{background-color:#d9deff;display:flex;flex-direction:row;justify-content:space-evenly;align-items:center}.flexbox-cell[_ngcontent-%COMP%]{width:100px;text-align:center}"]}),Nt);function Bt(e,t){1&e&&(u.Ub(0,"div"),u.Ic(1,"Number is required"),u.Tb())}function Jt(e,t){if(1&e&&(u.Ub(0,"div",18),u.Gc(1,Bt,2,0,"div",19),u.Tb()),2&e){var n=u.ic();u.Cb(1),u.oc("ngIf",n.m.number.errors.required)}}function Kt(e,t){1&e&&(u.Ub(0,"div"),u.Ic(1,"Title is required"),u.Tb())}function Yt(e,t){if(1&e&&(u.Ub(0,"div",18),u.Gc(1,Kt,2,0,"div",19),u.Tb()),2&e){var n=u.ic();u.Cb(1),u.oc("ngIf",n.m.title.errors.required)}}function Zt(e,t){1&e&&(u.Ub(0,"div"),u.Ic(1,"Locked Until is required"),u.Tb())}function Xt(e,t){if(1&e&&(u.Ub(0,"div",18),u.Gc(1,Zt,2,0,"div",19),u.Tb()),2&e){var n=u.ic();u.Cb(1),u.oc("ngIf",n.m.lockedUntil.errors.required)}}var Wt,en=function(e){return{"is-invalid":e}},tn=((Wt=function(){function e(t,n,i,o){_classCallCheck(this,e),this.router=t,this.route=n,this.moduleService=i,this.fb=o,this.labels=["number","title","lockedUntil"],this.submitted=!1,this.todayDate=null,this.moduleForm=this.fb.group({number:["",c.o.required],title:["",c.o.required],lockedUntil:["",c.o.required]})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.courseId=t.id,console.log("params id create: "+t.id)}));var t=new Date,n=String(t.getDate()).padStart(2,"0"),i=String(t.getMonth()+1).padStart(2,"0"),o=t.getFullYear();this.todayDate=new Promise((function(e,t){e(i+"/"+n+"/"+o)}))}},{key:"addModule",value:function(e,t,n){this.submitted=!0;var i=new Date(n),o=String(i.getDate()).padStart(2,"0"),c=String(i.getMonth()+1).padStart(2,"0");n=i.getFullYear()+"-"+c+"-"+o,console.log("going to submit lockedUntil: "+n),this.moduleForm.valid&&this.moduleService.addModule(this.courseId,e,t,n).subscribe((function(){alert("Added module successfully!")}))}},{key:"onDateSelect",value:function(e){this.todayDate=new Promise((function(t,n){t(String(e.month).padStart(2,"0")+"/"+String(e.day).padStart(2,"0")+"/"+e.year)}))}},{key:"m",get:function(){return this.moduleForm.controls}}]),e}()).\u0275fac=function(e){return new(e||Wt)(u.Pb(E.c),u.Pb(E.a),u.Pb(Ce),u.Pb(c.b))},Wt.\u0275cmp=u.Jb({type:Wt,selectors:[["app-create-module"]],decls:30,vars:16,consts:[[1,"center-form"],[1,"col-sm-4",3,"formGroup"],[1,"form-group"],["for","number"],["type","text","formControlName","number","required","",1,"form-control",3,"ngClass"],["number",""],["class","invalid-feedback",4,"ngIf"],["for","title"],["formControlName","title","required","",1,"form-control",3,"ngClass"],["title",""],["for","lockedUntil"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","formControlName","lockedUntil","readonly","","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d","ngbDatepicker","lockedUntil",""],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","far","fa-calendar-alt",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){if(1&e){var n=u.Vb();u.Ub(0,"div",0),u.Ub(1,"h2"),u.Ic(2,"Create New Module"),u.Tb(),u.Ub(3,"form",1),u.Ub(4,"div",2),u.Ub(5,"label",3),u.Ic(6,"Number"),u.Tb(),u.Qb(7,"input",4,5),u.Gc(9,Jt,2,1,"div",6),u.Tb(),u.Ub(10,"div",2),u.Ub(11,"label",7),u.Ic(12,"Title"),u.Tb(),u.Qb(13,"textarea",8,9),u.Gc(15,Yt,2,1,"div",6),u.Tb(),u.Ub(16,"div",2),u.Ub(17,"label",10),u.Ic(18,"Locked Until"),u.Tb(),u.Ub(19,"div",11),u.Ub(20,"input",12,13),u.gc("dateSelect",(function(e){return t.onDateSelect(e)})),u.jc(23,"async"),u.Tb(),u.Ub(24,"div",14),u.Ub(25,"button",15),u.gc("click",(function(){return u.yc(n),u.wc(21).toggle()})),u.Tb(),u.Tb(),u.Gc(26,Xt,2,1,"div",6),u.Tb(),u.Tb(),u.Ub(27,"button",16),u.gc("click",(function(){u.yc(n);var e=u.wc(8),i=u.wc(14),o=u.wc(22);return t.addModule(e.value,i.value,o.value)})),u.Qb(28,"i",17),u.Ic(29," Create Module"),u.Tb(),u.Tb(),u.Tb()}2&e&&(u.Cb(3),u.oc("formGroup",t.moduleForm),u.Cb(4),u.oc("ngClass",u.sc(10,en,t.submitted&&t.m.number.errors)),u.Cb(2),u.oc("ngIf",t.submitted&&t.m.number.errors),u.Cb(4),u.oc("ngClass",u.sc(12,en,t.submitted&&t.m.title.errors)),u.Cb(2),u.oc("ngIf",t.submitted&&t.m.title.errors),u.Cb(5),u.oc("value",u.kc(23,8,t.todayDate))("ngClass",u.sc(14,en,t.submitted&&t.m.lockedUntil.errors)),u.Cb(6),u.oc("ngIf",t.submitted&&t.m.lockedUntil.errors))},directives:[c.q,c.j,c.d,c.a,c.i,c.c,c.n,i.l,i.n,o.a],pipes:[i.b],styles:[""]}),Wt);function nn(e,t){1&e&&(u.Ub(0,"div"),u.Ic(1,"Number is required"),u.Tb())}function on(e,t){if(1&e&&(u.Ub(0,"div",18),u.Gc(1,nn,2,0,"div",19),u.Tb()),2&e){var n=u.ic();u.Cb(1),u.oc("ngIf",n.mu.number.errors.required)}}function cn(e,t){1&e&&(u.Ub(0,"div"),u.Ic(1,"Title is required"),u.Tb())}function rn(e,t){if(1&e&&(u.Ub(0,"div",18),u.Gc(1,cn,2,0,"div",19),u.Tb()),2&e){var n=u.ic();u.Cb(1),u.oc("ngIf",n.mu.title.errors.required)}}function sn(e,t){1&e&&(u.Ub(0,"div"),u.Ic(1,"Locked Until is required"),u.Tb())}function an(e,t){if(1&e&&(u.Ub(0,"div",18),u.Gc(1,sn,2,0,"div",19),u.Tb()),2&e){var n=u.ic();u.Cb(1),u.oc("ngIf",n.mu.lockedUntil.errors.required)}}var un,ln=function(e){return{"is-invalid":e}},dn=((un=function(){function e(t,n,i,o){_classCallCheck(this,e),this.moduleService=t,this.router=n,this.route=i,this.fb=o,this.submitted=!1,this.givenDate=null,this.CreateForm()}return _createClass(e,[{key:"CreateForm",value:function(){this.updateForm=this.fb.group({number:["",c.o.required],title:["",c.o.required],lockedUntil:["",c.o.required]})}},{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.id=t.moduleId,e.moduleService.getModuleById(e.id).subscribe((function(t){e.module=t[0],e.moduleNumber=e.module.number,e.updateForm.get("number").setValue(e.module.number),e.updateForm.get("title").setValue(e.module.title),e.updateForm.get("lockedUntil").setValue(e.module.lockedUntil);var n=new Date(e.module.lockedUntil.toString()),i=String(n.getDate()+1).padStart(2,"0"),o=String(n.getMonth()+1).padStart(2,"0"),c=n.getFullYear();e.givenDate=new Promise((function(e,t){e(o+"/"+i+"/"+c)})),e.startDate=(""+e.module.lockedUntil).split("-")}))}))}},{key:"updateModule",value:function(e,t,n){this.submitted=!0;var i=new Date(n),o=String(i.getDate()).padStart(2,"0"),c=String(i.getMonth()+1).padStart(2,"0");n=i.getFullYear()+"-"+c+"-"+o,this.updateForm.valid&&this.moduleService.updateModule(this.id,e,t,n).subscribe((function(e){alert("Module updated successfully")}))}},{key:"onDateSelect",value:function(e){this.givenDate=new Promise((function(t,n){t(String(e.month).padStart(2,"0")+"/"+String(e.day).padStart(2,"0")+"/"+e.year)}))}},{key:"mu",get:function(){return this.updateForm.controls}}]),e}()).\u0275fac=function(e){return new(e||un)(u.Pb(Ce),u.Pb(E.c),u.Pb(E.a),u.Pb(c.b))},un.\u0275cmp=u.Jb({type:un,selectors:[["app-edit-module"]],decls:30,vars:17,consts:[[1,"center-form"],[1,"col-sm-4",3,"formGroup"],[1,"form-group"],["for","number"],["type","text","formControlName","number","required","",1,"form-control",3,"ngClass"],["number",""],["class","invalid-feedback",4,"ngIf"],["for","title"],["formControlName","title","required","",1,"form-control",3,"ngClass"],["title",""],["for","lockedUntil"],[1,"input-group"],["type","text","placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","readonly","","formControlName","lockedUntil","required","",1,"form-control",3,"value","ngClass","dateSelect"],["d","ngbDatepicker","lockedUntil",""],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","far","fa-calendar-alt",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){if(1&e){var n=u.Vb();u.Ub(0,"div",0),u.Ub(1,"h2"),u.Ic(2),u.Tb(),u.Ub(3,"form",1),u.Ub(4,"div",2),u.Ub(5,"label",3),u.Ic(6,"Number"),u.Tb(),u.Qb(7,"input",4,5),u.Gc(9,on,2,1,"div",6),u.Tb(),u.Ub(10,"div",2),u.Ub(11,"label",7),u.Ic(12,"Title"),u.Tb(),u.Qb(13,"textarea",8,9),u.Gc(15,rn,2,1,"div",6),u.Tb(),u.Ub(16,"div",2),u.Ub(17,"label",10),u.Ic(18,"Locked Until"),u.Tb(),u.Ub(19,"div",11),u.Ub(20,"input",12,13),u.gc("dateSelect",(function(e){return t.onDateSelect(e)})),u.jc(23,"async"),u.Tb(),u.Ub(24,"div",14),u.Ub(25,"button",15),u.gc("click",(function(){return u.yc(n),u.wc(21).toggle()})),u.Tb(),u.Tb(),u.Gc(26,an,2,1,"div",6),u.Tb(),u.Tb(),u.Ub(27,"button",16),u.gc("click",(function(){u.yc(n);var e=u.wc(8),i=u.wc(14),o=u.wc(22);return t.updateModule(e.value,i.value,o.value)})),u.Qb(28,"i",17),u.Ic(29," Update Module"),u.Tb(),u.Tb(),u.Tb()}2&e&&(u.Cb(2),u.Kc("Edit Module ",t.moduleNumber,""),u.Cb(1),u.oc("formGroup",t.updateForm),u.Cb(4),u.oc("ngClass",u.sc(11,ln,t.submitted&&t.mu.number.errors)),u.Cb(2),u.oc("ngIf",t.submitted&&t.mu.number.errors),u.Cb(4),u.oc("ngClass",u.sc(13,ln,t.submitted&&t.mu.title.errors)),u.Cb(2),u.oc("ngIf",t.submitted&&t.mu.title.errors),u.Cb(5),u.oc("value",u.kc(23,9,t.givenDate))("ngClass",u.sc(15,ln,t.submitted&&t.mu.lockedUntil.errors)),u.Cb(6),u.oc("ngIf",t.submitted&&t.mu.lockedUntil.errors))},directives:[c.q,c.j,c.d,c.a,c.i,c.c,c.n,i.l,i.n,o.a],pipes:[i.b],styles:[""]}),un);function bn(e,t){if(1&e){var n=u.Vb();u.Sb(0),u.Ub(1,"ckeditor",2),u.gc("change",(function(e){return u.yc(n),u.ic().onChange(e)})),u.Tb(),u.Ub(2,"span"),u.Ub(3,"button",3),u.gc("click",(function(){u.yc(n);var e=t.ngIf;return u.ic().onSubmit(e.id)})),u.Ic(4,"Submit"),u.Tb(),u.Ub(5,"button",4),u.gc("click",(function(){u.yc(n);var e=t.ngIf;return u.ic().onClearButtonClicked(e.id)})),u.Ic(6,"Clear and Submit"),u.Tb(),u.Ub(7,"a",5),u.Qb(8,"i",6),u.Ic(9," Go back"),u.Tb(),u.Tb(),u.Qb(10,"hr"),u.Ub(11,"h2"),u.Ic(12,"Preview"),u.Tb(),u.Qb(13,"div",7),u.Rb()}if(2&e){var i=t.ngIf,o=u.ic();u.Cb(1),u.oc("editor",o.Editor)("data",o.editorData?o.editorData:i.content),u.Cb(6),u.qc("routerLink","/courses/",o.courseId,""),u.Cb(6),u.oc("innerHTML",o.editorData?o.editorData:i.content,u.zc)}}var fn,pn,vn=((pn=function(){function e(t,n,i){_classCallCheck(this,e),this.courseDetailsService=t,this.route=n,this.router=i,this.Editor=ue,this.isCleared=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.courseId=t.id})),this.courseContent=this.courseDetailsService.getCourseDetails(this.courseId),this.courseDetailsService.getCourseDetails(this.courseId).subscribe((function(t){e.courseDetails=t}))}},{key:"onReady",value:function(e){e.setData("")}},{key:"onChange",value:function(e){var t=e.editor;this.editorData=t.getData(),this.isCleared&&(t.setData(""),this.isCleared=!1),console.log(this.editorData)}},{key:"onSubmit",value:function(e){var t=this;this.courseDetailsService.updateCourseDetails(e,this.editorData).subscribe((function(){alert("Submitted Content"),t.router.navigate(["courses",t.courseId])}))}},{key:"onClearButtonClicked",value:function(e){var t=this;confirm("Clear content; Are you sure?")&&this.courseDetailsService.clearCourseDetails(e).subscribe((function(){alert("Cleared Content"),t.isCleared=!0,t.router.navigate(["courses",t.courseId])}))}}]),e}()).\u0275fac=function(e){return new(e||pn)(u.Pb(le.a),u.Pb(E.a),u.Pb(E.c))},pn.\u0275cmp=u.Jb({type:pn,selectors:[["app-home-edit"]],decls:3,vars:3,consts:[[1,"flexbox-row"],[4,"ngIf"],[1,"clamp-words",3,"editor","data","change"],[1,"btn","btn-primary",2,"margin-right","15px",3,"click"],[1,"btn","btn-warning",2,"margin-left","15px",3,"click"],[1,"btn","btn-secondary",2,"margin-left","15px",3,"routerLink"],[1,"fas","fa-arrow-circle-left"],[1,"custom-font","clamp-words",2,"margin-top","30px",3,"innerHTML"]],template:function(e,t){1&e&&(u.Ub(0,"div",0),u.Gc(1,bn,14,4,"ng-container",1),u.jc(2,"async"),u.Tb()),2&e&&(u.Cb(1),u.oc("ngIf",u.kc(2,1,t.courseContent)))},directives:[i.n,r.a,E.f],pipes:[i.b],styles:[".flexbox-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;align-items:center;position:relative;margin-top:30px}"]}),pn),mn=((fn=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"createDiscussion",value:function(e,t,n,i,o,c){return this.http.post("".concat($.a.apiURL,"/discussions"),{user:e,post:t,created:n,changed:i,module_id:o,user_id:c})}},{key:"getDiscussionsInModule",value:function(e){return this.http.get("".concat($.a.apiURL,"/discussions/m/").concat(e))}},{key:"updateDiscussion",value:function(e,t,n){return this.http.put("".concat($.a.apiURL,"/discussions/").concat(n),{post:e,changed:t})}},{key:"deleteDiscussion",value:function(e){return this.http.delete("".concat($.a.apiURL,"/discussions/").concat(e))}}]),e}()).\u0275fac=function(e){return new(e||fn)(u.cc(N.b))},fn.\u0275prov=u.Lb({token:fn,factory:fn.\u0275fac,providedIn:"root"}),fn),hn=["textArea"];function gn(e,t){1&e&&(u.Ub(0,"div"),u.Ic(1,"Post cannot be empty"),u.Tb())}function yn(e,t){if(1&e&&(u.Ub(0,"div",8),u.Gc(1,gn,2,0,"div",9),u.Tb()),2&e){var n=u.ic();u.Cb(1),u.oc("ngIf",n.p.post.errors.required)}}var kn,Cn=function(e){return{"is-invalid":e}},In=((kn=function(){function e(t,n,i,o,c){var r=this;_classCallCheck(this,e),this.fb=t,this.discussionService=n,this.moduleService=i,this.authenticationService=o,this.route=c,this.module=null,this.submitted=!1,this.authenticationService.currentUser.subscribe((function(e){return r.currentUser=e}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.moduleService.getModuleById(t.moduleId).subscribe((function(t){e.module=new Promise((function(e,n){e(t[0])}))}))})),this.createForm()}},{key:"createForm",value:function(){this.postForm=this.fb.group({post:["",c.o.required]})}},{key:"createPost",value:function(e){var t=this;this.submitted=!0,this.postForm.valid&&this.module.then((function(n){var i=t.currentUser.f_name+" "+t.currentUser.l_name,o=new Date;t.discussionService.createDiscussion(i,e,o,o,n.id,t.currentUser.id).subscribe((function(){alert("Created post")}))}))}},{key:"autoGrow",value:function(){var e=this.textArea.nativeElement;e.style.overflow="hidden",e.style.height="0px",e.style.height=e.scrollHeight+"px"}},{key:"p",get:function(){return this.postForm.controls}}]),e}()).\u0275fac=function(e){return new(e||kn)(u.Pb(c.b),u.Pb(mn),u.Pb(Ce),u.Pb(z.a),u.Pb(E.a))},kn.\u0275cmp=u.Jb({type:kn,selectors:[["app-create-post"]],viewQuery:function(e,t){var n;1&e&&u.Mc(hn,!0,u.l),2&e&&u.vc(n=u.hc())&&(t.textArea=n.first)},decls:9,vars:5,consts:[[1,"center-form","announcement"],[3,"formGroup"],[1,"form-group"],["rows","2","placeholder","Add a post...","required","","formControlName","post","matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","2",1,"form-control",2,"width","300px",3,"ngClass"],["post",""],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){if(1&e){var n=u.Vb();u.Ub(0,"div",0),u.Ub(1,"form",1),u.Ub(2,"div",2),u.Qb(3,"textarea",3,4),u.Gc(5,yn,2,1,"div",5),u.Tb(),u.Ub(6,"button",6),u.gc("click",(function(){u.yc(n);var e=u.wc(4);return t.createPost(e.value)})),u.Qb(7,"i",7),u.Ic(8," Create Post"),u.Tb(),u.Tb(),u.Tb()}2&e&&(u.Cb(1),u.oc("formGroup",t.postForm),u.Cb(2),u.oc("ngClass",u.sc(3,Cn,t.submitted&&t.p.post.errors)),u.Cb(2),u.oc("ngIf",t.submitted&&t.p.post.errors))},directives:[c.q,c.j,c.d,c.a,G,S,c.n,c.i,c.c,i.l,i.n],styles:[""]}),kn);function Un(e,t){1&e&&(u.Ub(0,"div"),u.Ic(1,"Post is required"),u.Tb())}function xn(e,t){if(1&e&&(u.Ub(0,"div",17),u.Gc(1,Un,2,0,"div",18),u.Tb()),2&e){var n=u.ic(2);u.Cb(1),u.oc("ngIf",n.up.post.errors.required)}}var Tn=function(e){return{"is-invalid":e}};function _n(e,t){if(1&e){var n=u.Vb();u.Ub(0,"div",2),u.Ub(1,"h4",3),u.Ic(2,"Edit Your Post"),u.Tb(),u.Ub(3,"button",4),u.gc("click",(function(){return t.$implicit.dismiss("Cross click")})),u.Ub(4,"span",5),u.Ic(5,"\xd7"),u.Tb(),u.Tb(),u.Tb(),u.Ub(6,"div",6),u.Ub(7,"form",7),u.Ub(8,"div",8),u.Ub(9,"label",9),u.Ic(10,"Post"),u.Tb(),u.Qb(11,"textarea",10,11),u.Gc(13,xn,2,1,"div",12),u.Tb(),u.Ub(14,"button",13),u.gc("click",(function(){u.yc(n);var e=u.wc(12);return u.ic().updatePost(e.value)})),u.Qb(15,"i",14),u.Ic(16," Update Post"),u.Tb(),u.Tb(),u.Tb(),u.Ub(17,"div",15),u.Ub(18,"button",16),u.gc("click",(function(){return t.$implicit.close("Close click")})),u.Ic(19,"Close"),u.Tb(),u.Tb()}if(2&e){var i=u.ic();u.Cb(7),u.oc("formGroup",i.editPostForm),u.Cb(4),u.oc("ngClass",u.sc(3,Tn,i.submitted&&i.up.post.errors)),u.Cb(2),u.oc("ngIf",i.submitted&&i.up.post.errors)}}var wn,Pn=((wn=function(){function e(t,n,i){_classCallCheck(this,e),this.modalService=t,this.fb=n,this.discussionService=i,this.submitted=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.makeForm()}},{key:"makeForm",value:function(){this.editPostForm=this.fb.group({post:["",c.o.required]})}},{key:"open",value:function(e){this.editPostForm.get("post").setValue(this.discussionData.post),this.modalService.open(e,{size:"lg",centered:!0})}},{key:"updatePost",value:function(e){if(this.submitted=!0,this.editPostForm.valid){var t=new Date;this.discussionService.updateDiscussion(e,t,this.discussionData.discussion_id).subscribe((function(){alert("Updated post")}))}}},{key:"up",get:function(){return this.editPostForm.controls}}]),e}()).\u0275fac=function(e){return new(e||wn)(u.Pb(o.b),u.Pb(c.b),u.Pb(mn))},wn.\u0275cmp=u.Jb({type:wn,selectors:[["app-edit-post"]],inputs:{discussionData:"discussionData"},decls:4,vars:0,consts:[["contentPostEdit",""],[1,"btn","btn-success",3,"click"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-9",3,"formGroup"],[1,"form-group"],["for","post"],["rows","3","required","","formControlName","post",1,"form-control",3,"ngClass"],["post",""],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus-circle"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){if(1&e){var n=u.Vb();u.Gc(0,_n,20,5,"ng-template",null,0,u.Hc),u.Ub(2,"button",1),u.gc("click",(function(){u.yc(n);var e=u.wc(1);return t.open(e)})),u.Ic(3,"Edit Post"),u.Tb()}},directives:[c.q,c.j,c.d,c.a,c.n,c.i,c.c,i.l,i.n],styles:[""]}),wn);function Sn(e,t){if(1&e&&(u.Ub(0,"div"),u.Ub(1,"h1",3),u.Ic(2,"Discussion"),u.Tb(),u.Ub(3,"h2",3),u.Ic(4),u.Tb(),u.Ub(5,"h3"),u.Ic(6),u.Tb(),u.Tb()),2&e){var n=t.ngIf;u.Cb(4),u.Kc("Module ",n.number,""),u.Cb(2),u.Jc(n.title)}}function Dn(e,t){if(1&e&&u.Qb(0,"app-edit-post",7),2&e){var n=u.ic().$implicit;u.oc("discussionData",n)}}function Fn(e,t){if(1&e){var n=u.Vb();u.Ub(0,"button",8),u.gc("click",(function(){u.yc(n);var e=u.ic().$implicit;return u.ic().deletePost(e.discussion_id)})),u.Ic(1,"Delete Post"),u.Tb()}}function An(e,t){if(1&e&&(u.Ub(0,"div",4),u.Ub(1,"p"),u.Ic(2),u.jc(3,"date"),u.jc(4,"date"),u.Qb(5,"br"),u.Ic(6),u.Qb(7,"br"),u.Gc(8,Dn,1,1,"app-edit-post",5),u.Gc(9,Fn,2,0,"button",6),u.Tb(),u.Tb()),2&e){var n=t.$implicit,i=u.ic();u.Cb(2),u.Lc(" ",n.user," | ",n.created>=n.changed?u.lc(3,5,n.created,"short"):u.lc(4,8,n.changed,"short"),""),u.Cb(4),u.Kc(" ",n.post,""),u.Cb(2),u.oc("ngIf",n.user_id==i.currentUser.id),u.Cb(1),u.oc("ngIf",n.user_id==i.currentUser.id)}}var Mn,On,Ln=((On=function(){function e(t,n,i,o){var c=this;_classCallCheck(this,e),this.discussionService=t,this.moduleService=n,this.authenticationService=i,this.route=o,this.discussions=[],this.moduleDetails={},this.authenticationService.currentUser.subscribe((function(e){return c.currentUser=e}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.discussionService.getDiscussionsInModule(t.moduleId).subscribe((function(t){console.log(t),e.discussions=t})),e.moduleService.getModuleById(t.moduleId).subscribe((function(t){console.log(t[0]),e.moduleDetails=t[0]}))}))}},{key:"deletePost",value:function(e){confirm("Delete post: Are you sure?")&&this.discussionService.deleteDiscussion(e).subscribe((function(){alert("Deleted post successfully")}))}}]),e}()).\u0275fac=function(e){return new(e||On)(u.Pb(mn),u.Pb(Ce),u.Pb(z.a),u.Pb(E.a))},On.\u0275cmp=u.Jb({type:On,selectors:[["app-discussion"]],decls:4,vars:2,consts:[[1,"center-form"],[4,"ngIf"],["class","announcement",4,"ngFor","ngForOf"],[2,"text-align","center"],[1,"announcement"],[3,"discussionData",4,"ngIf"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],[3,"discussionData"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(u.Ub(0,"div",0),u.Gc(1,Sn,7,2,"div",1),u.Qb(2,"app-create-post"),u.Gc(3,An,10,11,"div",2),u.Tb()),2&e&&(u.Cb(1),u.oc("ngIf",t.moduleDetails),u.Cb(2),u.oc("ngForOf",t.discussions))},directives:[i.n,In,i.m,Pn],pipes:[i.e],styles:[".flex-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;background-color:#add8e6;margin:15px;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content}.flex-item[_ngcontent-%COMP%]{align-self:stretch}.announcement[_ngcontent-%COMP%]{background-color:#ccf5ff;width:300px;max-width:300px;margin-top:15px}"]}),On),Gn=((Mn=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"createCourseAnnouncement",value:function(e,t){return this.http.post("".concat($.a.apiURL,"/courseAnnouncements"),{course_id:e,announcement_id:t})}},{key:"fetchCourseAnnouncements",value:function(){return this.http.get("".concat($.a.apiURL,"/courseAnnouncements"))}},{key:"fetchCourseAnnouncementById",value:function(e){return this.http.get("".concat($.a.apiURL,"/courseAnnouncements/").concat(e))}},{key:"updateCourseAnnouncement",value:function(e,t,n){return this.http.put("".concat($.a.apiURL,"/courseAnnouncements/").concat(e),{course_id:t,announcement_id:n})}},{key:"deleteCourseAnnouncement",value:function(e){return this.http.delete("".concat($.a.apiURL,"/courseAnnouncements/").concat(e))}}]),e}()).\u0275fac=function(e){return new(e||Mn)(u.cc(N.b))},Mn.\u0275prov=u.Lb({token:Mn,factory:Mn.\u0275fac,providedIn:"root"}),Mn);function Vn(e,t){if(1&e&&(u.Ub(0,"p"),u.Ic(1),u.Tb()),2&e){var n=u.ic().$implicit;u.Cb(1),u.Jc(n.name)}}function En(e,t){if(1&e&&(u.Ub(0,"div",8),u.Gc(1,Vn,2,1,"p",9),u.Tb()),2&e){var n=t.$implicit;u.Cb(1),u.oc("ngIf",n)}}var Qn,Rn=((Qn=function(){function e(t,n,i,o,c){var r=this;_classCallCheck(this,e),this.announcementService=t,this.courseAnnouncementService=n,this.authenticationService=i,this.courseService=o,this.router=c,this.checkedCourses=[],this.Editor=ue,this.editorData="",this.courses=[],this.authenticationService.currentUser.subscribe((function(e){return r.currentUser=e}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;console.log(this.currentUser.f_name),this.subscription=this.announcementService.sharedCheckedCourses.subscribe((function(t){e.checkedCourses=t,console.log(t),e.checkedCourses.forEach((function(t,n,i){e.courseService.getCourseById(t).subscribe((function(t){e.courses[n]=t,console.log(t)}))}))}),(function(e){console.log(e)}),(function(){console.log("complete")}))}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onReady",value:function(e){e.setData("")}},{key:"onChange",value:function(e){var t=e.editor;this.editorData=t.getData(),this.isCleared&&(t.setData(""),this.isCleared=!1),console.log(this.editorData)}},{key:"createAnnouncement",value:function(){var e=this,t=this.currentUser.f_name+" "+this.currentUser.l_name,n=new Date;this.announcementService.createAnnouncement(t,this.editorData,n,n,this.currentUser.id).subscribe((function(t){console.log(t);for(var n=0;n<e.checkedCourses.length;n++)e.courseAnnouncementService.createCourseAnnouncement(e.checkedCourses[n],t.id).subscribe((function(e){console.log(e)}));alert("Created announcement successfully")}))}}]),e}()).\u0275fac=function(e){return new(e||Qn)(u.Pb(H),u.Pb(Gn),u.Pb(z.a),u.Pb(q.a),u.Pb(E.c))},Qn.\u0275cmp=u.Jb({type:Qn,selectors:[["app-create-announcement"]],decls:16,vars:4,consts:[[1,"flexbox-row",2,"margin-top","30px"],[1,"row"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"clamp-words",3,"editor","data","change"],[1,"btn","btn-primary",2,"margin-right","15px",3,"click"],["routerLink","/courses",1,"btn","btn-secondary",2,"margin-left","15px"],[1,"fas","fa-arrow-circle-left"],[1,"custom-font","clamp-words",2,"margin-top","30px",3,"innerHTML"],[1,"col-md-4"],[4,"ngIf"]],template:function(e,t){1&e&&(u.Ub(0,"div",0),u.Ub(1,"h3"),u.Ic(2,"Create announcement for courses:"),u.Tb(),u.Ub(3,"div",1),u.Gc(4,En,2,1,"div",2),u.Tb(),u.Ub(5,"ckeditor",3),u.gc("change",(function(e){return t.onChange(e)})),u.Tb(),u.Ub(6,"span"),u.Ub(7,"button",4),u.gc("click",(function(){return t.createAnnouncement()})),u.Ic(8,"Submit"),u.Tb(),u.Ub(9,"a",5),u.Qb(10,"i",6),u.Ic(11," Go back"),u.Tb(),u.Tb(),u.Qb(12,"hr"),u.Ub(13,"h2"),u.Ic(14,"Announcement Preview"),u.Tb(),u.Qb(15,"div",7),u.Tb()),2&e&&(u.Cb(4),u.oc("ngForOf",t.courses),u.Cb(1),u.oc("editor",t.Editor)("data",t.editorData),u.Cb(10),u.oc("innerHTML",t.editorData,u.zc))},directives:[i.m,r.a,E.f,i.n],styles:[""]}),Qn);function qn(e,t){if(1&e&&(u.Ub(0,"div"),u.Qb(1,"div",3),u.Tb()),2&e){var n=t.$implicit;u.Cb(1),u.oc("innerHTML",n.content,u.zc)}}var zn,$n=((zn=function(){function e(t,n){_classCallCheck(this,e),this.announcementService=t,this.route=n}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){console.log(t.id),e.announcementService.fetchAnnouncementsByCourseId(t.id).subscribe((function(t){e.announcements=Promise.resolve(t),console.log(t)}))}))}}]),e}()).\u0275fac=function(e){return new(e||zn)(u.Pb(H),u.Pb(E.a))},zn.\u0275cmp=u.Jb({type:zn,selectors:[["app-announcements"]],decls:7,vars:3,consts:[["id","main"],[1,"flexbox-row"],[4,"ngFor","ngForOf"],[1,"announcement",3,"innerHTML"]],template:function(e,t){1&e&&(u.Qb(0,"app-sidebar"),u.Ub(1,"div",0),u.Ub(2,"div",1),u.Ub(3,"h2"),u.Ic(4,"Announcements"),u.Tb(),u.Gc(5,qn,2,1,"div",2),u.jc(6,"async"),u.Tb(),u.Tb()),2&e&&(u.Cb(5),u.oc("ngForOf",u.kc(6,1,t.announcements)))},directives:[be,i.m],pipes:[i.b],styles:[""]}),zn);function jn(e,t){if(1&e&&(u.Ub(0,"p"),u.Ic(1),u.Tb()),2&e){var n=u.ic().$implicit;u.Cb(1),u.Jc(n.course_name)}}function Nn(e,t){if(1&e&&(u.Ub(0,"div",9),u.Gc(1,jn,2,1,"p",10),u.Tb()),2&e){var n=t.$implicit;u.Cb(1),u.oc("ngIf",n)}}function Hn(e,t){if(1&e){var n=u.Vb();u.Ub(0,"div",1),u.Ub(1,"h2"),u.Ic(2,"Edit announcement "),u.Ub(3,"span"),u.Ic(4),u.jc(5,"async"),u.Tb(),u.Ic(6," for courses:"),u.Tb(),u.Ub(7,"div",2),u.Gc(8,Nn,2,1,"div",3),u.jc(9,"async"),u.Tb(),u.Ub(10,"ckeditor",4),u.gc("change",(function(e){return u.yc(n),u.ic().onChange(e)})),u.Tb(),u.Ub(11,"span"),u.Ub(12,"button",5),u.gc("click",(function(){return u.yc(n),u.ic().editAnnouncement()})),u.Ic(13,"Submit"),u.Tb(),u.Ub(14,"a",6),u.Qb(15,"i",7),u.Ic(16," Go back"),u.Tb(),u.Tb(),u.Qb(17,"hr"),u.Ub(18,"h2"),u.Ic(19,"Announcement Preview"),u.Tb(),u.Qb(20,"div",8),u.Tb()}if(2&e){var i=t.ngIf,o=u.ic();u.Cb(4),u.Jc(u.kc(5,5,o.announcementId)),u.Cb(4),u.oc("ngForOf",u.kc(9,7,o.announcements)),u.Cb(2),u.oc("editor",o.Editor)("data",o.editorData?o.editorData:i.content),u.Cb(10),u.oc("innerHTML",o.editorData?o.editorData:i.content,u.zc)}}var Bn,Jn=((Bn=function(){function e(t,n,i){_classCallCheck(this,e),this.router=t,this.route=n,this.announcementService=i,this.Editor=ue}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.announcementId=Promise.resolve(t.announcementId)})),this.announcementId.then((function(t){console.log(t),e.announcement=e.announcementService.fetchAnnouncementById(t)})),this.subscription=this.announcementService.sharedEditCourses.subscribe((function(t){console.log("announcements edit: \n"),console.log(t),e.announcements=Promise.resolve(t)}))}},{key:"ngAfterViewInit",value:function(){this.subscription.unsubscribe()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onChange",value:function(e){var t=e.editor;this.editorData=t.getData(),console.log(this.editorData)}},{key:"editAnnouncement",value:function(){var e=this;this.editorData?this.announcementId.then((function(t){e.announcementService.updateAnnouncement(t,e.editorData,new Date).subscribe((function(){alert("Updated announcement"),e.router.navigate(["/courses/view-created-announcements"])}))})):this.announcement.subscribe((function(t){console.log(t.content),e.announcementId.then((function(n){e.announcementService.updateAnnouncement(n,t.content,new Date).subscribe((function(){alert("Updated announcement"),e.router.navigate(["/courses/view-created-announcements"])}))}))}))}}]),e}()).\u0275fac=function(e){return new(e||Bn)(u.Pb(E.c),u.Pb(E.a),u.Pb(H))},Bn.\u0275cmp=u.Jb({type:Bn,selectors:[["app-edit-announcement"]],decls:2,vars:3,consts:[["class","flexbox-row","style","margin-top: 30px;",4,"ngIf"],[1,"flexbox-row",2,"margin-top","30px"],[1,"row"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"clamp-words",3,"editor","data","change"],[1,"btn","btn-primary",2,"margin-right","15px",3,"click"],["routerLink","/courses/view-created-announcements",1,"btn","btn-secondary",2,"margin-left","15px"],[1,"fas","fa-arrow-circle-left"],[1,"custom-font","clamp-words",2,"margin-top","30px",3,"innerHTML"],[1,"col-md-4"],[4,"ngIf"]],template:function(e,t){1&e&&(u.Gc(0,Hn,21,9,"div",0),u.jc(1,"async")),2&e&&u.oc("ngIf",u.kc(1,1,t.announcement))},directives:[i.n,i.m,r.a,E.f],pipes:[i.b],styles:[""]}),Bn);function Kn(e,t){if(1&e&&(u.Ub(0,"div",5),u.Ic(1),u.Tb()),2&e){var n=u.ic(2);u.Cb(1),u.Kc("Total announcements: ",n.groupedAnnouncements.size,"")}}function Yn(e,t){1&e&&(u.Ub(0,"span"),u.Ic(1,","),u.Tb())}function Zn(e,t){1&e&&(u.Ub(0,"h4"),u.Qb(1,"hr"),u.Ic(2,"Announcement: "),u.Tb())}function Xn(e,t){if(1&e&&u.Qb(0,"div",10),2&e){var n=u.ic().$implicit;u.oc("innerHTML",n.content,u.zc)}}function Wn(e,t){if(1&e){var n=u.Vb();u.Ub(0,"button",11),u.gc("click",(function(){u.yc(n);var e=u.ic().$implicit,t=u.ic().$implicit;return u.ic().editAnnouncement(e.announcement_id,t.value)})),u.Ic(1,"Edit"),u.Tb()}}function ei(e,t){if(1&e){var n=u.Vb();u.Ub(0,"button",12),u.gc("click",(function(){u.yc(n);var e=u.ic().$implicit;return u.ic(2).deleteAnnouncement(e.announcement_id)})),u.Ic(1,"Delete"),u.Tb()}}function ti(e,t){if(1&e&&(u.Ub(0,"div"),u.Ub(1,"span"),u.Ic(2),u.Gc(3,Yn,2,0,"span",6),u.Tb(),u.Gc(4,Zn,3,0,"h4",6),u.Gc(5,Xn,1,1,"div",7),u.Ub(6,"div"),u.Gc(7,Wn,2,0,"button",8),u.Gc(8,ei,2,0,"button",9),u.Tb(),u.Tb()),2&e){var n=t.$implicit,i=t.index,o=u.ic().$implicit;u.Cb(2),u.Jc(n.course_name),u.Cb(1),u.oc("ngIf",i!=o.value.length-1),u.Cb(1),u.oc("ngIf",i==o.value.length-1),u.Cb(1),u.oc("ngIf",i==o.value.length-1),u.Cb(2),u.oc("ngIf",i==o.value.length-1),u.Cb(1),u.oc("ngIf",i==o.value.length-1)}}function ni(e,t){if(1&e&&(u.Ub(0,"div",2),u.Gc(1,Kn,2,1,"div",3),u.Ub(2,"span"),u.Ic(3),u.Tb(),u.Ub(4,"h4"),u.Ic(5,"Courses: "),u.Tb(),u.Gc(6,ti,9,6,"div",4),u.Tb()),2&e){var n=t.$implicit,i=t.index;u.Cb(1),u.oc("ngIf",0==i),u.Cb(2),u.Kc("Id: ",n.key,""),u.Cb(3),u.oc("ngForOf",n.value)}}var ii,oi,ci=[{path:"create-announcement",component:Rn,canActivate:[z.a],data:{expectedRole:"admin"},pathMatch:"full"},{path:"view-created-announcements",component:(ii=function(){function e(t,n,i){_classCallCheck(this,e),this.announcementService=t,this.router=n,this.route=i,this.announcementSet=new Set,this.groupedAnnouncements=new Map}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.announcementService.fetchAnnouncements().subscribe((function(t){t.forEach((function(t,n,i){e.announcementSet.add(t.announcement_id);var o=t.content.substring(0,25);t.content=o})),e.announcements=t,console.log(t),e.announcementSet.forEach((function(t){console.log(t),e.announcements.forEach((function(n,i){t==n.announcement_id&&(console.log("grouped"),console.log(n),e.groupedAnnouncements.get(t)?e.groupedAnnouncements.get(t).push(n):e.groupedAnnouncements.set(t,[n]),console.log(e.groupedAnnouncements.get(t)))}))}))}))}},{key:"editAnnouncement",value:function(e,t){console.log(e),console.log("announcements: \n"),console.log(t),this.announcementService.nextEditCourses(t),this.router.navigate(["../edit-announcement",e],{relativeTo:this.route})}},{key:"deleteAnnouncement",value:function(e){confirm("Delete announcement: "+e+"\nAre you sure?")&&(console.log("deleted: "+e),this.announcementService.deleteAnnouncement(e).subscribe((function(){alert("Deleted announcement: "+e)})))}}]),e}(),ii.\u0275fac=function(e){return new(e||ii)(u.Pb(H),u.Pb(E.c),u.Pb(E.a))},ii.\u0275cmp=u.Jb({type:ii,selectors:[["app-view-created-announcements"]],decls:5,vars:3,consts:[[1,"flexbox-row"],["class","announcement",4,"ngFor","ngForOf"],[1,"announcement"],["style","background-color:white; padding-bottom: 10px",4,"ngIf"],[4,"ngFor","ngForOf"],[2,"background-color","white","padding-bottom","10px"],[4,"ngIf"],["style","padding-top:10px; background-color: lightgray",3,"innerHTML",4,"ngIf"],["class","btn btn-success",3,"click",4,"ngIf"],["class","btn btn-danger",3,"click",4,"ngIf"],[2,"padding-top","10px","background-color","lightgray",3,"innerHTML"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(u.Ub(0,"div",0),u.Ub(1,"h2"),u.Ic(2,"Manage Announcements"),u.Tb(),u.Gc(3,ni,7,3,"div",1),u.jc(4,"keyvalue"),u.Tb()),2&e&&(u.Cb(3),u.oc("ngForOf",u.kc(4,1,t.groupedAnnouncements)))},directives:[i.m,i.n],pipes:[i.h],styles:["hr[_ngcontent-%COMP%]{border:1px solid #add8e6}"]}),ii),canActivate:[z.a],data:{expectedRole:"admin"},pathMatch:"full"},{path:"edit-announcement/:announcementId",component:Jn,canActivate:[z.a],data:{expectedRole:"admin"},pathMatch:"full"},{path:"",component:ae,canActivate:[z.a],pathMatch:"full"},{path:":id",component:ke,canActivate:[z.a],pathMatch:"full"},{path:":id/announcements",component:$n,canActivate:[z.a]},{path:":id/modules",component:zt,canActivate:[z.a]},{path:":id/leaderboard",component:Ht,canActivate:[z.a]},{path:":id/create-module",component:tn,canActivate:[z.a],data:{expectedRole:"instructor"}},{path:":id/edit-module/:moduleId",component:dn,canActivate:[z.a],data:{expectedRole:"instructor"}},{path:":id/edit-home",component:vn,canActivate:[z.a],data:{expectedRole:"instructor"}},{path:":id/discussion/:moduleId",component:Ln,canActivate:[z.a]}],ri=((oi=function e(){_classCallCheck(this,e)}).\u0275mod=u.Nb({type:oi}),oi.\u0275inj=u.Mb({factory:function(e){return new(e||oi)},imports:[[E.g.forChild(ci)],E.g]}),oi);n.d(t,"CourseModule",(function(){return ai}));var si,ai=((si=function e(){_classCallCheck(this,e)}).\u0275mod=u.Nb({type:si}),si.\u0275inj=u.Mb({factory:function(e){return new(e||si)},imports:[[i.c,ri,c.m,o.c,r.b,U,V]]}),si)}}]);